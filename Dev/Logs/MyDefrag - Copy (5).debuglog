# See the 'MyDefrag.log' file for information intended for endusers. This is the debug
# logfile. The contents is highly technical and not documented. See the 'Debug' setting
# or the '-d' commandline option to control the level of information in this file.
#
Version: MyDefrag v4.3.1 for X64
Date: 2021/11/09 08:17:21
Windows version: v6.2 build 9200 
Commandline: "C:\Program Files\MyDefrag v4.3.1\MyDefrag.exe" -r "G:\Dev\MdmDefrag\TaylorDOVs0_2\ScriptsDaily\DefragDevDiskDaily.MyD" 
Working Directory: G:\Dev\MdmDefrag\TaylorDOVs0_2\ScriptsDaily
Userid: david
InstallPath = C:\Program Files\MyDefrag v4.3.1\
08:17:21 Syntax error in script 'G:\Dev\MdmDefrag\TaylorDOVs0_2\ScriptsDaily\DefragDevDiskDaily.MyD' at line 11467 column 3.

The command 'SortByName' is invalid, only the following commands are valid at this point:

	&
	&&
	)
	,
	|
	||
	and
	FileActions
	or

08:17:52 Script:
  1. # MyDefrag v4.0 script: Development Volume Daily defrag
  2. #
  3. # This script is part of the standard Mdm Volume configuration
  4. # Author: David G. Horsman (DBA MacroDM) (C) 2019
  5. # based on MyDefrag distribution.
  6. 
  7. /* Development Volume Daily*/
  8. SetVariable(RunStepDescription,"Dev Vol Daily")
  9. # Display Set Run
 10. 
 11. SetVariable(RunStepDescription,			"!RunStepDescription! - DefragDevDiskDaily")
 12. SetVariable(SeverStepDescription,		"")
 13. SetVariable(VolumeStepDescription,		"")
 14. SetVariable(ZoneStepDescription,		"")
 15. SetVariable(FileStepDescription,		"")
 16. 
 17. SetVariable(VolumeStatisticsDetail, 	"")
 18. 
 19. SetVariable(ZoneListByLine, 			"Run start.")
 20. SetVariable(ZoneStepByLine, 			"")
 21. 
 22. # BANNER SET
 23. 
 24. # DATE TIME RUN ELP
 25. 
 26. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:13 0:00:01")
 27. /* Xinclude "..\Display\BannerSet.MyDc"X */
 28. /* pause(1) */
 29. 
 30. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
 31. 
 32. Title('!Heading!')
 33. /* pause(1) */
 34. 
 35. /* NOTE: Can't round or truncate to integer precision. */
 36. 
 37. pause(2)
 38. 
 39. # This script is part of the standard  disk configuration
 40. # Author: David G. Horsman (DBA MacroDM) (C) 2019
 41. # based on MyDefrag distribution.
 42. 
 43. SetVariable(Heading,"Initializing...")
 44. 
 45. ProcessPriority(Normal)
 46. /* ProcessPriority(Normal) */
 47. 
 48. 
 49. 
 50. ExitIfTimeout(300) // 5 minutes (for old systems), default 120.
 51. /* ExitIfTimeout(300) // 5 minutes (for old systems), default 120. */
 52. 
 53. 
 54. 
 55. # MyDefrag color palette.
 56. 
 57. # RGB Color pallets. (Red,Green,Blue).
 58. 
 59. # Basics:
 60. 
 61. # Red			255,	0,		0)			// Red
 62. # Green			0,		255,	0)			// Green
 63. # Blue			0,		0,		255)		// Blue
 64. # Shades:
 65. 
 66. /* (White was left unused for the administrator to highlight things.) */
 67. # White 		255,	255,	255)		// White
 68. # Black			0,		0,		0)			// Black
 69. # Grey 			240,	240,	240)		// Grey
 70. 
 71. # Bright colors and shades:
 72. 
 73. # Purple 		170,	89,		221)		// Purple
 74. # Magenta		255, 	5, 		255)		// Magenta (pinkish)
 75. 
 76. # Pure Yellow 	255,	255,	0)			// Pure yellow
 77. # Yellow 		229, 	229, 	0)			// Yellow
 78. # Light Yellow 	255,	255,	224)		// Light Yellow
 79. 
 80. # Pure Red 		255, 	0, 		0)			// Red
 81. # Red 			204, 	92, 	92)			// Red
 82. # Light red		255,	115,	115)		// Light red
 83. # Orange		255, 	165, 	0)			// Orange
 84. 
 85. # Pure Green	0, 		255, 	0)			// Pure Green (Lime)
 86. # Green			0,		128,	0)			// Green
 87. # Light Green	144,	228, 	144)		// Light Green
 88. # Pale Green	152, 	251, 	152)		// Pale Green
 89. 
 90. # Dark blue		20,		87,		229)		// Dark blue
 91. # Light Blue	175,	198,	247)		// Light Blue
 92. # Bright Blue	0, 		223, 	255)		// Bright Blue
 93. # Light sky blue 135, 	206, 	250)		// Light sky blue
 94. # Deep sky blue	0, 		191, 	255)		// Deep sky blue
 95. 
 96. # Black			0,		0,		0)
 97. # Grey			240,	240,	240)
 98. 
 99. # Window Colors
100. SetColor(Empty,										240,  	240, 	240)	// Grey
101. # ???
102. SetColor(Allocated,									45, 	72, 	128)	// Black
103. 
104. # Busy Colours
105. SetColor(BusyRead,									0, 		0, 		0)		// Black
106. SetColor(BusyWrite,									255, 	0, 		0)		// Red
107. 
108. #File Colors
109. SetFileColor(All,									0,		0,		0)		// Black
110. SetFileColor(Movable,								20,		87,		229)	// Dark blue
111. 
112. # Processed
113. SetFileColor(Processed and not(Fragmented),			0, 		191, 	255)	// Deep sky blue
114. SetFileColor(Processed and Fragmented,				170,	89,		221)	// Purple
115. 
116. # Fragmented and NotMovable
117. SetFileColor(Fragmented,							229, 	229, 	0)		// Yellow
118. SetFileColor(not(Movable),							255, 	165, 	0)		// Orange
119. 
120. # Light Green and Yellow
121. SetFileColor(Selected,								152,	251, 	152)	// Light Green
122. SetFileColor(Selected and Fragmented,				255, 	255, 	224)	// Light Yellow (0,255,255)
123. SetFileColor(Selected and not(Movable),				255,	115,	115)	// Light red
124. 
125. /* empty */
126. 
127. 
128. 
129. # Processes:
130. 	# This Process
131. 	SetVariable(RunProcessID,ProcessID)
132. 
133. 	# Kill other instances
134. 	/* Kill other MyDefrag Instances. */
135. 	/* Oops! This commits suicide. */
136. 	/* 	RunProgram("..\pskill.exe", "-t MyDefrag.exe") */
137. 	/* Pause(10) */
138. 	
139. 	/* If another instance of MyDefrag is already running then exit. */
140. 	/* Oops again. I don't know if this cause the hidden instance */
141. 	/* to hang around after the run. */
142. 	/* Warning: <alt><Run><Exit> seems to hide the instance not end it. */
143. 	/* The task mananager may be needed. This is under investigation. */
144. 
145. 	# OtherInstances
146. 	
147. OtherInstances(exit)
148. 
149. # OtherInstances
150. 	
151. # OtherInstances(exit)
152. 
153. 
154. 
155. 	# StatusBar
156. 	StatusBar(Status Path MouseOver)
157. 	# OtherInstances
158. 	
159. # OtherInstances(exit)
160. 
161. 	
162. 	# Power management
163. 	/* SetScreenPowerSaver(off) */
164. 	# Power management
165. 
166. 	/* SetScreenPowerSaver(off) */
167. 
168. 	# Power management
169. 
170. 	/* SetScreenPowerSaver(off) */
171. 
172. 
173. 
174. 
175. /* ---------------------------------------------------------- */
176. # Script Directory Location:
177. SetVariable(ScriptDir,"..\")
178. 
179. /* SetVariable(ScriptDir,"..\") */
180. /* SetVariable(ScriptDir,"G:\Dev\MdmDefrag\TaylorDOVs0_2\ScriptsDaily") */
181. /* SetVariable(ScriptDir,"E:\Ide\MyDefrag\MyDefrag\MdmScriptMyDefragVs4_3_1\") */
182. 
183. 
184. 
185. /* ---------------------------------------------------------- */
186. # DISPLAY - What text is displayed in Titlebar, data fields and reports.
187. 
188. 
189. /* The variable FileStepDescription get set to */
190. /* the messages below according to the Zone File */
191. /* step the defrag is on. */
192. 
193. /* The titlebar is organized in these areas: */
194. 
195. /* SwProductVs. */
196. /* Volume description. */
197. /* Zone description. */
198. /* File Processing Step (here.) */
199. /* Server and Script names. */
200. /* Run Date, Time and Elapsed (Bug) */
201. 
202. /* Shown in the Title / Banner / App Heading */
203. 
204. SetVariable(SeverStepDescription,	"")
205. SetVariable(VolumeStepDescription,	"")
206. SetVariable(ZoneStepDescription,	"")
207. SetVariable(FileStepDescription,	"")
208. SetVariable(RunStepDescription,		"")
209. 
210. # Display fields you can set for your personal tastes / needs:
211. 
212. /* ---------------------------------------------------------- */
213. # ZONE. Process One Zone (the steps and messages displayed. */
214. 
215. SetVariable(FileStepDescriptionZoneStart, 			"Zone started.")
216. 
217. /* "Your Zone Pre (before)Processing." */
218. SetVariable(FileStepDescriptionYourZonePre, 		"!FileStepDescriptionZoneStart!") 		
219. 
220. SetVariable(FileStepDescriptionFileSelect,			"Selecting Files.")
221. 
222. /* "Your Pre Sort File Actions." */
223. SetVariable(FileStepDescriptionYourFileActionsPre, 	"!FileStepDescriptionFileSelect!")
224. 
225. SetVariable(FileStepDescriptionFileActionStart, 	"File Actions started.")
226. 
227. /* "Your Post Sort File Actions." */
228. SetVariable(FileStepDescriptionYourFileActionsPost, "!FileStepDescriptionFileActionStart!")
229. 
230. SetVariable(FileStepDescriptionFileActionEnd, 		"File Actions completed.")
231. 
232. /* "Your Zone Post (after) Processing." */
233. SetVariable(FileStepDescriptionYourZonePost, 		"!FileStepDescriptionFileActionEnd!") 		
234. 
235. SetVariable(FileStepDescriptionFileActionGap, 		"Calculating Gap.")
236. 
237. SetVariable(FileStepDescriptionZoneEnd, 			"Zone finished.")
238. 
239. /* Pattern: SetVariable(FileStepDescriptionXXX, 	"FileStepDescriptionXXX") */
240. 
241. /* Note: If you add custom script code in the PRE and POST areas then at that */
242. /* time you fill in the messages above as appropriate. */
243. 
244. /* empty */
245. 
246. /* ---------------------------------------------------------- */
247. # Regarding Volume Names/Labels
248. 
249. /* FYI. The Volume names / drive letters need to be correct for your system. */
250. /* It is repeated here for infomation about fields used above. */
251. /* Set your values in "SettingsYours\SettingsYoursVolumeNames.MyDc" */
252. 
253. 	/* SetVariable(VolumeSys,"!VolumeNamePrefix!Sys") */
254. 	/* SetVariable(VolumeDev,"!VolumeNamePrefix!Dev") */
255. 	/* SetVariable(VolumeData,"!VolumeNamePrefix!Data") */
256. 	/* SetVariable(VolumeArchive,"!VolumeNamePrefix!Archive") */
257. 
258. 	/*		or just */
259. 			
260. 	/* SetVariable(VolumeSys,"C:") */
261. 	/* SetVariable(VolumeDev,"E:") */
262. 
263. /* ---------------------------------------------------------- */
264. # BANNER DEFINITION
265. /* SetVariable(Heading, "Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! || !FileStepDescription! ||!VolumeNamePrefix! - !ServerNameFull! - DefragDevDiskDaily on 2021-11-09 08:17:14 0:00:02") */
266. 
267. # How to build them: (documentation)
268. 
269. /* Here is how is one pattern not used: */
270. /* SetVariable(Heading, "|") */
271. /* SetVariable(Heading, "!Heading! Vol: !VolumeStepDescription!") */
272. /* SetVariable(Heading, "!Heading! Zone: !ZoneStepDescription!") */
273. /* SetVariable(Heading, "!Heading! !FileStepDescription!") */
274. /* SetVariable(Heading, "!Heading!  ||!VolumeNamePrefix! - !ServerNameFull! - DefragDevDiskDaily") */
275. /* SetVariable(Heading, " on 2021-11-09 08:17:14 0:00:02") */
276. /* SetVariable(Heading, "!Heading!|") // spacers. */
277. 
278. /* A typical banner field list: */
279. # Appearing in Title('Vol: !
280. # VolumeCurrent
281. # ! Zone: !
282. # ZoneCurrentDescription
283. # ! !
284. # ZoneCurrent
285. # ! of !
286. # ZoneCount
287. # ! || Free: Vol: !
288. # VolumeFreePerUsed
289. # !% Zone: !
290. # ZoneFreePerUsed
291. # !% || Script: !
292. # ScriptTitle
293. # ! System: !
294. # VolumeNamePrefix
295. # ! !
296. # ServerNameFull
297. # ! !
298. # Date
299. # ! !
300. # Time
301. # ! !
302. # RunTime
303. # !')
304. /* . */
305. 
306. 
307. /* Progress Display */
308. SetVariable(ZoneListByLine, 	"Volume start.")
309. SetVariable(ZoneStepByLine, 	"")
310. 
311. /* There is 6 digit decimal precision so by using */
312. /* 1Mb the full number is displayed in a much more */
313. /* readable form. */
314. 
315. SetVariable(DisplayUnitDivisor, 	1000000) // 1MB.
316. 
317. /* ---------------------------------------------------------- */
318. # SERVER INFORMATION
319. 
320. 	/* ServerName (IE. Computer name or number.) not used. */
321. 	/* System99 */
322. 		# SetVariable(ServerName,"Pc15")
323. 
324. 		# Server Names
325. 
326. # ???
327. 
328. # IMPORTANT: ServerName NAME: 
329. 
330. 	# SetVariable(ServerName,"PcAny")
331. 
332. # IMPORTANT: ServerName NAME: 
333. 
334. 	# SetVariable(ServerName,"PcAny")
335.     /* System99 */
336. # SET
337. SetVariable(ServerName,"RavenPc")
338. 
339. 
340. 	
341. 	/* Descriptive Information so maybe */
342. 	/* VolumeNamePrefix (IE. Person or company initials) not used. */
343. 	/* "Xyz" */
344. 		# SetVariable(VolumeNamePrefix,"Mdm")
345. 
346. 		# VolumeNamePrefix
347. 
348. /* Descriptive Information so maybe */
349. /* VolumeNamePrefix (IE. Person or company initials) not used. */
350. /* "Xyz" */
351. 	SetVariable(VolumeNamePrefix,"VolThis")
352. 
353. 	
354. /* Descriptive Information so maybe */
355. /* VolumeNamePrefix (IE. Person or company initials) not used. */
356. /* "Xyz" */
357. 	SetVariable(VolumeNamePrefix,"Vol")
358. 
359. /* Server name full is usually the server and computer combined. not used. */
360. 	SetVariable(ServerNameFull,"!VolumeNamePrefix!!ServerName!")
361. 
362. 
363. 	/* Server name full is usually the server and computer combined. not used. */
364. 
365. 		SetVariable(ServerNameFull,"!VolumeNamePrefix!!ServerName!")
366. 	
367. 	# VOLUME
368. SetVariable(SeverStepDescription, 	"!ServerNameFull!")
369. SetVariable(VolumeStepDescription, 	"")
370. SetVariable(ZoneStepDescription, 	"")
371. SetVariable(FileStepDescription, 	"")
372. # BANNER SET
373. 
374. # DATE TIME RUN ELP
375. 
376. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:14 0:00:02")
377. /* Xinclude "..\Display\BannerSet.MyDc"X */
378. /* pause(1) */
379. 
380. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
381. 
382. Title('!Heading!')
383. /* pause(1) */
384. 
385. /* NOTE: Can't round or truncate to integer precision. */
386. 
387. /* pause(2) */
388. 
389. /* ---------------------------------------------------------- */
390. # VOLUMES
391. /* ---------------------------------------------------------- */
392. 
393. 	# Volume Do Current Clear
394. 
395. /* ---------------------------------------------------------- */
396. # Current Values.
397. 	SetVariable(VolumeLabel, "NotSet")
398. 	SetVariable(VolumeDescription, "")
399. 
400. 	SetVariable(VolumeCount, 0)
401. 	SetVariable(VolumeNoCurrent, 0)
402. 	SetVariable(VolumeNoAdjCurrent, 0)
403.   	SetVariable(VolumeCurrentAjust, 0) // not used
404. 
405. /* ---------------------------------------------------------- */
406. # OS Disk Usage.
407. 
408. /* Percentage of disk used by OS */
409. 
410. 	SetVariable(OsPer, 0.18)
411. 
412. 	     SetVariable(ZoneCountOs, 5)
413. 
414.        SetVariable(ZoneCountType, 0) // not used
415.       SetVariable(ZoneCountVolume, ZoneCountOs + ZoneCountType)
416. 
417. 	    SetVariable(ZoneCountSys, 2)
418. 	    SetVariable(ZoneCountDev, 7)
419. 
420. 	   SetVariable(ZoneCountData, 0)
421. 	SetVariable(ZoneCountArchive, 0)
422. 	
423. 	/* SetVariable(GapCalc, VolumeFreeAdj * ZoneAdjRoundUp) */
424. 
425. /* ---------------------------------------------------------- */
426. # Volume Totals
427. 	# USED:
428. 	/* Current total volume space used */
429. 	SetVariable(VolumeZoneUsed, 			0)
430. 	/* percentage */
431. 	SetVariable(VolumeZoneUsedPer, 			0)
432. 
433. 	# FREE:
434. 	/* Current total of free space used */
435. 	SetVariable(VolumeFreeRequested, 		0)
436. 	/* percentage */
437. 	SetVariable(VolumeFreeRequestedPer, 	0)
438. 
439. 	/* Current total of free space used */
440. 	SetVariable(VolumeFreeUsed, 			0)
441. 	/* percentage */
442. 	SetVariable(VolumeFreeUsedPer, 			0)
443. 	
444. /* ---------------------------------------------------------- */
445. # Volume Free Space Proportional Used Space vs Volume Size.
446. 	/* We only want to use a ratio of the free space relative to the volume. */
447. 	/* We could just use percentages of the total free space as well. */
448. 
449. 	/* SetVariable(VolumeFreeAdj, 		1) */
450. 	
451. 	SetVariable(VolumeFreeAdj,				(VolumeFree * (VolumeUsed / VolumeSize)))
452. 
453. /* ---------------------------------------------------------- */
454. # ZONES
455. 
456. 	SetVariable(ZoneNoCurrent, 0)
457. 	SetVariable(ZoneNoAdjCurrent, 0)
458. 	SetVariable(ZoneCurrentAjust, 0)
459. 
460. 	# Zone Do Current Clear
461. 
462. SetVariable(ZoneTypeSelectCurrent, 		"")
463. 
464. SetVariable(ZoneBeginCurrent, 			0)
465. SetVariable(ZoneBeginPerCurrent, 		0)
466. SetVariable(ZoneEndCurrent, 			0)
467. SetVariable(ZoneEndPerCurrent, 			0)
468. 
469. SetVariable(ZoneSizeCurrent,			0)
470. SetVariable(ZoneSizePerCurrent,			0)
471. 
472. SetVariable(ZoneGapRequestedCurrent,	0)
473. SetVariable(ZoneGapRoundedCurrent, 		0)
474. SetVariable(ZoneGapAdjustedCurrent, 	0)
475. SetVariable(ZoneGapAvailableCurrent, 	0)
476. SetVariable(ZoneGapCurrent,				0)
477. SetVariable(ZoneGapUsedCurrent, 		0)
478. 
479. SetVariable(ZoneGapActualCurrent, 		0)
480. SetVariable(ZoneGapActualPerCurrent, 	0)
481. 
482. SetVariable(ZoneSizeActual, 			0)
483. SetVariable(ZoneSizeActualCurrent,		0)
484. 
485. SetVariable(ZoneEndActual, 				0)
486. SetVariable(ZoneEndActualCurrent,		0)			
487. SetVariable(ZoneSizeActualPerCurrent, 	0)
488.       
489. SetVariable(ZoneFilesFolders,			0)
490. SetVariable(ZoneFilesFoldersPer,		0) 
491. 
492. SetVariable(ZoneFragments,				0)
493. SetVariable(ZoneFragmentsPer,			0) 
494. 		
495. SetVariable(ZoneEndActualCurrent, 		0)
496. SetVariable(ZoneEndActualPerCurrent, 	0)
497. 
498. # Gap Calculation Methodology:
499. 	# Requested
500. 	SetVariable(GapRequested, 			0) 
501. 	SetVariable(GapRequestedStd, 		0) 
502. 	SetVariable(GapRequestedMft, 		0) 
503. 	SetVariable(GapRequestedOs, 		0) 
504. 	SetVariable(GapRequestedOriginal, 	0) 
505. 	
506. 	# Gap Adjustments
507. 	SetVariable(GapRounded, 			0)
508. 	# SetVariable(GapAdjusted, 			0)
509. 	SetVariable(GapAvailable, 			0)
510. 	SetVariable(GapCurrent, 			0)
511. 	SetVariable(GapActual, 				0)
512. 	SetVariable(GapUsed, 				0)
513. 	
514. 	# Gap Adjustments
515. 	SetVariable(GapRoundedLoc, 			0)
516. 	# SetVariable(GapAdjustedLoc, 		0)
517. 	SetVariable(GapAvailableLoc, 		0)
518. 	SetVariable(GapCurrentLoc, 			0)
519. 	SetVariable(GapActualLoc,			0)
520. 	SetVariable(GapUsedLoc,				0)
521. 	
522. 	# Space usage
523. 	SetVariable(ZoneFreePerRequested, 	0)
524. 	SetVariable(ZoneFreePerUsed, 		0)
525. 
526. # Gap Size & Rounding
527. 	SetVariable(ZoneGapSizePer, 		0)
528. 	SetVariable(ZoneVolRoundUpPer, 		0)
529. 	
530. 	# Free Space
531. 	SetVariable(ZoneFreeUsedPer, 		0)
532. 	SetVariable(ZoneFreeRequestedPer, 	0)
533. 
534. 
535. 	SetVariable(ZoneLabel, "Volume")
536. 	SetVariable(ZoneDescription, "Analysis...")
537. 	# BANNER SET
538. 
539. # DATE TIME RUN ELP
540. 
541. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:14 0:00:02")
542. /* Xinclude "..\Display\BannerSet.MyDc"X */
543. /* pause(1) */
544. 
545. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
546. 
547. Title('!Heading!')
548. /* pause(1) */
549. 
550. /* NOTE: Can't round or truncate to integer precision. */
551. 
552. 
553. 	
554. 	  
555. 	SetVariable(VolumeLabel, "NotSet")
556. 	SetVariable(VolumeDescription, "")
557. 
558. 	SetVariable(FileStepDescription,"Initializing run...")
559. 	# BANNER SET
560. 
561. # DATE TIME RUN ELP
562. 
563. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:14 0:00:02")
564. /* Xinclude "..\Display\BannerSet.MyDc"X */
565. /* pause(1) */
566. 
567. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
568. 
569. Title('!Heading!')
570. /* pause(1) */
571. 
572. /* NOTE: Can't round or truncate to integer precision. */
573. 
574. 
575. /* ---------------------------------------------------------- */
576. # VOLUME TYPES
577. 
578. 	/* Volumes */
579. 	/* . */
580. 	/* Only those were fully implemented: */
581. 	/* Sys */
582. 	/* Dev */
583. 	/* . */
584. 	/* Common types of volumes: */
585. 	/* Data */
586. 	/* Archive */
587. 	/* . */
588. 	/* Other historical volumes: */
589. 	/* Test */
590. 	/* Live */
591. 	/* Server */
592. 	/* Client */
593. 	/* SysUtils */
594. 	/* . */
595. 
596. # IMPORTANT: VOLUME NAME: SET YOUR:
597. 	/* VOLUME NAMES IN SettingsYours\SettingsYoursVolumeNames.MyDc */
598. 	/* 		or    			*/
599. 	/* VOLUME NAME (one only for override) in SettingsYours\SettingsYoursVolume.MyDc */
600. 	/* 		or here also 	*/
601. 	SetVariable(VolumeSys,"!VolumeNamePrefix!Sys")
602. 	SetVariable(VolumeDev,"!VolumeNamePrefix!Dev")
603. 
604. 	/* SetVariable(VolumeSys,"C:") */
605. 	/* SetVariable(VolumeDev,"E:") */
606. 
607. 	/* These are for dedicated disks. */
608. 	/* So it means JUST Data or JUST Archives. */
609. 
610. 	SetVariable(VolumeData,"!VolumeNamePrefix!Data")
611. 	SetVariable(VolumeArchive,"!VolumeNamePrefix!Archive")
612. 	
613. 	# IMPORTANT: VOLUME NAME: 
614. 
615. 	# SetVariable(VolumeSys,"!VolumeNamePrefix!Sys")
616. 	# SetVariable(VolumeDev,"!VolumeNamePrefix!Dev")
617. 	# SetVariable(VolumeData,"!VolumeNamePrefix!Data")
618. 	# SetVariable(VolumeArchive,"!VolumeNamePrefix!Archive")
619. 
620. 	#    or this:
621. 	
622. 	
623. 	SetVariable(VolumeSys,"C:")
624. 	SetVariable(VolumeDev,"C:")
625. 	SetVariable(VolumeData,"C:")
626. 	SetVariable(VolumeArchive,"C:")
627. 
628. 
629. # SET
630. # SetVariable(VolumeSys,"C:")
631. 
632. 
633. 
634. /* ---------------------------------------------------------- */
635. # OS Disk Usage.
636. /* Percentage of disk used by OS */
637. 
638. 	SetVariable(OsPer, 0.18)
639. 
640. 	     SetVariable(ZoneCountOs, 5)
641. 
642.        SetVariable(ZoneCountType, 0) // not used
643.       SetVariable(ZoneCountVolume, ZoneCountOs + ZoneCountType)
644. 
645. 	    SetVariable(ZoneCountSys, 2)
646. 	    SetVariable(ZoneCountDev, 7)
647. 
648. 	   SetVariable(ZoneCountData, 0)
649. 	SetVariable(ZoneCountArchive, 0)
650. 	
651. 	/* SetVariable(GapCalc, VolumeFreeAdj * ZoneAdjRoundUp) */
652. 
653. /* ---------------------------------------------------------- */
654. # ZONE TYPES. 
655. /* ---------------------------------------------------------- */
656. 	/* Type Labels, Descriptions, Gaps and Rounding. */
657. 	/* Load the Zone Definitions */
658. 	/* These are file categories basically */
659. 	/* and are maintained in a single file */
660. 	/* for ease of maintenance. Here: */
661. 	
662. 	/* ---------------------------------------------------------- */
663. # ROUNDING factors:
664. 
665. /* HERE if you want to tweak how type the Gaps are if growth is slow. */
666. /* HERE if your DISK IS VERY FULL */
667. /* This is where you can tweak growth rounding if the Volume gets really full. */
668. /* You don't have to use these, you can use actual percentages in the Zone section. */
669. 
670. /* Note: Volume and Gap Sizes are paired to a degree and */
671. /* set relative to each other. */
672. 	
673. 	      SetVariable(VolumeRoundUpNone, 	1)
674. 	      SetVariable(VolumeRoundUpTiny, 	0.005)
675. 	     SetVariable(VolumeRoundUpSmall, 	0.01)
676. 	    SetVariable(VolumeRoundUpMedium, 	0.02)
677. 	     SetVariable(VolumeRoundUpLarge, 	0.03)
678. 	SetVariable(VolumeRoundUpExtraLarge, 	0.05)
679. 	
680. 	    SetVariable(VolumeRoundUpBlogBu, 	0.10)
681. 	
682. 	      SetVariable(ZoneGapSizeNone, 		0)
683. 	      SetVariable(ZoneGapSizeTiny, 		0.005)
684. 	     SetVariable(ZoneGapSizeSmall, 		0.01)
685. 	    SetVariable(ZoneGapSizeMedium, 		0.05)
686. 	     SetVariable(ZoneGapSizeLarge, 		0.10)
687. 	SetVariable(ZoneGapSizeExtraLarge, 		0.15)
688. 		
689. 	    SetVariable(ZoneGapSizeBlobBu, 		0.10)
690. 
691. /* ---------------------------------------------------------- */
692. # ZONE SETTINGS:
693. /* ---------------------------------------------------------- */
694. /* These are the Zone Names */
695. /* Regular is at the end but otherwise */
696. /* this is in the order they appear on disk */
697. 
698. # Os Programs.
699. SetVariable(ZoneLabelBoot, 				"Boot")
700. SetVariable(ZoneLabelBootData, 				"BootData")
701. SetVariable(ZoneLabelProgramHints,			"ProgramHints")
702. SetVariable(ZoneLabelProgramHintsData,			"ProgramHintsData")
703. SetVariable(ZoneLabelPrograms,				"Programs")
704. SetVariable(ZoneLabelProgramsWindows,			"ProgramsWindows")
705. SetVariable(ZoneLabelProgramsData,			"ProgramsData")
706. # Moved to after Mft & Dir.
707. SetVariable(ZoneLabelPageHiperDump,			"PageHiperDump")
708. 
709. # Os Mft & Directories.
710. SetVariable(ZoneLabelMft,				"MFT")
711. SetVariable(ZoneLabelDir,				"DIR")
712. 
713. # Standard Zones.
714. SetVariable(ZoneLabelIdeScripts, 			"IdeScripts")
715. SetVariable(ZoneLabelDevToDo, 				"DevToDo")
716. SetVariable(ZoneLabelLinksCorp, 			"LinksCorp")
717. SetVariable(ZoneLabelPeople, 				"People")
718. # MFT.
719. # DIR.
720. # Games. 
721. SetVariable(ZoneLabelGames, 				"Games")
722. SetVariable(ZoneLabelShares, 				"Shares")
723. SetVariable(ZoneLabelSystemOtherData, 			"SystemOtherData")
724. SetVariable(ZoneLabelReference, 			"Reference")
725. 
726. 
727. # Sys.
728. # People.
729. # OS, Mft, Dir.
730. # Games.
731. SetVariable(ZoneLabelRegular, 				"Regular")
732. 
733. # Common.
734. SetVariable(ZoneLabelSpaceHogs, 			"SpaceHogs")
735. SetVariable(ZoneLabelArchivesBu, 			"ArchivesBu")
736. 
737. /* ---------------------------------------------------------- */
738. /* Use however you like */
739. 
740. # Os Programs.
741. SetVariable(ZoneDescriptionBoot, 			"!ZoneLabelBoot!")
742. SetVariable(ZoneDescriptionBootData, 			"!ZoneLabelBootData!")
743. SetVariable(ZoneDescriptionProgramHints, 		"!ZoneLabelProgramHints!")
744. SetVariable(ZoneDescriptionProgramHintsData, 		"!ZoneLabelProgramHintsData!")
745. SetVariable(ZoneDescriptionPrograms, 			"!ZoneLabelPrograms!")
746. SetVariable(ZoneDescriptionProgramsWindows, 		"!ZoneLabelProgramsWidows!")
747. SetVariable(ZoneDescriptionProgramsData, 		"!ZoneLabelProgramsData!")
748. SetVariable(ZoneDescriptionPageHiperDump, 		"!ZoneLabelPageHiperDump!")
749. 
750. # Os Mft & Directories.
751. SetVariable(ZoneDescriptionMft, 			"!ZoneLabelMft!")
752. SetVariable(ZoneDescriptionDir, 			"!ZoneLabelDir!")
753. 
754. # Standard Zones:
755. SetVariable(ZoneDescriptionIdeScripts, 			"!ZoneLabelIdeScripts!")
756. SetVariable(ZoneDescriptionDevToDo, 			"!ZoneLabelDevToDo!")
757. SetVariable(ZoneDescriptionLinksCorp, 			"!ZoneLabelLinksCorp!")
758. SetVariable(ZoneDescriptionPeople, 			"!ZoneLabelPeople!")
759. # MFT.
760. # DIR.
761. # Games. 
762. SetVariable(ZoneDescriptionGames, 			"!ZoneLabelGames!")
763. SetVariable(ZoneDescriptionShares, 			"!ZoneLabelShares!")
764. SetVariable(ZoneDescriptionSystemOtherData, 		"!ZoneLabelSystemOtherData!")
765. SetVariable(ZoneDescriptionReference, 			"!ZoneLabelReference!")
766. 
767. # Sys.
768. # People.
769. # OS, Mft, Dir.
770. SetVariable(ZoneDescriptionRegular, 			"!ZoneLabelRegular!")
771. 
772. SetVariable(ZoneDescriptionSpaceHogs, 			"!ZoneLabelSpaceHogs!")
773. SetVariable(ZoneDescriptionArchivesBu, 			"!ZoneLabelArchivesBu!")
774. 
775. /* ---------------------------------------------------------- */
776. /* This rounds up to even locations on the volume to keep */
777. /* the location of data relatively stable during fluctuation. */
778. 
779. /* NOTE: For Volume specifice settings you would have to copy these */
780. /* next two sections and use them in the SettingsYours\SettingsYours for each Volume. */
781. /* You would need a copy of these two to use in a Reset function between Volumes. */
782. 
783. # Os Programs.
784. SetVariable(ZoneVolRoundUpBoot, 		"!VolumeRoundUpSmall!")
785. SetVariable(ZoneVolRoundUpProgramHints, 	"!VolumeRoundUpSmall!")
786. SetVariable(ZoneVolRoundUpPrograms, 		"!VolumeRoundUpMedium!")
787. SetVariable(ZoneVolRoundUpPageHiperDump,	"!VolumeRoundUpSmall!")
788. 
789. # Os Mft & Directories.
790. SetVariable(ZoneVolRoundUpMft,			"!VolumeRoundUpTiny!")
791. SetVariable(ZoneVolRoundUpDir,		 	"!VolumeRoundUpLarge!")
792. 
793. # Standard Zones.
794. SetVariable(ZoneVolRoundUpIdeScripts, 		"!VolumeRoundUpSmall!")
795. SetVariable(ZoneVolRoundUpDevToDo, 		"!VolumeRoundUpSmall!")
796. SetVariable(ZoneVolRoundUpLinksCorp, 		"!VolumeRoundUpSmall!")
797. SetVariable(ZoneVolRoundUpPeople, 		"!VolumeRoundUpMedium!")
798. # MFT.
799. # DIR.
800. # Games. 
801. # ToDo.............
802. SetVariable(ZoneVolRoundUpGames, 		"!VolumeRoundUpSmall!")
803. SetVariable(ZoneVolRoundUpShares, 		"!VolumeRoundUpSmall!")
804. SetVariable(ZoneVolRoundUpSystemOtherData, 	"!VolumeRoundUpSmall!")
805. SetVariable(ZoneVolRoundUpReference, 		"!VolumeRoundUpMedium!")
806. 
807. # Sys.
808. # People.
809. # OS, Mft, Dir.
810. # Games.
811. SetVariable(ZoneVolRoundUpRegular, 		"!VolumeRoundUpMedium!")
812. 
813. # Common.
814. SetVariable(ZoneVolRoundUpSpaceHogs, 		"!VolumeRoundUpMedium!")
815. SetVariable(ZoneVolRoundUpArchivesBu, 		"!VolumeRoundUpTiny!")
816. 
817. /* ---------------------------------------------------------- */
818. /* Your Zone Gap consumption of free space as a percentage. */
819. /* Clearly this can not exceed 100%. Keep it under 99%. */
820. 
821. # Os Programs.
822. SetVariable(ZoneGapSizeBoot, 				"!ZoneGapSizeTiny!")
823. SetVariable(ZoneGapSizeProgramHints,	 		"!ZoneGapSizeTiny!")
824. SetVariable(ZoneGapSizePrograms, 			"!ZoneGapSizeSmall!")
825. SetVariable(ZoneGapSizePageHiperDump, 			"!ZoneGapSizeSmall!")
826. 
827. # Mft & Directories.
828. SetVariable(ZoneGapSizeMft, 				"!ZoneGapSizeTiny!")
829. SetVariable(ZoneGapSizeDir,		 		"!ZoneGapSizeTiny!")
830. 
831. # Standard Zones.
832. SetVariable(ZoneGapSizeIdeScripts, 			"!ZoneGapSizeMedium!")
833. SetVariable(ZoneGapSizeDevToDo, 			"!ZoneGapSizeMedium!")
834. SetVariable(ZoneGapSizeLinksCorp, 			"!ZoneGapSizeMedium!")
835. SetVariable(ZoneGapSizePeople, 				"!ZoneGapSizeMedium!")
836. # MFT.
837. # DIR.
838. # Games. 
839. # ToDo.............
840. SetVariable(ZoneGapSizeGames, 				"!ZoneGapSizeMedium!")
841. SetVariable(ZoneGapSizeShares, 				"!ZoneGapSizeMedium!")
842. SetVariable(ZoneGapSizeSystemOtherData, 		"!ZoneGapSizeMedium!")
843. SetVariable(ZoneGapSizeReference, 			"!ZoneGapSizeSmall!")
844. 
845. # Sys.
846. # People.
847. # OS, Mft, Dir.
848. # Games.
849. SetVariable(ZoneGapSizeRegular, 			"!ZoneGapSizeMedium!")
850. 
851. # Common.
852. SetVariable(ZoneGapSizeSpaceHogs, 			"!ZoneGapSizeMedium!")
853. SetVariable(ZoneGapSizeArchivesBu, 			"!ZoneGapSizeTiny!")
854. 
855. /* ---------------------------------------------------------- */
856. # ZONE CALCULATION METHODS:
857. # OS ZONE SETTINGS:
858. /* ---------------------------------------------------------- */
859. 
860. 	/* ---------------------------------------------------------- */
861. 	# VOLUME MFT Location.
862. 	/* The Volume Location of the MFT as a percentage of the Volume. */
863. 		
864. 		SetVariable(MftVolumeRoundUp, 		"!VolumeRoundUpLarge!")
865. 		SetVariable(MftVolumeGapSize, 		"!ZoneGapSizeTiny!")
866. 		
867. 		# MFT CALCULATION METHODS.
868. 			# STANDARD Method.
869. 			/* IMPORTANT: Standard method currently in use. */
870. 			/* IE: The others below are ignored but instructive. */
871. 			/* None of the following settings are used, hence zero. */
872. 			SetVariable(MftPer, 			0)
873. 			SetVariable(MftLocation, 		0)
874. 			
875. 			# MFT Method.
876. 			/* Place files at X% (MftPerSys) into the data on the Volume. */
877. 			/* This is really tied the ratio of executables to data and blobs. */
878. 			# SetVariable(MftPer, 			0.30)
879. 			# SetVariable(MftLocation, 		1000000000)
880. 			# SetVariable(MftGapSize, 		"!ZoneGapSizeLarge!")
881. 		
882. 			# FIXED Method.
883. 			# SetVariable(MftLocation, 		1000000000) // (IE. Yours)
884. 			# SetVariable(MftPer, 			MftLocation / VolumeSize)
885. 			
886. 			# ORIGINAL Method.
887. 			/* DEPRECIATED, not in use. */
888. 			/* Note: Orginally, The Gap between the MFT and Directories is fixed and tiny. */
889. 			# SetVariable(MftPer, 			0.30)
890. 		
891. 		# ROUNDING.	
892. 		# SetVariable(MftLocation,			RoundUp(MftLocation, VolumeSize * MftVolumeRoundUp))
893. 		
894. 		# MFT ZONE.
895. 		/* Zone Number (not used for locating MFT.) */
896. 		SetVariable(MftZone, 				4) // Insert before this zone, info only.
897. 		/* Zone 10 on the Dev Volume */
898. 	
899. 	/* ---------------------------------------------------------- */
900. 	# VOLUME SPECIFIC MFT.
901. 	/* Note: You may need to set Volume specific values for the MFT location, */
902. 	/* On these volume types do not "push" the data above the MFT table? */
903. 	/* You can use a standard gap instead. */
904. 		
905. 			/* The current Volume Type Mft Percentage */
906. 		    # SetVariable(MftPer, 				0)
907. 		    # SetVariable(MftPerTypedDefault, 			"!MftPer!")
908. 			# Volume Types:	
909. 			#         SetVariable(MftPerSys, 		0.35)
910. 			# 	    SetVariable(MftPerDev, 		0.10)
911. 			# 	   SetVariable(MftPerData, 		0.35)
912. 			# 	SetVariable(MftPerArchive, 		0.10)
913. 	
914. 	/* ---------------------------------------------------------- */
915. 	# VOLUME DIR Location.
916. 	/* The amount of Gap between Mft and Dir's, the Location of DIR. */
917. 	
918. 		/* Note: Orginally, The Gap between the MFT and Directories is fixed and tiny. */
919. 	
920. 		SetVariable(DirVolumeRoundUp, 		"!VolumeRoundUpLarge!")
921. 		SetVariable(DirVolumeGapSize, 		"!ZoneGapSizeLarge!")
922. 		
923. /* ---------------------------------------------------------- */
924. # SETTINGS YOURS
925. /* empty */
926. 
927. /* ---------------------------------------------------------- */
928. 
929. /* ---------------------------------------------------------- */
930. # STATISTICS
931. /* ---------------------------------------------------------- */
932. 
933. /* Xinclude "..\StatisticsInitialization.MyDc"X ToDo */
934. 
935. 
936. /* ---------------------------------------------------------- */
937. # GAPS
938. 	# TEST (FAILED!!!) NO BOOLEAN LOGIC AVAILABLE.
939. 	SetVariable(FlagDoNotVacate, 0)
940.  
941. /* ---------------------------------------------------------- */
942. # ZONE
943. 	SetVariable(ZoneNoCurrent, 		0)
944. 	SetVariable(ZoneNoAdjCurrent, 	0) 
945. 	SetVariable(ZoneCurrentAjust,	0)
946. 
947. 	SetVariable(ZoneListByLine, 		"Volume started.
948. ")
949. 	SetVariable(ZoneStepByLine, 		"Initialize.
950. ")
951. 	SetVariable(ZoneStatisticsDetail, 	"")
952. 
953. /* ---------------------------------------------------------- */
954. # ZONE FILE STEP (ACTIONS)
955. 	/* Nothing to set here */
956. 
957. /* ---------------------------------------------------------- */
958. # BLOB SIZE
959. 
960. 	# Size 10MB
961. 	SetVariable(BlobFileSize, 10000000)
962. 
963. /* ---------------------------------------------------------- */
964. # SKIP BLOCK
965.  
966. /* (important for run efficiency.) */
967. /* FILES: */
968. /* Day Files: 100 */
969. /* Monthly: 500 */
970. /* Yearly: 1M */
971. 
972. 	/* 100 Files - moved most blocks */
973. 	 /* 10 Files - 20211105 (error - not done) */ 
974. 	 /* 10 Files - (20211106) - Current */
975. 	 /* 5 Files - (2021????) - */
976. 	SetVariable(SkipBlockFilesDay, 10)
977. 
978. 	SetVariable(SkipBlockFilesMonth, 500)
979. 	SetVariable(SkipBlockFilesYear, 1000000)
980. 
981. 	/* Current: */
982. 	SetVariable(SkipBlockFiles,"!SkipBlockFilesMonth!")
983. 
984. /* BYTES: */
985. /* Day Bytes: 50MB */
986. /* Month Bytes: 500MB */
987. /* Year Bytes: 5GB */
988. 
989. 	 /* 50 MB Moved most existing blocks */
990. 	 /* 5 MB 20211105 (not done) */ 
991. 	 /* 1 MB 20211105 - Current */
992. 	SetVariable(SkipBlockBytesDay, 1000000)
993. 	/* SetVariable(SkipBlockBytesDay, 50000000) */
994. 
995. 	SetVariable(SkipBlockBytesMonth, 500000000)
996. 	SetVariable(SkipBlockBytesYear, 5000000000)
997. 
998. 	/* Current: */
999. 	SetVariable(SkipBlockBytes,"!SkipBlockBytesMonth!")
1000. 
1001. /* ---------------------------------------------------------- */
1002. # ZONE LOCATION METHODS:
1003. 
1004. # No 1) Standard. You can ignore this section
1005. 	/* Gaps between zones are a percentage of */
1006. 	/* free space auto adjusted to pack the used */
1007. 	/* space closely together and for performance. */
1008. 	
1009. 	/* The calculation will clear the Gap */
1010. 	/* and RoundUp to the fixed value present */
1011. 	
1012. 	SetVariable(ZoneMethodStd, 1)
1013. 
1014. /* The following are NOT FULLY IMPLEMENTED OR TESTED */
1015. # No 2) Mft. Relative to its location.
1016. 	SetVariable(ZoneMethodMft, (0-1))
1017. 
1018. # No 3) Os. Percentages are AFTER OsMftDir Space Used.
1019. 	SetVariable(ZoneMethodOs, (0-1))
1020. 
1021. # No 4) Orginal Mft/Os 1-5.
1022. 	SetVariable(ZoneMethodOrginal, (0-1))
1023. 
1024. # No 5) FIXED ZONES if you used them.
1025. 	
1026. 	SetVariable(ZoneMethodFixed, (0-1))
1027. 	SetVariable(ZoneMethodFixedPer, (0-1))
1028. 
1029. 	/* Not recommended */
1030. 	/* However doing all calcs is informative regarding what */
1031. 	/* Types of Volume data (Zones) exist. */
1032. 	
1033. 	/* Your FIXED calculation method, this can be: */
1034. 	SetVariable(ZoneMethodFixedVariantPer, (0-1))
1035. 	
1036. 	/* 1) Percentage. */
1037. 		/* So when it is 1 or On. */
1038. 		/* Not great but easy to use. */
1039. 		 
1040. 	/* 2) Fixed volume location. */
1041. 		/* When 0 or Off it is a volume location. */
1042. 		/* You will have to change: */
1043. 		/* file item xxxxxxxxx??? */
1044. 	
1045. 	/* FIXED VALUES: */
1046. 		/* SetVariable(ZoneMethodFixed, 1) */
1047. 	
1048. 		# Setting the following to a percentage or number:
1049. 		/* OS */
1050. 	    SetVariable(ZoneOsBoot, 0) // 1
1051. 	    SetVariable(ZoneOsProgramHints, 0) // 2
1052. 	    SetVariable(ZoneOsPrograms, 0) // 3
1053. 	    
1054. 	    /* MFT */
1055. 	    SetVariable(ZoneMft, 0) // Volume dependent
1056. 	    SetVariable(ZoneMftDir, 0) // Volume dependent
1057. 	
1058. 		/* Volume Sys */
1059. 	    # Os 3
1060. 	    # Mft + 2
1061. 	    SetVariable(ZoneSysRegular, 0) // 5
1062. 	    SetVariable(ZoneDevSpaceHog, 0) // 6
1063. 	
1064. 		/* Volume Dev */
1065. 	    # Os 3
1066. 	    SetVariable(ZoneDevDevToDo, 0) // 4
1067. 	    SetVariable(ZoneDevIdeScripts, 0) // 5
1068. 	    SetVariable(ZoneDevLinksCorp, 0) // 6
1069. 	    SetVariable(ZoneDevPeople, 0) // 7
1070. 	    # Mft + 2
1071. 	    SetVariable(ZoneDevShares, 0) // 10
1072. 	    SetVariable(ZoneDevSystemOtherData, 0) // 11
1073. 	    SetVariable(ZoneDevReference, 0) // 12
1074. 	    SetVariable(ZoneDevSpaceHogsArchives, 0) // 13
1075. 	
1076. 		/* Volume Archive not used currently */
1077. 		/* Volume Data not used currently */
1078. 
1079. /* ---------------------------------------------------------- */
1080. # LOGGING:
1081. /* ---------------------------------------------------------- */
1082. 
1083. 	# Log File Name:
1084. 	SetVariable(LogFileName,"Defrag !MdmMyDefrag! 2021-11-09_08:17:13.log")
1085. 	/* SetVariable(LogFileName,"..\Logs\!MdmMyDefrag! 2021-11-09_08:17:13.log") */
1086. 	/* SetVariable(LogFileName,"!ScriptDir!Logs\!MdmMyDefrag! 2021-11-09_08:17:13.log") */
1087. 	/* SetVariable(LogFileName,"Defrag2021-11-09_08:17:13.txt") */
1088. 	/* SetVariable(LogFileName,"$ z Logs\Defrag2021-11-09_08:17:13.txt") */
1089. 	
1090. 	SetVariable(VolumeStatisticsSummary, "Not ready")
1091. 	SetVariable(VolumeStatisticsDetailed, "Not ready")
1092. 
1093. /* ---------------------------------------------------------- */
1094. # OVERRIDES
1095. /* ---------------------------------------------------------- */
1096. 
1097. 	# YOUR SETTINGS Volume overrides:
1098. 	/* empty */
1099. 
1100. 
1101. /* ---------------------------------------------------------- */
1102. # Create Run Log:
1103. 
1104. /* Write the header to the logfile. */
1105. 	# BANNER SET
1106. 
1107. # DATE TIME RUN ELP
1108. 
1109. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1110. /* Xinclude "..\Display\BannerSet.MyDc"X */
1111. /* pause(1) */
1112. 
1113. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1114. 
1115. Title('!Heading!')
1116. /* pause(1) */
1117. 
1118. /* NOTE: Can't round or truncate to integer precision. */
1119. 
1120. 
1121. 	WriteLogfile("!LogFileName!", "Started.")
1122. 	AppendLogfile("!LogFileName!", ".")
1123. 	AppendLogfile("!LogFileName!", "!Title!")
1124. 
1125. 
1126. 	AppendLogfile("!LogFileName!", ".")
1127. 
1128. /* ---------------------------------------------------------- */
1129. /* Script Information */
1130. 	AppendLogfile("!LogFileName!", "!Description! Started: 2021-11-09 08:17:13")
1131. 	AppendLogfile("!LogFileName!", ".")
1132. 	AppendLogfile("!LogFileName!", "Script:")
1133. 	AppendLogfile("!LogFileName!", "DefragDevDiskDaily")
1134. 	AppendLogfile("!LogFileName!", ".")
1135. 	AppendLogfile("!LogFileName!", "Script Directory:")
1136. 	AppendLogfile("!LogFileName!", "!ScriptDir!")
1137. 	AppendLogfile("!LogFileName!", ".")
1138. 	AppendLogfile("!LogFileName!", "Log File:")
1139. 	AppendLogfile("!LogFileName!", "!LogFileName!")
1140. 	AppendLogfile("!LogFileName!", ".")
1141. 
1142. /* ---------------------------------------------------------- */
1143. # Run Preprocessing Do Before.
1144. /* empty */
1145. 
1146. 
1147. 
1148. /* SkipBlock Daily: */
1149. SetVariable(SkipBlockFiles,"!SkipBlockFilesDay!")
1150. SetVariable(SkipBlockBytes,"!SkipBlockBytesDay!")
1151. 
1152. # Defrag Development Volume
1153. 
1154. SetVariable(VolumeLabel,"!VolumeDev!")
1155. SetVariable(VolumeDescription,"Development")
1156. # Display Set Volume
1157. 
1158. SetVariable(VolumeStepDescription, 	"!VolumeLabel! - !VolumeDescription!")
1159. SetVariable(ZoneStepDescription,	"")
1160. SetVariable(FileStepDescription,	"")
1161. 
1162. SetVariable(ZoneListByLine, 		"Volume started 2021-11-09 08:17:15 0:00:03:
1163. ")
1164. SetVariable(ZoneStepByLine, 		"Pending.")
1165. 
1166. # BANNER SET
1167. 
1168. # DATE TIME RUN ELP
1169. 
1170. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1171. /* Xinclude "..\Display\BannerSet.MyDc"X */
1172. /* pause(1) */
1173. 
1174. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1175. 
1176. Title('!Heading!')
1177. /* pause(1) */
1178. 
1179. /* NOTE: Can't round or truncate to integer precision. */
1180. 
1181. AppendLogfile("!LogFileName!", "!Title!")
1182. 
1183. 
1184. 
1185. pause(2)
1186. 
1187. # Precision issue: (!VolumeNoCurrent!-!ZoneNoCurrent!-!ZoneStepNoCurrent!) 
1188. 
1189. SetVariable(ZoneListByLine, "")
1190. SetVariable(ZoneFooter, "")
1191. 
1192. # This script is part of the standard disk configuration
1193. # Author: David G. Horsman (DBA MacroDM) (C) 2019
1194. # based on MyDefrag distribution.
1195. 
1196. /* Progress Display */
1197. SetVariable(ZoneListByLine, 	"Volume start.
1198. ")
1199. SetVariable(ZoneStepByLine, 	"
1200. ")
1201. 
1202. # VOLUME INFORMATION
1203. 
1204. SetVariable(VolumeNoCurrent, VolumeNoCurrent + 1)
1205. SetVariable(VolumeNoAdjCurrent, VolumeNoCurrent + VolumeCurrentAjust)
1206. 
1207. SetVariable(ZoneNoCurrent, 		0)
1208. SetVariable(ZoneNoAdjCurrent, 	0) 
1209. SetVariable(ZoneCurrentAjust,	0)
1210. 
1211. SetVariable(ZoneListByLine, 		"Volume started.
1212. ")
1213. SetVariable(ZoneStepByLine, 		"Initialize.
1214. ")
1215. SetVariable(ZoneStatisticsDetail, 	"")
1216. 
1217. SetVariable(ZoneStepNoCurrent, 0)
1218. 
1219. 
1220. # Zone Do Current Clear
1221. 
1222. SetVariable(ZoneTypeSelectCurrent, 		"")
1223. 
1224. SetVariable(ZoneBeginCurrent, 			0)
1225. SetVariable(ZoneBeginPerCurrent, 		0)
1226. SetVariable(ZoneEndCurrent, 			0)
1227. SetVariable(ZoneEndPerCurrent, 			0)
1228. 
1229. SetVariable(ZoneSizeCurrent,			0)
1230. SetVariable(ZoneSizePerCurrent,			0)
1231. 
1232. SetVariable(ZoneGapRequestedCurrent,	0)
1233. SetVariable(ZoneGapRoundedCurrent, 		0)
1234. SetVariable(ZoneGapAdjustedCurrent, 	0)
1235. SetVariable(ZoneGapAvailableCurrent, 	0)
1236. SetVariable(ZoneGapCurrent,				0)
1237. SetVariable(ZoneGapUsedCurrent, 		0)
1238. 
1239. SetVariable(ZoneGapActualCurrent, 		0)
1240. SetVariable(ZoneGapActualPerCurrent, 	0)
1241. 
1242. SetVariable(ZoneSizeActual, 			0)
1243. SetVariable(ZoneSizeActualCurrent,		0)
1244. 
1245. SetVariable(ZoneEndActual, 				0)
1246. SetVariable(ZoneEndActualCurrent,		0)			
1247. SetVariable(ZoneSizeActualPerCurrent, 	0)
1248.       
1249. SetVariable(ZoneFilesFolders,			0)
1250. SetVariable(ZoneFilesFoldersPer,		0) 
1251. 
1252. SetVariable(ZoneFragments,				0)
1253. SetVariable(ZoneFragmentsPer,			0) 
1254. 		
1255. SetVariable(ZoneEndActualCurrent, 		0)
1256. SetVariable(ZoneEndActualPerCurrent, 	0)
1257. 
1258. # Gap Calculation Methodology:
1259. 	# Requested
1260. 	SetVariable(GapRequested, 			0) 
1261. 	SetVariable(GapRequestedStd, 		0) 
1262. 	SetVariable(GapRequestedMft, 		0) 
1263. 	SetVariable(GapRequestedOs, 		0) 
1264. 	SetVariable(GapRequestedOriginal, 	0) 
1265. 	
1266. 	# Gap Adjustments
1267. 	SetVariable(GapRounded, 			0)
1268. 	# SetVariable(GapAdjusted, 			0)
1269. 	SetVariable(GapAvailable, 			0)
1270. 	SetVariable(GapCurrent, 			0)
1271. 	SetVariable(GapActual, 				0)
1272. 	SetVariable(GapUsed, 				0)
1273. 	
1274. 	# Gap Adjustments
1275. 	SetVariable(GapRoundedLoc, 			0)
1276. 	# SetVariable(GapAdjustedLoc, 		0)
1277. 	SetVariable(GapAvailableLoc, 		0)
1278. 	SetVariable(GapCurrentLoc, 			0)
1279. 	SetVariable(GapActualLoc,			0)
1280. 	SetVariable(GapUsedLoc,				0)
1281. 	
1282. 	# Space usage
1283. 	SetVariable(ZoneFreePerRequested, 	0)
1284. 	SetVariable(ZoneFreePerUsed, 		0)
1285. 
1286. # Gap Size & Rounding
1287. 	SetVariable(ZoneGapSizePer, 		0)
1288. 	SetVariable(ZoneVolRoundUpPer, 		0)
1289. 	
1290. 	# Free Space
1291. 	SetVariable(ZoneFreeUsedPer, 		0)
1292. 	SetVariable(ZoneFreeRequestedPer, 	0)
1293. 
1294. 
1295. # BANNER SET
1296. 
1297. # DATE TIME RUN ELP
1298. 
1299. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1300. /* Xinclude "..\Display\BannerSet.MyDc"X */
1301. /* pause(1) */
1302. 
1303. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1304. 
1305. Title('!Heading!')
1306. /* pause(1) */
1307. 
1308. /* NOTE: Can't round or truncate to integer precision. */
1309. 
1310. 
1311. # OVERRIDES
1312. # YOUR SETTINGS Volume overrides:
1313. 
1314. 
1315. # SET
1316. # SetVariable(VolumeSys,"C:")
1317. 
1318. 
1319. # Display Set Volume
1320. 
1321. SetVariable(VolumeStepDescription, 	"!VolumeLabel! - !VolumeDescription!")
1322. SetVariable(ZoneStepDescription,	"")
1323. SetVariable(FileStepDescription,	"")
1324. 
1325. SetVariable(ZoneListByLine, 		"Volume started 2021-11-09 08:17:15 0:00:03:
1326. ")
1327. SetVariable(ZoneStepByLine, 		"Pending.")
1328. 
1329. # BANNER SET
1330. 
1331. # DATE TIME RUN ELP
1332. 
1333. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1334. /* Xinclude "..\Display\BannerSet.MyDc"X */
1335. /* pause(1) */
1336. 
1337. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1338. 
1339. Title('!Heading!')
1340. /* pause(1) */
1341. 
1342. /* NOTE: Can't round or truncate to integer precision. */
1343. 
1344. AppendLogfile("!LogFileName!", "!Title!")
1345. 
1346. 
1347. 
1348. pause(2)
1349. 
1350. # Precision issue: (!VolumeNoCurrent!-!ZoneNoCurrent!-!ZoneStepNoCurrent!) 
1351. 
1352. # LOGGING:
1353. 	# BANNER SET
1354. 
1355. # DATE TIME RUN ELP
1356. 
1357. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1358. /* Xinclude "..\Display\BannerSet.MyDc"X */
1359. /* pause(1) */
1360. 
1361. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1362. 
1363. Title('!Heading!')
1364. /* pause(1) */
1365. 
1366. /* NOTE: Can't round or truncate to integer precision. */
1367. 
1368. AppendLogfile("!LogFileName!", "!Title!")
1369. 
1370. 
1371. 
1372. 
1373. 	AppendLogfile("!LogFileName!", "!Description! Started: 2021-11-09 08:17:15")
1374. 	AppendLogfile("!LogFileName!", ".")
1375. 	AppendLogfile("!LogFileName!", "Script Directory:")
1376. 	AppendLogfile("!LogFileName!", "!ScriptDir!")
1377. 	AppendLogfile("!LogFileName!", ".")
1378. 	AppendLogfile("!LogFileName!", "Log File:")
1379. 	AppendLogfile("!LogFileName!", "!LogFileName!")
1380. 	AppendLogfile("!LogFileName!", ".")
1381. 	/* AppendLogfile("!LogFileName!", "Log Header:") */
1382. 	/* AppendLogfile("!LogFileName!", "!LogHeader!") */
1383. 	/* AppendLogfile("!LogFileName!", "End of Log Header.") */
1384. 	AppendLogfile("!LogFileName!", ".")
1385. 
1386. 	AppendLogfile("!LogFileName!", "MFT Percentage: !MftPer!")
1387. 	AppendLogfile("!LogFileName!", "MFT Volume RoundUp: !MftRoundUp!")
1388. 	AppendLogfile("!LogFileName!", "MFT Gap %: !MftAdjRoundUp!")
1389. 	AppendLogfile("!LogFileName!", ".")
1390. 
1391. /* This file is where you override the above setting for */
1392. /* global settings. */
1393. /* There is a "SettingsYours\SettingsYours???.MyDc" for each volume type */
1394. /* so this is where you set the volume specific settings */
1395. /* or you can put them all in the file below. */
1396. 
1397. # Volume Preprocessing Do Before.
1398. /* empty */
1399. 
1400. 
1401. # BANNER:
1402. /* AppendLogfile("!LogFileName!", ".")
1403. AppendLogfile("!LogFileName!", "      Volume Size: !VolumeSize!")
1404. AppendLogfile("!LogFileName!", "      Volume Used: !VolumeUsed!")
1405. AppendLogfile("!LogFileName!", "Volume Used Total: !VolumeUsedTotal!")
1406. AppendLogfile("!LogFileName!", "      Volume Free: !VolumeFree!")
1407. AppendLogfile("!LogFileName!", "  Volume Free Adj: !VolumeFreeAdj!")
1408. AppendLogfile("!LogFileName!", ".")
1409. AppendLogfile("!LogFileName!", "MFT Zone: !MftZone! Location: !MftLocation! Gap: !MftGap!")
1410. AppendLogfile("!LogFileName!", ".")
1411.  */
1412. 
1413. /* Missed: ToDo: */
1414. /* Games Zone Type */
1415. 
1416. 
1417. 
1418. 
1419. SetVariable(MftZone, "Shares")
1420. 
1421. /* empty */
1422. 
1423. 
1424. # Defrag Any Complex Volume
1425. /* Complex Volume */
1426. # MyDefrag v4.0 script: Defrag Complex (Mixed or Any) Volume.
1427. 
1428. # Set Volume Detailed Statistics:
1429. 
1430. # Set Volume summary stats:
1431. 
1432. # Cluster, Sector, Block adjust for display.
1433. # Bytes per cluster is volume specific.
1434. 
1435. SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
1436. 
1437. SetVariable(VolumeSizeTemp, VolumeSize / DisplayUnitDivisorCurrent)
1438. SetVariable(VolumeUsedTemp, VolumeUsed / DisplayUnitDivisorCurrent)
1439. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
1440. 
1441. SetVariable(VolumeUsedTotalTemp, VolumeFree / DisplayUnitDivisorCurrent)
1442. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
1443. 
1444. # Set the display text:
1445. SetVariable(VolumeStatisticsSummary,"----------------------------------------------------------
1446. SUMMARY: !VolumeLabel! !VolumeDescription!
1447.   
1448.           Volume Size:       !VolumeSize! (!VolumeSizeTemp!)
1449.           Volume Used:       !VolumeUsed! (!VolumeUsedTemp!)
1450.           Volume Free:       !VolumeFree!, (!VolumeFreeTemp!)
1451.          
1452.      Volume Used Calc:       !VolumeUsedTotal! (!VolumeUsedTotalTemp!)
1453.       Volume Free Adj:       !VolumeFreeAdj!
1454.     Bytes per cluster:       !BytesPerCluster! bytes
1455. 
1456.    Unfragmented Items:       !FILES200N!
1457.      Fragmented Items:       !FILES210N!
1458. 
1459.     Unfragmented Data:       !FILES202N! bytes
1460.       Fragmented Data:       !FILES212N! bytes
1461. 
1462.              All Gaps:       !GAP00N!
1463.              All gaps:       !GAP10N! bytes
1464.           Average gap:       !GAP13N! bytes
1465.            Median gap:       !GAP14N! bytes
1466.           Biggest gap:       !GAP15N! bytes
1467. ----------------------------------------------------------
1468. ") 
1469. 
1470. 
1471. 
1472. SetVariable(VolumeStatisticsDetail,"----------------------------------------------------------
1473. VOLUME: !VolumeLabel! !VolumeDescription!
1474. ----------------------------------------------------------
1475. !VolumeStatisticsSummary!
1476. ----------------------------------------------------------
1477. DETAILS: !VolumeLabel! !VolumeDescription!
1478. ----------------------------------------------------------
1479. 
1480. SUMMARY:
1481. 
1482. Volume label/name:          !VolumeLabel!
1483. Volume mountpoint:          !MountPoint!
1484. Volume name:                !VolumeName!
1485. Volume type:                !VolumeType!
1486. 
1487. Total disk space:           !VolumeSize! bytes
1488.                             !VolumeSizeG! gigabytes
1489. 
1490. Bytes per cluster:          !BytesPerCluster! bytes
1491. Average end-begin distance: !AverageBeginEndDistance! clusters
1492.                             !AverageBeginEndDistanceP!% of volume size
1493. 
1494. ----------------------------------------------------------
1495. FRAGMENTS:
1496. 
1497. Unfragmented Items: !FILES200N!
1498.   Fragmented Items: !FILES210N!
1499.  Unfragmented Data: !FILES202N! bytes
1500.    Fragmented Data: !FILES212N! bytes
1501. Gaps:
1502.           All Gaps: !GAP00N!
1503.           All gaps: !GAP10N! bytes
1504.        Average gap: !GAP13N! bytes
1505.         Median gap: !GAP14N! bytes
1506.        Biggest gap: !GAP15N! bytes
1507. 
1508. ----------------------------------------------------------
1509. GAPS:
1510. 
1511.    ----------------------------------------------------------
1512.    Counts:
1513.                        Count      Percentage of all
1514.                 ----------------- -----------------
1515.    Small gaps   !GAP01N! !GAP01P!%
1516.    Big gaps     !GAP02N! !GAP02P!%
1517.                 ----------------- -----------------
1518.    All gaps     !GAP00N! !GAP00P!
1519. 
1520.    ----------------------------------------------------------
1521.    By size:
1522.                       Bytes          Gigabytes      Percentage of all
1523.                 ----------------- ----------------- -----------------
1524.    Small gaps   !GAP11N! !GAP11G! !GAP11P!%
1525.    Big gaps     !GAP12N! !GAP12G! !GAP12P!%
1526.                 ----------------- ----------------- -----------------
1527.    All gaps     !GAP10N! !GAP10G! !GAP10P!%
1528. 
1529.    Average gap  !GAP13N! !GAP13G! !GAP13P!%
1530.    Median gap   !GAP14N! !GAP14G! !GAP14P!%
1531.    Biggest gap  !GAP15N! !GAP15G! !GAP15P!%
1532.    ----------------------------------------------------------
1533. 
1534. ----------------------------------------------------------
1535. FILE STATISTICS:
1536. ----------------------------------------------------------
1537. 
1538. ----------------------------------------------------------
1539. ITEM COUNT:
1540. ----------------------------------------------------------
1541. Number of files and folders:
1542. 
1543.               Unfragmented       Fragmented            All
1544.    ------- ----------------- ----------------- -----------------
1545.    Files   !FILES000N! !FILES010N! !FILES020N!
1546.    Folders !FILES100N! !FILES110N! !FILES120N!
1547.    ------- ----------------- ----------------- -----------------
1548.    All     !FILES200N! !FILES210N! !FILES220N!
1549. 
1550. ----------------------------------------------------------
1551. Percentage of total:
1552. 
1553.               Unfragmented       Fragmented            All
1554.    ------- ----------------- ----------------- -----------------
1555.    Files   !FILES000P!%!FILES010P!%!FILES020P!%
1556.    Folders !FILES100P!%!FILES110P!%!FILES120P!%
1557.    ------- ----------------- ----------------- -----------------
1558.    All     !FILES200P!%!FILES210P!%!FILES220P!%
1559. 
1560. ----------------------------------------------------------
1561. OCCUPIED SIZE on disk:
1562. ----------------------------------------------------------
1563. Bytes:
1564.               Unfragmented       Fragmented            All
1565.    ------- ----------------- ----------------- -----------------
1566.    Files   !FILES002N! !FILES012N! !FILES022N!
1567.    Folders !FILES102N! !FILES112N! !FILES122N!
1568.    ------- ----------------- ----------------- -----------------
1569.    All     !FILES202N! !FILES212N! !FILES222N!
1570. 
1571. ----------------------------------------------------------
1572. Gigabytes:
1573.               Unfragmented       Fragmented            All
1574.    ------- ----------------- ----------------- -----------------
1575.    Files   !FILES002G! !FILES012G! !FILES022G!
1576.    Folders !FILES102G! !FILES112G! !FILES122G!
1577.    ------- ----------------- ----------------- -----------------
1578.    All     !FILES202G! !FILES212G! !FILES222G!
1579. 
1580. ----------------------------------------------------------
1581. Percentage:
1582.               Unfragmented       Fragmented            All
1583.    ------- ----------------- ----------------- -----------------
1584.    Files   !FILES002P!%!FILES012P!%!FILES022P!%
1585.    Folders !FILES102P!%!FILES112P!%!FILES122P!%
1586.    ------- ----------------- ----------------- -----------------
1587.    All     !FILES202P!%!FILES212P!%!FILES222P!%
1588. 
1589. ----------------------------------------------------------
1590. USED SIZE:
1591. ----------------------------------------------------------
1592. Bytes:
1593.               Unfragmented       Fragmented            All
1594.    ------- ----------------- ----------------- -----------------
1595.    Files   !FILES001N! !FILES011N! !FILES021N!
1596.    Folders !FILES101N! !FILES111N! !FILES121N!
1597.    ------- ----------------- ----------------- -----------------
1598.    All     !FILES201N! !FILES211N! !FILES221N!
1599. 
1600. ----------------------------------------------------------
1601. Gigabytes:
1602.               Unfragmented       Fragmented            All
1603.    ------- ----------------- ----------------- -----------------
1604.    Files   !FILES001G! !FILES011G! !FILES021G!
1605.    Folders !FILES101G! !FILES111G! !FILES121G!
1606.    ------- ----------------- ----------------- -----------------
1607.    All     !FILES201G! !FILES211G! !FILES221G!
1608. 
1609. ----------------------------------------------------------
1610. Percentage:
1611.               Unfragmented       Fragmented            All
1612.    ------- ----------------- ----------------- -----------------
1613.    Files   !FILES001P!%!FILES011P!%!FILES021P!%
1614.    Folders !FILES101P!%!FILES111P!%!FILES121P!%
1615.    ------- ----------------- ----------------- -----------------
1616.    All     !FILES201P!%!FILES211P!%!FILES221P!%
1617. 
1618. ----------------------------------------------------------
1619. Volume Detailed Statistics end.
1620. ----------------------------------------------------------
1621. ") 
1622. 
1623. SetStatisticsWindowText("!VolumeStatisticsSummary!")
1624. 
1625. SetVariable(FileStepDescription,"!VolumeLabel! !VolumeDescription! started: 2021-11-09 08:17:15.")
1626. # FILE STEP
1627. 
1628. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
1629. 
1630. /* add message and move to a new line. */
1631. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
1632. ")
1633. 
1634. /* display the line. (hopefully.) */
1635. # Zone Footer Set Statistics Window Text
1636. 
1637. SetStatisticsWindowText("----------------------------------------------------------
1638. Zones Processed: 
1639. ----------------------------------------------------------
1640. !ZoneListByLine!
1641. ----------------------------------------------------------
1642. Zone Processing Step:
1643. !ZoneStepByLine!    
1644. ----------------------------------------------------------
1645. Current Zone:
1646. !ZoneFooter!
1647. ----------------------------------------------------------
1648. Volume Statistics:
1649. !VolumeStatisticsDetail!
1650. ----------------------------------------------------------
1651. Zone Detailed Report:
1652. ----------------------------------------------------------
1653. !ZoneStatisticsDetail!
1654. ----------------------------------------------------------
1655. ")
1656. 
1657. 
1658. 
1659. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
1660. 
1661. # BANNER SET
1662. 
1663. # DATE TIME RUN ELP
1664. 
1665. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1666. /* Xinclude "..\Display\BannerSet.MyDc"X */
1667. /* pause(1) */
1668. 
1669. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1670. 
1671. Title('!Heading!')
1672. /* pause(1) */
1673. 
1674. /* NOTE: Can't round or truncate to integer precision. */
1675. 
1676. pause(1)
1677. 
1678. SetVariable(FileStepDescription,"Analyzing Volume")
1679. # FILE STEP
1680. 
1681. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
1682. 
1683. /* add message and move to a new line. */
1684. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
1685. ")
1686. 
1687. /* display the line. (hopefully.) */
1688. # Zone Footer Set Statistics Window Text
1689. 
1690. SetStatisticsWindowText("----------------------------------------------------------
1691. Zones Processed: 
1692. ----------------------------------------------------------
1693. !ZoneListByLine!
1694. ----------------------------------------------------------
1695. Zone Processing Step:
1696. !ZoneStepByLine!    
1697. ----------------------------------------------------------
1698. Current Zone:
1699. !ZoneFooter!
1700. ----------------------------------------------------------
1701. Volume Statistics:
1702. !VolumeStatisticsDetail!
1703. ----------------------------------------------------------
1704. Zone Detailed Report:
1705. ----------------------------------------------------------
1706. !ZoneStatisticsDetail!
1707. ----------------------------------------------------------
1708. ")
1709. 
1710. 
1711. 
1712. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
1713. 
1714. # BANNER SET
1715. 
1716. # DATE TIME RUN ELP
1717. 
1718. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1719. /* Xinclude "..\Display\BannerSet.MyDc"X */
1720. /* pause(1) */
1721. 
1722. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1723. 
1724. Title('!Heading!')
1725. /* pause(1) */
1726. 
1727. /* NOTE: Can't round or truncate to integer precision. */
1728. 
1729. pause(1)
1730. 
1731. /* ---------------------------------------------------------- */
1732. VolumeSelect
1733. 
1734. 	Label("!VolumeLabel!") or Name("!VolumeLabel!")
1735. 
1736. /* ---------------------------------------------------------- */
1737. VolumeActions
1738. 
1739. /* ---------------------------------------------------------- */
1740. /* Volume Init */
1741. # Set Volume Detailed Statistics:
1742. 
1743. # Set Volume summary stats:
1744. 
1745. # Cluster, Sector, Block adjust for display.
1746. # Bytes per cluster is volume specific.
1747. 
1748. SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
1749. 
1750. SetVariable(VolumeSizeTemp, VolumeSize / DisplayUnitDivisorCurrent)
1751. SetVariable(VolumeUsedTemp, VolumeUsed / DisplayUnitDivisorCurrent)
1752. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
1753. 
1754. SetVariable(VolumeUsedTotalTemp, VolumeFree / DisplayUnitDivisorCurrent)
1755. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
1756. 
1757. # Set the display text:
1758. SetVariable(VolumeStatisticsSummary,"----------------------------------------------------------
1759. SUMMARY: !VolumeLabel! !VolumeDescription!
1760.   
1761.           Volume Size:       !VolumeSize! (!VolumeSizeTemp!)
1762.           Volume Used:       !VolumeUsed! (!VolumeUsedTemp!)
1763.           Volume Free:       !VolumeFree!, (!VolumeFreeTemp!)
1764.          
1765.      Volume Used Calc:       !VolumeUsedTotal! (!VolumeUsedTotalTemp!)
1766.       Volume Free Adj:       !VolumeFreeAdj!
1767.     Bytes per cluster:       !BytesPerCluster! bytes
1768. 
1769.    Unfragmented Items:       !FILES200N!
1770.      Fragmented Items:       !FILES210N!
1771. 
1772.     Unfragmented Data:       !FILES202N! bytes
1773.       Fragmented Data:       !FILES212N! bytes
1774. 
1775.              All Gaps:       !GAP00N!
1776.              All gaps:       !GAP10N! bytes
1777.           Average gap:       !GAP13N! bytes
1778.            Median gap:       !GAP14N! bytes
1779.           Biggest gap:       !GAP15N! bytes
1780. ----------------------------------------------------------
1781. ") 
1782. 
1783. 
1784. 
1785. SetVariable(VolumeStatisticsDetail,"----------------------------------------------------------
1786. VOLUME: !VolumeLabel! !VolumeDescription!
1787. ----------------------------------------------------------
1788. !VolumeStatisticsSummary!
1789. ----------------------------------------------------------
1790. DETAILS: !VolumeLabel! !VolumeDescription!
1791. ----------------------------------------------------------
1792. 
1793. SUMMARY:
1794. 
1795. Volume label/name:          !VolumeLabel!
1796. Volume mountpoint:          !MountPoint!
1797. Volume name:                !VolumeName!
1798. Volume type:                !VolumeType!
1799. 
1800. Total disk space:           !VolumeSize! bytes
1801.                             !VolumeSizeG! gigabytes
1802. 
1803. Bytes per cluster:          !BytesPerCluster! bytes
1804. Average end-begin distance: !AverageBeginEndDistance! clusters
1805.                             !AverageBeginEndDistanceP!% of volume size
1806. 
1807. ----------------------------------------------------------
1808. FRAGMENTS:
1809. 
1810. Unfragmented Items: !FILES200N!
1811.   Fragmented Items: !FILES210N!
1812.  Unfragmented Data: !FILES202N! bytes
1813.    Fragmented Data: !FILES212N! bytes
1814. Gaps:
1815.           All Gaps: !GAP00N!
1816.           All gaps: !GAP10N! bytes
1817.        Average gap: !GAP13N! bytes
1818.         Median gap: !GAP14N! bytes
1819.        Biggest gap: !GAP15N! bytes
1820. 
1821. ----------------------------------------------------------
1822. GAPS:
1823. 
1824.    ----------------------------------------------------------
1825.    Counts:
1826.                        Count      Percentage of all
1827.                 ----------------- -----------------
1828.    Small gaps   !GAP01N! !GAP01P!%
1829.    Big gaps     !GAP02N! !GAP02P!%
1830.                 ----------------- -----------------
1831.    All gaps     !GAP00N! !GAP00P!
1832. 
1833.    ----------------------------------------------------------
1834.    By size:
1835.                       Bytes          Gigabytes      Percentage of all
1836.                 ----------------- ----------------- -----------------
1837.    Small gaps   !GAP11N! !GAP11G! !GAP11P!%
1838.    Big gaps     !GAP12N! !GAP12G! !GAP12P!%
1839.                 ----------------- ----------------- -----------------
1840.    All gaps     !GAP10N! !GAP10G! !GAP10P!%
1841. 
1842.    Average gap  !GAP13N! !GAP13G! !GAP13P!%
1843.    Median gap   !GAP14N! !GAP14G! !GAP14P!%
1844.    Biggest gap  !GAP15N! !GAP15G! !GAP15P!%
1845.    ----------------------------------------------------------
1846. 
1847. ----------------------------------------------------------
1848. FILE STATISTICS:
1849. ----------------------------------------------------------
1850. 
1851. ----------------------------------------------------------
1852. ITEM COUNT:
1853. ----------------------------------------------------------
1854. Number of files and folders:
1855. 
1856.               Unfragmented       Fragmented            All
1857.    ------- ----------------- ----------------- -----------------
1858.    Files   !FILES000N! !FILES010N! !FILES020N!
1859.    Folders !FILES100N! !FILES110N! !FILES120N!
1860.    ------- ----------------- ----------------- -----------------
1861.    All     !FILES200N! !FILES210N! !FILES220N!
1862. 
1863. ----------------------------------------------------------
1864. Percentage of total:
1865. 
1866.               Unfragmented       Fragmented            All
1867.    ------- ----------------- ----------------- -----------------
1868.    Files   !FILES000P!%!FILES010P!%!FILES020P!%
1869.    Folders !FILES100P!%!FILES110P!%!FILES120P!%
1870.    ------- ----------------- ----------------- -----------------
1871.    All     !FILES200P!%!FILES210P!%!FILES220P!%
1872. 
1873. ----------------------------------------------------------
1874. OCCUPIED SIZE on disk:
1875. ----------------------------------------------------------
1876. Bytes:
1877.               Unfragmented       Fragmented            All
1878.    ------- ----------------- ----------------- -----------------
1879.    Files   !FILES002N! !FILES012N! !FILES022N!
1880.    Folders !FILES102N! !FILES112N! !FILES122N!
1881.    ------- ----------------- ----------------- -----------------
1882.    All     !FILES202N! !FILES212N! !FILES222N!
1883. 
1884. ----------------------------------------------------------
1885. Gigabytes:
1886.               Unfragmented       Fragmented            All
1887.    ------- ----------------- ----------------- -----------------
1888.    Files   !FILES002G! !FILES012G! !FILES022G!
1889.    Folders !FILES102G! !FILES112G! !FILES122G!
1890.    ------- ----------------- ----------------- -----------------
1891.    All     !FILES202G! !FILES212G! !FILES222G!
1892. 
1893. ----------------------------------------------------------
1894. Percentage:
1895.               Unfragmented       Fragmented            All
1896.    ------- ----------------- ----------------- -----------------
1897.    Files   !FILES002P!%!FILES012P!%!FILES022P!%
1898.    Folders !FILES102P!%!FILES112P!%!FILES122P!%
1899.    ------- ----------------- ----------------- -----------------
1900.    All     !FILES202P!%!FILES212P!%!FILES222P!%
1901. 
1902. ----------------------------------------------------------
1903. USED SIZE:
1904. ----------------------------------------------------------
1905. Bytes:
1906.               Unfragmented       Fragmented            All
1907.    ------- ----------------- ----------------- -----------------
1908.    Files   !FILES001N! !FILES011N! !FILES021N!
1909.    Folders !FILES101N! !FILES111N! !FILES121N!
1910.    ------- ----------------- ----------------- -----------------
1911.    All     !FILES201N! !FILES211N! !FILES221N!
1912. 
1913. ----------------------------------------------------------
1914. Gigabytes:
1915.               Unfragmented       Fragmented            All
1916.    ------- ----------------- ----------------- -----------------
1917.    Files   !FILES001G! !FILES011G! !FILES021G!
1918.    Folders !FILES101G! !FILES111G! !FILES121G!
1919.    ------- ----------------- ----------------- -----------------
1920.    All     !FILES201G! !FILES211G! !FILES221G!
1921. 
1922. ----------------------------------------------------------
1923. Percentage:
1924.               Unfragmented       Fragmented            All
1925.    ------- ----------------- ----------------- -----------------
1926.    Files   !FILES001P!%!FILES011P!%!FILES021P!%
1927.    Folders !FILES101P!%!FILES111P!%!FILES121P!%
1928.    ------- ----------------- ----------------- -----------------
1929.    All     !FILES201P!%!FILES211P!%!FILES221P!%
1930. 
1931. ----------------------------------------------------------
1932. Volume Detailed Statistics end.
1933. ----------------------------------------------------------
1934. ") 
1935. 
1936. SetStatisticsWindowText("!VolumeStatisticsSummary!")
1937. 
1938. SetVariable(FileStepDescription,"Volume started.")
1939. # FILE STEP
1940. 
1941. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
1942. 
1943. /* add message and move to a new line. */
1944. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
1945. ")
1946. 
1947. /* display the line. (hopefully.) */
1948. # Zone Footer Set Statistics Window Text
1949. 
1950. SetStatisticsWindowText("----------------------------------------------------------
1951. Zones Processed: 
1952. ----------------------------------------------------------
1953. !ZoneListByLine!
1954. ----------------------------------------------------------
1955. Zone Processing Step:
1956. !ZoneStepByLine!    
1957. ----------------------------------------------------------
1958. Current Zone:
1959. !ZoneFooter!
1960. ----------------------------------------------------------
1961. Volume Statistics:
1962. !VolumeStatisticsDetail!
1963. ----------------------------------------------------------
1964. Zone Detailed Report:
1965. ----------------------------------------------------------
1966. !ZoneStatisticsDetail!
1967. ----------------------------------------------------------
1968. ")
1969. 
1970. 
1971. 
1972. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
1973. 
1974. # BANNER SET
1975. 
1976. # DATE TIME RUN ELP
1977. 
1978. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
1979. /* Xinclude "..\Display\BannerSet.MyDc"X */
1980. /* pause(1) */
1981. 
1982. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
1983. 
1984. Title('!Heading!')
1985. /* pause(1) */
1986. 
1987. /* NOTE: Can't round or truncate to integer precision. */
1988. 
1989. pause(1)
1990. 
1991. # Volume When Started
1992. 
1993. SetVariable(VolumeFreeAdj, (VolumeFree * (VolumeUsed / VolumeSize)))
1994. 
1995. SetVariable(MftLocation, RoundUp(VolumeUsed * MftPerDev, VolumeSize * VolumeRoundUpLarge)) 
1996. 
1997. SetVariable(ZoneListByLine, 		"Volume started.
1998. ")
1999. SetVariable(ZoneStepByLine, 		"Initialize.
2000. ")
2001. SetVariable(ZoneStatisticsDetail, 	"")
2002. 
2003. SetVariable(ZoneNoCurrent, 		0)
2004. SetVariable(ZoneNoAdjCurrent, 	0) 
2005. SetVariable(ZoneCurrentAjust,	0)
2006. 
2007. # BANNER SET
2008. 
2009. # DATE TIME RUN ELP
2010. 
2011. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
2012. /* Xinclude "..\Display\BannerSet.MyDc"X */
2013. /* pause(1) */
2014. 
2015. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
2016. 
2017. Title('!Heading!')
2018. /* pause(1) */
2019. 
2020. /* NOTE: Can't round or truncate to integer precision. */
2021. 
2022. AppendLogfile("!LogFileName!", "!Title!")
2023. 
2024. 
2025. # Set Volume Detailed Statistics:
2026. 
2027. # Set Volume summary stats:
2028. 
2029. # Cluster, Sector, Block adjust for display.
2030. # Bytes per cluster is volume specific.
2031. 
2032. SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
2033. 
2034. SetVariable(VolumeSizeTemp, VolumeSize / DisplayUnitDivisorCurrent)
2035. SetVariable(VolumeUsedTemp, VolumeUsed / DisplayUnitDivisorCurrent)
2036. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
2037. 
2038. SetVariable(VolumeUsedTotalTemp, VolumeFree / DisplayUnitDivisorCurrent)
2039. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
2040. 
2041. # Set the display text:
2042. SetVariable(VolumeStatisticsSummary,"----------------------------------------------------------
2043. SUMMARY: !VolumeLabel! !VolumeDescription!
2044.   
2045.           Volume Size:       !VolumeSize! (!VolumeSizeTemp!)
2046.           Volume Used:       !VolumeUsed! (!VolumeUsedTemp!)
2047.           Volume Free:       !VolumeFree!, (!VolumeFreeTemp!)
2048.          
2049.      Volume Used Calc:       !VolumeUsedTotal! (!VolumeUsedTotalTemp!)
2050.       Volume Free Adj:       !VolumeFreeAdj!
2051.     Bytes per cluster:       !BytesPerCluster! bytes
2052. 
2053.    Unfragmented Items:       !FILES200N!
2054.      Fragmented Items:       !FILES210N!
2055. 
2056.     Unfragmented Data:       !FILES202N! bytes
2057.       Fragmented Data:       !FILES212N! bytes
2058. 
2059.              All Gaps:       !GAP00N!
2060.              All gaps:       !GAP10N! bytes
2061.           Average gap:       !GAP13N! bytes
2062.            Median gap:       !GAP14N! bytes
2063.           Biggest gap:       !GAP15N! bytes
2064. ----------------------------------------------------------
2065. ") 
2066. 
2067. 
2068. 
2069. SetVariable(VolumeStatisticsDetail,"----------------------------------------------------------
2070. VOLUME: !VolumeLabel! !VolumeDescription!
2071. ----------------------------------------------------------
2072. !VolumeStatisticsSummary!
2073. ----------------------------------------------------------
2074. DETAILS: !VolumeLabel! !VolumeDescription!
2075. ----------------------------------------------------------
2076. 
2077. SUMMARY:
2078. 
2079. Volume label/name:          !VolumeLabel!
2080. Volume mountpoint:          !MountPoint!
2081. Volume name:                !VolumeName!
2082. Volume type:                !VolumeType!
2083. 
2084. Total disk space:           !VolumeSize! bytes
2085.                             !VolumeSizeG! gigabytes
2086. 
2087. Bytes per cluster:          !BytesPerCluster! bytes
2088. Average end-begin distance: !AverageBeginEndDistance! clusters
2089.                             !AverageBeginEndDistanceP!% of volume size
2090. 
2091. ----------------------------------------------------------
2092. FRAGMENTS:
2093. 
2094. Unfragmented Items: !FILES200N!
2095.   Fragmented Items: !FILES210N!
2096.  Unfragmented Data: !FILES202N! bytes
2097.    Fragmented Data: !FILES212N! bytes
2098. Gaps:
2099.           All Gaps: !GAP00N!
2100.           All gaps: !GAP10N! bytes
2101.        Average gap: !GAP13N! bytes
2102.         Median gap: !GAP14N! bytes
2103.        Biggest gap: !GAP15N! bytes
2104. 
2105. ----------------------------------------------------------
2106. GAPS:
2107. 
2108.    ----------------------------------------------------------
2109.    Counts:
2110.                        Count      Percentage of all
2111.                 ----------------- -----------------
2112.    Small gaps   !GAP01N! !GAP01P!%
2113.    Big gaps     !GAP02N! !GAP02P!%
2114.                 ----------------- -----------------
2115.    All gaps     !GAP00N! !GAP00P!
2116. 
2117.    ----------------------------------------------------------
2118.    By size:
2119.                       Bytes          Gigabytes      Percentage of all
2120.                 ----------------- ----------------- -----------------
2121.    Small gaps   !GAP11N! !GAP11G! !GAP11P!%
2122.    Big gaps     !GAP12N! !GAP12G! !GAP12P!%
2123.                 ----------------- ----------------- -----------------
2124.    All gaps     !GAP10N! !GAP10G! !GAP10P!%
2125. 
2126.    Average gap  !GAP13N! !GAP13G! !GAP13P!%
2127.    Median gap   !GAP14N! !GAP14G! !GAP14P!%
2128.    Biggest gap  !GAP15N! !GAP15G! !GAP15P!%
2129.    ----------------------------------------------------------
2130. 
2131. ----------------------------------------------------------
2132. FILE STATISTICS:
2133. ----------------------------------------------------------
2134. 
2135. ----------------------------------------------------------
2136. ITEM COUNT:
2137. ----------------------------------------------------------
2138. Number of files and folders:
2139. 
2140.               Unfragmented       Fragmented            All
2141.    ------- ----------------- ----------------- -----------------
2142.    Files   !FILES000N! !FILES010N! !FILES020N!
2143.    Folders !FILES100N! !FILES110N! !FILES120N!
2144.    ------- ----------------- ----------------- -----------------
2145.    All     !FILES200N! !FILES210N! !FILES220N!
2146. 
2147. ----------------------------------------------------------
2148. Percentage of total:
2149. 
2150.               Unfragmented       Fragmented            All
2151.    ------- ----------------- ----------------- -----------------
2152.    Files   !FILES000P!%!FILES010P!%!FILES020P!%
2153.    Folders !FILES100P!%!FILES110P!%!FILES120P!%
2154.    ------- ----------------- ----------------- -----------------
2155.    All     !FILES200P!%!FILES210P!%!FILES220P!%
2156. 
2157. ----------------------------------------------------------
2158. OCCUPIED SIZE on disk:
2159. ----------------------------------------------------------
2160. Bytes:
2161.               Unfragmented       Fragmented            All
2162.    ------- ----------------- ----------------- -----------------
2163.    Files   !FILES002N! !FILES012N! !FILES022N!
2164.    Folders !FILES102N! !FILES112N! !FILES122N!
2165.    ------- ----------------- ----------------- -----------------
2166.    All     !FILES202N! !FILES212N! !FILES222N!
2167. 
2168. ----------------------------------------------------------
2169. Gigabytes:
2170.               Unfragmented       Fragmented            All
2171.    ------- ----------------- ----------------- -----------------
2172.    Files   !FILES002G! !FILES012G! !FILES022G!
2173.    Folders !FILES102G! !FILES112G! !FILES122G!
2174.    ------- ----------------- ----------------- -----------------
2175.    All     !FILES202G! !FILES212G! !FILES222G!
2176. 
2177. ----------------------------------------------------------
2178. Percentage:
2179.               Unfragmented       Fragmented            All
2180.    ------- ----------------- ----------------- -----------------
2181.    Files   !FILES002P!%!FILES012P!%!FILES022P!%
2182.    Folders !FILES102P!%!FILES112P!%!FILES122P!%
2183.    ------- ----------------- ----------------- -----------------
2184.    All     !FILES202P!%!FILES212P!%!FILES222P!%
2185. 
2186. ----------------------------------------------------------
2187. USED SIZE:
2188. ----------------------------------------------------------
2189. Bytes:
2190.               Unfragmented       Fragmented            All
2191.    ------- ----------------- ----------------- -----------------
2192.    Files   !FILES001N! !FILES011N! !FILES021N!
2193.    Folders !FILES101N! !FILES111N! !FILES121N!
2194.    ------- ----------------- ----------------- -----------------
2195.    All     !FILES201N! !FILES211N! !FILES221N!
2196. 
2197. ----------------------------------------------------------
2198. Gigabytes:
2199.               Unfragmented       Fragmented            All
2200.    ------- ----------------- ----------------- -----------------
2201.    Files   !FILES001G! !FILES011G! !FILES021G!
2202.    Folders !FILES101G! !FILES111G! !FILES121G!
2203.    ------- ----------------- ----------------- -----------------
2204.    All     !FILES201G! !FILES211G! !FILES221G!
2205. 
2206. ----------------------------------------------------------
2207. Percentage:
2208.               Unfragmented       Fragmented            All
2209.    ------- ----------------- ----------------- -----------------
2210.    Files   !FILES001P!%!FILES011P!%!FILES021P!%
2211.    Folders !FILES101P!%!FILES111P!%!FILES121P!%
2212.    ------- ----------------- ----------------- -----------------
2213.    All     !FILES201P!%!FILES211P!%!FILES221P!%
2214. 
2215. ----------------------------------------------------------
2216. Volume Detailed Statistics end.
2217. ----------------------------------------------------------
2218. ") 
2219. 
2220. AppendLogfile("!LogFileName!", "!Title!")
2221. 
2222. 
2223. 
2224. /* Write/display stats: */
2225. # Log:
2226. AppendLogfile("!LogFileName!", "!Title! started.")
2227. AppendLogfile("!LogFileName!", "2021-11-09 08:17:15.")
2228. AppendLogfile("!LogFileName!",".")
2229. AppendLogfile("!LogFileName!", ".")
2230. AppendLogfile("!LogFileName!", "Volume: !VolumeLabel!")
2231. AppendLogfile("!LogFileName!",".")
2232. AppendLogfile("!LogFileName!","!VolumeStatisticsDetail!")
2233. AppendLogfile("!LogFileName!",".")
2234. AppendLogfile("!LogFileName!", "!Title! started.")
2235. AppendLogfile("!LogFileName!", "2021-11-09 08:17:15.")
2236. AppendLogfile("!LogFileName!",".")
2237. 
2238. # In program statistics window (view):
2239. SetStatisticsWindowText("!VolumeStatisticsDetail!")
2240. 
2241. 
2242. /* ---------------------------------------------------------- */
2243. /* System Zones */
2244. /* ---------------------------------------------------------- */
2245. 
2246. 	# Defrag Zones Os
2247. 	/* System Zones */
2248. 
2249. AppendLogfile("!LogFileName!", "!Description! Os Zones started: 2021-11-09 08:17:15")
2250. SetVariable(FileStepDescription,"System Zones.")
2251. # BANNER SET
2252. 
2253. # DATE TIME RUN ELP
2254. 
2255. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
2256. /* Xinclude "..\Display\BannerSet.MyDc"X */
2257. /* pause(1) */
2258. 
2259. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
2260. 
2261. Title('!Heading!')
2262. /* pause(1) */
2263. 
2264. /* NOTE: Can't round or truncate to integer precision. */
2265. 
2266. AppendLogfile("!LogFileName!", "!Title!")
2267. 
2268. 
2269. AppendLogfile("!LogFileName!",".")
2270. 
2271. AppendLogfile("!LogFileName!", "System Disk optimized layout for boot and executables. 2021-11-09 08:17:15")
2272. /* Dgh 20190618 */
2273. 
2274. /* ---------------------------------------------------------- */
2275. /* Defrag the Pagefile.sys on the next boot. */
2276. 
2277. # PagedFrg - Page Defrag.
2278. 
2279. /* Defrag the Pagefile.sys on the next boot. */
2280. # RunProgram("..\Pagedfrg.exe","-o")
2281. 
2282. 
2283. /* ---------------------------------------------------------- */
2284. AppendLogfile("!LogFileName!", "Place files at the beginning of the disk: 2021-11-09 08:17:15")
2285. 
2286. 	MakeGap(0)
2287. 
2288. /* ---------------------------------------------------------- */
2289. # Zone Boot Fixed.
2290. /* ---------------------------------------------------------- */
2291. # Zone Boot Fixed.
2292. 	SetVariable(ZoneLabel, 			"!ZoneLabelBoot!")
2293. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionBoot!")
2294. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpBoot!")
2295. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizeBoot!")
2296. 	SetVariable(ZoneTypeSelect,'# Boot start.
2297. ImportListFromBootOptimize()
2298. # Boot end.
2299. ')
2300. 
2301. 		# Zone Do Header
2302. 
2303. # Zone When Started
2304. 
2305. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
2306. # Display Set Zone
2307. 
2308. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
2309. SetVariable(FileStepDescription,	"")
2310. 
2311. SetVariable(ZoneStepByLine, 			"Zone started.
2312. ")
2313. 
2314. # BANNER SET
2315. 
2316. # DATE TIME RUN ELP
2317. 
2318. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:15 0:00:03")
2319. /* Xinclude "..\Display\BannerSet.MyDc"X */
2320. /* pause(1) */
2321. 
2322. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
2323. 
2324. Title('!Heading!')
2325. /* pause(1) */
2326. 
2327. /* NOTE: Can't round or truncate to integer precision. */
2328. 
2329. AppendLogfile("!LogFileName!", "!Title!")
2330. 
2331. 
2332. 
2333. pause(1)
2334. 
2335. 
2336. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
2337. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
2338. 
2339. SetVariable(ZoneStepNoCurrent, 0)
2340. 
2341. 
2342. # Zone Do Current Clear
2343. 
2344. SetVariable(ZoneTypeSelectCurrent, 		"")
2345. 
2346. SetVariable(ZoneBeginCurrent, 			0)
2347. SetVariable(ZoneBeginPerCurrent, 		0)
2348. SetVariable(ZoneEndCurrent, 			0)
2349. SetVariable(ZoneEndPerCurrent, 			0)
2350. 
2351. SetVariable(ZoneSizeCurrent,			0)
2352. SetVariable(ZoneSizePerCurrent,			0)
2353. 
2354. SetVariable(ZoneGapRequestedCurrent,	0)
2355. SetVariable(ZoneGapRoundedCurrent, 		0)
2356. SetVariable(ZoneGapAdjustedCurrent, 	0)
2357. SetVariable(ZoneGapAvailableCurrent, 	0)
2358. SetVariable(ZoneGapCurrent,				0)
2359. SetVariable(ZoneGapUsedCurrent, 		0)
2360. 
2361. SetVariable(ZoneGapActualCurrent, 		0)
2362. SetVariable(ZoneGapActualPerCurrent, 	0)
2363. 
2364. SetVariable(ZoneSizeActual, 			0)
2365. SetVariable(ZoneSizeActualCurrent,		0)
2366. 
2367. SetVariable(ZoneEndActual, 				0)
2368. SetVariable(ZoneEndActualCurrent,		0)			
2369. SetVariable(ZoneSizeActualPerCurrent, 	0)
2370.       
2371. SetVariable(ZoneFilesFolders,			0)
2372. SetVariable(ZoneFilesFoldersPer,		0) 
2373. 
2374. SetVariable(ZoneFragments,				0)
2375. SetVariable(ZoneFragmentsPer,			0) 
2376. 		
2377. SetVariable(ZoneEndActualCurrent, 		0)
2378. SetVariable(ZoneEndActualPerCurrent, 	0)
2379. 
2380. # Gap Calculation Methodology:
2381. 	# Requested
2382. 	SetVariable(GapRequested, 			0) 
2383. 	SetVariable(GapRequestedStd, 		0) 
2384. 	SetVariable(GapRequestedMft, 		0) 
2385. 	SetVariable(GapRequestedOs, 		0) 
2386. 	SetVariable(GapRequestedOriginal, 	0) 
2387. 	
2388. 	# Gap Adjustments
2389. 	SetVariable(GapRounded, 			0)
2390. 	# SetVariable(GapAdjusted, 			0)
2391. 	SetVariable(GapAvailable, 			0)
2392. 	SetVariable(GapCurrent, 			0)
2393. 	SetVariable(GapActual, 				0)
2394. 	SetVariable(GapUsed, 				0)
2395. 	
2396. 	# Gap Adjustments
2397. 	SetVariable(GapRoundedLoc, 			0)
2398. 	# SetVariable(GapAdjustedLoc, 		0)
2399. 	SetVariable(GapAvailableLoc, 		0)
2400. 	SetVariable(GapCurrentLoc, 			0)
2401. 	SetVariable(GapActualLoc,			0)
2402. 	SetVariable(GapUsedLoc,				0)
2403. 	
2404. 	# Space usage
2405. 	SetVariable(ZoneFreePerRequested, 	0)
2406. 	SetVariable(ZoneFreePerUsed, 		0)
2407. 
2408. # Gap Size & Rounding
2409. 	SetVariable(ZoneGapSizePer, 		0)
2410. 	SetVariable(ZoneVolRoundUpPer, 		0)
2411. 	
2412. 	# Free Space
2413. 	SetVariable(ZoneFreeUsedPer, 		0)
2414. 	SetVariable(ZoneFreeRequestedPer, 	0)
2415. 
2416. 
2417. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
2418. 
2419. # Footer:
2420. SetVariable(ZoneFooter, "----------------------------------------------------------
2421. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:16
2422. 
2423. Statistics Report:
2424. ------------------
2425.    Size:  
2426.    ------------------------
2427.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
2428.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
2429.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
2430. 
2431.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
2432.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
2433. 
2434.    Location:
2435.    ------------------------
2436.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
2437.              Files End: !ZoneEndCurrent!
2438.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
2439.       
2440.    Gap Settings:
2441.    ------------------------
2442.          Gap Requested: !ZoneGapSizePer!%
2443.       Volume Rounding: !ZoneVolRoundUpPer!%
2444.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
2445.                  
2446.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
2447.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
2448.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
2449.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
2450.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
2451.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
2452.      
2453.    Free Space after Zone:
2454.    ------------------------
2455.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
2456.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
2457.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
2458. 
2459. Directory and Files Select:
2460. ---------------------------
2461. !ZoneTypeSelectCurrent!               
2462. ---------------------------
2463. ----------------------------------------------------------
2464. ")
2465. 
2466. # BANNER SET
2467. 
2468. # DATE TIME RUN ELP
2469. 
2470. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
2471. /* Xinclude "..\Display\BannerSet.MyDc"X */
2472. /* pause(1) */
2473. 
2474. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
2475. 
2476. Title('!Heading!')
2477. /* pause(1) */
2478. 
2479. /* NOTE: Can't round or truncate to integer precision. */
2480. 
2481. AppendLogfile("!LogFileName!", "!Title!")
2482. 
2483. 
2484. 
2485. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
2486. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
2487. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:15")
2488. 
2489. SetVariable(ZoneListByLine, "!ZoneListByLine!
2490. Zone: !ZoneNoCurrent! 2021-11-09 08:17:15 0:00:03 !ZoneLabel! !ZoneDescription!")
2491. 
2492. 
2493. /* Fixed Zone Position Handling */
2494. /* Literal number: */
2495. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
2496. /* Percentage of disk: */
2497. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
2498. /* Gap */
2499. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
2500. 
2501. /* ---------------------------------------------------------- */
2502. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
2503. # FILE STEP
2504. 
2505. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
2506. 
2507. /* add message and move to a new line. */
2508. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
2509. ")
2510. 
2511. /* display the line. (hopefully.) */
2512. # Zone Footer Set Statistics Window Text
2513. 
2514. SetStatisticsWindowText("----------------------------------------------------------
2515. Zones Processed: 
2516. ----------------------------------------------------------
2517. !ZoneListByLine!
2518. ----------------------------------------------------------
2519. Zone Processing Step:
2520. !ZoneStepByLine!    
2521. ----------------------------------------------------------
2522. Current Zone:
2523. !ZoneFooter!
2524. ----------------------------------------------------------
2525. Volume Statistics:
2526. !VolumeStatisticsDetail!
2527. ----------------------------------------------------------
2528. Zone Detailed Report:
2529. ----------------------------------------------------------
2530. !ZoneStatisticsDetail!
2531. ----------------------------------------------------------
2532. ")
2533. 
2534. 
2535. 
2536. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
2537. 
2538. # BANNER SET
2539. 
2540. # DATE TIME RUN ELP
2541. 
2542. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
2543. /* Xinclude "..\Display\BannerSet.MyDc"X */
2544. /* pause(1) */
2545. 
2546. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
2547. 
2548. Title('!Heading!')
2549. /* pause(1) */
2550. 
2551. /* NOTE: Can't round or truncate to integer precision. */
2552. 
2553. pause(1)
2554. 
2555. # your stuff HERE (X)... pre file select code.
2556. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
2557. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
2558. 	# (X)
2559. 
2560. FileSelect
2561. 
2562. 	# your stuff can't really go here (errors.)
2563. 	# maybe for some reason I don't know of...
2564. 	
2565. 	# Actions next...
2566. 		# Boot start.
2567. ImportListFromBootOptimize()
2568. # Boot end.
2569. 
2570. 		and not(
2571. 			# Os Data Dynamic start.
2572. (
2573. # Os Data Dynamic start.
2574. (
2575.   FileName("*.dat*")
2576.   or FileName("*.db*")
2577.   or FileName("*.edb*")
2578.   or FileName("*.log*")
2579.   or FileName("DataStore.edb")
2580. )
2581. # Os Data Dynamic end.
2582. 
2583.   or 
2584. # Os PageHiberDump start.
2585. (
2586.   FileName("DataStore.edb")
2587.   or FileName("DUMP*.*")
2588.   or FileName("Hiberfil.sys")
2589.   or FileName("MEMORY.DMP")
2590.   or FileName("Pagefile.sys")
2591. )
2592. # Os PageHiberDump end.
2593. 
2594. # Os Data Dynamic
2595. )
2596. # Os Data Dynamic end.
2597. 
2598. 		)
2599. 		FileActions
2600. 		  		/* ---------------------------------------------------------- */
2601. 	# Gap
2602. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
2603. 		# FILE STEP
2604. 
2605. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
2606. 
2607. /* add message and move to a new line. */
2608. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
2609. ")
2610. 
2611. /* display the line. (hopefully.) */
2612. # Zone Footer Set Statistics Window Text
2613. 
2614. SetStatisticsWindowText("----------------------------------------------------------
2615. Zones Processed: 
2616. ----------------------------------------------------------
2617. !ZoneListByLine!
2618. ----------------------------------------------------------
2619. Zone Processing Step:
2620. !ZoneStepByLine!    
2621. ----------------------------------------------------------
2622. Current Zone:
2623. !ZoneFooter!
2624. ----------------------------------------------------------
2625. Volume Statistics:
2626. !VolumeStatisticsDetail!
2627. ----------------------------------------------------------
2628. Zone Detailed Report:
2629. ----------------------------------------------------------
2630. !ZoneStatisticsDetail!
2631. ----------------------------------------------------------
2632. ")
2633. 
2634. 
2635. 
2636. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
2637. 
2638. # BANNER SET
2639. 
2640. # DATE TIME RUN ELP
2641. 
2642. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
2643. /* Xinclude "..\Display\BannerSet.MyDc"X */
2644. /* pause(1) */
2645. 
2646. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
2647. 
2648. Title('!Heading!')
2649. /* pause(1) */
2650. 
2651. /* NOTE: Can't round or truncate to integer precision. */
2652. 
2653. pause(1)
2654. 	
2655. 	# ACTUAL GAP
2656. 		/* AddGap Variant. */
2657. 	  	# Zone Do Gap
2658. # Gap Calculation Methods:
2659. 
2660. /* 1) Anything you need to add first. */
2661. /* empty */
2662. 
2663. /* ---------------------------------------------------------- */
2664. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
2665. 	# GapRequestedStd.
2666. 
2667. 		/* ---------------------------------------------------------- */
2668. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
2669. 
2670. 		# Gap Calculation Methods:
2671. 
2672. /* AddGap Variants */
2673. 
2674. 	/* Standard */
2675. 		# Gap Calculation Methods:
2676. 	/* AddGap Variants */
2677. 	/* Standard */
2678. 
2679. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
2680. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
2681. 
2682. 	SetVariable(GapRequested, GapRequestedStd)
2683. 	
2684. 
2685. 	/* MFT Low High Method */
2686. 		# Gap Calculation Methods:
2687. 	/* AddGap Variants */
2688. 	/* MFT Low High Method */
2689. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
2690. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
2691. 	SetVariable(GapRequested, GapRequestedMft)
2692. 	
2693. 
2694. 	/* OS Volume Type Method */
2695. 		# Gap Calculation Methods:
2696. 	/* AddGap Variants */
2697. 	/* OS Volume Type Method */
2698. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
2699. 	SetVariable(GapRequested, GapRequestedOs)
2700. 
2701. 
2702. 
2703. /* MakeGap Variants */
2704. 
2705. 	/* Original Os 1-3 + MFT 2 */
2706. 		# Gap Calculation Methods:
2707. 	/* MakeGap Variants */
2708. 	/* Original Os 1-3 + MFT 2 */
2709. 	/* plus MFT gap placed inline at the dividing zone. */
2710. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
2711. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
2712. 	SetVariable(GapRequested, GapRequestedOrig)
2713. 	
2714. 	
2715. /* Note: You could comment out the ones not in use */
2716. /* However having the data in the log is useful. */
2717. /* Therefore the following line is otherwise needed. */
2718. 
2719. /* Standard used */
2720. 
2721. SetVariable(GapRequested, GapRequestedStd)
2722. 
2723. # Gap Calculation Methods:
2724. 
2725. /* AddGap Variants */
2726. 	/* Standard */
2727. 	/* MFT Low High Method */
2728. 	/* OS Volume Type Method */
2729. 
2730. /* MakeGap Variants */
2731. 	/* Original Os 1-3 + MFT 2 */
2732. 
2733. /* Note: You could comment out the ones not in use */
2734. /* However having the data in the log is useful. */
2735. /* Therefore the following line is otherwise needed. */
2736. 
2737. /* Standard is used currently */
2738. 
2739. 
2740. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
2741. 
2742. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
2743. 
2744. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
2745. 
2746. /* ---------------------------------------------------------- */
2747. /* 3) SMALL ZONE ADJUSTMENT. */
2748. /* Gab cant be larger than half the Zone Size. */
2749. 
2750. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
2751. 	
2752. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
2753. 
2754. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
2755. 
2756. /* ---------------------------------------------------------- */
2757. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
2758. # Gap Adjustments.
2759. 
2760. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
2761. 	
2762. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
2763. 
2764. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
2765. 
2766. /* ---------------------------------------------------------- */
2767. # BYPASS THIS.
2768. 	/* This is definitely wrong. */
2769. 	/* The question is can we steal gap from the next zone */
2770. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
2771. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
2772. 		# Zone Overflow.
2773. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
2774. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
2775. 
2776. /* ---------------------------------------------------------- */
2777. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
2778. # Remaining free space available.
2779. 
2780. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
2781. 	
2782. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
2783. 
2784. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
2785. 
2786. /* ---------------------------------------------------------- */
2787. # CURRENT gap to use.
2788. 
2789. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
2790. 
2791. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
2792. 
2793. /* ---------------------------------------------------------- */
2794. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
2795. # Debugging.
2796. 
2797. 	SetVariable(GapUsed, GapCurrent) // for debugging
2798. 
2799. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
2800. 
2801. 		# Your code HERE
2802. 
2803. /* ---------------------------------------------------------- */
2804. /* 7) YOUR CODE. */
2805. # YOUR CODE HERE:
2806. 	# INPUT: GapCurrent or GapCurrentLoc
2807. 	# OUTPUT: GapUsed...
2808. 
2809. /* ---------------------------------------------------------- */
2810. # Gap Size.
2811. # Actual Size of Gap.
2812. 
2813. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
2814. 
2815. /* ---------------------------------------------------------- */
2816. /* xxxxxxxxxxxxxxxxxxxxxx */
2817. # ADD THE GAP
2818. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
2819. /* xxxxxxxxxxxxxxxxxxxxxx */
2820. 
2821. 	
2822. 	# Zone Statistics	
2823. 	# Zone / Volume Statistics and Display
2824. 		
2825. 	# Accumulate Totals
2826.   	# Volume totals
2827. 
2828. /* Current total space used (by Zones and Gaps) */
2829. 
2830. SetVariable(VolumeZoneUsed, GapUsed)
2831. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
2832. /* Percentage */
2833. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
2834. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
2835. 
2836. /* Current total of free space requested */
2837. 
2838. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
2839. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
2840. /* Percent. */
2841. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
2842. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
2843. 
2844. /* Current total of free space used */
2845. 
2846. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
2847. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
2848. /* Percent */
2849. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
2850. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
2851. 
2852. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
2853. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
2854. /* Xinclude "..\DebugDisplayPause.MyDc"X */
2855. 
2856. 
2857. 	# Current Values
2858. 	# Cluster, Sector, Block adjust for display.
2859. 	# Bytes per cluster is volume specific.
2860. 
2861. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
2862. 
2863. # Current Zone values.
2864. 	# Begin, end and size.
2865. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
2866. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
2867. 
2868. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
2869. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
2870. 
2871. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
2872. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
2873. 
2874. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
2875. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
2876. 
2877. 	SetVariable(ZoneFragments,				"!ZONE210N!")
2878. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
2879. 		
2880. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
2881. /* identical code to here: (separation not needed. TEST.) */	
2882. 
2883. # Current Gap, Actual and Free Values
2884. 	# Gap
2885. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
2886. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
2887. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
2888. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
2889. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
2890. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
2891. 	
2892. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
2893. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
2894. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
2895. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
2896. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
2897. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
2898. 	
2899. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
2900. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
2901. 	
2902. 	# Actual Size and End
2903. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
2904. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
2905. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
2906. 	
2907. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
2908. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
2909. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
2910. 
2911. # Gap Size & Rounding
2912. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
2913. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
2914. 	
2915. 	# Free Space
2916. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
2917. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
2918. 
2919. 	# Footer:
2920. SetVariable(ZoneFooter, "----------------------------------------------------------
2921. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:16
2922. 
2923. Statistics Report:
2924. ------------------
2925.    Size:  
2926.    ------------------------
2927.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
2928.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
2929.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
2930. 
2931.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
2932.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
2933. 
2934.    Location:
2935.    ------------------------
2936.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
2937.              Files End: !ZoneEndCurrent!
2938.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
2939.       
2940.    Gap Settings:
2941.    ------------------------
2942.          Gap Requested: !ZoneGapSizePer!%
2943.       Volume Rounding: !ZoneVolRoundUpPer!%
2944.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
2945.                  
2946.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
2947.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
2948.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
2949.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
2950.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
2951.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
2952.      
2953.    Free Space after Zone:
2954.    ------------------------
2955.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
2956.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
2957.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
2958. 
2959. Directory and Files Select:
2960. ---------------------------
2961. !ZoneTypeSelectCurrent!               
2962. ---------------------------
2963. ----------------------------------------------------------
2964. ")
2965. 	# Zone Footer Set Statistics Window Text
2966. 
2967. SetStatisticsWindowText("----------------------------------------------------------
2968. Zones Processed: 
2969. ----------------------------------------------------------
2970. !ZoneListByLine!
2971. ----------------------------------------------------------
2972. Zone Processing Step:
2973. !ZoneStepByLine!    
2974. ----------------------------------------------------------
2975. Current Zone:
2976. !ZoneFooter!
2977. ----------------------------------------------------------
2978. Volume Statistics:
2979. !VolumeStatisticsDetail!
2980. ----------------------------------------------------------
2981. Zone Detailed Report:
2982. ----------------------------------------------------------
2983. !ZoneStatisticsDetail!
2984. ----------------------------------------------------------
2985. ")
2986. 
2987. 
2988. 	
2989.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
2990. 
2991. 	# Add Zone to list of zones for display.
2992. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
2993. 	# ??? Free Stats?
2994. 	# Footer:
2995. SetVariable(ZoneFooter, "----------------------------------------------------------
2996. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:16
2997. 
2998. Statistics Report:
2999. ------------------
3000.    Size:  
3001.    ------------------------
3002.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
3003.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
3004.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
3005. 
3006.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
3007.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
3008. 
3009.    Location:
3010.    ------------------------
3011.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
3012.              Files End: !ZoneEndCurrent!
3013.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
3014.       
3015.    Gap Settings:
3016.    ------------------------
3017.          Gap Requested: !ZoneGapSizePer!%
3018.       Volume Rounding: !ZoneVolRoundUpPer!%
3019.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
3020.                  
3021.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
3022.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
3023.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
3024.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
3025.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
3026.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
3027.      
3028.    Free Space after Zone:
3029.    ------------------------
3030.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
3031.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
3032.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
3033. 
3034. Directory and Files Select:
3035. ---------------------------
3036. !ZoneTypeSelectCurrent!               
3037. ---------------------------
3038. ----------------------------------------------------------
3039. ")
3040. 
3041. 	# Add Zone Details to Report.	
3042. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
3043. !ZoneFooter!")
3044. 
3045. 
3046. 	
3047. 			SetVariable(FileStepDescription, 	"!FileStepDescriptionFileActionStart!")
3048. 			# FILE STEP
3049. 
3050. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
3051. 
3052. /* add message and move to a new line. */
3053. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
3054. ")
3055. 
3056. /* display the line. (hopefully.) */
3057. # Zone Footer Set Statistics Window Text
3058. 
3059. SetStatisticsWindowText("----------------------------------------------------------
3060. Zones Processed: 
3061. ----------------------------------------------------------
3062. !ZoneListByLine!
3063. ----------------------------------------------------------
3064. Zone Processing Step:
3065. !ZoneStepByLine!    
3066. ----------------------------------------------------------
3067. Current Zone:
3068. !ZoneFooter!
3069. ----------------------------------------------------------
3070. Volume Statistics:
3071. !VolumeStatisticsDetail!
3072. ----------------------------------------------------------
3073. Zone Detailed Report:
3074. ----------------------------------------------------------
3075. !ZoneStatisticsDetail!
3076. ----------------------------------------------------------
3077. ")
3078. 
3079. 
3080. 
3081. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
3082. 
3083. # BANNER SET
3084. 
3085. # DATE TIME RUN ELP
3086. 
3087. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
3088. /* Xinclude "..\Display\BannerSet.MyDc"X */
3089. /* pause(1) */
3090. 
3091. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3092. 
3093. Title('!Heading!')
3094. /* pause(1) */
3095. 
3096. /* NOTE: Can't round or truncate to integer precision. */
3097. 
3098. pause(1)
3099. 	
3100. 			/* "..\ActionVerbs\ZoneDoActionThis.MyDc" */
3101. 			# File Action - SortByImportSequence.
3102. SortByImportSequence(Ascending ) 
3103. 	
3104. 
3105. 			SetVariable(FileStepDescription, 	"!FileStepDescriptionFileActionEnd!")
3106. 			# FILE STEP
3107. 
3108. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
3109. 
3110. /* add message and move to a new line. */
3111. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
3112. ")
3113. 
3114. /* display the line. (hopefully.) */
3115. # Zone Footer Set Statistics Window Text
3116. 
3117. SetStatisticsWindowText("----------------------------------------------------------
3118. Zones Processed: 
3119. ----------------------------------------------------------
3120. !ZoneListByLine!
3121. ----------------------------------------------------------
3122. Zone Processing Step:
3123. !ZoneStepByLine!    
3124. ----------------------------------------------------------
3125. Current Zone:
3126. !ZoneFooter!
3127. ----------------------------------------------------------
3128. Volume Statistics:
3129. !VolumeStatisticsDetail!
3130. ----------------------------------------------------------
3131. Zone Detailed Report:
3132. ----------------------------------------------------------
3133. !ZoneStatisticsDetail!
3134. ----------------------------------------------------------
3135. ")
3136. 
3137. 
3138. 
3139. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
3140. 
3141. # BANNER SET
3142. 
3143. # DATE TIME RUN ELP
3144. 
3145. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
3146. /* Xinclude "..\Display\BannerSet.MyDc"X */
3147. /* pause(1) */
3148. 
3149. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3150. 
3151. Title('!Heading!')
3152. /* pause(1) */
3153. 
3154. /* NOTE: Can't round or truncate to integer precision. */
3155. 
3156. pause(1)
3157. 
3158. 		# Zone Do Footer
3159. 
3160. /* ---------------------------------------------------------- */
3161. # File Select
3162. 	# Select Statments
3163. # File Actions 
3164. 	# Standard or OS File Actions.
3165. 	# Resume...
3166. 	
3167. 	# your stuff HERE (X)... post zone (file) file actions code.
3168. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
3169. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
3170. 		# (X)
3171. 		
3172. 		/* ??? Set window? */
3173. 	
3174. 	# ADD THE GAP
3175. 		
3176. # Vacate (good for diagnostics)
3177. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
3178. 
3179. # DoNotVacate - DO NOT Vacate (recommended)
3180. 
3181. # Vacate
3182. /* AddGap(GapUsedLoc) */
3183. 
3184. # DO Not Vacate
3185. AddGap(GapUsedLoc, DoNotVacate) 
3186. 	
3187. 	
3188. /* ---------------------------------------------------------- */
3189. # (failed) TEST for boolean logic.
3190. 
3191. /* It should work in the gap calculations for turning options */
3192. /* on and off but it will NOT work here. */
3193. 
3194. /* Boolean setting X or FlagX. */
3195. /* Where X will be on or off: */
3196. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
3197. /*      For ON:  (X  *  FlagAny) */
3198. 
3199. /* 1) Failed, zero gap overrode the previous one. */
3200. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
3201. /* AddGap(GapUsedTemp) */ 
3202. 
3203. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
3204. /* AddGap(GapUsedTemp, DoNotVacate) */ 
3205. 
3206. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
3207. 
3208. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
3209. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
3210. /* AddGap(GapUsedTemp) */ 
3211. 
3212. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
3213. /* AddGap(GapUsedTemp, DoNotVacate) */ 
3214. 
3215. /* ---------------------------------------------------------- */
3216. 
3217. # Vacate
3218. /* AddGap(GapUsed) */
3219. 
3220. # DO NOT Vacate (recommended)
3221. /* AddGap(GapUsed, DoNotVacate) */ 
3222. 	
3223. 
3224. 		
3225. # 
3226. FileEnd
3227. /* ---------------------------------------------------------- */
3228. 
3229. # your stuff HERE (X)... post zone (file) code.
3230. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
3231. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
3232. 	# (X)
3233. 
3234. SetVariable(FileStepDescription,"Zone finished, reporting.")
3235. # FILE STEP
3236. 
3237. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
3238. 
3239. /* add message and move to a new line. */
3240. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
3241. ")
3242. 
3243. /* display the line. (hopefully.) */
3244. # Zone Footer Set Statistics Window Text
3245. 
3246. SetStatisticsWindowText("----------------------------------------------------------
3247. Zones Processed: 
3248. ----------------------------------------------------------
3249. !ZoneListByLine!
3250. ----------------------------------------------------------
3251. Zone Processing Step:
3252. !ZoneStepByLine!    
3253. ----------------------------------------------------------
3254. Current Zone:
3255. !ZoneFooter!
3256. ----------------------------------------------------------
3257. Volume Statistics:
3258. !VolumeStatisticsDetail!
3259. ----------------------------------------------------------
3260. Zone Detailed Report:
3261. ----------------------------------------------------------
3262. !ZoneStatisticsDetail!
3263. ----------------------------------------------------------
3264. ")
3265. 
3266. 
3267. 
3268. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
3269. 
3270. # BANNER SET
3271. 
3272. # DATE TIME RUN ELP
3273. 
3274. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
3275. /* Xinclude "..\Display\BannerSet.MyDc"X */
3276. /* pause(1) */
3277. 
3278. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3279. 
3280. Title('!Heading!')
3281. /* pause(1) */
3282. 
3283. /* NOTE: Can't round or truncate to integer precision. */
3284. 
3285. pause(1)
3286. 
3287. # Zone When Finished
3288. 
3289. # BANNER SET
3290. 
3291. # DATE TIME RUN ELP
3292. 
3293. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:16 0:00:04")
3294. /* Xinclude "..\Display\BannerSet.MyDc"X */
3295. /* pause(1) */
3296. 
3297. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3298. 
3299. Title('!Heading!')
3300. /* pause(1) */
3301. 
3302. /* NOTE: Can't round or truncate to integer precision. */
3303. 
3304. AppendLogfile("!LogFileName!", "!Title!")
3305. 
3306. 
3307. 
3308. # Zone Statistics	
3309. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
3310. 
3311. # Footer:
3312. SetVariable(ZoneFooter, "----------------------------------------------------------
3313. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:16
3314. 
3315. Statistics Report:
3316. ------------------
3317.    Size:  
3318.    ------------------------
3319.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
3320.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
3321.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
3322. 
3323.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
3324.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
3325. 
3326.    Location:
3327.    ------------------------
3328.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
3329.              Files End: !ZoneEndCurrent!
3330.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
3331.       
3332.    Gap Settings:
3333.    ------------------------
3334.          Gap Requested: !ZoneGapSizePer!%
3335.       Volume Rounding: !ZoneVolRoundUpPer!%
3336.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
3337.                  
3338.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
3339.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
3340.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
3341.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
3342.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
3343.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
3344.      
3345.    Free Space after Zone:
3346.    ------------------------
3347.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
3348.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
3349.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
3350. 
3351. Directory and Files Select:
3352. ---------------------------
3353. !ZoneTypeSelectCurrent!               
3354. ---------------------------
3355. ----------------------------------------------------------
3356. ")
3357. 
3358. AppendLogfile("!LogFileName!", ".")
3359. AppendLogfile("!LogFileName!", "!ZoneFooter!")
3360. AppendLogfile("!LogFileName!", ".")
3361. 
3362. # Zone Footer Set Statistics Window Text
3363. 
3364. SetStatisticsWindowText("----------------------------------------------------------
3365. Zones Processed: 
3366. ----------------------------------------------------------
3367. !ZoneListByLine!
3368. ----------------------------------------------------------
3369. Zone Processing Step:
3370. !ZoneStepByLine!    
3371. ----------------------------------------------------------
3372. Current Zone:
3373. !ZoneFooter!
3374. ----------------------------------------------------------
3375. Volume Statistics:
3376. !VolumeStatisticsDetail!
3377. ----------------------------------------------------------
3378. Zone Detailed Report:
3379. ----------------------------------------------------------
3380. !ZoneStatisticsDetail!
3381. ----------------------------------------------------------
3382. ")
3383. 
3384. 
3385. 
3386. /* pause() */
3387. /* pause() */
3388. 
3389. 
3390. 
3391. 
3392. /* ---------------------------------------------------------- */
3393. # Zone Boot Data (Variable and other).
3394. 	SetVariable(ZoneLabel, 			"!ZoneLabelBootData!")
3395. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionBootData!")
3396. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpBoot!")
3397. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizeBoot!")
3398. 	SetVariable(ZoneTypeSelect,'
3399.                 # Boot - Data files.
3400.                 not(
3401.                      # Os PageHiberDump start.
3402. (
3403.   FileName("DataStore.edb")
3404.   or FileName("DUMP*.*")
3405.   or FileName("Hiberfil.sys")
3406.   or FileName("MEMORY.DMP")
3407.   or FileName("Pagefile.sys")
3408. )
3409. # Os PageHiberDump end.
3410. 
3411.                 )
3412. ')
3413. 
3414. 		# Zone Do Header
3415. 
3416. # Zone When Started
3417. 
3418. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
3419. # Display Set Zone
3420. 
3421. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
3422. SetVariable(FileStepDescription,	"")
3423. 
3424. SetVariable(ZoneStepByLine, 			"Zone started.
3425. ")
3426. 
3427. # BANNER SET
3428. 
3429. # DATE TIME RUN ELP
3430. 
3431. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
3432. /* Xinclude "..\Display\BannerSet.MyDc"X */
3433. /* pause(1) */
3434. 
3435. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3436. 
3437. Title('!Heading!')
3438. /* pause(1) */
3439. 
3440. /* NOTE: Can't round or truncate to integer precision. */
3441. 
3442. AppendLogfile("!LogFileName!", "!Title!")
3443. 
3444. 
3445. 
3446. pause(1)
3447. 
3448. 
3449. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
3450. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
3451. 
3452. SetVariable(ZoneStepNoCurrent, 0)
3453. 
3454. 
3455. # Zone Do Current Clear
3456. 
3457. SetVariable(ZoneTypeSelectCurrent, 		"")
3458. 
3459. SetVariable(ZoneBeginCurrent, 			0)
3460. SetVariable(ZoneBeginPerCurrent, 		0)
3461. SetVariable(ZoneEndCurrent, 			0)
3462. SetVariable(ZoneEndPerCurrent, 			0)
3463. 
3464. SetVariable(ZoneSizeCurrent,			0)
3465. SetVariable(ZoneSizePerCurrent,			0)
3466. 
3467. SetVariable(ZoneGapRequestedCurrent,	0)
3468. SetVariable(ZoneGapRoundedCurrent, 		0)
3469. SetVariable(ZoneGapAdjustedCurrent, 	0)
3470. SetVariable(ZoneGapAvailableCurrent, 	0)
3471. SetVariable(ZoneGapCurrent,				0)
3472. SetVariable(ZoneGapUsedCurrent, 		0)
3473. 
3474. SetVariable(ZoneGapActualCurrent, 		0)
3475. SetVariable(ZoneGapActualPerCurrent, 	0)
3476. 
3477. SetVariable(ZoneSizeActual, 			0)
3478. SetVariable(ZoneSizeActualCurrent,		0)
3479. 
3480. SetVariable(ZoneEndActual, 				0)
3481. SetVariable(ZoneEndActualCurrent,		0)			
3482. SetVariable(ZoneSizeActualPerCurrent, 	0)
3483.       
3484. SetVariable(ZoneFilesFolders,			0)
3485. SetVariable(ZoneFilesFoldersPer,		0) 
3486. 
3487. SetVariable(ZoneFragments,				0)
3488. SetVariable(ZoneFragmentsPer,			0) 
3489. 		
3490. SetVariable(ZoneEndActualCurrent, 		0)
3491. SetVariable(ZoneEndActualPerCurrent, 	0)
3492. 
3493. # Gap Calculation Methodology:
3494. 	# Requested
3495. 	SetVariable(GapRequested, 			0) 
3496. 	SetVariable(GapRequestedStd, 		0) 
3497. 	SetVariable(GapRequestedMft, 		0) 
3498. 	SetVariable(GapRequestedOs, 		0) 
3499. 	SetVariable(GapRequestedOriginal, 	0) 
3500. 	
3501. 	# Gap Adjustments
3502. 	SetVariable(GapRounded, 			0)
3503. 	# SetVariable(GapAdjusted, 			0)
3504. 	SetVariable(GapAvailable, 			0)
3505. 	SetVariable(GapCurrent, 			0)
3506. 	SetVariable(GapActual, 				0)
3507. 	SetVariable(GapUsed, 				0)
3508. 	
3509. 	# Gap Adjustments
3510. 	SetVariable(GapRoundedLoc, 			0)
3511. 	# SetVariable(GapAdjustedLoc, 		0)
3512. 	SetVariable(GapAvailableLoc, 		0)
3513. 	SetVariable(GapCurrentLoc, 			0)
3514. 	SetVariable(GapActualLoc,			0)
3515. 	SetVariable(GapUsedLoc,				0)
3516. 	
3517. 	# Space usage
3518. 	SetVariable(ZoneFreePerRequested, 	0)
3519. 	SetVariable(ZoneFreePerUsed, 		0)
3520. 
3521. # Gap Size & Rounding
3522. 	SetVariable(ZoneGapSizePer, 		0)
3523. 	SetVariable(ZoneVolRoundUpPer, 		0)
3524. 	
3525. 	# Free Space
3526. 	SetVariable(ZoneFreeUsedPer, 		0)
3527. 	SetVariable(ZoneFreeRequestedPer, 	0)
3528. 
3529. 
3530. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
3531. 
3532. # Footer:
3533. SetVariable(ZoneFooter, "----------------------------------------------------------
3534. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
3535. 
3536. Statistics Report:
3537. ------------------
3538.    Size:  
3539.    ------------------------
3540.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
3541.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
3542.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
3543. 
3544.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
3545.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
3546. 
3547.    Location:
3548.    ------------------------
3549.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
3550.              Files End: !ZoneEndCurrent!
3551.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
3552.       
3553.    Gap Settings:
3554.    ------------------------
3555.          Gap Requested: !ZoneGapSizePer!%
3556.       Volume Rounding: !ZoneVolRoundUpPer!%
3557.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
3558.                  
3559.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
3560.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
3561.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
3562.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
3563.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
3564.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
3565.      
3566.    Free Space after Zone:
3567.    ------------------------
3568.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
3569.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
3570.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
3571. 
3572. Directory and Files Select:
3573. ---------------------------
3574. !ZoneTypeSelectCurrent!               
3575. ---------------------------
3576. ----------------------------------------------------------
3577. ")
3578. 
3579. # BANNER SET
3580. 
3581. # DATE TIME RUN ELP
3582. 
3583. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
3584. /* Xinclude "..\Display\BannerSet.MyDc"X */
3585. /* pause(1) */
3586. 
3587. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3588. 
3589. Title('!Heading!')
3590. /* pause(1) */
3591. 
3592. /* NOTE: Can't round or truncate to integer precision. */
3593. 
3594. AppendLogfile("!LogFileName!", "!Title!")
3595. 
3596. 
3597. 
3598. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
3599. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
3600. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:17")
3601. 
3602. SetVariable(ZoneListByLine, "!ZoneListByLine!
3603. Zone: !ZoneNoCurrent! 2021-11-09 08:17:17 0:00:05 !ZoneLabel! !ZoneDescription!")
3604. 
3605. 
3606. /* Fixed Zone Position Handling */
3607. /* Literal number: */
3608. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
3609. /* Percentage of disk: */
3610. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
3611. /* Gap */
3612. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
3613. 
3614. /* ---------------------------------------------------------- */
3615. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
3616. # FILE STEP
3617. 
3618. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
3619. 
3620. /* add message and move to a new line. */
3621. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
3622. ")
3623. 
3624. /* display the line. (hopefully.) */
3625. # Zone Footer Set Statistics Window Text
3626. 
3627. SetStatisticsWindowText("----------------------------------------------------------
3628. Zones Processed: 
3629. ----------------------------------------------------------
3630. !ZoneListByLine!
3631. ----------------------------------------------------------
3632. Zone Processing Step:
3633. !ZoneStepByLine!    
3634. ----------------------------------------------------------
3635. Current Zone:
3636. !ZoneFooter!
3637. ----------------------------------------------------------
3638. Volume Statistics:
3639. !VolumeStatisticsDetail!
3640. ----------------------------------------------------------
3641. Zone Detailed Report:
3642. ----------------------------------------------------------
3643. !ZoneStatisticsDetail!
3644. ----------------------------------------------------------
3645. ")
3646. 
3647. 
3648. 
3649. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
3650. 
3651. # BANNER SET
3652. 
3653. # DATE TIME RUN ELP
3654. 
3655. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
3656. /* Xinclude "..\Display\BannerSet.MyDc"X */
3657. /* pause(1) */
3658. 
3659. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3660. 
3661. Title('!Heading!')
3662. /* pause(1) */
3663. 
3664. /* NOTE: Can't round or truncate to integer precision. */
3665. 
3666. pause(1)
3667. 
3668. # your stuff HERE (X)... pre file select code.
3669. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
3670. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
3671. 	# (X)
3672. 
3673. FileSelect
3674. 
3675. 	# your stuff can't really go here (errors.)
3676. 	# maybe for some reason I don't know of...
3677. 	
3678. 	# Actions next...
3679. 		# Boot start.
3680. ImportListFromBootOptimize()
3681. # Boot end.
3682. 
3683. 		and not(
3684. 			# Os PageHiberDump start.
3685. (
3686.   FileName("DataStore.edb")
3687.   or FileName("DUMP*.*")
3688.   or FileName("Hiberfil.sys")
3689.   or FileName("MEMORY.DMP")
3690.   or FileName("Pagefile.sys")
3691. )
3692. # Os PageHiberDump end.
3693. 
3694. 		)
3695. 		FileActions
3696. 		  		/* ---------------------------------------------------------- */
3697. 	# Gap
3698. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
3699. 		# FILE STEP
3700. 
3701. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
3702. 
3703. /* add message and move to a new line. */
3704. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
3705. ")
3706. 
3707. /* display the line. (hopefully.) */
3708. # Zone Footer Set Statistics Window Text
3709. 
3710. SetStatisticsWindowText("----------------------------------------------------------
3711. Zones Processed: 
3712. ----------------------------------------------------------
3713. !ZoneListByLine!
3714. ----------------------------------------------------------
3715. Zone Processing Step:
3716. !ZoneStepByLine!    
3717. ----------------------------------------------------------
3718. Current Zone:
3719. !ZoneFooter!
3720. ----------------------------------------------------------
3721. Volume Statistics:
3722. !VolumeStatisticsDetail!
3723. ----------------------------------------------------------
3724. Zone Detailed Report:
3725. ----------------------------------------------------------
3726. !ZoneStatisticsDetail!
3727. ----------------------------------------------------------
3728. ")
3729. 
3730. 
3731. 
3732. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
3733. 
3734. # BANNER SET
3735. 
3736. # DATE TIME RUN ELP
3737. 
3738. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
3739. /* Xinclude "..\Display\BannerSet.MyDc"X */
3740. /* pause(1) */
3741. 
3742. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
3743. 
3744. Title('!Heading!')
3745. /* pause(1) */
3746. 
3747. /* NOTE: Can't round or truncate to integer precision. */
3748. 
3749. pause(1)
3750. 	
3751. 	# ACTUAL GAP
3752. 		/* AddGap Variant. */
3753. 	  	# Zone Do Gap
3754. # Gap Calculation Methods:
3755. 
3756. /* 1) Anything you need to add first. */
3757. /* empty */
3758. 
3759. /* ---------------------------------------------------------- */
3760. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
3761. 	# GapRequestedStd.
3762. 
3763. 		/* ---------------------------------------------------------- */
3764. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
3765. 
3766. 		# Gap Calculation Methods:
3767. 
3768. /* AddGap Variants */
3769. 
3770. 	/* Standard */
3771. 		# Gap Calculation Methods:
3772. 	/* AddGap Variants */
3773. 	/* Standard */
3774. 
3775. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
3776. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
3777. 
3778. 	SetVariable(GapRequested, GapRequestedStd)
3779. 	
3780. 
3781. 	/* MFT Low High Method */
3782. 		# Gap Calculation Methods:
3783. 	/* AddGap Variants */
3784. 	/* MFT Low High Method */
3785. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
3786. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
3787. 	SetVariable(GapRequested, GapRequestedMft)
3788. 	
3789. 
3790. 	/* OS Volume Type Method */
3791. 		# Gap Calculation Methods:
3792. 	/* AddGap Variants */
3793. 	/* OS Volume Type Method */
3794. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
3795. 	SetVariable(GapRequested, GapRequestedOs)
3796. 
3797. 
3798. 
3799. /* MakeGap Variants */
3800. 
3801. 	/* Original Os 1-3 + MFT 2 */
3802. 		# Gap Calculation Methods:
3803. 	/* MakeGap Variants */
3804. 	/* Original Os 1-3 + MFT 2 */
3805. 	/* plus MFT gap placed inline at the dividing zone. */
3806. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
3807. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
3808. 	SetVariable(GapRequested, GapRequestedOrig)
3809. 	
3810. 	
3811. /* Note: You could comment out the ones not in use */
3812. /* However having the data in the log is useful. */
3813. /* Therefore the following line is otherwise needed. */
3814. 
3815. /* Standard used */
3816. 
3817. SetVariable(GapRequested, GapRequestedStd)
3818. 
3819. # Gap Calculation Methods:
3820. 
3821. /* AddGap Variants */
3822. 	/* Standard */
3823. 	/* MFT Low High Method */
3824. 	/* OS Volume Type Method */
3825. 
3826. /* MakeGap Variants */
3827. 	/* Original Os 1-3 + MFT 2 */
3828. 
3829. /* Note: You could comment out the ones not in use */
3830. /* However having the data in the log is useful. */
3831. /* Therefore the following line is otherwise needed. */
3832. 
3833. /* Standard is used currently */
3834. 
3835. 
3836. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
3837. 
3838. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
3839. 
3840. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
3841. 
3842. /* ---------------------------------------------------------- */
3843. /* 3) SMALL ZONE ADJUSTMENT. */
3844. /* Gab cant be larger than half the Zone Size. */
3845. 
3846. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
3847. 	
3848. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
3849. 
3850. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
3851. 
3852. /* ---------------------------------------------------------- */
3853. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
3854. # Gap Adjustments.
3855. 
3856. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
3857. 	
3858. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
3859. 
3860. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
3861. 
3862. /* ---------------------------------------------------------- */
3863. # BYPASS THIS.
3864. 	/* This is definitely wrong. */
3865. 	/* The question is can we steal gap from the next zone */
3866. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
3867. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
3868. 		# Zone Overflow.
3869. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
3870. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
3871. 
3872. /* ---------------------------------------------------------- */
3873. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
3874. # Remaining free space available.
3875. 
3876. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
3877. 	
3878. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
3879. 
3880. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
3881. 
3882. /* ---------------------------------------------------------- */
3883. # CURRENT gap to use.
3884. 
3885. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
3886. 
3887. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
3888. 
3889. /* ---------------------------------------------------------- */
3890. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
3891. # Debugging.
3892. 
3893. 	SetVariable(GapUsed, GapCurrent) // for debugging
3894. 
3895. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
3896. 
3897. 		# Your code HERE
3898. 
3899. /* ---------------------------------------------------------- */
3900. /* 7) YOUR CODE. */
3901. # YOUR CODE HERE:
3902. 	# INPUT: GapCurrent or GapCurrentLoc
3903. 	# OUTPUT: GapUsed...
3904. 
3905. /* ---------------------------------------------------------- */
3906. # Gap Size.
3907. # Actual Size of Gap.
3908. 
3909. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
3910. 
3911. /* ---------------------------------------------------------- */
3912. /* xxxxxxxxxxxxxxxxxxxxxx */
3913. # ADD THE GAP
3914. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
3915. /* xxxxxxxxxxxxxxxxxxxxxx */
3916. 
3917. 	
3918. 	# Zone Statistics	
3919. 	# Zone / Volume Statistics and Display
3920. 		
3921. 	# Accumulate Totals
3922.   	# Volume totals
3923. 
3924. /* Current total space used (by Zones and Gaps) */
3925. 
3926. SetVariable(VolumeZoneUsed, GapUsed)
3927. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
3928. /* Percentage */
3929. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
3930. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
3931. 
3932. /* Current total of free space requested */
3933. 
3934. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
3935. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
3936. /* Percent. */
3937. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
3938. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
3939. 
3940. /* Current total of free space used */
3941. 
3942. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
3943. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
3944. /* Percent */
3945. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
3946. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
3947. 
3948. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
3949. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
3950. /* Xinclude "..\DebugDisplayPause.MyDc"X */
3951. 
3952. 
3953. 	# Current Values
3954. 	# Cluster, Sector, Block adjust for display.
3955. 	# Bytes per cluster is volume specific.
3956. 
3957. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
3958. 
3959. # Current Zone values.
3960. 	# Begin, end and size.
3961. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
3962. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
3963. 
3964. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
3965. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
3966. 
3967. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
3968. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
3969. 
3970. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
3971. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
3972. 
3973. 	SetVariable(ZoneFragments,				"!ZONE210N!")
3974. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
3975. 		
3976. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
3977. /* identical code to here: (separation not needed. TEST.) */	
3978. 
3979. # Current Gap, Actual and Free Values
3980. 	# Gap
3981. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
3982. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
3983. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
3984. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
3985. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
3986. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
3987. 	
3988. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
3989. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
3990. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
3991. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
3992. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
3993. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
3994. 	
3995. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
3996. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
3997. 	
3998. 	# Actual Size and End
3999. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
4000. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
4001. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
4002. 	
4003. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
4004. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
4005. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
4006. 
4007. # Gap Size & Rounding
4008. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
4009. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
4010. 	
4011. 	# Free Space
4012. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
4013. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
4014. 
4015. 	# Footer:
4016. SetVariable(ZoneFooter, "----------------------------------------------------------
4017. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
4018. 
4019. Statistics Report:
4020. ------------------
4021.    Size:  
4022.    ------------------------
4023.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
4024.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
4025.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
4026. 
4027.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
4028.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
4029. 
4030.    Location:
4031.    ------------------------
4032.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
4033.              Files End: !ZoneEndCurrent!
4034.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
4035.       
4036.    Gap Settings:
4037.    ------------------------
4038.          Gap Requested: !ZoneGapSizePer!%
4039.       Volume Rounding: !ZoneVolRoundUpPer!%
4040.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
4041.                  
4042.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
4043.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
4044.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
4045.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
4046.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
4047.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
4048.      
4049.    Free Space after Zone:
4050.    ------------------------
4051.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
4052.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
4053.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
4054. 
4055. Directory and Files Select:
4056. ---------------------------
4057. !ZoneTypeSelectCurrent!               
4058. ---------------------------
4059. ----------------------------------------------------------
4060. ")
4061. 	# Zone Footer Set Statistics Window Text
4062. 
4063. SetStatisticsWindowText("----------------------------------------------------------
4064. Zones Processed: 
4065. ----------------------------------------------------------
4066. !ZoneListByLine!
4067. ----------------------------------------------------------
4068. Zone Processing Step:
4069. !ZoneStepByLine!    
4070. ----------------------------------------------------------
4071. Current Zone:
4072. !ZoneFooter!
4073. ----------------------------------------------------------
4074. Volume Statistics:
4075. !VolumeStatisticsDetail!
4076. ----------------------------------------------------------
4077. Zone Detailed Report:
4078. ----------------------------------------------------------
4079. !ZoneStatisticsDetail!
4080. ----------------------------------------------------------
4081. ")
4082. 
4083. 
4084. 	
4085.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
4086. 
4087. 	# Add Zone to list of zones for display.
4088. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
4089. 	# ??? Free Stats?
4090. 	# Footer:
4091. SetVariable(ZoneFooter, "----------------------------------------------------------
4092. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
4093. 
4094. Statistics Report:
4095. ------------------
4096.    Size:  
4097.    ------------------------
4098.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
4099.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
4100.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
4101. 
4102.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
4103.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
4104. 
4105.    Location:
4106.    ------------------------
4107.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
4108.              Files End: !ZoneEndCurrent!
4109.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
4110.       
4111.    Gap Settings:
4112.    ------------------------
4113.          Gap Requested: !ZoneGapSizePer!%
4114.       Volume Rounding: !ZoneVolRoundUpPer!%
4115.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
4116.                  
4117.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
4118.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
4119.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
4120.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
4121.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
4122.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
4123.      
4124.    Free Space after Zone:
4125.    ------------------------
4126.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
4127.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
4128.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
4129. 
4130. Directory and Files Select:
4131. ---------------------------
4132. !ZoneTypeSelectCurrent!               
4133. ---------------------------
4134. ----------------------------------------------------------
4135. ")
4136. 
4137. 	# Add Zone Details to Report.	
4138. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
4139. !ZoneFooter!")
4140. 
4141. 
4142. 	
4143. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
4144. 			# FILE STEP
4145. 
4146. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
4147. 
4148. /* add message and move to a new line. */
4149. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
4150. ")
4151. 
4152. /* display the line. (hopefully.) */
4153. # Zone Footer Set Statistics Window Text
4154. 
4155. SetStatisticsWindowText("----------------------------------------------------------
4156. Zones Processed: 
4157. ----------------------------------------------------------
4158. !ZoneListByLine!
4159. ----------------------------------------------------------
4160. Zone Processing Step:
4161. !ZoneStepByLine!    
4162. ----------------------------------------------------------
4163. Current Zone:
4164. !ZoneFooter!
4165. ----------------------------------------------------------
4166. Volume Statistics:
4167. !VolumeStatisticsDetail!
4168. ----------------------------------------------------------
4169. Zone Detailed Report:
4170. ----------------------------------------------------------
4171. !ZoneStatisticsDetail!
4172. ----------------------------------------------------------
4173. ")
4174. 
4175. 
4176. 
4177. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
4178. 
4179. # BANNER SET
4180. 
4181. # DATE TIME RUN ELP
4182. 
4183. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4184. /* Xinclude "..\Display\BannerSet.MyDc"X */
4185. /* pause(1) */
4186. 
4187. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4188. 
4189. Title('!Heading!')
4190. /* pause(1) */
4191. 
4192. /* NOTE: Can't round or truncate to integer precision. */
4193. 
4194. pause(1)
4195. 
4196. 			# File Action - SortByImportSequence.
4197. SortByImportSequence(Ascending ) 
4198. 	
4199. 	
4200. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
4201. 			# FILE STEP
4202. 
4203. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
4204. 
4205. /* add message and move to a new line. */
4206. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
4207. ")
4208. 
4209. /* display the line. (hopefully.) */
4210. # Zone Footer Set Statistics Window Text
4211. 
4212. SetStatisticsWindowText("----------------------------------------------------------
4213. Zones Processed: 
4214. ----------------------------------------------------------
4215. !ZoneListByLine!
4216. ----------------------------------------------------------
4217. Zone Processing Step:
4218. !ZoneStepByLine!    
4219. ----------------------------------------------------------
4220. Current Zone:
4221. !ZoneFooter!
4222. ----------------------------------------------------------
4223. Volume Statistics:
4224. !VolumeStatisticsDetail!
4225. ----------------------------------------------------------
4226. Zone Detailed Report:
4227. ----------------------------------------------------------
4228. !ZoneStatisticsDetail!
4229. ----------------------------------------------------------
4230. ")
4231. 
4232. 
4233. 
4234. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
4235. 
4236. # BANNER SET
4237. 
4238. # DATE TIME RUN ELP
4239. 
4240. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4241. /* Xinclude "..\Display\BannerSet.MyDc"X */
4242. /* pause(1) */
4243. 
4244. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4245. 
4246. Title('!Heading!')
4247. /* pause(1) */
4248. 
4249. /* NOTE: Can't round or truncate to integer precision. */
4250. 
4251. pause(1)
4252. 
4253. 		# Zone Do Footer
4254. 
4255. /* ---------------------------------------------------------- */
4256. # File Select
4257. 	# Select Statments
4258. # File Actions 
4259. 	# Standard or OS File Actions.
4260. 	# Resume...
4261. 	
4262. 	# your stuff HERE (X)... post zone (file) file actions code.
4263. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
4264. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
4265. 		# (X)
4266. 		
4267. 		/* ??? Set window? */
4268. 	
4269. 	# ADD THE GAP
4270. 		
4271. # Vacate (good for diagnostics)
4272. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
4273. 
4274. # DoNotVacate - DO NOT Vacate (recommended)
4275. 
4276. # Vacate
4277. /* AddGap(GapUsedLoc) */
4278. 
4279. # DO Not Vacate
4280. AddGap(GapUsedLoc, DoNotVacate) 
4281. 	
4282. 	
4283. /* ---------------------------------------------------------- */
4284. # (failed) TEST for boolean logic.
4285. 
4286. /* It should work in the gap calculations for turning options */
4287. /* on and off but it will NOT work here. */
4288. 
4289. /* Boolean setting X or FlagX. */
4290. /* Where X will be on or off: */
4291. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
4292. /*      For ON:  (X  *  FlagAny) */
4293. 
4294. /* 1) Failed, zero gap overrode the previous one. */
4295. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
4296. /* AddGap(GapUsedTemp) */ 
4297. 
4298. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
4299. /* AddGap(GapUsedTemp, DoNotVacate) */ 
4300. 
4301. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
4302. 
4303. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
4304. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
4305. /* AddGap(GapUsedTemp) */ 
4306. 
4307. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
4308. /* AddGap(GapUsedTemp, DoNotVacate) */ 
4309. 
4310. /* ---------------------------------------------------------- */
4311. 
4312. # Vacate
4313. /* AddGap(GapUsed) */
4314. 
4315. # DO NOT Vacate (recommended)
4316. /* AddGap(GapUsed, DoNotVacate) */ 
4317. 	
4318. 
4319. 		
4320. # 
4321. FileEnd
4322. /* ---------------------------------------------------------- */
4323. 
4324. # your stuff HERE (X)... post zone (file) code.
4325. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
4326. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
4327. 	# (X)
4328. 
4329. SetVariable(FileStepDescription,"Zone finished, reporting.")
4330. # FILE STEP
4331. 
4332. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
4333. 
4334. /* add message and move to a new line. */
4335. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
4336. ")
4337. 
4338. /* display the line. (hopefully.) */
4339. # Zone Footer Set Statistics Window Text
4340. 
4341. SetStatisticsWindowText("----------------------------------------------------------
4342. Zones Processed: 
4343. ----------------------------------------------------------
4344. !ZoneListByLine!
4345. ----------------------------------------------------------
4346. Zone Processing Step:
4347. !ZoneStepByLine!    
4348. ----------------------------------------------------------
4349. Current Zone:
4350. !ZoneFooter!
4351. ----------------------------------------------------------
4352. Volume Statistics:
4353. !VolumeStatisticsDetail!
4354. ----------------------------------------------------------
4355. Zone Detailed Report:
4356. ----------------------------------------------------------
4357. !ZoneStatisticsDetail!
4358. ----------------------------------------------------------
4359. ")
4360. 
4361. 
4362. 
4363. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
4364. 
4365. # BANNER SET
4366. 
4367. # DATE TIME RUN ELP
4368. 
4369. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4370. /* Xinclude "..\Display\BannerSet.MyDc"X */
4371. /* pause(1) */
4372. 
4373. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4374. 
4375. Title('!Heading!')
4376. /* pause(1) */
4377. 
4378. /* NOTE: Can't round or truncate to integer precision. */
4379. 
4380. pause(1)
4381. 
4382. # Zone When Finished
4383. 
4384. # BANNER SET
4385. 
4386. # DATE TIME RUN ELP
4387. 
4388. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4389. /* Xinclude "..\Display\BannerSet.MyDc"X */
4390. /* pause(1) */
4391. 
4392. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4393. 
4394. Title('!Heading!')
4395. /* pause(1) */
4396. 
4397. /* NOTE: Can't round or truncate to integer precision. */
4398. 
4399. AppendLogfile("!LogFileName!", "!Title!")
4400. 
4401. 
4402. 
4403. # Zone Statistics	
4404. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
4405. 
4406. # Footer:
4407. SetVariable(ZoneFooter, "----------------------------------------------------------
4408. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
4409. 
4410. Statistics Report:
4411. ------------------
4412.    Size:  
4413.    ------------------------
4414.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
4415.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
4416.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
4417. 
4418.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
4419.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
4420. 
4421.    Location:
4422.    ------------------------
4423.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
4424.              Files End: !ZoneEndCurrent!
4425.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
4426.       
4427.    Gap Settings:
4428.    ------------------------
4429.          Gap Requested: !ZoneGapSizePer!%
4430.       Volume Rounding: !ZoneVolRoundUpPer!%
4431.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
4432.                  
4433.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
4434.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
4435.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
4436.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
4437.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
4438.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
4439.      
4440.    Free Space after Zone:
4441.    ------------------------
4442.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
4443.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
4444.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
4445. 
4446. Directory and Files Select:
4447. ---------------------------
4448. !ZoneTypeSelectCurrent!               
4449. ---------------------------
4450. ----------------------------------------------------------
4451. ")
4452. 
4453. AppendLogfile("!LogFileName!", ".")
4454. AppendLogfile("!LogFileName!", "!ZoneFooter!")
4455. AppendLogfile("!LogFileName!", ".")
4456. 
4457. # Zone Footer Set Statistics Window Text
4458. 
4459. SetStatisticsWindowText("----------------------------------------------------------
4460. Zones Processed: 
4461. ----------------------------------------------------------
4462. !ZoneListByLine!
4463. ----------------------------------------------------------
4464. Zone Processing Step:
4465. !ZoneStepByLine!    
4466. ----------------------------------------------------------
4467. Current Zone:
4468. !ZoneFooter!
4469. ----------------------------------------------------------
4470. Volume Statistics:
4471. !VolumeStatisticsDetail!
4472. ----------------------------------------------------------
4473. Zone Detailed Report:
4474. ----------------------------------------------------------
4475. !ZoneStatisticsDetail!
4476. ----------------------------------------------------------
4477. ")
4478. 
4479. 
4480. 
4481. /* pause() */
4482. /* pause() */
4483. 
4484. 
4485. 
4486. 
4487. /* ---------------------------------------------------------- */
4488. 
4489. 
4490. /* ---------------------------------------------------------- */
4491. # Zone ProgramHints Fixed.
4492. /* ---------------------------------------------------------- */
4493. # Zone ProgramHints Fixed.
4494. 	SetVariable(ZoneLabel, 			"!ZoneLabelProgramHints!")
4495. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionProgramHints!")
4496. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpProgramHints!")
4497. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizeProgramHint!")
4498. 	SetVariable(ZoneTypeSelect,'# ProgramHints start.
4499. ImportListFromProgramHints("*.pf")
4500. # ProgramHints end.
4501. ')
4502. 
4503. 		# Zone Do Header
4504. 
4505. # Zone When Started
4506. 
4507. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
4508. # Display Set Zone
4509. 
4510. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
4511. SetVariable(FileStepDescription,	"")
4512. 
4513. SetVariable(ZoneStepByLine, 			"Zone started.
4514. ")
4515. 
4516. # BANNER SET
4517. 
4518. # DATE TIME RUN ELP
4519. 
4520. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4521. /* Xinclude "..\Display\BannerSet.MyDc"X */
4522. /* pause(1) */
4523. 
4524. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4525. 
4526. Title('!Heading!')
4527. /* pause(1) */
4528. 
4529. /* NOTE: Can't round or truncate to integer precision. */
4530. 
4531. AppendLogfile("!LogFileName!", "!Title!")
4532. 
4533. 
4534. 
4535. pause(1)
4536. 
4537. 
4538. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
4539. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
4540. 
4541. SetVariable(ZoneStepNoCurrent, 0)
4542. 
4543. 
4544. # Zone Do Current Clear
4545. 
4546. SetVariable(ZoneTypeSelectCurrent, 		"")
4547. 
4548. SetVariable(ZoneBeginCurrent, 			0)
4549. SetVariable(ZoneBeginPerCurrent, 		0)
4550. SetVariable(ZoneEndCurrent, 			0)
4551. SetVariable(ZoneEndPerCurrent, 			0)
4552. 
4553. SetVariable(ZoneSizeCurrent,			0)
4554. SetVariable(ZoneSizePerCurrent,			0)
4555. 
4556. SetVariable(ZoneGapRequestedCurrent,	0)
4557. SetVariable(ZoneGapRoundedCurrent, 		0)
4558. SetVariable(ZoneGapAdjustedCurrent, 	0)
4559. SetVariable(ZoneGapAvailableCurrent, 	0)
4560. SetVariable(ZoneGapCurrent,				0)
4561. SetVariable(ZoneGapUsedCurrent, 		0)
4562. 
4563. SetVariable(ZoneGapActualCurrent, 		0)
4564. SetVariable(ZoneGapActualPerCurrent, 	0)
4565. 
4566. SetVariable(ZoneSizeActual, 			0)
4567. SetVariable(ZoneSizeActualCurrent,		0)
4568. 
4569. SetVariable(ZoneEndActual, 				0)
4570. SetVariable(ZoneEndActualCurrent,		0)			
4571. SetVariable(ZoneSizeActualPerCurrent, 	0)
4572.       
4573. SetVariable(ZoneFilesFolders,			0)
4574. SetVariable(ZoneFilesFoldersPer,		0) 
4575. 
4576. SetVariable(ZoneFragments,				0)
4577. SetVariable(ZoneFragmentsPer,			0) 
4578. 		
4579. SetVariable(ZoneEndActualCurrent, 		0)
4580. SetVariable(ZoneEndActualPerCurrent, 	0)
4581. 
4582. # Gap Calculation Methodology:
4583. 	# Requested
4584. 	SetVariable(GapRequested, 			0) 
4585. 	SetVariable(GapRequestedStd, 		0) 
4586. 	SetVariable(GapRequestedMft, 		0) 
4587. 	SetVariable(GapRequestedOs, 		0) 
4588. 	SetVariable(GapRequestedOriginal, 	0) 
4589. 	
4590. 	# Gap Adjustments
4591. 	SetVariable(GapRounded, 			0)
4592. 	# SetVariable(GapAdjusted, 			0)
4593. 	SetVariable(GapAvailable, 			0)
4594. 	SetVariable(GapCurrent, 			0)
4595. 	SetVariable(GapActual, 				0)
4596. 	SetVariable(GapUsed, 				0)
4597. 	
4598. 	# Gap Adjustments
4599. 	SetVariable(GapRoundedLoc, 			0)
4600. 	# SetVariable(GapAdjustedLoc, 		0)
4601. 	SetVariable(GapAvailableLoc, 		0)
4602. 	SetVariable(GapCurrentLoc, 			0)
4603. 	SetVariable(GapActualLoc,			0)
4604. 	SetVariable(GapUsedLoc,				0)
4605. 	
4606. 	# Space usage
4607. 	SetVariable(ZoneFreePerRequested, 	0)
4608. 	SetVariable(ZoneFreePerUsed, 		0)
4609. 
4610. # Gap Size & Rounding
4611. 	SetVariable(ZoneGapSizePer, 		0)
4612. 	SetVariable(ZoneVolRoundUpPer, 		0)
4613. 	
4614. 	# Free Space
4615. 	SetVariable(ZoneFreeUsedPer, 		0)
4616. 	SetVariable(ZoneFreeRequestedPer, 	0)
4617. 
4618. 
4619. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
4620. 
4621. # Footer:
4622. SetVariable(ZoneFooter, "----------------------------------------------------------
4623. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
4624. 
4625. Statistics Report:
4626. ------------------
4627.    Size:  
4628.    ------------------------
4629.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
4630.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
4631.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
4632. 
4633.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
4634.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
4635. 
4636.    Location:
4637.    ------------------------
4638.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
4639.              Files End: !ZoneEndCurrent!
4640.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
4641.       
4642.    Gap Settings:
4643.    ------------------------
4644.          Gap Requested: !ZoneGapSizePer!%
4645.       Volume Rounding: !ZoneVolRoundUpPer!%
4646.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
4647.                  
4648.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
4649.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
4650.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
4651.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
4652.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
4653.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
4654.      
4655.    Free Space after Zone:
4656.    ------------------------
4657.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
4658.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
4659.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
4660. 
4661. Directory and Files Select:
4662. ---------------------------
4663. !ZoneTypeSelectCurrent!               
4664. ---------------------------
4665. ----------------------------------------------------------
4666. ")
4667. 
4668. # BANNER SET
4669. 
4670. # DATE TIME RUN ELP
4671. 
4672. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4673. /* Xinclude "..\Display\BannerSet.MyDc"X */
4674. /* pause(1) */
4675. 
4676. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4677. 
4678. Title('!Heading!')
4679. /* pause(1) */
4680. 
4681. /* NOTE: Can't round or truncate to integer precision. */
4682. 
4683. AppendLogfile("!LogFileName!", "!Title!")
4684. 
4685. 
4686. 
4687. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
4688. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
4689. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:17")
4690. 
4691. SetVariable(ZoneListByLine, "!ZoneListByLine!
4692. Zone: !ZoneNoCurrent! 2021-11-09 08:17:17 0:00:05 !ZoneLabel! !ZoneDescription!")
4693. 
4694. 
4695. /* Fixed Zone Position Handling */
4696. /* Literal number: */
4697. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
4698. /* Percentage of disk: */
4699. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
4700. /* Gap */
4701. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
4702. 
4703. /* ---------------------------------------------------------- */
4704. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
4705. # FILE STEP
4706. 
4707. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
4708. 
4709. /* add message and move to a new line. */
4710. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
4711. ")
4712. 
4713. /* display the line. (hopefully.) */
4714. # Zone Footer Set Statistics Window Text
4715. 
4716. SetStatisticsWindowText("----------------------------------------------------------
4717. Zones Processed: 
4718. ----------------------------------------------------------
4719. !ZoneListByLine!
4720. ----------------------------------------------------------
4721. Zone Processing Step:
4722. !ZoneStepByLine!    
4723. ----------------------------------------------------------
4724. Current Zone:
4725. !ZoneFooter!
4726. ----------------------------------------------------------
4727. Volume Statistics:
4728. !VolumeStatisticsDetail!
4729. ----------------------------------------------------------
4730. Zone Detailed Report:
4731. ----------------------------------------------------------
4732. !ZoneStatisticsDetail!
4733. ----------------------------------------------------------
4734. ")
4735. 
4736. 
4737. 
4738. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
4739. 
4740. # BANNER SET
4741. 
4742. # DATE TIME RUN ELP
4743. 
4744. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4745. /* Xinclude "..\Display\BannerSet.MyDc"X */
4746. /* pause(1) */
4747. 
4748. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4749. 
4750. Title('!Heading!')
4751. /* pause(1) */
4752. 
4753. /* NOTE: Can't round or truncate to integer precision. */
4754. 
4755. pause(1)
4756. 
4757. # your stuff HERE (X)... pre file select code.
4758. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
4759. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
4760. 	# (X)
4761. 
4762. FileSelect
4763. 
4764. 	# your stuff can't really go here (errors.)
4765. 	# maybe for some reason I don't know of...
4766. 	
4767. 	# Actions next...
4768. 		# ProgramHints start.
4769. ImportListFromProgramHints("*.pf")
4770. # ProgramHints end.
4771. 
4772. 		and not(
4773. 			# Os Data Dynamic start.
4774. (
4775. # Os Data Dynamic start.
4776. (
4777.   FileName("*.dat*")
4778.   or FileName("*.db*")
4779.   or FileName("*.edb*")
4780.   or FileName("*.log*")
4781.   or FileName("DataStore.edb")
4782. )
4783. # Os Data Dynamic end.
4784. 
4785.   or 
4786. # Os PageHiberDump start.
4787. (
4788.   FileName("DataStore.edb")
4789.   or FileName("DUMP*.*")
4790.   or FileName("Hiberfil.sys")
4791.   or FileName("MEMORY.DMP")
4792.   or FileName("Pagefile.sys")
4793. )
4794. # Os PageHiberDump end.
4795. 
4796. # Os Data Dynamic
4797. )
4798. # Os Data Dynamic end.
4799. 
4800. 		)
4801. 		FileActions
4802. 		  		/* ---------------------------------------------------------- */
4803. 	# Gap
4804. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
4805. 		# FILE STEP
4806. 
4807. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
4808. 
4809. /* add message and move to a new line. */
4810. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
4811. ")
4812. 
4813. /* display the line. (hopefully.) */
4814. # Zone Footer Set Statistics Window Text
4815. 
4816. SetStatisticsWindowText("----------------------------------------------------------
4817. Zones Processed: 
4818. ----------------------------------------------------------
4819. !ZoneListByLine!
4820. ----------------------------------------------------------
4821. Zone Processing Step:
4822. !ZoneStepByLine!    
4823. ----------------------------------------------------------
4824. Current Zone:
4825. !ZoneFooter!
4826. ----------------------------------------------------------
4827. Volume Statistics:
4828. !VolumeStatisticsDetail!
4829. ----------------------------------------------------------
4830. Zone Detailed Report:
4831. ----------------------------------------------------------
4832. !ZoneStatisticsDetail!
4833. ----------------------------------------------------------
4834. ")
4835. 
4836. 
4837. 
4838. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
4839. 
4840. # BANNER SET
4841. 
4842. # DATE TIME RUN ELP
4843. 
4844. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
4845. /* Xinclude "..\Display\BannerSet.MyDc"X */
4846. /* pause(1) */
4847. 
4848. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
4849. 
4850. Title('!Heading!')
4851. /* pause(1) */
4852. 
4853. /* NOTE: Can't round or truncate to integer precision. */
4854. 
4855. pause(1)
4856. 	
4857. 	# ACTUAL GAP
4858. 		/* AddGap Variant. */
4859. 	  	# Zone Do Gap
4860. # Gap Calculation Methods:
4861. 
4862. /* 1) Anything you need to add first. */
4863. /* empty */
4864. 
4865. /* ---------------------------------------------------------- */
4866. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
4867. 	# GapRequestedStd.
4868. 
4869. 		/* ---------------------------------------------------------- */
4870. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
4871. 
4872. 		# Gap Calculation Methods:
4873. 
4874. /* AddGap Variants */
4875. 
4876. 	/* Standard */
4877. 		# Gap Calculation Methods:
4878. 	/* AddGap Variants */
4879. 	/* Standard */
4880. 
4881. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
4882. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
4883. 
4884. 	SetVariable(GapRequested, GapRequestedStd)
4885. 	
4886. 
4887. 	/* MFT Low High Method */
4888. 		# Gap Calculation Methods:
4889. 	/* AddGap Variants */
4890. 	/* MFT Low High Method */
4891. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
4892. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
4893. 	SetVariable(GapRequested, GapRequestedMft)
4894. 	
4895. 
4896. 	/* OS Volume Type Method */
4897. 		# Gap Calculation Methods:
4898. 	/* AddGap Variants */
4899. 	/* OS Volume Type Method */
4900. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
4901. 	SetVariable(GapRequested, GapRequestedOs)
4902. 
4903. 
4904. 
4905. /* MakeGap Variants */
4906. 
4907. 	/* Original Os 1-3 + MFT 2 */
4908. 		# Gap Calculation Methods:
4909. 	/* MakeGap Variants */
4910. 	/* Original Os 1-3 + MFT 2 */
4911. 	/* plus MFT gap placed inline at the dividing zone. */
4912. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
4913. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
4914. 	SetVariable(GapRequested, GapRequestedOrig)
4915. 	
4916. 	
4917. /* Note: You could comment out the ones not in use */
4918. /* However having the data in the log is useful. */
4919. /* Therefore the following line is otherwise needed. */
4920. 
4921. /* Standard used */
4922. 
4923. SetVariable(GapRequested, GapRequestedStd)
4924. 
4925. # Gap Calculation Methods:
4926. 
4927. /* AddGap Variants */
4928. 	/* Standard */
4929. 	/* MFT Low High Method */
4930. 	/* OS Volume Type Method */
4931. 
4932. /* MakeGap Variants */
4933. 	/* Original Os 1-3 + MFT 2 */
4934. 
4935. /* Note: You could comment out the ones not in use */
4936. /* However having the data in the log is useful. */
4937. /* Therefore the following line is otherwise needed. */
4938. 
4939. /* Standard is used currently */
4940. 
4941. 
4942. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
4943. 
4944. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
4945. 
4946. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
4947. 
4948. /* ---------------------------------------------------------- */
4949. /* 3) SMALL ZONE ADJUSTMENT. */
4950. /* Gab cant be larger than half the Zone Size. */
4951. 
4952. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
4953. 	
4954. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
4955. 
4956. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
4957. 
4958. /* ---------------------------------------------------------- */
4959. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
4960. # Gap Adjustments.
4961. 
4962. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
4963. 	
4964. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
4965. 
4966. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
4967. 
4968. /* ---------------------------------------------------------- */
4969. # BYPASS THIS.
4970. 	/* This is definitely wrong. */
4971. 	/* The question is can we steal gap from the next zone */
4972. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
4973. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
4974. 		# Zone Overflow.
4975. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
4976. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
4977. 
4978. /* ---------------------------------------------------------- */
4979. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
4980. # Remaining free space available.
4981. 
4982. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
4983. 	
4984. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
4985. 
4986. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
4987. 
4988. /* ---------------------------------------------------------- */
4989. # CURRENT gap to use.
4990. 
4991. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
4992. 
4993. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
4994. 
4995. /* ---------------------------------------------------------- */
4996. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
4997. # Debugging.
4998. 
4999. 	SetVariable(GapUsed, GapCurrent) // for debugging
5000. 
5001. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
5002. 
5003. 		# Your code HERE
5004. 
5005. /* ---------------------------------------------------------- */
5006. /* 7) YOUR CODE. */
5007. # YOUR CODE HERE:
5008. 	# INPUT: GapCurrent or GapCurrentLoc
5009. 	# OUTPUT: GapUsed...
5010. 
5011. /* ---------------------------------------------------------- */
5012. # Gap Size.
5013. # Actual Size of Gap.
5014. 
5015. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
5016. 
5017. /* ---------------------------------------------------------- */
5018. /* xxxxxxxxxxxxxxxxxxxxxx */
5019. # ADD THE GAP
5020. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
5021. /* xxxxxxxxxxxxxxxxxxxxxx */
5022. 
5023. 	
5024. 	# Zone Statistics	
5025. 	# Zone / Volume Statistics and Display
5026. 		
5027. 	# Accumulate Totals
5028.   	# Volume totals
5029. 
5030. /* Current total space used (by Zones and Gaps) */
5031. 
5032. SetVariable(VolumeZoneUsed, GapUsed)
5033. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
5034. /* Percentage */
5035. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
5036. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
5037. 
5038. /* Current total of free space requested */
5039. 
5040. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
5041. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
5042. /* Percent. */
5043. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
5044. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
5045. 
5046. /* Current total of free space used */
5047. 
5048. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
5049. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
5050. /* Percent */
5051. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
5052. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
5053. 
5054. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
5055. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
5056. /* Xinclude "..\DebugDisplayPause.MyDc"X */
5057. 
5058. 
5059. 	# Current Values
5060. 	# Cluster, Sector, Block adjust for display.
5061. 	# Bytes per cluster is volume specific.
5062. 
5063. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
5064. 
5065. # Current Zone values.
5066. 	# Begin, end and size.
5067. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
5068. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
5069. 
5070. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
5071. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
5072. 
5073. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
5074. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
5075. 
5076. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
5077. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
5078. 
5079. 	SetVariable(ZoneFragments,				"!ZONE210N!")
5080. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
5081. 		
5082. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
5083. /* identical code to here: (separation not needed. TEST.) */	
5084. 
5085. # Current Gap, Actual and Free Values
5086. 	# Gap
5087. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
5088. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
5089. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
5090. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
5091. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
5092. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
5093. 	
5094. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
5095. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
5096. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
5097. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
5098. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
5099. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
5100. 	
5101. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
5102. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
5103. 	
5104. 	# Actual Size and End
5105. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
5106. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
5107. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
5108. 	
5109. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
5110. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
5111. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
5112. 
5113. # Gap Size & Rounding
5114. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
5115. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
5116. 	
5117. 	# Free Space
5118. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
5119. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
5120. 
5121. 	# Footer:
5122. SetVariable(ZoneFooter, "----------------------------------------------------------
5123. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
5124. 
5125. Statistics Report:
5126. ------------------
5127.    Size:  
5128.    ------------------------
5129.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
5130.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
5131.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
5132. 
5133.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
5134.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
5135. 
5136.    Location:
5137.    ------------------------
5138.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
5139.              Files End: !ZoneEndCurrent!
5140.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
5141.       
5142.    Gap Settings:
5143.    ------------------------
5144.          Gap Requested: !ZoneGapSizePer!%
5145.       Volume Rounding: !ZoneVolRoundUpPer!%
5146.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
5147.                  
5148.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
5149.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
5150.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
5151.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
5152.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
5153.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
5154.      
5155.    Free Space after Zone:
5156.    ------------------------
5157.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
5158.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
5159.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
5160. 
5161. Directory and Files Select:
5162. ---------------------------
5163. !ZoneTypeSelectCurrent!               
5164. ---------------------------
5165. ----------------------------------------------------------
5166. ")
5167. 	# Zone Footer Set Statistics Window Text
5168. 
5169. SetStatisticsWindowText("----------------------------------------------------------
5170. Zones Processed: 
5171. ----------------------------------------------------------
5172. !ZoneListByLine!
5173. ----------------------------------------------------------
5174. Zone Processing Step:
5175. !ZoneStepByLine!    
5176. ----------------------------------------------------------
5177. Current Zone:
5178. !ZoneFooter!
5179. ----------------------------------------------------------
5180. Volume Statistics:
5181. !VolumeStatisticsDetail!
5182. ----------------------------------------------------------
5183. Zone Detailed Report:
5184. ----------------------------------------------------------
5185. !ZoneStatisticsDetail!
5186. ----------------------------------------------------------
5187. ")
5188. 
5189. 
5190. 	
5191.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
5192. 
5193. 	# Add Zone to list of zones for display.
5194. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
5195. 	# ??? Free Stats?
5196. 	# Footer:
5197. SetVariable(ZoneFooter, "----------------------------------------------------------
5198. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
5199. 
5200. Statistics Report:
5201. ------------------
5202.    Size:  
5203.    ------------------------
5204.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
5205.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
5206.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
5207. 
5208.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
5209.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
5210. 
5211.    Location:
5212.    ------------------------
5213.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
5214.              Files End: !ZoneEndCurrent!
5215.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
5216.       
5217.    Gap Settings:
5218.    ------------------------
5219.          Gap Requested: !ZoneGapSizePer!%
5220.       Volume Rounding: !ZoneVolRoundUpPer!%
5221.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
5222.                  
5223.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
5224.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
5225.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
5226.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
5227.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
5228.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
5229.      
5230.    Free Space after Zone:
5231.    ------------------------
5232.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
5233.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
5234.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
5235. 
5236. Directory and Files Select:
5237. ---------------------------
5238. !ZoneTypeSelectCurrent!               
5239. ---------------------------
5240. ----------------------------------------------------------
5241. ")
5242. 
5243. 	# Add Zone Details to Report.	
5244. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
5245. !ZoneFooter!")
5246. 
5247. 
5248. 		
5249. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
5250. 			# FILE STEP
5251. 
5252. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
5253. 
5254. /* add message and move to a new line. */
5255. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
5256. ")
5257. 
5258. /* display the line. (hopefully.) */
5259. # Zone Footer Set Statistics Window Text
5260. 
5261. SetStatisticsWindowText("----------------------------------------------------------
5262. Zones Processed: 
5263. ----------------------------------------------------------
5264. !ZoneListByLine!
5265. ----------------------------------------------------------
5266. Zone Processing Step:
5267. !ZoneStepByLine!    
5268. ----------------------------------------------------------
5269. Current Zone:
5270. !ZoneFooter!
5271. ----------------------------------------------------------
5272. Volume Statistics:
5273. !VolumeStatisticsDetail!
5274. ----------------------------------------------------------
5275. Zone Detailed Report:
5276. ----------------------------------------------------------
5277. !ZoneStatisticsDetail!
5278. ----------------------------------------------------------
5279. ")
5280. 
5281. 
5282. 
5283. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
5284. 
5285. # BANNER SET
5286. 
5287. # DATE TIME RUN ELP
5288. 
5289. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5290. /* Xinclude "..\Display\BannerSet.MyDc"X */
5291. /* pause(1) */
5292. 
5293. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5294. 
5295. Title('!Heading!')
5296. /* pause(1) */
5297. 
5298. /* NOTE: Can't round or truncate to integer precision. */
5299. 
5300. pause(1)
5301. 	
5302. 			# File Action - Program Hints.
5303. # File Action - SortByImportSequence.
5304. SortByImportSequence(Ascending ) 
5305. 	
5306. 	
5307. 
5308. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
5309. 			# FILE STEP
5310. 
5311. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
5312. 
5313. /* add message and move to a new line. */
5314. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
5315. ")
5316. 
5317. /* display the line. (hopefully.) */
5318. # Zone Footer Set Statistics Window Text
5319. 
5320. SetStatisticsWindowText("----------------------------------------------------------
5321. Zones Processed: 
5322. ----------------------------------------------------------
5323. !ZoneListByLine!
5324. ----------------------------------------------------------
5325. Zone Processing Step:
5326. !ZoneStepByLine!    
5327. ----------------------------------------------------------
5328. Current Zone:
5329. !ZoneFooter!
5330. ----------------------------------------------------------
5331. Volume Statistics:
5332. !VolumeStatisticsDetail!
5333. ----------------------------------------------------------
5334. Zone Detailed Report:
5335. ----------------------------------------------------------
5336. !ZoneStatisticsDetail!
5337. ----------------------------------------------------------
5338. ")
5339. 
5340. 
5341. 
5342. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
5343. 
5344. # BANNER SET
5345. 
5346. # DATE TIME RUN ELP
5347. 
5348. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5349. /* Xinclude "..\Display\BannerSet.MyDc"X */
5350. /* pause(1) */
5351. 
5352. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5353. 
5354. Title('!Heading!')
5355. /* pause(1) */
5356. 
5357. /* NOTE: Can't round or truncate to integer precision. */
5358. 
5359. pause(1)
5360. 
5361. 		# Zone Do Footer
5362. 
5363. /* ---------------------------------------------------------- */
5364. # File Select
5365. 	# Select Statments
5366. # File Actions 
5367. 	# Standard or OS File Actions.
5368. 	# Resume...
5369. 	
5370. 	# your stuff HERE (X)... post zone (file) file actions code.
5371. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
5372. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
5373. 		# (X)
5374. 		
5375. 		/* ??? Set window? */
5376. 	
5377. 	# ADD THE GAP
5378. 		
5379. # Vacate (good for diagnostics)
5380. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
5381. 
5382. # DoNotVacate - DO NOT Vacate (recommended)
5383. 
5384. # Vacate
5385. /* AddGap(GapUsedLoc) */
5386. 
5387. # DO Not Vacate
5388. AddGap(GapUsedLoc, DoNotVacate) 
5389. 	
5390. 	
5391. /* ---------------------------------------------------------- */
5392. # (failed) TEST for boolean logic.
5393. 
5394. /* It should work in the gap calculations for turning options */
5395. /* on and off but it will NOT work here. */
5396. 
5397. /* Boolean setting X or FlagX. */
5398. /* Where X will be on or off: */
5399. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
5400. /*      For ON:  (X  *  FlagAny) */
5401. 
5402. /* 1) Failed, zero gap overrode the previous one. */
5403. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
5404. /* AddGap(GapUsedTemp) */ 
5405. 
5406. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
5407. /* AddGap(GapUsedTemp, DoNotVacate) */ 
5408. 
5409. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
5410. 
5411. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
5412. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
5413. /* AddGap(GapUsedTemp) */ 
5414. 
5415. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
5416. /* AddGap(GapUsedTemp, DoNotVacate) */ 
5417. 
5418. /* ---------------------------------------------------------- */
5419. 
5420. # Vacate
5421. /* AddGap(GapUsed) */
5422. 
5423. # DO NOT Vacate (recommended)
5424. /* AddGap(GapUsed, DoNotVacate) */ 
5425. 	
5426. 
5427. 		
5428. # 
5429. FileEnd
5430. /* ---------------------------------------------------------- */
5431. 
5432. # your stuff HERE (X)... post zone (file) code.
5433. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
5434. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
5435. 	# (X)
5436. 
5437. SetVariable(FileStepDescription,"Zone finished, reporting.")
5438. # FILE STEP
5439. 
5440. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
5441. 
5442. /* add message and move to a new line. */
5443. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
5444. ")
5445. 
5446. /* display the line. (hopefully.) */
5447. # Zone Footer Set Statistics Window Text
5448. 
5449. SetStatisticsWindowText("----------------------------------------------------------
5450. Zones Processed: 
5451. ----------------------------------------------------------
5452. !ZoneListByLine!
5453. ----------------------------------------------------------
5454. Zone Processing Step:
5455. !ZoneStepByLine!    
5456. ----------------------------------------------------------
5457. Current Zone:
5458. !ZoneFooter!
5459. ----------------------------------------------------------
5460. Volume Statistics:
5461. !VolumeStatisticsDetail!
5462. ----------------------------------------------------------
5463. Zone Detailed Report:
5464. ----------------------------------------------------------
5465. !ZoneStatisticsDetail!
5466. ----------------------------------------------------------
5467. ")
5468. 
5469. 
5470. 
5471. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
5472. 
5473. # BANNER SET
5474. 
5475. # DATE TIME RUN ELP
5476. 
5477. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5478. /* Xinclude "..\Display\BannerSet.MyDc"X */
5479. /* pause(1) */
5480. 
5481. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5482. 
5483. Title('!Heading!')
5484. /* pause(1) */
5485. 
5486. /* NOTE: Can't round or truncate to integer precision. */
5487. 
5488. pause(1)
5489. 
5490. # Zone When Finished
5491. 
5492. # BANNER SET
5493. 
5494. # DATE TIME RUN ELP
5495. 
5496. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5497. /* Xinclude "..\Display\BannerSet.MyDc"X */
5498. /* pause(1) */
5499. 
5500. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5501. 
5502. Title('!Heading!')
5503. /* pause(1) */
5504. 
5505. /* NOTE: Can't round or truncate to integer precision. */
5506. 
5507. AppendLogfile("!LogFileName!", "!Title!")
5508. 
5509. 
5510. 
5511. # Zone Statistics	
5512. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
5513. 
5514. # Footer:
5515. SetVariable(ZoneFooter, "----------------------------------------------------------
5516. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
5517. 
5518. Statistics Report:
5519. ------------------
5520.    Size:  
5521.    ------------------------
5522.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
5523.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
5524.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
5525. 
5526.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
5527.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
5528. 
5529.    Location:
5530.    ------------------------
5531.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
5532.              Files End: !ZoneEndCurrent!
5533.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
5534.       
5535.    Gap Settings:
5536.    ------------------------
5537.          Gap Requested: !ZoneGapSizePer!%
5538.       Volume Rounding: !ZoneVolRoundUpPer!%
5539.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
5540.                  
5541.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
5542.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
5543.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
5544.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
5545.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
5546.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
5547.      
5548.    Free Space after Zone:
5549.    ------------------------
5550.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
5551.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
5552.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
5553. 
5554. Directory and Files Select:
5555. ---------------------------
5556. !ZoneTypeSelectCurrent!               
5557. ---------------------------
5558. ----------------------------------------------------------
5559. ")
5560. 
5561. AppendLogfile("!LogFileName!", ".")
5562. AppendLogfile("!LogFileName!", "!ZoneFooter!")
5563. AppendLogfile("!LogFileName!", ".")
5564. 
5565. # Zone Footer Set Statistics Window Text
5566. 
5567. SetStatisticsWindowText("----------------------------------------------------------
5568. Zones Processed: 
5569. ----------------------------------------------------------
5570. !ZoneListByLine!
5571. ----------------------------------------------------------
5572. Zone Processing Step:
5573. !ZoneStepByLine!    
5574. ----------------------------------------------------------
5575. Current Zone:
5576. !ZoneFooter!
5577. ----------------------------------------------------------
5578. Volume Statistics:
5579. !VolumeStatisticsDetail!
5580. ----------------------------------------------------------
5581. Zone Detailed Report:
5582. ----------------------------------------------------------
5583. !ZoneStatisticsDetail!
5584. ----------------------------------------------------------
5585. ")
5586. 
5587. 
5588. 
5589. /* pause() */
5590. /* pause() */
5591. 
5592. 
5593. 
5594. 	
5595. /* ---------------------------------------------------------- */
5596. # Zone ProgramHints Data.
5597. 	SetVariable(ZoneLabel, 			"!ZoneLabelProgramHintsData!")
5598. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionProgramHintsData!")
5599. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpProgramHints!")
5600. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizeProgramHints!")
5601. 	SetVariable(ZoneTypeSelect,'
5602.                 # ProgramHints - Data files.
5603.                 not(
5604.                      # Os PageHiberDump start.
5605. (
5606.   FileName("DataStore.edb")
5607.   or FileName("DUMP*.*")
5608.   or FileName("Hiberfil.sys")
5609.   or FileName("MEMORY.DMP")
5610.   or FileName("Pagefile.sys")
5611. )
5612. # Os PageHiberDump end.
5613. 
5614.                 )
5615. ')
5616. 
5617. 
5618. 		# Zone Do Header
5619. 
5620. # Zone When Started
5621. 
5622. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
5623. # Display Set Zone
5624. 
5625. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
5626. SetVariable(FileStepDescription,	"")
5627. 
5628. SetVariable(ZoneStepByLine, 			"Zone started.
5629. ")
5630. 
5631. # BANNER SET
5632. 
5633. # DATE TIME RUN ELP
5634. 
5635. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5636. /* Xinclude "..\Display\BannerSet.MyDc"X */
5637. /* pause(1) */
5638. 
5639. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5640. 
5641. Title('!Heading!')
5642. /* pause(1) */
5643. 
5644. /* NOTE: Can't round or truncate to integer precision. */
5645. 
5646. AppendLogfile("!LogFileName!", "!Title!")
5647. 
5648. 
5649. 
5650. pause(1)
5651. 
5652. 
5653. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
5654. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
5655. 
5656. SetVariable(ZoneStepNoCurrent, 0)
5657. 
5658. 
5659. # Zone Do Current Clear
5660. 
5661. SetVariable(ZoneTypeSelectCurrent, 		"")
5662. 
5663. SetVariable(ZoneBeginCurrent, 			0)
5664. SetVariable(ZoneBeginPerCurrent, 		0)
5665. SetVariable(ZoneEndCurrent, 			0)
5666. SetVariable(ZoneEndPerCurrent, 			0)
5667. 
5668. SetVariable(ZoneSizeCurrent,			0)
5669. SetVariable(ZoneSizePerCurrent,			0)
5670. 
5671. SetVariable(ZoneGapRequestedCurrent,	0)
5672. SetVariable(ZoneGapRoundedCurrent, 		0)
5673. SetVariable(ZoneGapAdjustedCurrent, 	0)
5674. SetVariable(ZoneGapAvailableCurrent, 	0)
5675. SetVariable(ZoneGapCurrent,				0)
5676. SetVariable(ZoneGapUsedCurrent, 		0)
5677. 
5678. SetVariable(ZoneGapActualCurrent, 		0)
5679. SetVariable(ZoneGapActualPerCurrent, 	0)
5680. 
5681. SetVariable(ZoneSizeActual, 			0)
5682. SetVariable(ZoneSizeActualCurrent,		0)
5683. 
5684. SetVariable(ZoneEndActual, 				0)
5685. SetVariable(ZoneEndActualCurrent,		0)			
5686. SetVariable(ZoneSizeActualPerCurrent, 	0)
5687.       
5688. SetVariable(ZoneFilesFolders,			0)
5689. SetVariable(ZoneFilesFoldersPer,		0) 
5690. 
5691. SetVariable(ZoneFragments,				0)
5692. SetVariable(ZoneFragmentsPer,			0) 
5693. 		
5694. SetVariable(ZoneEndActualCurrent, 		0)
5695. SetVariable(ZoneEndActualPerCurrent, 	0)
5696. 
5697. # Gap Calculation Methodology:
5698. 	# Requested
5699. 	SetVariable(GapRequested, 			0) 
5700. 	SetVariable(GapRequestedStd, 		0) 
5701. 	SetVariable(GapRequestedMft, 		0) 
5702. 	SetVariable(GapRequestedOs, 		0) 
5703. 	SetVariable(GapRequestedOriginal, 	0) 
5704. 	
5705. 	# Gap Adjustments
5706. 	SetVariable(GapRounded, 			0)
5707. 	# SetVariable(GapAdjusted, 			0)
5708. 	SetVariable(GapAvailable, 			0)
5709. 	SetVariable(GapCurrent, 			0)
5710. 	SetVariable(GapActual, 				0)
5711. 	SetVariable(GapUsed, 				0)
5712. 	
5713. 	# Gap Adjustments
5714. 	SetVariable(GapRoundedLoc, 			0)
5715. 	# SetVariable(GapAdjustedLoc, 		0)
5716. 	SetVariable(GapAvailableLoc, 		0)
5717. 	SetVariable(GapCurrentLoc, 			0)
5718. 	SetVariable(GapActualLoc,			0)
5719. 	SetVariable(GapUsedLoc,				0)
5720. 	
5721. 	# Space usage
5722. 	SetVariable(ZoneFreePerRequested, 	0)
5723. 	SetVariable(ZoneFreePerUsed, 		0)
5724. 
5725. # Gap Size & Rounding
5726. 	SetVariable(ZoneGapSizePer, 		0)
5727. 	SetVariable(ZoneVolRoundUpPer, 		0)
5728. 	
5729. 	# Free Space
5730. 	SetVariable(ZoneFreeUsedPer, 		0)
5731. 	SetVariable(ZoneFreeRequestedPer, 	0)
5732. 
5733. 
5734. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
5735. 
5736. # Footer:
5737. SetVariable(ZoneFooter, "----------------------------------------------------------
5738. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
5739. 
5740. Statistics Report:
5741. ------------------
5742.    Size:  
5743.    ------------------------
5744.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
5745.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
5746.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
5747. 
5748.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
5749.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
5750. 
5751.    Location:
5752.    ------------------------
5753.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
5754.              Files End: !ZoneEndCurrent!
5755.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
5756.       
5757.    Gap Settings:
5758.    ------------------------
5759.          Gap Requested: !ZoneGapSizePer!%
5760.       Volume Rounding: !ZoneVolRoundUpPer!%
5761.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
5762.                  
5763.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
5764.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
5765.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
5766.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
5767.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
5768.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
5769.      
5770.    Free Space after Zone:
5771.    ------------------------
5772.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
5773.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
5774.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
5775. 
5776. Directory and Files Select:
5777. ---------------------------
5778. !ZoneTypeSelectCurrent!               
5779. ---------------------------
5780. ----------------------------------------------------------
5781. ")
5782. 
5783. # BANNER SET
5784. 
5785. # DATE TIME RUN ELP
5786. 
5787. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5788. /* Xinclude "..\Display\BannerSet.MyDc"X */
5789. /* pause(1) */
5790. 
5791. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5792. 
5793. Title('!Heading!')
5794. /* pause(1) */
5795. 
5796. /* NOTE: Can't round or truncate to integer precision. */
5797. 
5798. AppendLogfile("!LogFileName!", "!Title!")
5799. 
5800. 
5801. 
5802. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
5803. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
5804. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:17")
5805. 
5806. SetVariable(ZoneListByLine, "!ZoneListByLine!
5807. Zone: !ZoneNoCurrent! 2021-11-09 08:17:17 0:00:05 !ZoneLabel! !ZoneDescription!")
5808. 
5809. 
5810. /* Fixed Zone Position Handling */
5811. /* Literal number: */
5812. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
5813. /* Percentage of disk: */
5814. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
5815. /* Gap */
5816. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
5817. 
5818. /* ---------------------------------------------------------- */
5819. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
5820. # FILE STEP
5821. 
5822. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
5823. 
5824. /* add message and move to a new line. */
5825. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
5826. ")
5827. 
5828. /* display the line. (hopefully.) */
5829. # Zone Footer Set Statistics Window Text
5830. 
5831. SetStatisticsWindowText("----------------------------------------------------------
5832. Zones Processed: 
5833. ----------------------------------------------------------
5834. !ZoneListByLine!
5835. ----------------------------------------------------------
5836. Zone Processing Step:
5837. !ZoneStepByLine!    
5838. ----------------------------------------------------------
5839. Current Zone:
5840. !ZoneFooter!
5841. ----------------------------------------------------------
5842. Volume Statistics:
5843. !VolumeStatisticsDetail!
5844. ----------------------------------------------------------
5845. Zone Detailed Report:
5846. ----------------------------------------------------------
5847. !ZoneStatisticsDetail!
5848. ----------------------------------------------------------
5849. ")
5850. 
5851. 
5852. 
5853. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
5854. 
5855. # BANNER SET
5856. 
5857. # DATE TIME RUN ELP
5858. 
5859. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5860. /* Xinclude "..\Display\BannerSet.MyDc"X */
5861. /* pause(1) */
5862. 
5863. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5864. 
5865. Title('!Heading!')
5866. /* pause(1) */
5867. 
5868. /* NOTE: Can't round or truncate to integer precision. */
5869. 
5870. pause(1)
5871. 
5872. # your stuff HERE (X)... pre file select code.
5873. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
5874. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
5875. 	# (X)
5876. 
5877. FileSelect
5878. 
5879. 	# your stuff can't really go here (errors.)
5880. 	# maybe for some reason I don't know of...
5881. 	
5882. 	# Actions next...
5883. 		# ProgramHints start.
5884. ImportListFromProgramHints("*.pf")
5885. # ProgramHints end.
5886. 
5887. 		and not(
5888. 			# Os PageHiberDump start.
5889. (
5890.   FileName("DataStore.edb")
5891.   or FileName("DUMP*.*")
5892.   or FileName("Hiberfil.sys")
5893.   or FileName("MEMORY.DMP")
5894.   or FileName("Pagefile.sys")
5895. )
5896. # Os PageHiberDump end.
5897. 
5898. 		)
5899. 		FileActions
5900. 		  		/* ---------------------------------------------------------- */
5901. 	# Gap
5902. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
5903. 		# FILE STEP
5904. 
5905. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
5906. 
5907. /* add message and move to a new line. */
5908. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
5909. ")
5910. 
5911. /* display the line. (hopefully.) */
5912. # Zone Footer Set Statistics Window Text
5913. 
5914. SetStatisticsWindowText("----------------------------------------------------------
5915. Zones Processed: 
5916. ----------------------------------------------------------
5917. !ZoneListByLine!
5918. ----------------------------------------------------------
5919. Zone Processing Step:
5920. !ZoneStepByLine!    
5921. ----------------------------------------------------------
5922. Current Zone:
5923. !ZoneFooter!
5924. ----------------------------------------------------------
5925. Volume Statistics:
5926. !VolumeStatisticsDetail!
5927. ----------------------------------------------------------
5928. Zone Detailed Report:
5929. ----------------------------------------------------------
5930. !ZoneStatisticsDetail!
5931. ----------------------------------------------------------
5932. ")
5933. 
5934. 
5935. 
5936. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
5937. 
5938. # BANNER SET
5939. 
5940. # DATE TIME RUN ELP
5941. 
5942. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
5943. /* Xinclude "..\Display\BannerSet.MyDc"X */
5944. /* pause(1) */
5945. 
5946. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
5947. 
5948. Title('!Heading!')
5949. /* pause(1) */
5950. 
5951. /* NOTE: Can't round or truncate to integer precision. */
5952. 
5953. pause(1)
5954. 	
5955. 	# ACTUAL GAP
5956. 		/* AddGap Variant. */
5957. 	  	# Zone Do Gap
5958. # Gap Calculation Methods:
5959. 
5960. /* 1) Anything you need to add first. */
5961. /* empty */
5962. 
5963. /* ---------------------------------------------------------- */
5964. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
5965. 	# GapRequestedStd.
5966. 
5967. 		/* ---------------------------------------------------------- */
5968. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
5969. 
5970. 		# Gap Calculation Methods:
5971. 
5972. /* AddGap Variants */
5973. 
5974. 	/* Standard */
5975. 		# Gap Calculation Methods:
5976. 	/* AddGap Variants */
5977. 	/* Standard */
5978. 
5979. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
5980. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
5981. 
5982. 	SetVariable(GapRequested, GapRequestedStd)
5983. 	
5984. 
5985. 	/* MFT Low High Method */
5986. 		# Gap Calculation Methods:
5987. 	/* AddGap Variants */
5988. 	/* MFT Low High Method */
5989. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
5990. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
5991. 	SetVariable(GapRequested, GapRequestedMft)
5992. 	
5993. 
5994. 	/* OS Volume Type Method */
5995. 		# Gap Calculation Methods:
5996. 	/* AddGap Variants */
5997. 	/* OS Volume Type Method */
5998. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
5999. 	SetVariable(GapRequested, GapRequestedOs)
6000. 
6001. 
6002. 
6003. /* MakeGap Variants */
6004. 
6005. 	/* Original Os 1-3 + MFT 2 */
6006. 		# Gap Calculation Methods:
6007. 	/* MakeGap Variants */
6008. 	/* Original Os 1-3 + MFT 2 */
6009. 	/* plus MFT gap placed inline at the dividing zone. */
6010. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
6011. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
6012. 	SetVariable(GapRequested, GapRequestedOrig)
6013. 	
6014. 	
6015. /* Note: You could comment out the ones not in use */
6016. /* However having the data in the log is useful. */
6017. /* Therefore the following line is otherwise needed. */
6018. 
6019. /* Standard used */
6020. 
6021. SetVariable(GapRequested, GapRequestedStd)
6022. 
6023. # Gap Calculation Methods:
6024. 
6025. /* AddGap Variants */
6026. 	/* Standard */
6027. 	/* MFT Low High Method */
6028. 	/* OS Volume Type Method */
6029. 
6030. /* MakeGap Variants */
6031. 	/* Original Os 1-3 + MFT 2 */
6032. 
6033. /* Note: You could comment out the ones not in use */
6034. /* However having the data in the log is useful. */
6035. /* Therefore the following line is otherwise needed. */
6036. 
6037. /* Standard is used currently */
6038. 
6039. 
6040. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
6041. 
6042. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
6043. 
6044. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
6045. 
6046. /* ---------------------------------------------------------- */
6047. /* 3) SMALL ZONE ADJUSTMENT. */
6048. /* Gab cant be larger than half the Zone Size. */
6049. 
6050. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
6051. 	
6052. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
6053. 
6054. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
6055. 
6056. /* ---------------------------------------------------------- */
6057. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
6058. # Gap Adjustments.
6059. 
6060. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
6061. 	
6062. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
6063. 
6064. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
6065. 
6066. /* ---------------------------------------------------------- */
6067. # BYPASS THIS.
6068. 	/* This is definitely wrong. */
6069. 	/* The question is can we steal gap from the next zone */
6070. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
6071. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
6072. 		# Zone Overflow.
6073. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
6074. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
6075. 
6076. /* ---------------------------------------------------------- */
6077. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
6078. # Remaining free space available.
6079. 
6080. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
6081. 	
6082. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
6083. 
6084. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
6085. 
6086. /* ---------------------------------------------------------- */
6087. # CURRENT gap to use.
6088. 
6089. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
6090. 
6091. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
6092. 
6093. /* ---------------------------------------------------------- */
6094. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
6095. # Debugging.
6096. 
6097. 	SetVariable(GapUsed, GapCurrent) // for debugging
6098. 
6099. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
6100. 
6101. 		# Your code HERE
6102. 
6103. /* ---------------------------------------------------------- */
6104. /* 7) YOUR CODE. */
6105. # YOUR CODE HERE:
6106. 	# INPUT: GapCurrent or GapCurrentLoc
6107. 	# OUTPUT: GapUsed...
6108. 
6109. /* ---------------------------------------------------------- */
6110. # Gap Size.
6111. # Actual Size of Gap.
6112. 
6113. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
6114. 
6115. /* ---------------------------------------------------------- */
6116. /* xxxxxxxxxxxxxxxxxxxxxx */
6117. # ADD THE GAP
6118. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
6119. /* xxxxxxxxxxxxxxxxxxxxxx */
6120. 
6121. 	
6122. 	# Zone Statistics	
6123. 	# Zone / Volume Statistics and Display
6124. 		
6125. 	# Accumulate Totals
6126.   	# Volume totals
6127. 
6128. /* Current total space used (by Zones and Gaps) */
6129. 
6130. SetVariable(VolumeZoneUsed, GapUsed)
6131. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
6132. /* Percentage */
6133. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
6134. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
6135. 
6136. /* Current total of free space requested */
6137. 
6138. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
6139. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
6140. /* Percent. */
6141. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
6142. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
6143. 
6144. /* Current total of free space used */
6145. 
6146. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
6147. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
6148. /* Percent */
6149. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
6150. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
6151. 
6152. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
6153. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
6154. /* Xinclude "..\DebugDisplayPause.MyDc"X */
6155. 
6156. 
6157. 	# Current Values
6158. 	# Cluster, Sector, Block adjust for display.
6159. 	# Bytes per cluster is volume specific.
6160. 
6161. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
6162. 
6163. # Current Zone values.
6164. 	# Begin, end and size.
6165. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
6166. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
6167. 
6168. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
6169. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
6170. 
6171. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
6172. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
6173. 
6174. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
6175. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
6176. 
6177. 	SetVariable(ZoneFragments,				"!ZONE210N!")
6178. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
6179. 		
6180. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
6181. /* identical code to here: (separation not needed. TEST.) */	
6182. 
6183. # Current Gap, Actual and Free Values
6184. 	# Gap
6185. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
6186. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
6187. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
6188. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
6189. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
6190. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
6191. 	
6192. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
6193. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
6194. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
6195. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
6196. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
6197. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
6198. 	
6199. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
6200. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
6201. 	
6202. 	# Actual Size and End
6203. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
6204. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
6205. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
6206. 	
6207. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
6208. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
6209. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
6210. 
6211. # Gap Size & Rounding
6212. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
6213. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
6214. 	
6215. 	# Free Space
6216. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
6217. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
6218. 
6219. 	# Footer:
6220. SetVariable(ZoneFooter, "----------------------------------------------------------
6221. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
6222. 
6223. Statistics Report:
6224. ------------------
6225.    Size:  
6226.    ------------------------
6227.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
6228.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
6229.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
6230. 
6231.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
6232.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
6233. 
6234.    Location:
6235.    ------------------------
6236.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
6237.              Files End: !ZoneEndCurrent!
6238.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
6239.       
6240.    Gap Settings:
6241.    ------------------------
6242.          Gap Requested: !ZoneGapSizePer!%
6243.       Volume Rounding: !ZoneVolRoundUpPer!%
6244.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
6245.                  
6246.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
6247.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
6248.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
6249.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
6250.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
6251.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
6252.      
6253.    Free Space after Zone:
6254.    ------------------------
6255.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
6256.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
6257.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
6258. 
6259. Directory and Files Select:
6260. ---------------------------
6261. !ZoneTypeSelectCurrent!               
6262. ---------------------------
6263. ----------------------------------------------------------
6264. ")
6265. 	# Zone Footer Set Statistics Window Text
6266. 
6267. SetStatisticsWindowText("----------------------------------------------------------
6268. Zones Processed: 
6269. ----------------------------------------------------------
6270. !ZoneListByLine!
6271. ----------------------------------------------------------
6272. Zone Processing Step:
6273. !ZoneStepByLine!    
6274. ----------------------------------------------------------
6275. Current Zone:
6276. !ZoneFooter!
6277. ----------------------------------------------------------
6278. Volume Statistics:
6279. !VolumeStatisticsDetail!
6280. ----------------------------------------------------------
6281. Zone Detailed Report:
6282. ----------------------------------------------------------
6283. !ZoneStatisticsDetail!
6284. ----------------------------------------------------------
6285. ")
6286. 
6287. 
6288. 	
6289.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
6290. 
6291. 	# Add Zone to list of zones for display.
6292. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
6293. 	# ??? Free Stats?
6294. 	# Footer:
6295. SetVariable(ZoneFooter, "----------------------------------------------------------
6296. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
6297. 
6298. Statistics Report:
6299. ------------------
6300.    Size:  
6301.    ------------------------
6302.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
6303.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
6304.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
6305. 
6306.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
6307.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
6308. 
6309.    Location:
6310.    ------------------------
6311.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
6312.              Files End: !ZoneEndCurrent!
6313.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
6314.       
6315.    Gap Settings:
6316.    ------------------------
6317.          Gap Requested: !ZoneGapSizePer!%
6318.       Volume Rounding: !ZoneVolRoundUpPer!%
6319.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
6320.                  
6321.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
6322.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
6323.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
6324.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
6325.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
6326.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
6327.      
6328.    Free Space after Zone:
6329.    ------------------------
6330.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
6331.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
6332.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
6333. 
6334. Directory and Files Select:
6335. ---------------------------
6336. !ZoneTypeSelectCurrent!               
6337. ---------------------------
6338. ----------------------------------------------------------
6339. ")
6340. 
6341. 	# Add Zone Details to Report.	
6342. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
6343. !ZoneFooter!")
6344. 
6345. 
6346. 	
6347. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
6348. 			# FILE STEP
6349. 
6350. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
6351. 
6352. /* add message and move to a new line. */
6353. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
6354. ")
6355. 
6356. /* display the line. (hopefully.) */
6357. # Zone Footer Set Statistics Window Text
6358. 
6359. SetStatisticsWindowText("----------------------------------------------------------
6360. Zones Processed: 
6361. ----------------------------------------------------------
6362. !ZoneListByLine!
6363. ----------------------------------------------------------
6364. Zone Processing Step:
6365. !ZoneStepByLine!    
6366. ----------------------------------------------------------
6367. Current Zone:
6368. !ZoneFooter!
6369. ----------------------------------------------------------
6370. Volume Statistics:
6371. !VolumeStatisticsDetail!
6372. ----------------------------------------------------------
6373. Zone Detailed Report:
6374. ----------------------------------------------------------
6375. !ZoneStatisticsDetail!
6376. ----------------------------------------------------------
6377. ")
6378. 
6379. 
6380. 
6381. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
6382. 
6383. # BANNER SET
6384. 
6385. # DATE TIME RUN ELP
6386. 
6387. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
6388. /* Xinclude "..\Display\BannerSet.MyDc"X */
6389. /* pause(1) */
6390. 
6391. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
6392. 
6393. Title('!Heading!')
6394. /* pause(1) */
6395. 
6396. /* NOTE: Can't round or truncate to integer precision. */
6397. 
6398. pause(1)
6399. 
6400. 			SortByImportSequence(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes)) 
6401. 	
6402. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
6403. 			# FILE STEP
6404. 
6405. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
6406. 
6407. /* add message and move to a new line. */
6408. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
6409. ")
6410. 
6411. /* display the line. (hopefully.) */
6412. # Zone Footer Set Statistics Window Text
6413. 
6414. SetStatisticsWindowText("----------------------------------------------------------
6415. Zones Processed: 
6416. ----------------------------------------------------------
6417. !ZoneListByLine!
6418. ----------------------------------------------------------
6419. Zone Processing Step:
6420. !ZoneStepByLine!    
6421. ----------------------------------------------------------
6422. Current Zone:
6423. !ZoneFooter!
6424. ----------------------------------------------------------
6425. Volume Statistics:
6426. !VolumeStatisticsDetail!
6427. ----------------------------------------------------------
6428. Zone Detailed Report:
6429. ----------------------------------------------------------
6430. !ZoneStatisticsDetail!
6431. ----------------------------------------------------------
6432. ")
6433. 
6434. 
6435. 
6436. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
6437. 
6438. # BANNER SET
6439. 
6440. # DATE TIME RUN ELP
6441. 
6442. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
6443. /* Xinclude "..\Display\BannerSet.MyDc"X */
6444. /* pause(1) */
6445. 
6446. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
6447. 
6448. Title('!Heading!')
6449. /* pause(1) */
6450. 
6451. /* NOTE: Can't round or truncate to integer precision. */
6452. 
6453. pause(1)
6454. 
6455. 		# Zone Do Footer
6456. 
6457. /* ---------------------------------------------------------- */
6458. # File Select
6459. 	# Select Statments
6460. # File Actions 
6461. 	# Standard or OS File Actions.
6462. 	# Resume...
6463. 	
6464. 	# your stuff HERE (X)... post zone (file) file actions code.
6465. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
6466. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
6467. 		# (X)
6468. 		
6469. 		/* ??? Set window? */
6470. 	
6471. 	# ADD THE GAP
6472. 		
6473. # Vacate (good for diagnostics)
6474. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
6475. 
6476. # DoNotVacate - DO NOT Vacate (recommended)
6477. 
6478. # Vacate
6479. /* AddGap(GapUsedLoc) */
6480. 
6481. # DO Not Vacate
6482. AddGap(GapUsedLoc, DoNotVacate) 
6483. 	
6484. 	
6485. /* ---------------------------------------------------------- */
6486. # (failed) TEST for boolean logic.
6487. 
6488. /* It should work in the gap calculations for turning options */
6489. /* on and off but it will NOT work here. */
6490. 
6491. /* Boolean setting X or FlagX. */
6492. /* Where X will be on or off: */
6493. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
6494. /*      For ON:  (X  *  FlagAny) */
6495. 
6496. /* 1) Failed, zero gap overrode the previous one. */
6497. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
6498. /* AddGap(GapUsedTemp) */ 
6499. 
6500. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
6501. /* AddGap(GapUsedTemp, DoNotVacate) */ 
6502. 
6503. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
6504. 
6505. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
6506. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
6507. /* AddGap(GapUsedTemp) */ 
6508. 
6509. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
6510. /* AddGap(GapUsedTemp, DoNotVacate) */ 
6511. 
6512. /* ---------------------------------------------------------- */
6513. 
6514. # Vacate
6515. /* AddGap(GapUsed) */
6516. 
6517. # DO NOT Vacate (recommended)
6518. /* AddGap(GapUsed, DoNotVacate) */ 
6519. 	
6520. 
6521. 		
6522. # 
6523. FileEnd
6524. /* ---------------------------------------------------------- */
6525. 
6526. # your stuff HERE (X)... post zone (file) code.
6527. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
6528. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
6529. 	# (X)
6530. 
6531. SetVariable(FileStepDescription,"Zone finished, reporting.")
6532. # FILE STEP
6533. 
6534. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
6535. 
6536. /* add message and move to a new line. */
6537. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
6538. ")
6539. 
6540. /* display the line. (hopefully.) */
6541. # Zone Footer Set Statistics Window Text
6542. 
6543. SetStatisticsWindowText("----------------------------------------------------------
6544. Zones Processed: 
6545. ----------------------------------------------------------
6546. !ZoneListByLine!
6547. ----------------------------------------------------------
6548. Zone Processing Step:
6549. !ZoneStepByLine!    
6550. ----------------------------------------------------------
6551. Current Zone:
6552. !ZoneFooter!
6553. ----------------------------------------------------------
6554. Volume Statistics:
6555. !VolumeStatisticsDetail!
6556. ----------------------------------------------------------
6557. Zone Detailed Report:
6558. ----------------------------------------------------------
6559. !ZoneStatisticsDetail!
6560. ----------------------------------------------------------
6561. ")
6562. 
6563. 
6564. 
6565. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
6566. 
6567. # BANNER SET
6568. 
6569. # DATE TIME RUN ELP
6570. 
6571. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
6572. /* Xinclude "..\Display\BannerSet.MyDc"X */
6573. /* pause(1) */
6574. 
6575. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
6576. 
6577. Title('!Heading!')
6578. /* pause(1) */
6579. 
6580. /* NOTE: Can't round or truncate to integer precision. */
6581. 
6582. pause(1)
6583. 
6584. # Zone When Finished
6585. 
6586. # BANNER SET
6587. 
6588. # DATE TIME RUN ELP
6589. 
6590. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
6591. /* Xinclude "..\Display\BannerSet.MyDc"X */
6592. /* pause(1) */
6593. 
6594. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
6595. 
6596. Title('!Heading!')
6597. /* pause(1) */
6598. 
6599. /* NOTE: Can't round or truncate to integer precision. */
6600. 
6601. AppendLogfile("!LogFileName!", "!Title!")
6602. 
6603. 
6604. 
6605. # Zone Statistics	
6606. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
6607. 
6608. # Footer:
6609. SetVariable(ZoneFooter, "----------------------------------------------------------
6610. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
6611. 
6612. Statistics Report:
6613. ------------------
6614.    Size:  
6615.    ------------------------
6616.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
6617.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
6618.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
6619. 
6620.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
6621.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
6622. 
6623.    Location:
6624.    ------------------------
6625.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
6626.              Files End: !ZoneEndCurrent!
6627.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
6628.       
6629.    Gap Settings:
6630.    ------------------------
6631.          Gap Requested: !ZoneGapSizePer!%
6632.       Volume Rounding: !ZoneVolRoundUpPer!%
6633.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
6634.                  
6635.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
6636.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
6637.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
6638.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
6639.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
6640.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
6641.      
6642.    Free Space after Zone:
6643.    ------------------------
6644.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
6645.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
6646.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
6647. 
6648. Directory and Files Select:
6649. ---------------------------
6650. !ZoneTypeSelectCurrent!               
6651. ---------------------------
6652. ----------------------------------------------------------
6653. ")
6654. 
6655. AppendLogfile("!LogFileName!", ".")
6656. AppendLogfile("!LogFileName!", "!ZoneFooter!")
6657. AppendLogfile("!LogFileName!", ".")
6658. 
6659. # Zone Footer Set Statistics Window Text
6660. 
6661. SetStatisticsWindowText("----------------------------------------------------------
6662. Zones Processed: 
6663. ----------------------------------------------------------
6664. !ZoneListByLine!
6665. ----------------------------------------------------------
6666. Zone Processing Step:
6667. !ZoneStepByLine!    
6668. ----------------------------------------------------------
6669. Current Zone:
6670. !ZoneFooter!
6671. ----------------------------------------------------------
6672. Volume Statistics:
6673. !VolumeStatisticsDetail!
6674. ----------------------------------------------------------
6675. Zone Detailed Report:
6676. ----------------------------------------------------------
6677. !ZoneStatisticsDetail!
6678. ----------------------------------------------------------
6679. ")
6680. 
6681. 
6682. 
6683. /* pause() */
6684. /* pause() */
6685. 
6686. 
6687. 
6688. 	
6689. /* ---------------------------------------------------------- */
6690. 
6691. 
6692. /* ---------------------------------------------------------- */
6693. # Zone Programs Fixed size but not windows..
6694. /* ---------------------------------------------------------- */
6695. # Zone Programs Fixed size but not windows..
6696. 	SetVariable(ZoneLabel, 			"!ZoneLabelPrograms!")
6697. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionPrograms!")
6698. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpPrograms!")
6699. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizePrograms!")
6700. 	SetVariable(ZoneTypeSelect,'# Programs start.
6701. # NotBlobsArchivesBu start.
6702. (not (
6703. # Blobs start.
6704. (
6705. # BlobsAndExceptions start.
6706. ( not(
6707.   FileName("*.bat")
6708.   or FileName("*.css")
6709.   or FileName("*.dll")
6710.   or FileName("*.exe")
6711.   or FileName("*.htm*")
6712.   or FileName("*.jar")
6713.   or FileName("*.js")
6714.   or FileName("*.script")
6715.   or FileName("*.wsf")
6716.   or (
6717. # Databases start.
6718. (
6719.   FileName("*.crypt*")
6720.   or FileName("*.db*")
6721.   or FileName("*.rdb*")
6722.   or FileName("*.dc*")
6723.   or FileName("*.dict*")
6724.   or FileName("*.?db*")
6725.   or FileName("*.?rdb*")
6726.   or FileName("*.md*")
6727.   or FileName("*.myd")
6728.   or FileName("*.ndf")
6729.   or FileName("*.ns?")
6730.   or FileName("*.pab")
6731.   or FileName("*.pst")
6732.   or FileName("*.sd?*")
6733.   or FileName("*.sq**")
6734.   or FileName("*.tmd")
6735.   or FileName("*.tps")
6736.   or FileName("*.tr*")
6737. )
6738. # Databases end.
6739. 
6740.     # BlobsAndExceptions
6741.     or 
6742. # Data start.
6743. (
6744.   DirectoryName("Data*")
6745.   or DirectoryName("Device*")
6746.   or DirectoryName("Export*")
6747.   or DirectoryName("Import*")
6748.   or DirectoryName("Log*")
6749.   or DirectoryName("*Log")
6750.   or DirectoryName("Maintenance*")
6751.   or DirectoryName("Rec*")
6752.   or DirectoryName("Sales*")
6753.   or DirectoryName("Search*")
6754.   or DirectoryName("User*")
6755. )
6756. # Data end.
6757. 
6758.     # BlobsAndExceptions
6759.   )
6760. ) )
6761. # BlobsAndExceptions end.
6762. 
6763. # Blobs
6764. ) and (
6765.   Size(BlobFileSize,0)
6766.   or (
6767.     FileName("*.arj")
6768.     or FileName("*.bup")
6769.     or FileName("*.bz2")
6770.     or FileName("*.chm")
6771.     or FileName("*.dvr-ms")
6772.     or FileName("*.gz")
6773.     or FileName("*.ifo")
6774.     or FileName("*.lzh")
6775.     or FileName("*.pdf")
6776.     or FileName("*.rpm")
6777.     or FileName("*.wmv")
6778.     or FileName("*.vob")
6779.     or FileName("*.z")
6780.   ) 
6781. )
6782. # Blobs end.
6783. 
6784. # NotBlobsArchivesBu
6785. or 
6786. # Archives start.
6787. (
6788.   DirectoryName("*Archive*")
6789.   or DirectoryName("*History*")
6790.   or DirectoryName("*Old")
6791.   or DirectoryName("* Old *")
6792.   or DirectoryName("Old *")
6793. 
6794.   or FileName("*.7z")
6795.   or FileName("*.cab")
6796.   or FileName("*.iso")
6797.   or FileName("*.msi")
6798.   or FileName("*.old")
6799.   or FileName("*.rar")
6800.   or FileName("*.tar")
6801.   or FileName("*.zip")
6802.   or
6803. # WinSysLow start.
6804. (
6805.   DirectoryName("$*")
6806.   or DirectoryName("0*")
6807.   or DirectoryName("1*")
6808.   or DirectoryName("2*")
6809.   or DirectoryName("3*")
6810.   or DirectoryName("4*")
6811.   or DirectoryName("5*")
6812.   or DirectoryName("6*")
6813.   or DirectoryName("7*")
6814.   or DirectoryName("8*")
6815.   or DirectoryName("9*")
6816. 
6817.   or DirectoryName("dllcache")
6818.   or DirectoryName("Downloaded Installations")
6819.   or DirectoryName("Ehome")
6820.   or DirectoryName("Fonts")
6821.   or DirectoryName("Help")
6822.   or DirectoryName("I386")
6823.   or DirectoryName("ie?updates")
6824.   or DirectoryName("Installer")
6825.   or DirectoryName("Installshield Installation Information")
6826.   or DirectoryName("IME")
6827.   or DirectoryName("*RECYCLE*")
6828.   or DirectoryName("ServicePackFiles")
6829.   or DirectoryName("SoftwareDistribution")
6830.   or DirectoryName("Speech")
6831.   or DirectoryName("Symbols")
6832.   or DirectoryName("System Volume Information")
6833.   or DirectoryName("windows.old")
6834. )
6835. # WinSysLow end.
6836. 
6837.   # Archives
6838. )
6839. # Archives end.
6840. 
6841. # NotBlobsArchivesBu
6842. or
6843. # Backups start.
6844. (
6845.   DirectoryName("*Backup*")
6846.   or DirectoryName("*Bu")
6847.   or DirectoryName("* Bu *")
6848.   or DirectoryName("Bu *")
6849. 
6850.   or FileName("*.bak")
6851.   or FileName("* - Copy*")
6852. )
6853. # Backups end.
6854. 
6855. # NotBlobsArchivesBu
6856. ) )
6857. # NotBlobsArchivesBu end.
6858. 
6859. # Programs
6860. and (
6861. # SystemDir start.
6862. (
6863.   DirectoryName("Boot*")
6864.   or DirectoryName("Device*")
6865.   or DirectoryName("DevSupport*")
6866.   or DirectoryName("Program*")
6867.   or DirectoryName("Security*")
6868.   or DirectoryName("SendTo*")
6869.   or DirectoryName("Sw*")
6870.   or DirectoryName("System*")
6871.   or DirectoryName("Toolbars")
6872.   or DirectoryName("Windows*")
6873. )
6874. # SystemDir end.
6875. 
6876. # Programs
6877. )
6878. # Programs end.
6879. 
6880.                 and not(
6881.                      # Os Data Dynamic start.
6882. (
6883. # Os Data Dynamic start.
6884. (
6885.   FileName("*.dat*")
6886.   or FileName("*.db*")
6887.   or FileName("*.edb*")
6888.   or FileName("*.log*")
6889.   or FileName("DataStore.edb")
6890. )
6891. # Os Data Dynamic end.
6892. 
6893.   or 
6894. # Os PageHiberDump start.
6895. (
6896.   FileName("DataStore.edb")
6897.   or FileName("DUMP*.*")
6898.   or FileName("Hiberfil.sys")
6899.   or FileName("MEMORY.DMP")
6900.   or FileName("Pagefile.sys")
6901. )
6902. # Os PageHiberDump end.
6903. 
6904. # Os Data Dynamic
6905. )
6906. # Os Data Dynamic end.
6907. 
6908.                      or 
6909.                      DirectoryName("Windows*")
6910.                 )
6911. ')
6912. 
6913. 		# Zone Do Header
6914. 
6915. # Zone When Started
6916. 
6917. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
6918. # Display Set Zone
6919. 
6920. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
6921. SetVariable(FileStepDescription,	"")
6922. 
6923. SetVariable(ZoneStepByLine, 			"Zone started.
6924. ")
6925. 
6926. # BANNER SET
6927. 
6928. # DATE TIME RUN ELP
6929. 
6930. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
6931. /* Xinclude "..\Display\BannerSet.MyDc"X */
6932. /* pause(1) */
6933. 
6934. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
6935. 
6936. Title('!Heading!')
6937. /* pause(1) */
6938. 
6939. /* NOTE: Can't round or truncate to integer precision. */
6940. 
6941. AppendLogfile("!LogFileName!", "!Title!")
6942. 
6943. 
6944. 
6945. pause(1)
6946. 
6947. 
6948. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
6949. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
6950. 
6951. SetVariable(ZoneStepNoCurrent, 0)
6952. 
6953. 
6954. # Zone Do Current Clear
6955. 
6956. SetVariable(ZoneTypeSelectCurrent, 		"")
6957. 
6958. SetVariable(ZoneBeginCurrent, 			0)
6959. SetVariable(ZoneBeginPerCurrent, 		0)
6960. SetVariable(ZoneEndCurrent, 			0)
6961. SetVariable(ZoneEndPerCurrent, 			0)
6962. 
6963. SetVariable(ZoneSizeCurrent,			0)
6964. SetVariable(ZoneSizePerCurrent,			0)
6965. 
6966. SetVariable(ZoneGapRequestedCurrent,	0)
6967. SetVariable(ZoneGapRoundedCurrent, 		0)
6968. SetVariable(ZoneGapAdjustedCurrent, 	0)
6969. SetVariable(ZoneGapAvailableCurrent, 	0)
6970. SetVariable(ZoneGapCurrent,				0)
6971. SetVariable(ZoneGapUsedCurrent, 		0)
6972. 
6973. SetVariable(ZoneGapActualCurrent, 		0)
6974. SetVariable(ZoneGapActualPerCurrent, 	0)
6975. 
6976. SetVariable(ZoneSizeActual, 			0)
6977. SetVariable(ZoneSizeActualCurrent,		0)
6978. 
6979. SetVariable(ZoneEndActual, 				0)
6980. SetVariable(ZoneEndActualCurrent,		0)			
6981. SetVariable(ZoneSizeActualPerCurrent, 	0)
6982.       
6983. SetVariable(ZoneFilesFolders,			0)
6984. SetVariable(ZoneFilesFoldersPer,		0) 
6985. 
6986. SetVariable(ZoneFragments,				0)
6987. SetVariable(ZoneFragmentsPer,			0) 
6988. 		
6989. SetVariable(ZoneEndActualCurrent, 		0)
6990. SetVariable(ZoneEndActualPerCurrent, 	0)
6991. 
6992. # Gap Calculation Methodology:
6993. 	# Requested
6994. 	SetVariable(GapRequested, 			0) 
6995. 	SetVariable(GapRequestedStd, 		0) 
6996. 	SetVariable(GapRequestedMft, 		0) 
6997. 	SetVariable(GapRequestedOs, 		0) 
6998. 	SetVariable(GapRequestedOriginal, 	0) 
6999. 	
7000. 	# Gap Adjustments
7001. 	SetVariable(GapRounded, 			0)
7002. 	# SetVariable(GapAdjusted, 			0)
7003. 	SetVariable(GapAvailable, 			0)
7004. 	SetVariable(GapCurrent, 			0)
7005. 	SetVariable(GapActual, 				0)
7006. 	SetVariable(GapUsed, 				0)
7007. 	
7008. 	# Gap Adjustments
7009. 	SetVariable(GapRoundedLoc, 			0)
7010. 	# SetVariable(GapAdjustedLoc, 		0)
7011. 	SetVariable(GapAvailableLoc, 		0)
7012. 	SetVariable(GapCurrentLoc, 			0)
7013. 	SetVariable(GapActualLoc,			0)
7014. 	SetVariable(GapUsedLoc,				0)
7015. 	
7016. 	# Space usage
7017. 	SetVariable(ZoneFreePerRequested, 	0)
7018. 	SetVariable(ZoneFreePerUsed, 		0)
7019. 
7020. # Gap Size & Rounding
7021. 	SetVariable(ZoneGapSizePer, 		0)
7022. 	SetVariable(ZoneVolRoundUpPer, 		0)
7023. 	
7024. 	# Free Space
7025. 	SetVariable(ZoneFreeUsedPer, 		0)
7026. 	SetVariable(ZoneFreeRequestedPer, 	0)
7027. 
7028. 
7029. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
7030. 
7031. # Footer:
7032. SetVariable(ZoneFooter, "----------------------------------------------------------
7033. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
7034. 
7035. Statistics Report:
7036. ------------------
7037.    Size:  
7038.    ------------------------
7039.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
7040.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
7041.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
7042. 
7043.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
7044.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
7045. 
7046.    Location:
7047.    ------------------------
7048.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
7049.              Files End: !ZoneEndCurrent!
7050.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
7051.       
7052.    Gap Settings:
7053.    ------------------------
7054.          Gap Requested: !ZoneGapSizePer!%
7055.       Volume Rounding: !ZoneVolRoundUpPer!%
7056.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
7057.                  
7058.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
7059.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
7060.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
7061.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
7062.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
7063.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
7064.      
7065.    Free Space after Zone:
7066.    ------------------------
7067.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
7068.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
7069.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
7070. 
7071. Directory and Files Select:
7072. ---------------------------
7073. !ZoneTypeSelectCurrent!               
7074. ---------------------------
7075. ----------------------------------------------------------
7076. ")
7077. 
7078. # BANNER SET
7079. 
7080. # DATE TIME RUN ELP
7081. 
7082. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
7083. /* Xinclude "..\Display\BannerSet.MyDc"X */
7084. /* pause(1) */
7085. 
7086. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
7087. 
7088. Title('!Heading!')
7089. /* pause(1) */
7090. 
7091. /* NOTE: Can't round or truncate to integer precision. */
7092. 
7093. AppendLogfile("!LogFileName!", "!Title!")
7094. 
7095. 
7096. 
7097. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
7098. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
7099. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:17")
7100. 
7101. SetVariable(ZoneListByLine, "!ZoneListByLine!
7102. Zone: !ZoneNoCurrent! 2021-11-09 08:17:17 0:00:05 !ZoneLabel! !ZoneDescription!")
7103. 
7104. 
7105. /* Fixed Zone Position Handling */
7106. /* Literal number: */
7107. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
7108. /* Percentage of disk: */
7109. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
7110. /* Gap */
7111. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
7112. 
7113. /* ---------------------------------------------------------- */
7114. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
7115. # FILE STEP
7116. 
7117. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
7118. 
7119. /* add message and move to a new line. */
7120. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
7121. ")
7122. 
7123. /* display the line. (hopefully.) */
7124. # Zone Footer Set Statistics Window Text
7125. 
7126. SetStatisticsWindowText("----------------------------------------------------------
7127. Zones Processed: 
7128. ----------------------------------------------------------
7129. !ZoneListByLine!
7130. ----------------------------------------------------------
7131. Zone Processing Step:
7132. !ZoneStepByLine!    
7133. ----------------------------------------------------------
7134. Current Zone:
7135. !ZoneFooter!
7136. ----------------------------------------------------------
7137. Volume Statistics:
7138. !VolumeStatisticsDetail!
7139. ----------------------------------------------------------
7140. Zone Detailed Report:
7141. ----------------------------------------------------------
7142. !ZoneStatisticsDetail!
7143. ----------------------------------------------------------
7144. ")
7145. 
7146. 
7147. 
7148. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
7149. 
7150. # BANNER SET
7151. 
7152. # DATE TIME RUN ELP
7153. 
7154. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
7155. /* Xinclude "..\Display\BannerSet.MyDc"X */
7156. /* pause(1) */
7157. 
7158. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
7159. 
7160. Title('!Heading!')
7161. /* pause(1) */
7162. 
7163. /* NOTE: Can't round or truncate to integer precision. */
7164. 
7165. pause(1)
7166. 
7167. # your stuff HERE (X)... pre file select code.
7168. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
7169. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
7170. 	# (X)
7171. 
7172. FileSelect
7173. 
7174. 	# your stuff can't really go here (errors.)
7175. 	# maybe for some reason I don't know of...
7176. 	
7177. 	# Actions next...
7178. 		# Programs start.
7179. # NotBlobsArchivesBu start.
7180. (not (
7181. # Blobs start.
7182. (
7183. # BlobsAndExceptions start.
7184. ( not(
7185.   FileName("*.bat")
7186.   or FileName("*.css")
7187.   or FileName("*.dll")
7188.   or FileName("*.exe")
7189.   or FileName("*.htm*")
7190.   or FileName("*.jar")
7191.   or FileName("*.js")
7192.   or FileName("*.script")
7193.   or FileName("*.wsf")
7194.   or (
7195. # Databases start.
7196. (
7197.   FileName("*.crypt*")
7198.   or FileName("*.db*")
7199.   or FileName("*.rdb*")
7200.   or FileName("*.dc*")
7201.   or FileName("*.dict*")
7202.   or FileName("*.?db*")
7203.   or FileName("*.?rdb*")
7204.   or FileName("*.md*")
7205.   or FileName("*.myd")
7206.   or FileName("*.ndf")
7207.   or FileName("*.ns?")
7208.   or FileName("*.pab")
7209.   or FileName("*.pst")
7210.   or FileName("*.sd?*")
7211.   or FileName("*.sq**")
7212.   or FileName("*.tmd")
7213.   or FileName("*.tps")
7214.   or FileName("*.tr*")
7215. )
7216. # Databases end.
7217. 
7218.     # BlobsAndExceptions
7219.     or 
7220. # Data start.
7221. (
7222.   DirectoryName("Data*")
7223.   or DirectoryName("Device*")
7224.   or DirectoryName("Export*")
7225.   or DirectoryName("Import*")
7226.   or DirectoryName("Log*")
7227.   or DirectoryName("*Log")
7228.   or DirectoryName("Maintenance*")
7229.   or DirectoryName("Rec*")
7230.   or DirectoryName("Sales*")
7231.   or DirectoryName("Search*")
7232.   or DirectoryName("User*")
7233. )
7234. # Data end.
7235. 
7236.     # BlobsAndExceptions
7237.   )
7238. ) )
7239. # BlobsAndExceptions end.
7240. 
7241. # Blobs
7242. ) and (
7243.   Size(BlobFileSize,0)
7244.   or (
7245.     FileName("*.arj")
7246.     or FileName("*.bup")
7247.     or FileName("*.bz2")
7248.     or FileName("*.chm")
7249.     or FileName("*.dvr-ms")
7250.     or FileName("*.gz")
7251.     or FileName("*.ifo")
7252.     or FileName("*.lzh")
7253.     or FileName("*.pdf")
7254.     or FileName("*.rpm")
7255.     or FileName("*.wmv")
7256.     or FileName("*.vob")
7257.     or FileName("*.z")
7258.   ) 
7259. )
7260. # Blobs end.
7261. 
7262. # NotBlobsArchivesBu
7263. or 
7264. # Archives start.
7265. (
7266.   DirectoryName("*Archive*")
7267.   or DirectoryName("*History*")
7268.   or DirectoryName("*Old")
7269.   or DirectoryName("* Old *")
7270.   or DirectoryName("Old *")
7271. 
7272.   or FileName("*.7z")
7273.   or FileName("*.cab")
7274.   or FileName("*.iso")
7275.   or FileName("*.msi")
7276.   or FileName("*.old")
7277.   or FileName("*.rar")
7278.   or FileName("*.tar")
7279.   or FileName("*.zip")
7280.   or
7281. # WinSysLow start.
7282. (
7283.   DirectoryName("$*")
7284.   or DirectoryName("0*")
7285.   or DirectoryName("1*")
7286.   or DirectoryName("2*")
7287.   or DirectoryName("3*")
7288.   or DirectoryName("4*")
7289.   or DirectoryName("5*")
7290.   or DirectoryName("6*")
7291.   or DirectoryName("7*")
7292.   or DirectoryName("8*")
7293.   or DirectoryName("9*")
7294. 
7295.   or DirectoryName("dllcache")
7296.   or DirectoryName("Downloaded Installations")
7297.   or DirectoryName("Ehome")
7298.   or DirectoryName("Fonts")
7299.   or DirectoryName("Help")
7300.   or DirectoryName("I386")
7301.   or DirectoryName("ie?updates")
7302.   or DirectoryName("Installer")
7303.   or DirectoryName("Installshield Installation Information")
7304.   or DirectoryName("IME")
7305.   or DirectoryName("*RECYCLE*")
7306.   or DirectoryName("ServicePackFiles")
7307.   or DirectoryName("SoftwareDistribution")
7308.   or DirectoryName("Speech")
7309.   or DirectoryName("Symbols")
7310.   or DirectoryName("System Volume Information")
7311.   or DirectoryName("windows.old")
7312. )
7313. # WinSysLow end.
7314. 
7315.   # Archives
7316. )
7317. # Archives end.
7318. 
7319. # NotBlobsArchivesBu
7320. or
7321. # Backups start.
7322. (
7323.   DirectoryName("*Backup*")
7324.   or DirectoryName("*Bu")
7325.   or DirectoryName("* Bu *")
7326.   or DirectoryName("Bu *")
7327. 
7328.   or FileName("*.bak")
7329.   or FileName("* - Copy*")
7330. )
7331. # Backups end.
7332. 
7333. # NotBlobsArchivesBu
7334. ) )
7335. # NotBlobsArchivesBu end.
7336. 
7337. # Programs
7338. and (
7339. # SystemDir start.
7340. (
7341.   DirectoryName("Boot*")
7342.   or DirectoryName("Device*")
7343.   or DirectoryName("DevSupport*")
7344.   or DirectoryName("Program*")
7345.   or DirectoryName("Security*")
7346.   or DirectoryName("SendTo*")
7347.   or DirectoryName("Sw*")
7348.   or DirectoryName("System*")
7349.   or DirectoryName("Toolbars")
7350.   or DirectoryName("Windows*")
7351. )
7352. # SystemDir end.
7353. 
7354. # Programs
7355. )
7356. # Programs end.
7357. 
7358. 		and not(
7359. 			# Os Data Dynamic start.
7360. (
7361. # Os Data Dynamic start.
7362. (
7363.   FileName("*.dat*")
7364.   or FileName("*.db*")
7365.   or FileName("*.edb*")
7366.   or FileName("*.log*")
7367.   or FileName("DataStore.edb")
7368. )
7369. # Os Data Dynamic end.
7370. 
7371.   or 
7372. # Os PageHiberDump start.
7373. (
7374.   FileName("DataStore.edb")
7375.   or FileName("DUMP*.*")
7376.   or FileName("Hiberfil.sys")
7377.   or FileName("MEMORY.DMP")
7378.   or FileName("Pagefile.sys")
7379. )
7380. # Os PageHiberDump end.
7381. 
7382. # Os Data Dynamic
7383. )
7384. # Os Data Dynamic end.
7385. 
7386. 			or 
7387. 				DirectoryName("Windows*")
7388. 		)
7389. 		FileActions
7390. 		  		/* ---------------------------------------------------------- */
7391. 	# Gap
7392. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
7393. 		# FILE STEP
7394. 
7395. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
7396. 
7397. /* add message and move to a new line. */
7398. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
7399. ")
7400. 
7401. /* display the line. (hopefully.) */
7402. # Zone Footer Set Statistics Window Text
7403. 
7404. SetStatisticsWindowText("----------------------------------------------------------
7405. Zones Processed: 
7406. ----------------------------------------------------------
7407. !ZoneListByLine!
7408. ----------------------------------------------------------
7409. Zone Processing Step:
7410. !ZoneStepByLine!    
7411. ----------------------------------------------------------
7412. Current Zone:
7413. !ZoneFooter!
7414. ----------------------------------------------------------
7415. Volume Statistics:
7416. !VolumeStatisticsDetail!
7417. ----------------------------------------------------------
7418. Zone Detailed Report:
7419. ----------------------------------------------------------
7420. !ZoneStatisticsDetail!
7421. ----------------------------------------------------------
7422. ")
7423. 
7424. 
7425. 
7426. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
7427. 
7428. # BANNER SET
7429. 
7430. # DATE TIME RUN ELP
7431. 
7432. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
7433. /* Xinclude "..\Display\BannerSet.MyDc"X */
7434. /* pause(1) */
7435. 
7436. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
7437. 
7438. Title('!Heading!')
7439. /* pause(1) */
7440. 
7441. /* NOTE: Can't round or truncate to integer precision. */
7442. 
7443. pause(1)
7444. 	
7445. 	# ACTUAL GAP
7446. 		/* AddGap Variant. */
7447. 	  	# Zone Do Gap
7448. # Gap Calculation Methods:
7449. 
7450. /* 1) Anything you need to add first. */
7451. /* empty */
7452. 
7453. /* ---------------------------------------------------------- */
7454. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
7455. 	# GapRequestedStd.
7456. 
7457. 		/* ---------------------------------------------------------- */
7458. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
7459. 
7460. 		# Gap Calculation Methods:
7461. 
7462. /* AddGap Variants */
7463. 
7464. 	/* Standard */
7465. 		# Gap Calculation Methods:
7466. 	/* AddGap Variants */
7467. 	/* Standard */
7468. 
7469. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
7470. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
7471. 
7472. 	SetVariable(GapRequested, GapRequestedStd)
7473. 	
7474. 
7475. 	/* MFT Low High Method */
7476. 		# Gap Calculation Methods:
7477. 	/* AddGap Variants */
7478. 	/* MFT Low High Method */
7479. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
7480. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
7481. 	SetVariable(GapRequested, GapRequestedMft)
7482. 	
7483. 
7484. 	/* OS Volume Type Method */
7485. 		# Gap Calculation Methods:
7486. 	/* AddGap Variants */
7487. 	/* OS Volume Type Method */
7488. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
7489. 	SetVariable(GapRequested, GapRequestedOs)
7490. 
7491. 
7492. 
7493. /* MakeGap Variants */
7494. 
7495. 	/* Original Os 1-3 + MFT 2 */
7496. 		# Gap Calculation Methods:
7497. 	/* MakeGap Variants */
7498. 	/* Original Os 1-3 + MFT 2 */
7499. 	/* plus MFT gap placed inline at the dividing zone. */
7500. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
7501. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
7502. 	SetVariable(GapRequested, GapRequestedOrig)
7503. 	
7504. 	
7505. /* Note: You could comment out the ones not in use */
7506. /* However having the data in the log is useful. */
7507. /* Therefore the following line is otherwise needed. */
7508. 
7509. /* Standard used */
7510. 
7511. SetVariable(GapRequested, GapRequestedStd)
7512. 
7513. # Gap Calculation Methods:
7514. 
7515. /* AddGap Variants */
7516. 	/* Standard */
7517. 	/* MFT Low High Method */
7518. 	/* OS Volume Type Method */
7519. 
7520. /* MakeGap Variants */
7521. 	/* Original Os 1-3 + MFT 2 */
7522. 
7523. /* Note: You could comment out the ones not in use */
7524. /* However having the data in the log is useful. */
7525. /* Therefore the following line is otherwise needed. */
7526. 
7527. /* Standard is used currently */
7528. 
7529. 
7530. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
7531. 
7532. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
7533. 
7534. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
7535. 
7536. /* ---------------------------------------------------------- */
7537. /* 3) SMALL ZONE ADJUSTMENT. */
7538. /* Gab cant be larger than half the Zone Size. */
7539. 
7540. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
7541. 	
7542. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
7543. 
7544. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
7545. 
7546. /* ---------------------------------------------------------- */
7547. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
7548. # Gap Adjustments.
7549. 
7550. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
7551. 	
7552. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
7553. 
7554. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
7555. 
7556. /* ---------------------------------------------------------- */
7557. # BYPASS THIS.
7558. 	/* This is definitely wrong. */
7559. 	/* The question is can we steal gap from the next zone */
7560. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
7561. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
7562. 		# Zone Overflow.
7563. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
7564. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
7565. 
7566. /* ---------------------------------------------------------- */
7567. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
7568. # Remaining free space available.
7569. 
7570. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
7571. 	
7572. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
7573. 
7574. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
7575. 
7576. /* ---------------------------------------------------------- */
7577. # CURRENT gap to use.
7578. 
7579. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
7580. 
7581. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
7582. 
7583. /* ---------------------------------------------------------- */
7584. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
7585. # Debugging.
7586. 
7587. 	SetVariable(GapUsed, GapCurrent) // for debugging
7588. 
7589. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
7590. 
7591. 		# Your code HERE
7592. 
7593. /* ---------------------------------------------------------- */
7594. /* 7) YOUR CODE. */
7595. # YOUR CODE HERE:
7596. 	# INPUT: GapCurrent or GapCurrentLoc
7597. 	# OUTPUT: GapUsed...
7598. 
7599. /* ---------------------------------------------------------- */
7600. # Gap Size.
7601. # Actual Size of Gap.
7602. 
7603. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
7604. 
7605. /* ---------------------------------------------------------- */
7606. /* xxxxxxxxxxxxxxxxxxxxxx */
7607. # ADD THE GAP
7608. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
7609. /* xxxxxxxxxxxxxxxxxxxxxx */
7610. 
7611. 	
7612. 	# Zone Statistics	
7613. 	# Zone / Volume Statistics and Display
7614. 		
7615. 	# Accumulate Totals
7616.   	# Volume totals
7617. 
7618. /* Current total space used (by Zones and Gaps) */
7619. 
7620. SetVariable(VolumeZoneUsed, GapUsed)
7621. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
7622. /* Percentage */
7623. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
7624. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
7625. 
7626. /* Current total of free space requested */
7627. 
7628. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
7629. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
7630. /* Percent. */
7631. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
7632. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
7633. 
7634. /* Current total of free space used */
7635. 
7636. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
7637. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
7638. /* Percent */
7639. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
7640. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
7641. 
7642. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
7643. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
7644. /* Xinclude "..\DebugDisplayPause.MyDc"X */
7645. 
7646. 
7647. 	# Current Values
7648. 	# Cluster, Sector, Block adjust for display.
7649. 	# Bytes per cluster is volume specific.
7650. 
7651. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
7652. 
7653. # Current Zone values.
7654. 	# Begin, end and size.
7655. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
7656. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
7657. 
7658. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
7659. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
7660. 
7661. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
7662. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
7663. 
7664. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
7665. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
7666. 
7667. 	SetVariable(ZoneFragments,				"!ZONE210N!")
7668. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
7669. 		
7670. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
7671. /* identical code to here: (separation not needed. TEST.) */	
7672. 
7673. # Current Gap, Actual and Free Values
7674. 	# Gap
7675. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
7676. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
7677. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
7678. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
7679. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
7680. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
7681. 	
7682. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
7683. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
7684. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
7685. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
7686. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
7687. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
7688. 	
7689. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
7690. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
7691. 	
7692. 	# Actual Size and End
7693. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
7694. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
7695. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
7696. 	
7697. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
7698. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
7699. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
7700. 
7701. # Gap Size & Rounding
7702. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
7703. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
7704. 	
7705. 	# Free Space
7706. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
7707. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
7708. 
7709. 	# Footer:
7710. SetVariable(ZoneFooter, "----------------------------------------------------------
7711. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
7712. 
7713. Statistics Report:
7714. ------------------
7715.    Size:  
7716.    ------------------------
7717.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
7718.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
7719.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
7720. 
7721.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
7722.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
7723. 
7724.    Location:
7725.    ------------------------
7726.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
7727.              Files End: !ZoneEndCurrent!
7728.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
7729.       
7730.    Gap Settings:
7731.    ------------------------
7732.          Gap Requested: !ZoneGapSizePer!%
7733.       Volume Rounding: !ZoneVolRoundUpPer!%
7734.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
7735.                  
7736.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
7737.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
7738.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
7739.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
7740.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
7741.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
7742.      
7743.    Free Space after Zone:
7744.    ------------------------
7745.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
7746.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
7747.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
7748. 
7749. Directory and Files Select:
7750. ---------------------------
7751. !ZoneTypeSelectCurrent!               
7752. ---------------------------
7753. ----------------------------------------------------------
7754. ")
7755. 	# Zone Footer Set Statistics Window Text
7756. 
7757. SetStatisticsWindowText("----------------------------------------------------------
7758. Zones Processed: 
7759. ----------------------------------------------------------
7760. !ZoneListByLine!
7761. ----------------------------------------------------------
7762. Zone Processing Step:
7763. !ZoneStepByLine!    
7764. ----------------------------------------------------------
7765. Current Zone:
7766. !ZoneFooter!
7767. ----------------------------------------------------------
7768. Volume Statistics:
7769. !VolumeStatisticsDetail!
7770. ----------------------------------------------------------
7771. Zone Detailed Report:
7772. ----------------------------------------------------------
7773. !ZoneStatisticsDetail!
7774. ----------------------------------------------------------
7775. ")
7776. 
7777. 
7778. 	
7779.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
7780. 
7781. 	# Add Zone to list of zones for display.
7782. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
7783. 	# ??? Free Stats?
7784. 	# Footer:
7785. SetVariable(ZoneFooter, "----------------------------------------------------------
7786. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
7787. 
7788. Statistics Report:
7789. ------------------
7790.    Size:  
7791.    ------------------------
7792.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
7793.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
7794.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
7795. 
7796.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
7797.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
7798. 
7799.    Location:
7800.    ------------------------
7801.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
7802.              Files End: !ZoneEndCurrent!
7803.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
7804.       
7805.    Gap Settings:
7806.    ------------------------
7807.          Gap Requested: !ZoneGapSizePer!%
7808.       Volume Rounding: !ZoneVolRoundUpPer!%
7809.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
7810.                  
7811.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
7812.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
7813.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
7814.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
7815.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
7816.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
7817.      
7818.    Free Space after Zone:
7819.    ------------------------
7820.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
7821.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
7822.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
7823. 
7824. Directory and Files Select:
7825. ---------------------------
7826. !ZoneTypeSelectCurrent!               
7827. ---------------------------
7828. ----------------------------------------------------------
7829. ")
7830. 
7831. 	# Add Zone Details to Report.	
7832. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
7833. !ZoneFooter!")
7834. 
7835. 
7836. 	
7837. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
7838. 			# FILE STEP
7839. 
7840. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
7841. 
7842. /* add message and move to a new line. */
7843. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
7844. ")
7845. 
7846. /* display the line. (hopefully.) */
7847. # Zone Footer Set Statistics Window Text
7848. 
7849. SetStatisticsWindowText("----------------------------------------------------------
7850. Zones Processed: 
7851. ----------------------------------------------------------
7852. !ZoneListByLine!
7853. ----------------------------------------------------------
7854. Zone Processing Step:
7855. !ZoneStepByLine!    
7856. ----------------------------------------------------------
7857. Current Zone:
7858. !ZoneFooter!
7859. ----------------------------------------------------------
7860. Volume Statistics:
7861. !VolumeStatisticsDetail!
7862. ----------------------------------------------------------
7863. Zone Detailed Report:
7864. ----------------------------------------------------------
7865. !ZoneStatisticsDetail!
7866. ----------------------------------------------------------
7867. ")
7868. 
7869. 
7870. 
7871. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
7872. 
7873. # BANNER SET
7874. 
7875. # DATE TIME RUN ELP
7876. 
7877. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
7878. /* Xinclude "..\Display\BannerSet.MyDc"X */
7879. /* pause(1) */
7880. 
7881. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
7882. 
7883. Title('!Heading!')
7884. /* pause(1) */
7885. 
7886. /* NOTE: Can't round or truncate to integer precision. */
7887. 
7888. pause(1)
7889. 
7890. 				SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
7891. 
7892. 	
7893. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
7894. 			# FILE STEP
7895. 
7896. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
7897. 
7898. /* add message and move to a new line. */
7899. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
7900. ")
7901. 
7902. /* display the line. (hopefully.) */
7903. # Zone Footer Set Statistics Window Text
7904. 
7905. SetStatisticsWindowText("----------------------------------------------------------
7906. Zones Processed: 
7907. ----------------------------------------------------------
7908. !ZoneListByLine!
7909. ----------------------------------------------------------
7910. Zone Processing Step:
7911. !ZoneStepByLine!    
7912. ----------------------------------------------------------
7913. Current Zone:
7914. !ZoneFooter!
7915. ----------------------------------------------------------
7916. Volume Statistics:
7917. !VolumeStatisticsDetail!
7918. ----------------------------------------------------------
7919. Zone Detailed Report:
7920. ----------------------------------------------------------
7921. !ZoneStatisticsDetail!
7922. ----------------------------------------------------------
7923. ")
7924. 
7925. 
7926. 
7927. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
7928. 
7929. # BANNER SET
7930. 
7931. # DATE TIME RUN ELP
7932. 
7933. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
7934. /* Xinclude "..\Display\BannerSet.MyDc"X */
7935. /* pause(1) */
7936. 
7937. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
7938. 
7939. Title('!Heading!')
7940. /* pause(1) */
7941. 
7942. /* NOTE: Can't round or truncate to integer precision. */
7943. 
7944. pause(1)
7945. 
7946. 		# Zone Do Footer
7947. 
7948. /* ---------------------------------------------------------- */
7949. # File Select
7950. 	# Select Statments
7951. # File Actions 
7952. 	# Standard or OS File Actions.
7953. 	# Resume...
7954. 	
7955. 	# your stuff HERE (X)... post zone (file) file actions code.
7956. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
7957. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
7958. 		# (X)
7959. 		
7960. 		/* ??? Set window? */
7961. 	
7962. 	# ADD THE GAP
7963. 		
7964. # Vacate (good for diagnostics)
7965. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
7966. 
7967. # DoNotVacate - DO NOT Vacate (recommended)
7968. 
7969. # Vacate
7970. /* AddGap(GapUsedLoc) */
7971. 
7972. # DO Not Vacate
7973. AddGap(GapUsedLoc, DoNotVacate) 
7974. 	
7975. 	
7976. /* ---------------------------------------------------------- */
7977. # (failed) TEST for boolean logic.
7978. 
7979. /* It should work in the gap calculations for turning options */
7980. /* on and off but it will NOT work here. */
7981. 
7982. /* Boolean setting X or FlagX. */
7983. /* Where X will be on or off: */
7984. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
7985. /*      For ON:  (X  *  FlagAny) */
7986. 
7987. /* 1) Failed, zero gap overrode the previous one. */
7988. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
7989. /* AddGap(GapUsedTemp) */ 
7990. 
7991. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
7992. /* AddGap(GapUsedTemp, DoNotVacate) */ 
7993. 
7994. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
7995. 
7996. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
7997. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
7998. /* AddGap(GapUsedTemp) */ 
7999. 
8000. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
8001. /* AddGap(GapUsedTemp, DoNotVacate) */ 
8002. 
8003. /* ---------------------------------------------------------- */
8004. 
8005. # Vacate
8006. /* AddGap(GapUsed) */
8007. 
8008. # DO NOT Vacate (recommended)
8009. /* AddGap(GapUsed, DoNotVacate) */ 
8010. 	
8011. 
8012. 		
8013. # 
8014. FileEnd
8015. /* ---------------------------------------------------------- */
8016. 
8017. # your stuff HERE (X)... post zone (file) code.
8018. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
8019. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
8020. 	# (X)
8021. 
8022. SetVariable(FileStepDescription,"Zone finished, reporting.")
8023. # FILE STEP
8024. 
8025. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
8026. 
8027. /* add message and move to a new line. */
8028. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
8029. ")
8030. 
8031. /* display the line. (hopefully.) */
8032. # Zone Footer Set Statistics Window Text
8033. 
8034. SetStatisticsWindowText("----------------------------------------------------------
8035. Zones Processed: 
8036. ----------------------------------------------------------
8037. !ZoneListByLine!
8038. ----------------------------------------------------------
8039. Zone Processing Step:
8040. !ZoneStepByLine!    
8041. ----------------------------------------------------------
8042. Current Zone:
8043. !ZoneFooter!
8044. ----------------------------------------------------------
8045. Volume Statistics:
8046. !VolumeStatisticsDetail!
8047. ----------------------------------------------------------
8048. Zone Detailed Report:
8049. ----------------------------------------------------------
8050. !ZoneStatisticsDetail!
8051. ----------------------------------------------------------
8052. ")
8053. 
8054. 
8055. 
8056. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
8057. 
8058. # BANNER SET
8059. 
8060. # DATE TIME RUN ELP
8061. 
8062. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
8063. /* Xinclude "..\Display\BannerSet.MyDc"X */
8064. /* pause(1) */
8065. 
8066. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
8067. 
8068. Title('!Heading!')
8069. /* pause(1) */
8070. 
8071. /* NOTE: Can't round or truncate to integer precision. */
8072. 
8073. pause(1)
8074. 
8075. # Zone When Finished
8076. 
8077. # BANNER SET
8078. 
8079. # DATE TIME RUN ELP
8080. 
8081. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
8082. /* Xinclude "..\Display\BannerSet.MyDc"X */
8083. /* pause(1) */
8084. 
8085. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
8086. 
8087. Title('!Heading!')
8088. /* pause(1) */
8089. 
8090. /* NOTE: Can't round or truncate to integer precision. */
8091. 
8092. AppendLogfile("!LogFileName!", "!Title!")
8093. 
8094. 
8095. 
8096. # Zone Statistics	
8097. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
8098. 
8099. # Footer:
8100. SetVariable(ZoneFooter, "----------------------------------------------------------
8101. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
8102. 
8103. Statistics Report:
8104. ------------------
8105.    Size:  
8106.    ------------------------
8107.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
8108.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
8109.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
8110. 
8111.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
8112.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
8113. 
8114.    Location:
8115.    ------------------------
8116.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
8117.              Files End: !ZoneEndCurrent!
8118.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
8119.       
8120.    Gap Settings:
8121.    ------------------------
8122.          Gap Requested: !ZoneGapSizePer!%
8123.       Volume Rounding: !ZoneVolRoundUpPer!%
8124.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
8125.                  
8126.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
8127.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
8128.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
8129.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
8130.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
8131.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
8132.      
8133.    Free Space after Zone:
8134.    ------------------------
8135.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
8136.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
8137.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
8138. 
8139. Directory and Files Select:
8140. ---------------------------
8141. !ZoneTypeSelectCurrent!               
8142. ---------------------------
8143. ----------------------------------------------------------
8144. ")
8145. 
8146. AppendLogfile("!LogFileName!", ".")
8147. AppendLogfile("!LogFileName!", "!ZoneFooter!")
8148. AppendLogfile("!LogFileName!", ".")
8149. 
8150. # Zone Footer Set Statistics Window Text
8151. 
8152. SetStatisticsWindowText("----------------------------------------------------------
8153. Zones Processed: 
8154. ----------------------------------------------------------
8155. !ZoneListByLine!
8156. ----------------------------------------------------------
8157. Zone Processing Step:
8158. !ZoneStepByLine!    
8159. ----------------------------------------------------------
8160. Current Zone:
8161. !ZoneFooter!
8162. ----------------------------------------------------------
8163. Volume Statistics:
8164. !VolumeStatisticsDetail!
8165. ----------------------------------------------------------
8166. Zone Detailed Report:
8167. ----------------------------------------------------------
8168. !ZoneStatisticsDetail!
8169. ----------------------------------------------------------
8170. ")
8171. 
8172. 
8173. 
8174. /* pause() */
8175. /* pause() */
8176. 
8177. 
8178. 
8179. 	
8180. /* ---------------------------------------------------------- */
8181. # Zone Programs Fixed size just Windows.
8182. 	SetVariable(ZoneLabel, 			"!ZoneLabelProgramsWindows!")
8183. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionProgramsWindows!")
8184. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpPrograms!")
8185. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizePrograms!")
8186. 	SetVariable(ZoneTypeSelect,'
8187.                 # Programs - Windows folder.
8188.                 not(
8189.                 # Os Data Dynamic start.
8190. (
8191. # Os Data Dynamic start.
8192. (
8193.   FileName("*.dat*")
8194.   or FileName("*.db*")
8195.   or FileName("*.edb*")
8196.   or FileName("*.log*")
8197.   or FileName("DataStore.edb")
8198. )
8199. # Os Data Dynamic end.
8200. 
8201.   or 
8202. # Os PageHiberDump start.
8203. (
8204.   FileName("DataStore.edb")
8205.   or FileName("DUMP*.*")
8206.   or FileName("Hiberfil.sys")
8207.   or FileName("MEMORY.DMP")
8208.   or FileName("Pagefile.sys")
8209. )
8210. # Os PageHiberDump end.
8211. 
8212. # Os Data Dynamic
8213. )
8214. # Os Data Dynamic end.
8215. 
8216.                 )
8217. ')
8218. 
8219. 		# Zone Do Header
8220. 
8221. # Zone When Started
8222. 
8223. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
8224. # Display Set Zone
8225. 
8226. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
8227. SetVariable(FileStepDescription,	"")
8228. 
8229. SetVariable(ZoneStepByLine, 			"Zone started.
8230. ")
8231. 
8232. # BANNER SET
8233. 
8234. # DATE TIME RUN ELP
8235. 
8236. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
8237. /* Xinclude "..\Display\BannerSet.MyDc"X */
8238. /* pause(1) */
8239. 
8240. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
8241. 
8242. Title('!Heading!')
8243. /* pause(1) */
8244. 
8245. /* NOTE: Can't round or truncate to integer precision. */
8246. 
8247. AppendLogfile("!LogFileName!", "!Title!")
8248. 
8249. 
8250. 
8251. pause(1)
8252. 
8253. 
8254. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
8255. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
8256. 
8257. SetVariable(ZoneStepNoCurrent, 0)
8258. 
8259. 
8260. # Zone Do Current Clear
8261. 
8262. SetVariable(ZoneTypeSelectCurrent, 		"")
8263. 
8264. SetVariable(ZoneBeginCurrent, 			0)
8265. SetVariable(ZoneBeginPerCurrent, 		0)
8266. SetVariable(ZoneEndCurrent, 			0)
8267. SetVariable(ZoneEndPerCurrent, 			0)
8268. 
8269. SetVariable(ZoneSizeCurrent,			0)
8270. SetVariable(ZoneSizePerCurrent,			0)
8271. 
8272. SetVariable(ZoneGapRequestedCurrent,	0)
8273. SetVariable(ZoneGapRoundedCurrent, 		0)
8274. SetVariable(ZoneGapAdjustedCurrent, 	0)
8275. SetVariable(ZoneGapAvailableCurrent, 	0)
8276. SetVariable(ZoneGapCurrent,				0)
8277. SetVariable(ZoneGapUsedCurrent, 		0)
8278. 
8279. SetVariable(ZoneGapActualCurrent, 		0)
8280. SetVariable(ZoneGapActualPerCurrent, 	0)
8281. 
8282. SetVariable(ZoneSizeActual, 			0)
8283. SetVariable(ZoneSizeActualCurrent,		0)
8284. 
8285. SetVariable(ZoneEndActual, 				0)
8286. SetVariable(ZoneEndActualCurrent,		0)			
8287. SetVariable(ZoneSizeActualPerCurrent, 	0)
8288.       
8289. SetVariable(ZoneFilesFolders,			0)
8290. SetVariable(ZoneFilesFoldersPer,		0) 
8291. 
8292. SetVariable(ZoneFragments,				0)
8293. SetVariable(ZoneFragmentsPer,			0) 
8294. 		
8295. SetVariable(ZoneEndActualCurrent, 		0)
8296. SetVariable(ZoneEndActualPerCurrent, 	0)
8297. 
8298. # Gap Calculation Methodology:
8299. 	# Requested
8300. 	SetVariable(GapRequested, 			0) 
8301. 	SetVariable(GapRequestedStd, 		0) 
8302. 	SetVariable(GapRequestedMft, 		0) 
8303. 	SetVariable(GapRequestedOs, 		0) 
8304. 	SetVariable(GapRequestedOriginal, 	0) 
8305. 	
8306. 	# Gap Adjustments
8307. 	SetVariable(GapRounded, 			0)
8308. 	# SetVariable(GapAdjusted, 			0)
8309. 	SetVariable(GapAvailable, 			0)
8310. 	SetVariable(GapCurrent, 			0)
8311. 	SetVariable(GapActual, 				0)
8312. 	SetVariable(GapUsed, 				0)
8313. 	
8314. 	# Gap Adjustments
8315. 	SetVariable(GapRoundedLoc, 			0)
8316. 	# SetVariable(GapAdjustedLoc, 		0)
8317. 	SetVariable(GapAvailableLoc, 		0)
8318. 	SetVariable(GapCurrentLoc, 			0)
8319. 	SetVariable(GapActualLoc,			0)
8320. 	SetVariable(GapUsedLoc,				0)
8321. 	
8322. 	# Space usage
8323. 	SetVariable(ZoneFreePerRequested, 	0)
8324. 	SetVariable(ZoneFreePerUsed, 		0)
8325. 
8326. # Gap Size & Rounding
8327. 	SetVariable(ZoneGapSizePer, 		0)
8328. 	SetVariable(ZoneVolRoundUpPer, 		0)
8329. 	
8330. 	# Free Space
8331. 	SetVariable(ZoneFreeUsedPer, 		0)
8332. 	SetVariable(ZoneFreeRequestedPer, 	0)
8333. 
8334. 
8335. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
8336. 
8337. # Footer:
8338. SetVariable(ZoneFooter, "----------------------------------------------------------
8339. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:17
8340. 
8341. Statistics Report:
8342. ------------------
8343.    Size:  
8344.    ------------------------
8345.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
8346.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
8347.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
8348. 
8349.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
8350.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
8351. 
8352.    Location:
8353.    ------------------------
8354.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
8355.              Files End: !ZoneEndCurrent!
8356.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
8357.       
8358.    Gap Settings:
8359.    ------------------------
8360.          Gap Requested: !ZoneGapSizePer!%
8361.       Volume Rounding: !ZoneVolRoundUpPer!%
8362.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
8363.                  
8364.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
8365.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
8366.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
8367.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
8368.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
8369.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
8370.      
8371.    Free Space after Zone:
8372.    ------------------------
8373.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
8374.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
8375.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
8376. 
8377. Directory and Files Select:
8378. ---------------------------
8379. !ZoneTypeSelectCurrent!               
8380. ---------------------------
8381. ----------------------------------------------------------
8382. ")
8383. 
8384. # BANNER SET
8385. 
8386. # DATE TIME RUN ELP
8387. 
8388. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:17 0:00:05")
8389. /* Xinclude "..\Display\BannerSet.MyDc"X */
8390. /* pause(1) */
8391. 
8392. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
8393. 
8394. Title('!Heading!')
8395. /* pause(1) */
8396. 
8397. /* NOTE: Can't round or truncate to integer precision. */
8398. 
8399. AppendLogfile("!LogFileName!", "!Title!")
8400. 
8401. 
8402. 
8403. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
8404. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
8405. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:17")
8406. 
8407. SetVariable(ZoneListByLine, "!ZoneListByLine!
8408. Zone: !ZoneNoCurrent! 2021-11-09 08:17:17 0:00:05 !ZoneLabel! !ZoneDescription!")
8409. 
8410. 
8411. /* Fixed Zone Position Handling */
8412. /* Literal number: */
8413. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
8414. /* Percentage of disk: */
8415. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
8416. /* Gap */
8417. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
8418. 
8419. /* ---------------------------------------------------------- */
8420. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
8421. # FILE STEP
8422. 
8423. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
8424. 
8425. /* add message and move to a new line. */
8426. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
8427. ")
8428. 
8429. /* display the line. (hopefully.) */
8430. # Zone Footer Set Statistics Window Text
8431. 
8432. SetStatisticsWindowText("----------------------------------------------------------
8433. Zones Processed: 
8434. ----------------------------------------------------------
8435. !ZoneListByLine!
8436. ----------------------------------------------------------
8437. Zone Processing Step:
8438. !ZoneStepByLine!    
8439. ----------------------------------------------------------
8440. Current Zone:
8441. !ZoneFooter!
8442. ----------------------------------------------------------
8443. Volume Statistics:
8444. !VolumeStatisticsDetail!
8445. ----------------------------------------------------------
8446. Zone Detailed Report:
8447. ----------------------------------------------------------
8448. !ZoneStatisticsDetail!
8449. ----------------------------------------------------------
8450. ")
8451. 
8452. 
8453. 
8454. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
8455. 
8456. # BANNER SET
8457. 
8458. # DATE TIME RUN ELP
8459. 
8460. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
8461. /* Xinclude "..\Display\BannerSet.MyDc"X */
8462. /* pause(1) */
8463. 
8464. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
8465. 
8466. Title('!Heading!')
8467. /* pause(1) */
8468. 
8469. /* NOTE: Can't round or truncate to integer precision. */
8470. 
8471. pause(1)
8472. 
8473. # your stuff HERE (X)... pre file select code.
8474. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
8475. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
8476. 	# (X)
8477. 
8478. FileSelect
8479. 
8480. 	# your stuff can't really go here (errors.)
8481. 	# maybe for some reason I don't know of...
8482. 	
8483. 	# Actions next...
8484. 		# Programs start.
8485. # NotBlobsArchivesBu start.
8486. (not (
8487. # Blobs start.
8488. (
8489. # BlobsAndExceptions start.
8490. ( not(
8491.   FileName("*.bat")
8492.   or FileName("*.css")
8493.   or FileName("*.dll")
8494.   or FileName("*.exe")
8495.   or FileName("*.htm*")
8496.   or FileName("*.jar")
8497.   or FileName("*.js")
8498.   or FileName("*.script")
8499.   or FileName("*.wsf")
8500.   or (
8501. # Databases start.
8502. (
8503.   FileName("*.crypt*")
8504.   or FileName("*.db*")
8505.   or FileName("*.rdb*")
8506.   or FileName("*.dc*")
8507.   or FileName("*.dict*")
8508.   or FileName("*.?db*")
8509.   or FileName("*.?rdb*")
8510.   or FileName("*.md*")
8511.   or FileName("*.myd")
8512.   or FileName("*.ndf")
8513.   or FileName("*.ns?")
8514.   or FileName("*.pab")
8515.   or FileName("*.pst")
8516.   or FileName("*.sd?*")
8517.   or FileName("*.sq**")
8518.   or FileName("*.tmd")
8519.   or FileName("*.tps")
8520.   or FileName("*.tr*")
8521. )
8522. # Databases end.
8523. 
8524.     # BlobsAndExceptions
8525.     or 
8526. # Data start.
8527. (
8528.   DirectoryName("Data*")
8529.   or DirectoryName("Device*")
8530.   or DirectoryName("Export*")
8531.   or DirectoryName("Import*")
8532.   or DirectoryName("Log*")
8533.   or DirectoryName("*Log")
8534.   or DirectoryName("Maintenance*")
8535.   or DirectoryName("Rec*")
8536.   or DirectoryName("Sales*")
8537.   or DirectoryName("Search*")
8538.   or DirectoryName("User*")
8539. )
8540. # Data end.
8541. 
8542.     # BlobsAndExceptions
8543.   )
8544. ) )
8545. # BlobsAndExceptions end.
8546. 
8547. # Blobs
8548. ) and (
8549.   Size(BlobFileSize,0)
8550.   or (
8551.     FileName("*.arj")
8552.     or FileName("*.bup")
8553.     or FileName("*.bz2")
8554.     or FileName("*.chm")
8555.     or FileName("*.dvr-ms")
8556.     or FileName("*.gz")
8557.     or FileName("*.ifo")
8558.     or FileName("*.lzh")
8559.     or FileName("*.pdf")
8560.     or FileName("*.rpm")
8561.     or FileName("*.wmv")
8562.     or FileName("*.vob")
8563.     or FileName("*.z")
8564.   ) 
8565. )
8566. # Blobs end.
8567. 
8568. # NotBlobsArchivesBu
8569. or 
8570. # Archives start.
8571. (
8572.   DirectoryName("*Archive*")
8573.   or DirectoryName("*History*")
8574.   or DirectoryName("*Old")
8575.   or DirectoryName("* Old *")
8576.   or DirectoryName("Old *")
8577. 
8578.   or FileName("*.7z")
8579.   or FileName("*.cab")
8580.   or FileName("*.iso")
8581.   or FileName("*.msi")
8582.   or FileName("*.old")
8583.   or FileName("*.rar")
8584.   or FileName("*.tar")
8585.   or FileName("*.zip")
8586.   or
8587. # WinSysLow start.
8588. (
8589.   DirectoryName("$*")
8590.   or DirectoryName("0*")
8591.   or DirectoryName("1*")
8592.   or DirectoryName("2*")
8593.   or DirectoryName("3*")
8594.   or DirectoryName("4*")
8595.   or DirectoryName("5*")
8596.   or DirectoryName("6*")
8597.   or DirectoryName("7*")
8598.   or DirectoryName("8*")
8599.   or DirectoryName("9*")
8600. 
8601.   or DirectoryName("dllcache")
8602.   or DirectoryName("Downloaded Installations")
8603.   or DirectoryName("Ehome")
8604.   or DirectoryName("Fonts")
8605.   or DirectoryName("Help")
8606.   or DirectoryName("I386")
8607.   or DirectoryName("ie?updates")
8608.   or DirectoryName("Installer")
8609.   or DirectoryName("Installshield Installation Information")
8610.   or DirectoryName("IME")
8611.   or DirectoryName("*RECYCLE*")
8612.   or DirectoryName("ServicePackFiles")
8613.   or DirectoryName("SoftwareDistribution")
8614.   or DirectoryName("Speech")
8615.   or DirectoryName("Symbols")
8616.   or DirectoryName("System Volume Information")
8617.   or DirectoryName("windows.old")
8618. )
8619. # WinSysLow end.
8620. 
8621.   # Archives
8622. )
8623. # Archives end.
8624. 
8625. # NotBlobsArchivesBu
8626. or
8627. # Backups start.
8628. (
8629.   DirectoryName("*Backup*")
8630.   or DirectoryName("*Bu")
8631.   or DirectoryName("* Bu *")
8632.   or DirectoryName("Bu *")
8633. 
8634.   or FileName("*.bak")
8635.   or FileName("* - Copy*")
8636. )
8637. # Backups end.
8638. 
8639. # NotBlobsArchivesBu
8640. ) )
8641. # NotBlobsArchivesBu end.
8642. 
8643. # Programs
8644. and (
8645. # SystemDir start.
8646. (
8647.   DirectoryName("Boot*")
8648.   or DirectoryName("Device*")
8649.   or DirectoryName("DevSupport*")
8650.   or DirectoryName("Program*")
8651.   or DirectoryName("Security*")
8652.   or DirectoryName("SendTo*")
8653.   or DirectoryName("Sw*")
8654.   or DirectoryName("System*")
8655.   or DirectoryName("Toolbars")
8656.   or DirectoryName("Windows*")
8657. )
8658. # SystemDir end.
8659. 
8660. # Programs
8661. )
8662. # Programs end.
8663. 
8664. 		and not(
8665. 			# Os Data Dynamic start.
8666. (
8667. # Os Data Dynamic start.
8668. (
8669.   FileName("*.dat*")
8670.   or FileName("*.db*")
8671.   or FileName("*.edb*")
8672.   or FileName("*.log*")
8673.   or FileName("DataStore.edb")
8674. )
8675. # Os Data Dynamic end.
8676. 
8677.   or 
8678. # Os PageHiberDump start.
8679. (
8680.   FileName("DataStore.edb")
8681.   or FileName("DUMP*.*")
8682.   or FileName("Hiberfil.sys")
8683.   or FileName("MEMORY.DMP")
8684.   or FileName("Pagefile.sys")
8685. )
8686. # Os PageHiberDump end.
8687. 
8688. # Os Data Dynamic
8689. )
8690. # Os Data Dynamic end.
8691. 
8692. 		)
8693. 		FileActions
8694. 		  		/* ---------------------------------------------------------- */
8695. 	# Gap
8696. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
8697. 		# FILE STEP
8698. 
8699. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
8700. 
8701. /* add message and move to a new line. */
8702. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
8703. ")
8704. 
8705. /* display the line. (hopefully.) */
8706. # Zone Footer Set Statistics Window Text
8707. 
8708. SetStatisticsWindowText("----------------------------------------------------------
8709. Zones Processed: 
8710. ----------------------------------------------------------
8711. !ZoneListByLine!
8712. ----------------------------------------------------------
8713. Zone Processing Step:
8714. !ZoneStepByLine!    
8715. ----------------------------------------------------------
8716. Current Zone:
8717. !ZoneFooter!
8718. ----------------------------------------------------------
8719. Volume Statistics:
8720. !VolumeStatisticsDetail!
8721. ----------------------------------------------------------
8722. Zone Detailed Report:
8723. ----------------------------------------------------------
8724. !ZoneStatisticsDetail!
8725. ----------------------------------------------------------
8726. ")
8727. 
8728. 
8729. 
8730. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
8731. 
8732. # BANNER SET
8733. 
8734. # DATE TIME RUN ELP
8735. 
8736. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
8737. /* Xinclude "..\Display\BannerSet.MyDc"X */
8738. /* pause(1) */
8739. 
8740. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
8741. 
8742. Title('!Heading!')
8743. /* pause(1) */
8744. 
8745. /* NOTE: Can't round or truncate to integer precision. */
8746. 
8747. pause(1)
8748. 	
8749. 	# ACTUAL GAP
8750. 		/* AddGap Variant. */
8751. 	  	# Zone Do Gap
8752. # Gap Calculation Methods:
8753. 
8754. /* 1) Anything you need to add first. */
8755. /* empty */
8756. 
8757. /* ---------------------------------------------------------- */
8758. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
8759. 	# GapRequestedStd.
8760. 
8761. 		/* ---------------------------------------------------------- */
8762. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
8763. 
8764. 		# Gap Calculation Methods:
8765. 
8766. /* AddGap Variants */
8767. 
8768. 	/* Standard */
8769. 		# Gap Calculation Methods:
8770. 	/* AddGap Variants */
8771. 	/* Standard */
8772. 
8773. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
8774. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
8775. 
8776. 	SetVariable(GapRequested, GapRequestedStd)
8777. 	
8778. 
8779. 	/* MFT Low High Method */
8780. 		# Gap Calculation Methods:
8781. 	/* AddGap Variants */
8782. 	/* MFT Low High Method */
8783. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
8784. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
8785. 	SetVariable(GapRequested, GapRequestedMft)
8786. 	
8787. 
8788. 	/* OS Volume Type Method */
8789. 		# Gap Calculation Methods:
8790. 	/* AddGap Variants */
8791. 	/* OS Volume Type Method */
8792. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
8793. 	SetVariable(GapRequested, GapRequestedOs)
8794. 
8795. 
8796. 
8797. /* MakeGap Variants */
8798. 
8799. 	/* Original Os 1-3 + MFT 2 */
8800. 		# Gap Calculation Methods:
8801. 	/* MakeGap Variants */
8802. 	/* Original Os 1-3 + MFT 2 */
8803. 	/* plus MFT gap placed inline at the dividing zone. */
8804. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
8805. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
8806. 	SetVariable(GapRequested, GapRequestedOrig)
8807. 	
8808. 	
8809. /* Note: You could comment out the ones not in use */
8810. /* However having the data in the log is useful. */
8811. /* Therefore the following line is otherwise needed. */
8812. 
8813. /* Standard used */
8814. 
8815. SetVariable(GapRequested, GapRequestedStd)
8816. 
8817. # Gap Calculation Methods:
8818. 
8819. /* AddGap Variants */
8820. 	/* Standard */
8821. 	/* MFT Low High Method */
8822. 	/* OS Volume Type Method */
8823. 
8824. /* MakeGap Variants */
8825. 	/* Original Os 1-3 + MFT 2 */
8826. 
8827. /* Note: You could comment out the ones not in use */
8828. /* However having the data in the log is useful. */
8829. /* Therefore the following line is otherwise needed. */
8830. 
8831. /* Standard is used currently */
8832. 
8833. 
8834. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
8835. 
8836. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
8837. 
8838. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
8839. 
8840. /* ---------------------------------------------------------- */
8841. /* 3) SMALL ZONE ADJUSTMENT. */
8842. /* Gab cant be larger than half the Zone Size. */
8843. 
8844. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
8845. 	
8846. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
8847. 
8848. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
8849. 
8850. /* ---------------------------------------------------------- */
8851. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
8852. # Gap Adjustments.
8853. 
8854. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
8855. 	
8856. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
8857. 
8858. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
8859. 
8860. /* ---------------------------------------------------------- */
8861. # BYPASS THIS.
8862. 	/* This is definitely wrong. */
8863. 	/* The question is can we steal gap from the next zone */
8864. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
8865. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
8866. 		# Zone Overflow.
8867. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
8868. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
8869. 
8870. /* ---------------------------------------------------------- */
8871. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
8872. # Remaining free space available.
8873. 
8874. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
8875. 	
8876. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
8877. 
8878. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
8879. 
8880. /* ---------------------------------------------------------- */
8881. # CURRENT gap to use.
8882. 
8883. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
8884. 
8885. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
8886. 
8887. /* ---------------------------------------------------------- */
8888. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
8889. # Debugging.
8890. 
8891. 	SetVariable(GapUsed, GapCurrent) // for debugging
8892. 
8893. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
8894. 
8895. 		# Your code HERE
8896. 
8897. /* ---------------------------------------------------------- */
8898. /* 7) YOUR CODE. */
8899. # YOUR CODE HERE:
8900. 	# INPUT: GapCurrent or GapCurrentLoc
8901. 	# OUTPUT: GapUsed...
8902. 
8903. /* ---------------------------------------------------------- */
8904. # Gap Size.
8905. # Actual Size of Gap.
8906. 
8907. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
8908. 
8909. /* ---------------------------------------------------------- */
8910. /* xxxxxxxxxxxxxxxxxxxxxx */
8911. # ADD THE GAP
8912. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
8913. /* xxxxxxxxxxxxxxxxxxxxxx */
8914. 
8915. 	
8916. 	# Zone Statistics	
8917. 	# Zone / Volume Statistics and Display
8918. 		
8919. 	# Accumulate Totals
8920.   	# Volume totals
8921. 
8922. /* Current total space used (by Zones and Gaps) */
8923. 
8924. SetVariable(VolumeZoneUsed, GapUsed)
8925. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
8926. /* Percentage */
8927. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
8928. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
8929. 
8930. /* Current total of free space requested */
8931. 
8932. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
8933. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
8934. /* Percent. */
8935. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
8936. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
8937. 
8938. /* Current total of free space used */
8939. 
8940. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
8941. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
8942. /* Percent */
8943. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
8944. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
8945. 
8946. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
8947. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
8948. /* Xinclude "..\DebugDisplayPause.MyDc"X */
8949. 
8950. 
8951. 	# Current Values
8952. 	# Cluster, Sector, Block adjust for display.
8953. 	# Bytes per cluster is volume specific.
8954. 
8955. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
8956. 
8957. # Current Zone values.
8958. 	# Begin, end and size.
8959. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
8960. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
8961. 
8962. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
8963. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
8964. 
8965. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
8966. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
8967. 
8968. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
8969. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
8970. 
8971. 	SetVariable(ZoneFragments,				"!ZONE210N!")
8972. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
8973. 		
8974. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
8975. /* identical code to here: (separation not needed. TEST.) */	
8976. 
8977. # Current Gap, Actual and Free Values
8978. 	# Gap
8979. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
8980. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
8981. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
8982. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
8983. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
8984. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
8985. 	
8986. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
8987. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
8988. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
8989. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
8990. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
8991. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
8992. 	
8993. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
8994. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
8995. 	
8996. 	# Actual Size and End
8997. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
8998. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
8999. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
9000. 	
9001. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
9002. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
9003. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
9004. 
9005. # Gap Size & Rounding
9006. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
9007. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
9008. 	
9009. 	# Free Space
9010. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
9011. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
9012. 
9013. 	# Footer:
9014. SetVariable(ZoneFooter, "----------------------------------------------------------
9015. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
9016. 
9017. Statistics Report:
9018. ------------------
9019.    Size:  
9020.    ------------------------
9021.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
9022.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
9023.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
9024. 
9025.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
9026.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
9027. 
9028.    Location:
9029.    ------------------------
9030.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
9031.              Files End: !ZoneEndCurrent!
9032.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
9033.       
9034.    Gap Settings:
9035.    ------------------------
9036.          Gap Requested: !ZoneGapSizePer!%
9037.       Volume Rounding: !ZoneVolRoundUpPer!%
9038.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
9039.                  
9040.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
9041.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
9042.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
9043.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
9044.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
9045.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
9046.      
9047.    Free Space after Zone:
9048.    ------------------------
9049.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
9050.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
9051.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
9052. 
9053. Directory and Files Select:
9054. ---------------------------
9055. !ZoneTypeSelectCurrent!               
9056. ---------------------------
9057. ----------------------------------------------------------
9058. ")
9059. 	# Zone Footer Set Statistics Window Text
9060. 
9061. SetStatisticsWindowText("----------------------------------------------------------
9062. Zones Processed: 
9063. ----------------------------------------------------------
9064. !ZoneListByLine!
9065. ----------------------------------------------------------
9066. Zone Processing Step:
9067. !ZoneStepByLine!    
9068. ----------------------------------------------------------
9069. Current Zone:
9070. !ZoneFooter!
9071. ----------------------------------------------------------
9072. Volume Statistics:
9073. !VolumeStatisticsDetail!
9074. ----------------------------------------------------------
9075. Zone Detailed Report:
9076. ----------------------------------------------------------
9077. !ZoneStatisticsDetail!
9078. ----------------------------------------------------------
9079. ")
9080. 
9081. 
9082. 	
9083.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
9084. 
9085. 	# Add Zone to list of zones for display.
9086. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
9087. 	# ??? Free Stats?
9088. 	# Footer:
9089. SetVariable(ZoneFooter, "----------------------------------------------------------
9090. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
9091. 
9092. Statistics Report:
9093. ------------------
9094.    Size:  
9095.    ------------------------
9096.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
9097.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
9098.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
9099. 
9100.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
9101.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
9102. 
9103.    Location:
9104.    ------------------------
9105.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
9106.              Files End: !ZoneEndCurrent!
9107.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
9108.       
9109.    Gap Settings:
9110.    ------------------------
9111.          Gap Requested: !ZoneGapSizePer!%
9112.       Volume Rounding: !ZoneVolRoundUpPer!%
9113.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
9114.                  
9115.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
9116.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
9117.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
9118.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
9119.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
9120.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
9121.      
9122.    Free Space after Zone:
9123.    ------------------------
9124.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
9125.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
9126.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
9127. 
9128. Directory and Files Select:
9129. ---------------------------
9130. !ZoneTypeSelectCurrent!               
9131. ---------------------------
9132. ----------------------------------------------------------
9133. ")
9134. 
9135. 	# Add Zone Details to Report.	
9136. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
9137. !ZoneFooter!")
9138. 
9139. 
9140. 	
9141. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
9142. 			# FILE STEP
9143. 
9144. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
9145. 
9146. /* add message and move to a new line. */
9147. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
9148. ")
9149. 
9150. /* display the line. (hopefully.) */
9151. # Zone Footer Set Statistics Window Text
9152. 
9153. SetStatisticsWindowText("----------------------------------------------------------
9154. Zones Processed: 
9155. ----------------------------------------------------------
9156. !ZoneListByLine!
9157. ----------------------------------------------------------
9158. Zone Processing Step:
9159. !ZoneStepByLine!    
9160. ----------------------------------------------------------
9161. Current Zone:
9162. !ZoneFooter!
9163. ----------------------------------------------------------
9164. Volume Statistics:
9165. !VolumeStatisticsDetail!
9166. ----------------------------------------------------------
9167. Zone Detailed Report:
9168. ----------------------------------------------------------
9169. !ZoneStatisticsDetail!
9170. ----------------------------------------------------------
9171. ")
9172. 
9173. 
9174. 
9175. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
9176. 
9177. # BANNER SET
9178. 
9179. # DATE TIME RUN ELP
9180. 
9181. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9182. /* Xinclude "..\Display\BannerSet.MyDc"X */
9183. /* pause(1) */
9184. 
9185. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9186. 
9187. Title('!Heading!')
9188. /* pause(1) */
9189. 
9190. /* NOTE: Can't round or truncate to integer precision. */
9191. 
9192. pause(1)
9193. 
9194. 			/* "..\ActionVerbs\ZoneDoActionThis.MyDc" */
9195. 			# File Action - SortByImportSequence with SkipBlock.
9196. SortByImportSequence(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes)) 
9197. 	
9198. 	
9199. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
9200. 			# FILE STEP
9201. 
9202. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
9203. 
9204. /* add message and move to a new line. */
9205. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
9206. ")
9207. 
9208. /* display the line. (hopefully.) */
9209. # Zone Footer Set Statistics Window Text
9210. 
9211. SetStatisticsWindowText("----------------------------------------------------------
9212. Zones Processed: 
9213. ----------------------------------------------------------
9214. !ZoneListByLine!
9215. ----------------------------------------------------------
9216. Zone Processing Step:
9217. !ZoneStepByLine!    
9218. ----------------------------------------------------------
9219. Current Zone:
9220. !ZoneFooter!
9221. ----------------------------------------------------------
9222. Volume Statistics:
9223. !VolumeStatisticsDetail!
9224. ----------------------------------------------------------
9225. Zone Detailed Report:
9226. ----------------------------------------------------------
9227. !ZoneStatisticsDetail!
9228. ----------------------------------------------------------
9229. ")
9230. 
9231. 
9232. 
9233. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
9234. 
9235. # BANNER SET
9236. 
9237. # DATE TIME RUN ELP
9238. 
9239. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9240. /* Xinclude "..\Display\BannerSet.MyDc"X */
9241. /* pause(1) */
9242. 
9243. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9244. 
9245. Title('!Heading!')
9246. /* pause(1) */
9247. 
9248. /* NOTE: Can't round or truncate to integer precision. */
9249. 
9250. pause(1)
9251. 
9252. 		# Zone Do Footer
9253. 
9254. /* ---------------------------------------------------------- */
9255. # File Select
9256. 	# Select Statments
9257. # File Actions 
9258. 	# Standard or OS File Actions.
9259. 	# Resume...
9260. 	
9261. 	# your stuff HERE (X)... post zone (file) file actions code.
9262. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
9263. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
9264. 		# (X)
9265. 		
9266. 		/* ??? Set window? */
9267. 	
9268. 	# ADD THE GAP
9269. 		
9270. # Vacate (good for diagnostics)
9271. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
9272. 
9273. # DoNotVacate - DO NOT Vacate (recommended)
9274. 
9275. # Vacate
9276. /* AddGap(GapUsedLoc) */
9277. 
9278. # DO Not Vacate
9279. AddGap(GapUsedLoc, DoNotVacate) 
9280. 	
9281. 	
9282. /* ---------------------------------------------------------- */
9283. # (failed) TEST for boolean logic.
9284. 
9285. /* It should work in the gap calculations for turning options */
9286. /* on and off but it will NOT work here. */
9287. 
9288. /* Boolean setting X or FlagX. */
9289. /* Where X will be on or off: */
9290. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
9291. /*      For ON:  (X  *  FlagAny) */
9292. 
9293. /* 1) Failed, zero gap overrode the previous one. */
9294. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
9295. /* AddGap(GapUsedTemp) */ 
9296. 
9297. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
9298. /* AddGap(GapUsedTemp, DoNotVacate) */ 
9299. 
9300. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
9301. 
9302. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
9303. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
9304. /* AddGap(GapUsedTemp) */ 
9305. 
9306. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
9307. /* AddGap(GapUsedTemp, DoNotVacate) */ 
9308. 
9309. /* ---------------------------------------------------------- */
9310. 
9311. # Vacate
9312. /* AddGap(GapUsed) */
9313. 
9314. # DO NOT Vacate (recommended)
9315. /* AddGap(GapUsed, DoNotVacate) */ 
9316. 	
9317. 
9318. 		
9319. # 
9320. FileEnd
9321. /* ---------------------------------------------------------- */
9322. 
9323. # your stuff HERE (X)... post zone (file) code.
9324. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
9325. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
9326. 	# (X)
9327. 
9328. SetVariable(FileStepDescription,"Zone finished, reporting.")
9329. # FILE STEP
9330. 
9331. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
9332. 
9333. /* add message and move to a new line. */
9334. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
9335. ")
9336. 
9337. /* display the line. (hopefully.) */
9338. # Zone Footer Set Statistics Window Text
9339. 
9340. SetStatisticsWindowText("----------------------------------------------------------
9341. Zones Processed: 
9342. ----------------------------------------------------------
9343. !ZoneListByLine!
9344. ----------------------------------------------------------
9345. Zone Processing Step:
9346. !ZoneStepByLine!    
9347. ----------------------------------------------------------
9348. Current Zone:
9349. !ZoneFooter!
9350. ----------------------------------------------------------
9351. Volume Statistics:
9352. !VolumeStatisticsDetail!
9353. ----------------------------------------------------------
9354. Zone Detailed Report:
9355. ----------------------------------------------------------
9356. !ZoneStatisticsDetail!
9357. ----------------------------------------------------------
9358. ")
9359. 
9360. 
9361. 
9362. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
9363. 
9364. # BANNER SET
9365. 
9366. # DATE TIME RUN ELP
9367. 
9368. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9369. /* Xinclude "..\Display\BannerSet.MyDc"X */
9370. /* pause(1) */
9371. 
9372. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9373. 
9374. Title('!Heading!')
9375. /* pause(1) */
9376. 
9377. /* NOTE: Can't round or truncate to integer precision. */
9378. 
9379. pause(1)
9380. 
9381. # Zone When Finished
9382. 
9383. # BANNER SET
9384. 
9385. # DATE TIME RUN ELP
9386. 
9387. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9388. /* Xinclude "..\Display\BannerSet.MyDc"X */
9389. /* pause(1) */
9390. 
9391. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9392. 
9393. Title('!Heading!')
9394. /* pause(1) */
9395. 
9396. /* NOTE: Can't round or truncate to integer precision. */
9397. 
9398. AppendLogfile("!LogFileName!", "!Title!")
9399. 
9400. 
9401. 
9402. # Zone Statistics	
9403. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
9404. 
9405. # Footer:
9406. SetVariable(ZoneFooter, "----------------------------------------------------------
9407. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
9408. 
9409. Statistics Report:
9410. ------------------
9411.    Size:  
9412.    ------------------------
9413.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
9414.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
9415.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
9416. 
9417.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
9418.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
9419. 
9420.    Location:
9421.    ------------------------
9422.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
9423.              Files End: !ZoneEndCurrent!
9424.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
9425.       
9426.    Gap Settings:
9427.    ------------------------
9428.          Gap Requested: !ZoneGapSizePer!%
9429.       Volume Rounding: !ZoneVolRoundUpPer!%
9430.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
9431.                  
9432.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
9433.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
9434.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
9435.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
9436.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
9437.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
9438.      
9439.    Free Space after Zone:
9440.    ------------------------
9441.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
9442.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
9443.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
9444. 
9445. Directory and Files Select:
9446. ---------------------------
9447. !ZoneTypeSelectCurrent!               
9448. ---------------------------
9449. ----------------------------------------------------------
9450. ")
9451. 
9452. AppendLogfile("!LogFileName!", ".")
9453. AppendLogfile("!LogFileName!", "!ZoneFooter!")
9454. AppendLogfile("!LogFileName!", ".")
9455. 
9456. # Zone Footer Set Statistics Window Text
9457. 
9458. SetStatisticsWindowText("----------------------------------------------------------
9459. Zones Processed: 
9460. ----------------------------------------------------------
9461. !ZoneListByLine!
9462. ----------------------------------------------------------
9463. Zone Processing Step:
9464. !ZoneStepByLine!    
9465. ----------------------------------------------------------
9466. Current Zone:
9467. !ZoneFooter!
9468. ----------------------------------------------------------
9469. Volume Statistics:
9470. !VolumeStatisticsDetail!
9471. ----------------------------------------------------------
9472. Zone Detailed Report:
9473. ----------------------------------------------------------
9474. !ZoneStatisticsDetail!
9475. ----------------------------------------------------------
9476. ")
9477. 
9478. 
9479. 
9480. /* pause() */
9481. /* pause() */
9482. 
9483. 
9484. 
9485. 	
9486. /* ---------------------------------------------------------- */
9487. # Zone Program Data.
9488. 	SetVariable(ZoneLabel, 			"!ZoneLabelProgramsData!")
9489. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionProgramsData!")
9490. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpPrograms!")
9491. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizePrograms!")
9492. 	SetVariable(ZoneTypeSelect,'
9493.                 # Programs - Data files.
9494.                 not(
9495.                 # Os PageHiberDump start.
9496. (
9497.   FileName("DataStore.edb")
9498.   or FileName("DUMP*.*")
9499.   or FileName("Hiberfil.sys")
9500.   or FileName("MEMORY.DMP")
9501.   or FileName("Pagefile.sys")
9502. )
9503. # Os PageHiberDump end.
9504. 
9505.                 )
9506. ')
9507. 
9508. 		# Zone Do Header
9509. 
9510. # Zone When Started
9511. 
9512. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
9513. # Display Set Zone
9514. 
9515. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
9516. SetVariable(FileStepDescription,	"")
9517. 
9518. SetVariable(ZoneStepByLine, 			"Zone started.
9519. ")
9520. 
9521. # BANNER SET
9522. 
9523. # DATE TIME RUN ELP
9524. 
9525. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9526. /* Xinclude "..\Display\BannerSet.MyDc"X */
9527. /* pause(1) */
9528. 
9529. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9530. 
9531. Title('!Heading!')
9532. /* pause(1) */
9533. 
9534. /* NOTE: Can't round or truncate to integer precision. */
9535. 
9536. AppendLogfile("!LogFileName!", "!Title!")
9537. 
9538. 
9539. 
9540. pause(1)
9541. 
9542. 
9543. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
9544. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
9545. 
9546. SetVariable(ZoneStepNoCurrent, 0)
9547. 
9548. 
9549. # Zone Do Current Clear
9550. 
9551. SetVariable(ZoneTypeSelectCurrent, 		"")
9552. 
9553. SetVariable(ZoneBeginCurrent, 			0)
9554. SetVariable(ZoneBeginPerCurrent, 		0)
9555. SetVariable(ZoneEndCurrent, 			0)
9556. SetVariable(ZoneEndPerCurrent, 			0)
9557. 
9558. SetVariable(ZoneSizeCurrent,			0)
9559. SetVariable(ZoneSizePerCurrent,			0)
9560. 
9561. SetVariable(ZoneGapRequestedCurrent,	0)
9562. SetVariable(ZoneGapRoundedCurrent, 		0)
9563. SetVariable(ZoneGapAdjustedCurrent, 	0)
9564. SetVariable(ZoneGapAvailableCurrent, 	0)
9565. SetVariable(ZoneGapCurrent,				0)
9566. SetVariable(ZoneGapUsedCurrent, 		0)
9567. 
9568. SetVariable(ZoneGapActualCurrent, 		0)
9569. SetVariable(ZoneGapActualPerCurrent, 	0)
9570. 
9571. SetVariable(ZoneSizeActual, 			0)
9572. SetVariable(ZoneSizeActualCurrent,		0)
9573. 
9574. SetVariable(ZoneEndActual, 				0)
9575. SetVariable(ZoneEndActualCurrent,		0)			
9576. SetVariable(ZoneSizeActualPerCurrent, 	0)
9577.       
9578. SetVariable(ZoneFilesFolders,			0)
9579. SetVariable(ZoneFilesFoldersPer,		0) 
9580. 
9581. SetVariable(ZoneFragments,				0)
9582. SetVariable(ZoneFragmentsPer,			0) 
9583. 		
9584. SetVariable(ZoneEndActualCurrent, 		0)
9585. SetVariable(ZoneEndActualPerCurrent, 	0)
9586. 
9587. # Gap Calculation Methodology:
9588. 	# Requested
9589. 	SetVariable(GapRequested, 			0) 
9590. 	SetVariable(GapRequestedStd, 		0) 
9591. 	SetVariable(GapRequestedMft, 		0) 
9592. 	SetVariable(GapRequestedOs, 		0) 
9593. 	SetVariable(GapRequestedOriginal, 	0) 
9594. 	
9595. 	# Gap Adjustments
9596. 	SetVariable(GapRounded, 			0)
9597. 	# SetVariable(GapAdjusted, 			0)
9598. 	SetVariable(GapAvailable, 			0)
9599. 	SetVariable(GapCurrent, 			0)
9600. 	SetVariable(GapActual, 				0)
9601. 	SetVariable(GapUsed, 				0)
9602. 	
9603. 	# Gap Adjustments
9604. 	SetVariable(GapRoundedLoc, 			0)
9605. 	# SetVariable(GapAdjustedLoc, 		0)
9606. 	SetVariable(GapAvailableLoc, 		0)
9607. 	SetVariable(GapCurrentLoc, 			0)
9608. 	SetVariable(GapActualLoc,			0)
9609. 	SetVariable(GapUsedLoc,				0)
9610. 	
9611. 	# Space usage
9612. 	SetVariable(ZoneFreePerRequested, 	0)
9613. 	SetVariable(ZoneFreePerUsed, 		0)
9614. 
9615. # Gap Size & Rounding
9616. 	SetVariable(ZoneGapSizePer, 		0)
9617. 	SetVariable(ZoneVolRoundUpPer, 		0)
9618. 	
9619. 	# Free Space
9620. 	SetVariable(ZoneFreeUsedPer, 		0)
9621. 	SetVariable(ZoneFreeRequestedPer, 	0)
9622. 
9623. 
9624. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
9625. 
9626. # Footer:
9627. SetVariable(ZoneFooter, "----------------------------------------------------------
9628. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
9629. 
9630. Statistics Report:
9631. ------------------
9632.    Size:  
9633.    ------------------------
9634.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
9635.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
9636.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
9637. 
9638.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
9639.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
9640. 
9641.    Location:
9642.    ------------------------
9643.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
9644.              Files End: !ZoneEndCurrent!
9645.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
9646.       
9647.    Gap Settings:
9648.    ------------------------
9649.          Gap Requested: !ZoneGapSizePer!%
9650.       Volume Rounding: !ZoneVolRoundUpPer!%
9651.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
9652.                  
9653.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
9654.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
9655.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
9656.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
9657.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
9658.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
9659.      
9660.    Free Space after Zone:
9661.    ------------------------
9662.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
9663.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
9664.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
9665. 
9666. Directory and Files Select:
9667. ---------------------------
9668. !ZoneTypeSelectCurrent!               
9669. ---------------------------
9670. ----------------------------------------------------------
9671. ")
9672. 
9673. # BANNER SET
9674. 
9675. # DATE TIME RUN ELP
9676. 
9677. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9678. /* Xinclude "..\Display\BannerSet.MyDc"X */
9679. /* pause(1) */
9680. 
9681. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9682. 
9683. Title('!Heading!')
9684. /* pause(1) */
9685. 
9686. /* NOTE: Can't round or truncate to integer precision. */
9687. 
9688. AppendLogfile("!LogFileName!", "!Title!")
9689. 
9690. 
9691. 
9692. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
9693. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
9694. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:18")
9695. 
9696. SetVariable(ZoneListByLine, "!ZoneListByLine!
9697. Zone: !ZoneNoCurrent! 2021-11-09 08:17:18 0:00:06 !ZoneLabel! !ZoneDescription!")
9698. 
9699. 
9700. /* Fixed Zone Position Handling */
9701. /* Literal number: */
9702. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
9703. /* Percentage of disk: */
9704. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
9705. /* Gap */
9706. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
9707. 
9708. /* ---------------------------------------------------------- */
9709. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
9710. # FILE STEP
9711. 
9712. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
9713. 
9714. /* add message and move to a new line. */
9715. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
9716. ")
9717. 
9718. /* display the line. (hopefully.) */
9719. # Zone Footer Set Statistics Window Text
9720. 
9721. SetStatisticsWindowText("----------------------------------------------------------
9722. Zones Processed: 
9723. ----------------------------------------------------------
9724. !ZoneListByLine!
9725. ----------------------------------------------------------
9726. Zone Processing Step:
9727. !ZoneStepByLine!    
9728. ----------------------------------------------------------
9729. Current Zone:
9730. !ZoneFooter!
9731. ----------------------------------------------------------
9732. Volume Statistics:
9733. !VolumeStatisticsDetail!
9734. ----------------------------------------------------------
9735. Zone Detailed Report:
9736. ----------------------------------------------------------
9737. !ZoneStatisticsDetail!
9738. ----------------------------------------------------------
9739. ")
9740. 
9741. 
9742. 
9743. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
9744. 
9745. # BANNER SET
9746. 
9747. # DATE TIME RUN ELP
9748. 
9749. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
9750. /* Xinclude "..\Display\BannerSet.MyDc"X */
9751. /* pause(1) */
9752. 
9753. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
9754. 
9755. Title('!Heading!')
9756. /* pause(1) */
9757. 
9758. /* NOTE: Can't round or truncate to integer precision. */
9759. 
9760. pause(1)
9761. 
9762. # your stuff HERE (X)... pre file select code.
9763. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
9764. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
9765. 	# (X)
9766. 
9767. FileSelect
9768. 
9769. 	# your stuff can't really go here (errors.)
9770. 	# maybe for some reason I don't know of...
9771. 	
9772. 	# Actions next...
9773. 		# Programs start.
9774. # NotBlobsArchivesBu start.
9775. (not (
9776. # Blobs start.
9777. (
9778. # BlobsAndExceptions start.
9779. ( not(
9780.   FileName("*.bat")
9781.   or FileName("*.css")
9782.   or FileName("*.dll")
9783.   or FileName("*.exe")
9784.   or FileName("*.htm*")
9785.   or FileName("*.jar")
9786.   or FileName("*.js")
9787.   or FileName("*.script")
9788.   or FileName("*.wsf")
9789.   or (
9790. # Databases start.
9791. (
9792.   FileName("*.crypt*")
9793.   or FileName("*.db*")
9794.   or FileName("*.rdb*")
9795.   or FileName("*.dc*")
9796.   or FileName("*.dict*")
9797.   or FileName("*.?db*")
9798.   or FileName("*.?rdb*")
9799.   or FileName("*.md*")
9800.   or FileName("*.myd")
9801.   or FileName("*.ndf")
9802.   or FileName("*.ns?")
9803.   or FileName("*.pab")
9804.   or FileName("*.pst")
9805.   or FileName("*.sd?*")
9806.   or FileName("*.sq**")
9807.   or FileName("*.tmd")
9808.   or FileName("*.tps")
9809.   or FileName("*.tr*")
9810. )
9811. # Databases end.
9812. 
9813.     # BlobsAndExceptions
9814.     or 
9815. # Data start.
9816. (
9817.   DirectoryName("Data*")
9818.   or DirectoryName("Device*")
9819.   or DirectoryName("Export*")
9820.   or DirectoryName("Import*")
9821.   or DirectoryName("Log*")
9822.   or DirectoryName("*Log")
9823.   or DirectoryName("Maintenance*")
9824.   or DirectoryName("Rec*")
9825.   or DirectoryName("Sales*")
9826.   or DirectoryName("Search*")
9827.   or DirectoryName("User*")
9828. )
9829. # Data end.
9830. 
9831.     # BlobsAndExceptions
9832.   )
9833. ) )
9834. # BlobsAndExceptions end.
9835. 
9836. # Blobs
9837. ) and (
9838.   Size(BlobFileSize,0)
9839.   or (
9840.     FileName("*.arj")
9841.     or FileName("*.bup")
9842.     or FileName("*.bz2")
9843.     or FileName("*.chm")
9844.     or FileName("*.dvr-ms")
9845.     or FileName("*.gz")
9846.     or FileName("*.ifo")
9847.     or FileName("*.lzh")
9848.     or FileName("*.pdf")
9849.     or FileName("*.rpm")
9850.     or FileName("*.wmv")
9851.     or FileName("*.vob")
9852.     or FileName("*.z")
9853.   ) 
9854. )
9855. # Blobs end.
9856. 
9857. # NotBlobsArchivesBu
9858. or 
9859. # Archives start.
9860. (
9861.   DirectoryName("*Archive*")
9862.   or DirectoryName("*History*")
9863.   or DirectoryName("*Old")
9864.   or DirectoryName("* Old *")
9865.   or DirectoryName("Old *")
9866. 
9867.   or FileName("*.7z")
9868.   or FileName("*.cab")
9869.   or FileName("*.iso")
9870.   or FileName("*.msi")
9871.   or FileName("*.old")
9872.   or FileName("*.rar")
9873.   or FileName("*.tar")
9874.   or FileName("*.zip")
9875.   or
9876. # WinSysLow start.
9877. (
9878.   DirectoryName("$*")
9879.   or DirectoryName("0*")
9880.   or DirectoryName("1*")
9881.   or DirectoryName("2*")
9882.   or DirectoryName("3*")
9883.   or DirectoryName("4*")
9884.   or DirectoryName("5*")
9885.   or DirectoryName("6*")
9886.   or DirectoryName("7*")
9887.   or DirectoryName("8*")
9888.   or DirectoryName("9*")
9889. 
9890.   or DirectoryName("dllcache")
9891.   or DirectoryName("Downloaded Installations")
9892.   or DirectoryName("Ehome")
9893.   or DirectoryName("Fonts")
9894.   or DirectoryName("Help")
9895.   or DirectoryName("I386")
9896.   or DirectoryName("ie?updates")
9897.   or DirectoryName("Installer")
9898.   or DirectoryName("Installshield Installation Information")
9899.   or DirectoryName("IME")
9900.   or DirectoryName("*RECYCLE*")
9901.   or DirectoryName("ServicePackFiles")
9902.   or DirectoryName("SoftwareDistribution")
9903.   or DirectoryName("Speech")
9904.   or DirectoryName("Symbols")
9905.   or DirectoryName("System Volume Information")
9906.   or DirectoryName("windows.old")
9907. )
9908. # WinSysLow end.
9909. 
9910.   # Archives
9911. )
9912. # Archives end.
9913. 
9914. # NotBlobsArchivesBu
9915. or
9916. # Backups start.
9917. (
9918.   DirectoryName("*Backup*")
9919.   or DirectoryName("*Bu")
9920.   or DirectoryName("* Bu *")
9921.   or DirectoryName("Bu *")
9922. 
9923.   or FileName("*.bak")
9924.   or FileName("* - Copy*")
9925. )
9926. # Backups end.
9927. 
9928. # NotBlobsArchivesBu
9929. ) )
9930. # NotBlobsArchivesBu end.
9931. 
9932. # Programs
9933. and (
9934. # SystemDir start.
9935. (
9936.   DirectoryName("Boot*")
9937.   or DirectoryName("Device*")
9938.   or DirectoryName("DevSupport*")
9939.   or DirectoryName("Program*")
9940.   or DirectoryName("Security*")
9941.   or DirectoryName("SendTo*")
9942.   or DirectoryName("Sw*")
9943.   or DirectoryName("System*")
9944.   or DirectoryName("Toolbars")
9945.   or DirectoryName("Windows*")
9946. )
9947. # SystemDir end.
9948. 
9949. # Programs
9950. )
9951. # Programs end.
9952. 
9953. 		and not(
9954. 			# Os PageHiberDump start.
9955. (
9956.   FileName("DataStore.edb")
9957.   or FileName("DUMP*.*")
9958.   or FileName("Hiberfil.sys")
9959.   or FileName("MEMORY.DMP")
9960.   or FileName("Pagefile.sys")
9961. )
9962. # Os PageHiberDump end.
9963. 
9964. 		)
9965. 		FileActions
9966. 		  		/* ---------------------------------------------------------- */
9967. 	# Gap
9968. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
9969. 		# FILE STEP
9970. 
9971. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
9972. 
9973. /* add message and move to a new line. */
9974. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
9975. ")
9976. 
9977. /* display the line. (hopefully.) */
9978. # Zone Footer Set Statistics Window Text
9979. 
9980. SetStatisticsWindowText("----------------------------------------------------------
9981. Zones Processed: 
9982. ----------------------------------------------------------
9983. !ZoneListByLine!
9984. ----------------------------------------------------------
9985. Zone Processing Step:
9986. !ZoneStepByLine!    
9987. ----------------------------------------------------------
9988. Current Zone:
9989. !ZoneFooter!
9990. ----------------------------------------------------------
9991. Volume Statistics:
9992. !VolumeStatisticsDetail!
9993. ----------------------------------------------------------
9994. Zone Detailed Report:
9995. ----------------------------------------------------------
9996. !ZoneStatisticsDetail!
9997. ----------------------------------------------------------
9998. ")
9999. 
10000. 
10001. 
10002. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
10003. 
10004. # BANNER SET
10005. 
10006. # DATE TIME RUN ELP
10007. 
10008. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
10009. /* Xinclude "..\Display\BannerSet.MyDc"X */
10010. /* pause(1) */
10011. 
10012. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
10013. 
10014. Title('!Heading!')
10015. /* pause(1) */
10016. 
10017. /* NOTE: Can't round or truncate to integer precision. */
10018. 
10019. pause(1)
10020. 	
10021. 	# ACTUAL GAP
10022. 		/* AddGap Variant. */
10023. 	  	# Zone Do Gap
10024. # Gap Calculation Methods:
10025. 
10026. /* 1) Anything you need to add first. */
10027. /* empty */
10028. 
10029. /* ---------------------------------------------------------- */
10030. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
10031. 	# GapRequestedStd.
10032. 
10033. 		/* ---------------------------------------------------------- */
10034. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
10035. 
10036. 		# Gap Calculation Methods:
10037. 
10038. /* AddGap Variants */
10039. 
10040. 	/* Standard */
10041. 		# Gap Calculation Methods:
10042. 	/* AddGap Variants */
10043. 	/* Standard */
10044. 
10045. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
10046. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
10047. 
10048. 	SetVariable(GapRequested, GapRequestedStd)
10049. 	
10050. 
10051. 	/* MFT Low High Method */
10052. 		# Gap Calculation Methods:
10053. 	/* AddGap Variants */
10054. 	/* MFT Low High Method */
10055. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
10056. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
10057. 	SetVariable(GapRequested, GapRequestedMft)
10058. 	
10059. 
10060. 	/* OS Volume Type Method */
10061. 		# Gap Calculation Methods:
10062. 	/* AddGap Variants */
10063. 	/* OS Volume Type Method */
10064. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
10065. 	SetVariable(GapRequested, GapRequestedOs)
10066. 
10067. 
10068. 
10069. /* MakeGap Variants */
10070. 
10071. 	/* Original Os 1-3 + MFT 2 */
10072. 		# Gap Calculation Methods:
10073. 	/* MakeGap Variants */
10074. 	/* Original Os 1-3 + MFT 2 */
10075. 	/* plus MFT gap placed inline at the dividing zone. */
10076. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
10077. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
10078. 	SetVariable(GapRequested, GapRequestedOrig)
10079. 	
10080. 	
10081. /* Note: You could comment out the ones not in use */
10082. /* However having the data in the log is useful. */
10083. /* Therefore the following line is otherwise needed. */
10084. 
10085. /* Standard used */
10086. 
10087. SetVariable(GapRequested, GapRequestedStd)
10088. 
10089. # Gap Calculation Methods:
10090. 
10091. /* AddGap Variants */
10092. 	/* Standard */
10093. 	/* MFT Low High Method */
10094. 	/* OS Volume Type Method */
10095. 
10096. /* MakeGap Variants */
10097. 	/* Original Os 1-3 + MFT 2 */
10098. 
10099. /* Note: You could comment out the ones not in use */
10100. /* However having the data in the log is useful. */
10101. /* Therefore the following line is otherwise needed. */
10102. 
10103. /* Standard is used currently */
10104. 
10105. 
10106. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
10107. 
10108. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
10109. 
10110. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
10111. 
10112. /* ---------------------------------------------------------- */
10113. /* 3) SMALL ZONE ADJUSTMENT. */
10114. /* Gab cant be larger than half the Zone Size. */
10115. 
10116. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
10117. 	
10118. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
10119. 
10120. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
10121. 
10122. /* ---------------------------------------------------------- */
10123. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
10124. # Gap Adjustments.
10125. 
10126. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
10127. 	
10128. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
10129. 
10130. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
10131. 
10132. /* ---------------------------------------------------------- */
10133. # BYPASS THIS.
10134. 	/* This is definitely wrong. */
10135. 	/* The question is can we steal gap from the next zone */
10136. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
10137. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
10138. 		# Zone Overflow.
10139. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
10140. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
10141. 
10142. /* ---------------------------------------------------------- */
10143. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
10144. # Remaining free space available.
10145. 
10146. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
10147. 	
10148. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
10149. 
10150. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
10151. 
10152. /* ---------------------------------------------------------- */
10153. # CURRENT gap to use.
10154. 
10155. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
10156. 
10157. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
10158. 
10159. /* ---------------------------------------------------------- */
10160. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
10161. # Debugging.
10162. 
10163. 	SetVariable(GapUsed, GapCurrent) // for debugging
10164. 
10165. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
10166. 
10167. 		# Your code HERE
10168. 
10169. /* ---------------------------------------------------------- */
10170. /* 7) YOUR CODE. */
10171. # YOUR CODE HERE:
10172. 	# INPUT: GapCurrent or GapCurrentLoc
10173. 	# OUTPUT: GapUsed...
10174. 
10175. /* ---------------------------------------------------------- */
10176. # Gap Size.
10177. # Actual Size of Gap.
10178. 
10179. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
10180. 
10181. /* ---------------------------------------------------------- */
10182. /* xxxxxxxxxxxxxxxxxxxxxx */
10183. # ADD THE GAP
10184. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
10185. /* xxxxxxxxxxxxxxxxxxxxxx */
10186. 
10187. 	
10188. 	# Zone Statistics	
10189. 	# Zone / Volume Statistics and Display
10190. 		
10191. 	# Accumulate Totals
10192.   	# Volume totals
10193. 
10194. /* Current total space used (by Zones and Gaps) */
10195. 
10196. SetVariable(VolumeZoneUsed, GapUsed)
10197. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
10198. /* Percentage */
10199. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
10200. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
10201. 
10202. /* Current total of free space requested */
10203. 
10204. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
10205. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
10206. /* Percent. */
10207. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
10208. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
10209. 
10210. /* Current total of free space used */
10211. 
10212. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
10213. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
10214. /* Percent */
10215. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
10216. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
10217. 
10218. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
10219. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
10220. /* Xinclude "..\DebugDisplayPause.MyDc"X */
10221. 
10222. 
10223. 	# Current Values
10224. 	# Cluster, Sector, Block adjust for display.
10225. 	# Bytes per cluster is volume specific.
10226. 
10227. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
10228. 
10229. # Current Zone values.
10230. 	# Begin, end and size.
10231. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
10232. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
10233. 
10234. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
10235. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
10236. 
10237. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
10238. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
10239. 
10240. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
10241. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
10242. 
10243. 	SetVariable(ZoneFragments,				"!ZONE210N!")
10244. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
10245. 		
10246. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
10247. /* identical code to here: (separation not needed. TEST.) */	
10248. 
10249. # Current Gap, Actual and Free Values
10250. 	# Gap
10251. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
10252. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
10253. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
10254. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
10255. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
10256. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
10257. 	
10258. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
10259. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
10260. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
10261. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
10262. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
10263. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
10264. 	
10265. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
10266. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
10267. 	
10268. 	# Actual Size and End
10269. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
10270. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
10271. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
10272. 	
10273. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
10274. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
10275. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
10276. 
10277. # Gap Size & Rounding
10278. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
10279. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
10280. 	
10281. 	# Free Space
10282. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
10283. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
10284. 
10285. 	# Footer:
10286. SetVariable(ZoneFooter, "----------------------------------------------------------
10287. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
10288. 
10289. Statistics Report:
10290. ------------------
10291.    Size:  
10292.    ------------------------
10293.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
10294.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
10295.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
10296. 
10297.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
10298.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
10299. 
10300.    Location:
10301.    ------------------------
10302.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
10303.              Files End: !ZoneEndCurrent!
10304.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
10305.       
10306.    Gap Settings:
10307.    ------------------------
10308.          Gap Requested: !ZoneGapSizePer!%
10309.       Volume Rounding: !ZoneVolRoundUpPer!%
10310.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
10311.                  
10312.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
10313.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
10314.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
10315.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
10316.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
10317.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
10318.      
10319.    Free Space after Zone:
10320.    ------------------------
10321.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
10322.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
10323.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
10324. 
10325. Directory and Files Select:
10326. ---------------------------
10327. !ZoneTypeSelectCurrent!               
10328. ---------------------------
10329. ----------------------------------------------------------
10330. ")
10331. 	# Zone Footer Set Statistics Window Text
10332. 
10333. SetStatisticsWindowText("----------------------------------------------------------
10334. Zones Processed: 
10335. ----------------------------------------------------------
10336. !ZoneListByLine!
10337. ----------------------------------------------------------
10338. Zone Processing Step:
10339. !ZoneStepByLine!    
10340. ----------------------------------------------------------
10341. Current Zone:
10342. !ZoneFooter!
10343. ----------------------------------------------------------
10344. Volume Statistics:
10345. !VolumeStatisticsDetail!
10346. ----------------------------------------------------------
10347. Zone Detailed Report:
10348. ----------------------------------------------------------
10349. !ZoneStatisticsDetail!
10350. ----------------------------------------------------------
10351. ")
10352. 
10353. 
10354. 	
10355.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
10356. 
10357. 	# Add Zone to list of zones for display.
10358. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
10359. 	# ??? Free Stats?
10360. 	# Footer:
10361. SetVariable(ZoneFooter, "----------------------------------------------------------
10362. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
10363. 
10364. Statistics Report:
10365. ------------------
10366.    Size:  
10367.    ------------------------
10368.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
10369.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
10370.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
10371. 
10372.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
10373.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
10374. 
10375.    Location:
10376.    ------------------------
10377.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
10378.              Files End: !ZoneEndCurrent!
10379.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
10380.       
10381.    Gap Settings:
10382.    ------------------------
10383.          Gap Requested: !ZoneGapSizePer!%
10384.       Volume Rounding: !ZoneVolRoundUpPer!%
10385.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
10386.                  
10387.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
10388.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
10389.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
10390.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
10391.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
10392.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
10393.      
10394.    Free Space after Zone:
10395.    ------------------------
10396.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
10397.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
10398.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
10399. 
10400. Directory and Files Select:
10401. ---------------------------
10402. !ZoneTypeSelectCurrent!               
10403. ---------------------------
10404. ----------------------------------------------------------
10405. ")
10406. 
10407. 	# Add Zone Details to Report.	
10408. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
10409. !ZoneFooter!")
10410. 
10411. 
10412. 	
10413. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
10414. 			# FILE STEP
10415. 
10416. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
10417. 
10418. /* add message and move to a new line. */
10419. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
10420. ")
10421. 
10422. /* display the line. (hopefully.) */
10423. # Zone Footer Set Statistics Window Text
10424. 
10425. SetStatisticsWindowText("----------------------------------------------------------
10426. Zones Processed: 
10427. ----------------------------------------------------------
10428. !ZoneListByLine!
10429. ----------------------------------------------------------
10430. Zone Processing Step:
10431. !ZoneStepByLine!    
10432. ----------------------------------------------------------
10433. Current Zone:
10434. !ZoneFooter!
10435. ----------------------------------------------------------
10436. Volume Statistics:
10437. !VolumeStatisticsDetail!
10438. ----------------------------------------------------------
10439. Zone Detailed Report:
10440. ----------------------------------------------------------
10441. !ZoneStatisticsDetail!
10442. ----------------------------------------------------------
10443. ")
10444. 
10445. 
10446. 
10447. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
10448. 
10449. # BANNER SET
10450. 
10451. # DATE TIME RUN ELP
10452. 
10453. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
10454. /* Xinclude "..\Display\BannerSet.MyDc"X */
10455. /* pause(1) */
10456. 
10457. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
10458. 
10459. Title('!Heading!')
10460. /* pause(1) */
10461. 
10462. /* NOTE: Can't round or truncate to integer precision. */
10463. 
10464. pause(1)
10465. 
10466. 			/* "..\ActionVerbs\ZoneDoActionThis.MyDc" */
10467. 			# File Action - SortByImportSequence with SkipBlock.
10468. SortByImportSequence(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes)) 
10469. 	
10470. 	
10471. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
10472. 			# FILE STEP
10473. 
10474. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
10475. 
10476. /* add message and move to a new line. */
10477. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
10478. ")
10479. 
10480. /* display the line. (hopefully.) */
10481. # Zone Footer Set Statistics Window Text
10482. 
10483. SetStatisticsWindowText("----------------------------------------------------------
10484. Zones Processed: 
10485. ----------------------------------------------------------
10486. !ZoneListByLine!
10487. ----------------------------------------------------------
10488. Zone Processing Step:
10489. !ZoneStepByLine!    
10490. ----------------------------------------------------------
10491. Current Zone:
10492. !ZoneFooter!
10493. ----------------------------------------------------------
10494. Volume Statistics:
10495. !VolumeStatisticsDetail!
10496. ----------------------------------------------------------
10497. Zone Detailed Report:
10498. ----------------------------------------------------------
10499. !ZoneStatisticsDetail!
10500. ----------------------------------------------------------
10501. ")
10502. 
10503. 
10504. 
10505. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
10506. 
10507. # BANNER SET
10508. 
10509. # DATE TIME RUN ELP
10510. 
10511. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
10512. /* Xinclude "..\Display\BannerSet.MyDc"X */
10513. /* pause(1) */
10514. 
10515. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
10516. 
10517. Title('!Heading!')
10518. /* pause(1) */
10519. 
10520. /* NOTE: Can't round or truncate to integer precision. */
10521. 
10522. pause(1)
10523. 
10524. 		# Zone Do Footer
10525. 
10526. /* ---------------------------------------------------------- */
10527. # File Select
10528. 	# Select Statments
10529. # File Actions 
10530. 	# Standard or OS File Actions.
10531. 	# Resume...
10532. 	
10533. 	# your stuff HERE (X)... post zone (file) file actions code.
10534. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
10535. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
10536. 		# (X)
10537. 		
10538. 		/* ??? Set window? */
10539. 	
10540. 	# ADD THE GAP
10541. 		
10542. # Vacate (good for diagnostics)
10543. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
10544. 
10545. # DoNotVacate - DO NOT Vacate (recommended)
10546. 
10547. # Vacate
10548. /* AddGap(GapUsedLoc) */
10549. 
10550. # DO Not Vacate
10551. AddGap(GapUsedLoc, DoNotVacate) 
10552. 	
10553. 	
10554. /* ---------------------------------------------------------- */
10555. # (failed) TEST for boolean logic.
10556. 
10557. /* It should work in the gap calculations for turning options */
10558. /* on and off but it will NOT work here. */
10559. 
10560. /* Boolean setting X or FlagX. */
10561. /* Where X will be on or off: */
10562. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
10563. /*      For ON:  (X  *  FlagAny) */
10564. 
10565. /* 1) Failed, zero gap overrode the previous one. */
10566. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
10567. /* AddGap(GapUsedTemp) */ 
10568. 
10569. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
10570. /* AddGap(GapUsedTemp, DoNotVacate) */ 
10571. 
10572. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
10573. 
10574. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
10575. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
10576. /* AddGap(GapUsedTemp) */ 
10577. 
10578. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
10579. /* AddGap(GapUsedTemp, DoNotVacate) */ 
10580. 
10581. /* ---------------------------------------------------------- */
10582. 
10583. # Vacate
10584. /* AddGap(GapUsed) */
10585. 
10586. # DO NOT Vacate (recommended)
10587. /* AddGap(GapUsed, DoNotVacate) */ 
10588. 	
10589. 
10590. 		
10591. # 
10592. FileEnd
10593. /* ---------------------------------------------------------- */
10594. 
10595. # your stuff HERE (X)... post zone (file) code.
10596. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
10597. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
10598. 	# (X)
10599. 
10600. SetVariable(FileStepDescription,"Zone finished, reporting.")
10601. # FILE STEP
10602. 
10603. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
10604. 
10605. /* add message and move to a new line. */
10606. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
10607. ")
10608. 
10609. /* display the line. (hopefully.) */
10610. # Zone Footer Set Statistics Window Text
10611. 
10612. SetStatisticsWindowText("----------------------------------------------------------
10613. Zones Processed: 
10614. ----------------------------------------------------------
10615. !ZoneListByLine!
10616. ----------------------------------------------------------
10617. Zone Processing Step:
10618. !ZoneStepByLine!    
10619. ----------------------------------------------------------
10620. Current Zone:
10621. !ZoneFooter!
10622. ----------------------------------------------------------
10623. Volume Statistics:
10624. !VolumeStatisticsDetail!
10625. ----------------------------------------------------------
10626. Zone Detailed Report:
10627. ----------------------------------------------------------
10628. !ZoneStatisticsDetail!
10629. ----------------------------------------------------------
10630. ")
10631. 
10632. 
10633. 
10634. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
10635. 
10636. # BANNER SET
10637. 
10638. # DATE TIME RUN ELP
10639. 
10640. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
10641. /* Xinclude "..\Display\BannerSet.MyDc"X */
10642. /* pause(1) */
10643. 
10644. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
10645. 
10646. Title('!Heading!')
10647. /* pause(1) */
10648. 
10649. /* NOTE: Can't round or truncate to integer precision. */
10650. 
10651. pause(1)
10652. 
10653. # Zone When Finished
10654. 
10655. # BANNER SET
10656. 
10657. # DATE TIME RUN ELP
10658. 
10659. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
10660. /* Xinclude "..\Display\BannerSet.MyDc"X */
10661. /* pause(1) */
10662. 
10663. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
10664. 
10665. Title('!Heading!')
10666. /* pause(1) */
10667. 
10668. /* NOTE: Can't round or truncate to integer precision. */
10669. 
10670. AppendLogfile("!LogFileName!", "!Title!")
10671. 
10672. 
10673. 
10674. # Zone Statistics	
10675. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
10676. 
10677. # Footer:
10678. SetVariable(ZoneFooter, "----------------------------------------------------------
10679. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
10680. 
10681. Statistics Report:
10682. ------------------
10683.    Size:  
10684.    ------------------------
10685.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
10686.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
10687.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
10688. 
10689.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
10690.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
10691. 
10692.    Location:
10693.    ------------------------
10694.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
10695.              Files End: !ZoneEndCurrent!
10696.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
10697.       
10698.    Gap Settings:
10699.    ------------------------
10700.          Gap Requested: !ZoneGapSizePer!%
10701.       Volume Rounding: !ZoneVolRoundUpPer!%
10702.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
10703.                  
10704.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
10705.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
10706.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
10707.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
10708.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
10709.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
10710.      
10711.    Free Space after Zone:
10712.    ------------------------
10713.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
10714.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
10715.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
10716. 
10717. Directory and Files Select:
10718. ---------------------------
10719. !ZoneTypeSelectCurrent!               
10720. ---------------------------
10721. ----------------------------------------------------------
10722. ")
10723. 
10724. AppendLogfile("!LogFileName!", ".")
10725. AppendLogfile("!LogFileName!", "!ZoneFooter!")
10726. AppendLogfile("!LogFileName!", ".")
10727. 
10728. # Zone Footer Set Statistics Window Text
10729. 
10730. SetStatisticsWindowText("----------------------------------------------------------
10731. Zones Processed: 
10732. ----------------------------------------------------------
10733. !ZoneListByLine!
10734. ----------------------------------------------------------
10735. Zone Processing Step:
10736. !ZoneStepByLine!    
10737. ----------------------------------------------------------
10738. Current Zone:
10739. !ZoneFooter!
10740. ----------------------------------------------------------
10741. Volume Statistics:
10742. !VolumeStatisticsDetail!
10743. ----------------------------------------------------------
10744. Zone Detailed Report:
10745. ----------------------------------------------------------
10746. !ZoneStatisticsDetail!
10747. ----------------------------------------------------------
10748. ")
10749. 
10750. 
10751. 
10752. /* pause() */
10753. /* pause() */
10754. 
10755. 
10756. 
10757. 	
10758. /* ---------------------------------------------------------- */
10759. 
10760. 
10761. /* ---------------------------------------------------------- */
10762. /* OLD: ToDo */
10763. 	/* Zone 1 and 2 originally */
10764. 	/* Originally the MFT and DIRs were processed first. */
10765. 	/* Zone 4 and 5 normally */
10766. 	/* The MakeGap call is put between which ever zones you want */
10767. 	/* So the actual zone number is unknown */
10768. 	/* SetVariable(ZoneCurrent,"4, 5") */
10769. 	/* MakeGap(RoundUp(VolumeUsed * (!MftPer! + 0.15), VolumeSize * ZoneVolRoundUpLarge), DoNotVacate) */
10770. 
10771. /* ---------------------------------------------------------- */
10772. SetVariable(FileStepDescription,"System Zones completed.")
10773. # FILE STEP
10774. 
10775. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
10776. 
10777. /* add message and move to a new line. */
10778. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
10779. ")
10780. 
10781. /* display the line. (hopefully.) */
10782. # Zone Footer Set Statistics Window Text
10783. 
10784. SetStatisticsWindowText("----------------------------------------------------------
10785. Zones Processed: 
10786. ----------------------------------------------------------
10787. !ZoneListByLine!
10788. ----------------------------------------------------------
10789. Zone Processing Step:
10790. !ZoneStepByLine!    
10791. ----------------------------------------------------------
10792. Current Zone:
10793. !ZoneFooter!
10794. ----------------------------------------------------------
10795. Volume Statistics:
10796. !VolumeStatisticsDetail!
10797. ----------------------------------------------------------
10798. Zone Detailed Report:
10799. ----------------------------------------------------------
10800. !ZoneStatisticsDetail!
10801. ----------------------------------------------------------
10802. ")
10803. 
10804. 
10805. 
10806. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
10807. 
10808. # BANNER SET
10809. 
10810. # DATE TIME RUN ELP
10811. 
10812. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
10813. /* Xinclude "..\Display\BannerSet.MyDc"X */
10814. /* pause(1) */
10815. 
10816. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
10817. 
10818. Title('!Heading!')
10819. /* pause(1) */
10820. 
10821. /* NOTE: Can't round or truncate to integer precision. */
10822. 
10823. pause(1)
10824. 
10825. 
10826. /* ---------------------------------------------------------- */
10827. /* Any Volume Regular Zones */
10828. /* ---------------------------------------------------------- */
10829. 
10830. /* ---------------------------------------------------------- */
10831. /* Zone IdeScripts Ide, Scripts, Support */
10832. /* ---------------------------------------------------------- */
10833. /* Zone IdeScripts Ide, Scripts, Support */
10834. 
10835. SetVariable(ZoneLabel, "!ZoneLabelIdeScripts!")
10836. SetVariable(ZoneDescription, "!ZoneDescriptionIdeScripts!")
10837. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpIdeScripts!")
10838. SetVariable(ZoneGapSize, "!ZoneGapSizeIdeScripts!")
10839. SetVariable(ZoneTypeSelect,'# IdeScripts start.
10840. # NotBlobsArchivesBu start.
10841. (not (
10842. # Blobs start.
10843. (
10844. # BlobsAndExceptions start.
10845. ( not(
10846.   FileName("*.bat")
10847.   or FileName("*.css")
10848.   or FileName("*.dll")
10849.   or FileName("*.exe")
10850.   or FileName("*.htm*")
10851.   or FileName("*.jar")
10852.   or FileName("*.js")
10853.   or FileName("*.script")
10854.   or FileName("*.wsf")
10855.   or (
10856. # Databases start.
10857. (
10858.   FileName("*.crypt*")
10859.   or FileName("*.db*")
10860.   or FileName("*.rdb*")
10861.   or FileName("*.dc*")
10862.   or FileName("*.dict*")
10863.   or FileName("*.?db*")
10864.   or FileName("*.?rdb*")
10865.   or FileName("*.md*")
10866.   or FileName("*.myd")
10867.   or FileName("*.ndf")
10868.   or FileName("*.ns?")
10869.   or FileName("*.pab")
10870.   or FileName("*.pst")
10871.   or FileName("*.sd?*")
10872.   or FileName("*.sq**")
10873.   or FileName("*.tmd")
10874.   or FileName("*.tps")
10875.   or FileName("*.tr*")
10876. )
10877. # Databases end.
10878. 
10879.     # BlobsAndExceptions
10880.     or 
10881. # Data start.
10882. (
10883.   DirectoryName("Data*")
10884.   or DirectoryName("Device*")
10885.   or DirectoryName("Export*")
10886.   or DirectoryName("Import*")
10887.   or DirectoryName("Log*")
10888.   or DirectoryName("*Log")
10889.   or DirectoryName("Maintenance*")
10890.   or DirectoryName("Rec*")
10891.   or DirectoryName("Sales*")
10892.   or DirectoryName("Search*")
10893.   or DirectoryName("User*")
10894. )
10895. # Data end.
10896. 
10897.     # BlobsAndExceptions
10898.   )
10899. ) )
10900. # BlobsAndExceptions end.
10901. 
10902. # Blobs
10903. ) and (
10904.   Size(BlobFileSize,0)
10905.   or (
10906.     FileName("*.arj")
10907.     or FileName("*.bup")
10908.     or FileName("*.bz2")
10909.     or FileName("*.chm")
10910.     or FileName("*.dvr-ms")
10911.     or FileName("*.gz")
10912.     or FileName("*.ifo")
10913.     or FileName("*.lzh")
10914.     or FileName("*.pdf")
10915.     or FileName("*.rpm")
10916.     or FileName("*.wmv")
10917.     or FileName("*.vob")
10918.     or FileName("*.z")
10919.   ) 
10920. )
10921. # Blobs end.
10922. 
10923. # NotBlobsArchivesBu
10924. or 
10925. # Archives start.
10926. (
10927.   DirectoryName("*Archive*")
10928.   or DirectoryName("*History*")
10929.   or DirectoryName("*Old")
10930.   or DirectoryName("* Old *")
10931.   or DirectoryName("Old *")
10932. 
10933.   or FileName("*.7z")
10934.   or FileName("*.cab")
10935.   or FileName("*.iso")
10936.   or FileName("*.msi")
10937.   or FileName("*.old")
10938.   or FileName("*.rar")
10939.   or FileName("*.tar")
10940.   or FileName("*.zip")
10941.   or
10942. # WinSysLow start.
10943. (
10944.   DirectoryName("$*")
10945.   or DirectoryName("0*")
10946.   or DirectoryName("1*")
10947.   or DirectoryName("2*")
10948.   or DirectoryName("3*")
10949.   or DirectoryName("4*")
10950.   or DirectoryName("5*")
10951.   or DirectoryName("6*")
10952.   or DirectoryName("7*")
10953.   or DirectoryName("8*")
10954.   or DirectoryName("9*")
10955. 
10956.   or DirectoryName("dllcache")
10957.   or DirectoryName("Downloaded Installations")
10958.   or DirectoryName("Ehome")
10959.   or DirectoryName("Fonts")
10960.   or DirectoryName("Help")
10961.   or DirectoryName("I386")
10962.   or DirectoryName("ie?updates")
10963.   or DirectoryName("Installer")
10964.   or DirectoryName("Installshield Installation Information")
10965.   or DirectoryName("IME")
10966.   or DirectoryName("*RECYCLE*")
10967.   or DirectoryName("ServicePackFiles")
10968.   or DirectoryName("SoftwareDistribution")
10969.   or DirectoryName("Speech")
10970.   or DirectoryName("Symbols")
10971.   or DirectoryName("System Volume Information")
10972.   or DirectoryName("windows.old")
10973. )
10974. # WinSysLow end.
10975. 
10976.   # Archives
10977. )
10978. # Archives end.
10979. 
10980. # NotBlobsArchivesBu
10981. or
10982. # Backups start.
10983. (
10984.   DirectoryName("*Backup*")
10985.   or DirectoryName("*Bu")
10986.   or DirectoryName("* Bu *")
10987.   or DirectoryName("Bu *")
10988. 
10989.   or FileName("*.bak")
10990.   or FileName("* - Copy*")
10991. )
10992. # Backups end.
10993. 
10994. # NotBlobsArchivesBu
10995. ) )
10996. # NotBlobsArchivesBu end.
10997. 
10998. # IdeScripts
10999. and ( 
11000. # Ide start.
11001. (
11002.     DirectoryName("Ide*")
11003.     or DirectoryName("Java*")
11004.     or DirectoryName("Os")
11005. )
11006. # Ide end.
11007. 
11008. # IdeScripts
11009. or  
11010. # Scripts start.
11011. (
11012.   DirectoryName("*Script*")
11013. )
11014. # Scripts end.
11015. 
11016. # IdeScripts
11017. )
11018. # IdeScripts end.
11019. ')
11020. 
11021. 	# Zone Do Header
11022. 
11023. # Zone When Started
11024. 
11025. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
11026. # Display Set Zone
11027. 
11028. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
11029. SetVariable(FileStepDescription,	"")
11030. 
11031. SetVariable(ZoneStepByLine, 			"Zone started.
11032. ")
11033. 
11034. # BANNER SET
11035. 
11036. # DATE TIME RUN ELP
11037. 
11038. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
11039. /* Xinclude "..\Display\BannerSet.MyDc"X */
11040. /* pause(1) */
11041. 
11042. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
11043. 
11044. Title('!Heading!')
11045. /* pause(1) */
11046. 
11047. /* NOTE: Can't round or truncate to integer precision. */
11048. 
11049. AppendLogfile("!LogFileName!", "!Title!")
11050. 
11051. 
11052. 
11053. pause(1)
11054. 
11055. 
11056. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
11057. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
11058. 
11059. SetVariable(ZoneStepNoCurrent, 0)
11060. 
11061. 
11062. # Zone Do Current Clear
11063. 
11064. SetVariable(ZoneTypeSelectCurrent, 		"")
11065. 
11066. SetVariable(ZoneBeginCurrent, 			0)
11067. SetVariable(ZoneBeginPerCurrent, 		0)
11068. SetVariable(ZoneEndCurrent, 			0)
11069. SetVariable(ZoneEndPerCurrent, 			0)
11070. 
11071. SetVariable(ZoneSizeCurrent,			0)
11072. SetVariable(ZoneSizePerCurrent,			0)
11073. 
11074. SetVariable(ZoneGapRequestedCurrent,	0)
11075. SetVariable(ZoneGapRoundedCurrent, 		0)
11076. SetVariable(ZoneGapAdjustedCurrent, 	0)
11077. SetVariable(ZoneGapAvailableCurrent, 	0)
11078. SetVariable(ZoneGapCurrent,				0)
11079. SetVariable(ZoneGapUsedCurrent, 		0)
11080. 
11081. SetVariable(ZoneGapActualCurrent, 		0)
11082. SetVariable(ZoneGapActualPerCurrent, 	0)
11083. 
11084. SetVariable(ZoneSizeActual, 			0)
11085. SetVariable(ZoneSizeActualCurrent,		0)
11086. 
11087. SetVariable(ZoneEndActual, 				0)
11088. SetVariable(ZoneEndActualCurrent,		0)			
11089. SetVariable(ZoneSizeActualPerCurrent, 	0)
11090.       
11091. SetVariable(ZoneFilesFolders,			0)
11092. SetVariable(ZoneFilesFoldersPer,		0) 
11093. 
11094. SetVariable(ZoneFragments,				0)
11095. SetVariable(ZoneFragmentsPer,			0) 
11096. 		
11097. SetVariable(ZoneEndActualCurrent, 		0)
11098. SetVariable(ZoneEndActualPerCurrent, 	0)
11099. 
11100. # Gap Calculation Methodology:
11101. 	# Requested
11102. 	SetVariable(GapRequested, 			0) 
11103. 	SetVariable(GapRequestedStd, 		0) 
11104. 	SetVariable(GapRequestedMft, 		0) 
11105. 	SetVariable(GapRequestedOs, 		0) 
11106. 	SetVariable(GapRequestedOriginal, 	0) 
11107. 	
11108. 	# Gap Adjustments
11109. 	SetVariable(GapRounded, 			0)
11110. 	# SetVariable(GapAdjusted, 			0)
11111. 	SetVariable(GapAvailable, 			0)
11112. 	SetVariable(GapCurrent, 			0)
11113. 	SetVariable(GapActual, 				0)
11114. 	SetVariable(GapUsed, 				0)
11115. 	
11116. 	# Gap Adjustments
11117. 	SetVariable(GapRoundedLoc, 			0)
11118. 	# SetVariable(GapAdjustedLoc, 		0)
11119. 	SetVariable(GapAvailableLoc, 		0)
11120. 	SetVariable(GapCurrentLoc, 			0)
11121. 	SetVariable(GapActualLoc,			0)
11122. 	SetVariable(GapUsedLoc,				0)
11123. 	
11124. 	# Space usage
11125. 	SetVariable(ZoneFreePerRequested, 	0)
11126. 	SetVariable(ZoneFreePerUsed, 		0)
11127. 
11128. # Gap Size & Rounding
11129. 	SetVariable(ZoneGapSizePer, 		0)
11130. 	SetVariable(ZoneVolRoundUpPer, 		0)
11131. 	
11132. 	# Free Space
11133. 	SetVariable(ZoneFreeUsedPer, 		0)
11134. 	SetVariable(ZoneFreeRequestedPer, 	0)
11135. 
11136. 
11137. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
11138. 
11139. # Footer:
11140. SetVariable(ZoneFooter, "----------------------------------------------------------
11141. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
11142. 
11143. Statistics Report:
11144. ------------------
11145.    Size:  
11146.    ------------------------
11147.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
11148.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
11149.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
11150. 
11151.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
11152.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
11153. 
11154.    Location:
11155.    ------------------------
11156.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
11157.              Files End: !ZoneEndCurrent!
11158.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
11159.       
11160.    Gap Settings:
11161.    ------------------------
11162.          Gap Requested: !ZoneGapSizePer!%
11163.       Volume Rounding: !ZoneVolRoundUpPer!%
11164.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
11165.                  
11166.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
11167.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
11168.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
11169.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
11170.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
11171.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
11172.      
11173.    Free Space after Zone:
11174.    ------------------------
11175.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
11176.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
11177.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
11178. 
11179. Directory and Files Select:
11180. ---------------------------
11181. !ZoneTypeSelectCurrent!               
11182. ---------------------------
11183. ----------------------------------------------------------
11184. ")
11185. 
11186. # BANNER SET
11187. 
11188. # DATE TIME RUN ELP
11189. 
11190. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
11191. /* Xinclude "..\Display\BannerSet.MyDc"X */
11192. /* pause(1) */
11193. 
11194. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
11195. 
11196. Title('!Heading!')
11197. /* pause(1) */
11198. 
11199. /* NOTE: Can't round or truncate to integer precision. */
11200. 
11201. AppendLogfile("!LogFileName!", "!Title!")
11202. 
11203. 
11204. 
11205. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
11206. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
11207. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:18")
11208. 
11209. SetVariable(ZoneListByLine, "!ZoneListByLine!
11210. Zone: !ZoneNoCurrent! 2021-11-09 08:17:18 0:00:06 !ZoneLabel! !ZoneDescription!")
11211. 
11212. 
11213. /* Fixed Zone Position Handling */
11214. /* Literal number: */
11215. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
11216. /* Percentage of disk: */
11217. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
11218. /* Gap */
11219. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
11220. 
11221. /* ---------------------------------------------------------- */
11222. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
11223. # FILE STEP
11224. 
11225. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
11226. 
11227. /* add message and move to a new line. */
11228. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
11229. ")
11230. 
11231. /* display the line. (hopefully.) */
11232. # Zone Footer Set Statistics Window Text
11233. 
11234. SetStatisticsWindowText("----------------------------------------------------------
11235. Zones Processed: 
11236. ----------------------------------------------------------
11237. !ZoneListByLine!
11238. ----------------------------------------------------------
11239. Zone Processing Step:
11240. !ZoneStepByLine!    
11241. ----------------------------------------------------------
11242. Current Zone:
11243. !ZoneFooter!
11244. ----------------------------------------------------------
11245. Volume Statistics:
11246. !VolumeStatisticsDetail!
11247. ----------------------------------------------------------
11248. Zone Detailed Report:
11249. ----------------------------------------------------------
11250. !ZoneStatisticsDetail!
11251. ----------------------------------------------------------
11252. ")
11253. 
11254. 
11255. 
11256. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
11257. 
11258. # BANNER SET
11259. 
11260. # DATE TIME RUN ELP
11261. 
11262. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
11263. /* Xinclude "..\Display\BannerSet.MyDc"X */
11264. /* pause(1) */
11265. 
11266. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
11267. 
11268. Title('!Heading!')
11269. /* pause(1) */
11270. 
11271. /* NOTE: Can't round or truncate to integer precision. */
11272. 
11273. pause(1)
11274. 
11275. # your stuff HERE (X)... pre file select code.
11276. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
11277. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
11278. 	# (X)
11279. 
11280. FileSelect
11281. 
11282. 	# your stuff can't really go here (errors.)
11283. 	# maybe for some reason I don't know of...
11284. 	
11285. 	# Actions next...
11286. 	# IdeScripts start.
11287. # NotBlobsArchivesBu start.
11288. (not (
11289. # Blobs start.
11290. (
11291. # BlobsAndExceptions start.
11292. ( not(
11293.   FileName("*.bat")
11294.   or FileName("*.css")
11295.   or FileName("*.dll")
11296.   or FileName("*.exe")
11297.   or FileName("*.htm*")
11298.   or FileName("*.jar")
11299.   or FileName("*.js")
11300.   or FileName("*.script")
11301.   or FileName("*.wsf")
11302.   or (
11303. # Databases start.
11304. (
11305.   FileName("*.crypt*")
11306.   or FileName("*.db*")
11307.   or FileName("*.rdb*")
11308.   or FileName("*.dc*")
11309.   or FileName("*.dict*")
11310.   or FileName("*.?db*")
11311.   or FileName("*.?rdb*")
11312.   or FileName("*.md*")
11313.   or FileName("*.myd")
11314.   or FileName("*.ndf")
11315.   or FileName("*.ns?")
11316.   or FileName("*.pab")
11317.   or FileName("*.pst")
11318.   or FileName("*.sd?*")
11319.   or FileName("*.sq**")
11320.   or FileName("*.tmd")
11321.   or FileName("*.tps")
11322.   or FileName("*.tr*")
11323. )
11324. # Databases end.
11325. 
11326.     # BlobsAndExceptions
11327.     or 
11328. # Data start.
11329. (
11330.   DirectoryName("Data*")
11331.   or DirectoryName("Device*")
11332.   or DirectoryName("Export*")
11333.   or DirectoryName("Import*")
11334.   or DirectoryName("Log*")
11335.   or DirectoryName("*Log")
11336.   or DirectoryName("Maintenance*")
11337.   or DirectoryName("Rec*")
11338.   or DirectoryName("Sales*")
11339.   or DirectoryName("Search*")
11340.   or DirectoryName("User*")
11341. )
11342. # Data end.
11343. 
11344.     # BlobsAndExceptions
11345.   )
11346. ) )
11347. # BlobsAndExceptions end.
11348. 
11349. # Blobs
11350. ) and (
11351.   Size(BlobFileSize,0)
11352.   or (
11353.     FileName("*.arj")
11354.     or FileName("*.bup")
11355.     or FileName("*.bz2")
11356.     or FileName("*.chm")
11357.     or FileName("*.dvr-ms")
11358.     or FileName("*.gz")
11359.     or FileName("*.ifo")
11360.     or FileName("*.lzh")
11361.     or FileName("*.pdf")
11362.     or FileName("*.rpm")
11363.     or FileName("*.wmv")
11364.     or FileName("*.vob")
11365.     or FileName("*.z")
11366.   ) 
11367. )
11368. # Blobs end.
11369. 
11370. # NotBlobsArchivesBu
11371. or 
11372. # Archives start.
11373. (
11374.   DirectoryName("*Archive*")
11375.   or DirectoryName("*History*")
11376.   or DirectoryName("*Old")
11377.   or DirectoryName("* Old *")
11378.   or DirectoryName("Old *")
11379. 
11380.   or FileName("*.7z")
11381.   or FileName("*.cab")
11382.   or FileName("*.iso")
11383.   or FileName("*.msi")
11384.   or FileName("*.old")
11385.   or FileName("*.rar")
11386.   or FileName("*.tar")
11387.   or FileName("*.zip")
11388.   or
11389. # WinSysLow start.
11390. (
11391.   DirectoryName("$*")
11392.   or DirectoryName("0*")
11393.   or DirectoryName("1*")
11394.   or DirectoryName("2*")
11395.   or DirectoryName("3*")
11396.   or DirectoryName("4*")
11397.   or DirectoryName("5*")
11398.   or DirectoryName("6*")
11399.   or DirectoryName("7*")
11400.   or DirectoryName("8*")
11401.   or DirectoryName("9*")
11402. 
11403.   or DirectoryName("dllcache")
11404.   or DirectoryName("Downloaded Installations")
11405.   or DirectoryName("Ehome")
11406.   or DirectoryName("Fonts")
11407.   or DirectoryName("Help")
11408.   or DirectoryName("I386")
11409.   or DirectoryName("ie?updates")
11410.   or DirectoryName("Installer")
11411.   or DirectoryName("Installshield Installation Information")
11412.   or DirectoryName("IME")
11413.   or DirectoryName("*RECYCLE*")
11414.   or DirectoryName("ServicePackFiles")
11415.   or DirectoryName("SoftwareDistribution")
11416.   or DirectoryName("Speech")
11417.   or DirectoryName("Symbols")
11418.   or DirectoryName("System Volume Information")
11419.   or DirectoryName("windows.old")
11420. )
11421. # WinSysLow end.
11422. 
11423.   # Archives
11424. )
11425. # Archives end.
11426. 
11427. # NotBlobsArchivesBu
11428. or
11429. # Backups start.
11430. (
11431.   DirectoryName("*Backup*")
11432.   or DirectoryName("*Bu")
11433.   or DirectoryName("* Bu *")
11434.   or DirectoryName("Bu *")
11435. 
11436.   or FileName("*.bak")
11437.   or FileName("* - Copy*")
11438. )
11439. # Backups end.
11440. 
11441. # NotBlobsArchivesBu
11442. ) )
11443. # NotBlobsArchivesBu end.
11444. 
11445. # IdeScripts
11446. and ( 
11447. # Ide start.
11448. (
11449.     DirectoryName("Ide*")
11450.     or DirectoryName("Java*")
11451.     or DirectoryName("Os")
11452. )
11453. # Ide end.
11454. 
11455. # IdeScripts
11456. or  
11457. # Scripts start.
11458. (
11459.   DirectoryName("*Script*")
11460. )
11461. # Scripts end.
11462. 
11463. # IdeScripts
11464. )
11465. # IdeScripts end.
11466. 
11467. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
11468. 
11469. 	# Zone Do Footer
11470. 
11471. /* ---------------------------------------------------------- */
11472. # File Select
11473. 	# Select Statments
11474. # File Actions 
11475. 	# Standard or OS File Actions.
11476. 	# Resume...
11477. 	
11478. 	# your stuff HERE (X)... post zone (file) file actions code.
11479. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
11480. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
11481. 		# (X)
11482. 		
11483. 		/* ??? Set window? */
11484. 	
11485. 	# ADD THE GAP
11486. 		
11487. # Vacate (good for diagnostics)
11488. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
11489. 
11490. # DoNotVacate - DO NOT Vacate (recommended)
11491. 
11492. # Vacate
11493. /* AddGap(GapUsedLoc) */
11494. 
11495. # DO Not Vacate
11496. AddGap(GapUsedLoc, DoNotVacate) 
11497. 	
11498. 	
11499. /* ---------------------------------------------------------- */
11500. # (failed) TEST for boolean logic.
11501. 
11502. /* It should work in the gap calculations for turning options */
11503. /* on and off but it will NOT work here. */
11504. 
11505. /* Boolean setting X or FlagX. */
11506. /* Where X will be on or off: */
11507. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
11508. /*      For ON:  (X  *  FlagAny) */
11509. 
11510. /* 1) Failed, zero gap overrode the previous one. */
11511. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
11512. /* AddGap(GapUsedTemp) */ 
11513. 
11514. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
11515. /* AddGap(GapUsedTemp, DoNotVacate) */ 
11516. 
11517. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
11518. 
11519. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
11520. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
11521. /* AddGap(GapUsedTemp) */ 
11522. 
11523. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
11524. /* AddGap(GapUsedTemp, DoNotVacate) */ 
11525. 
11526. /* ---------------------------------------------------------- */
11527. 
11528. # Vacate
11529. /* AddGap(GapUsed) */
11530. 
11531. # DO NOT Vacate (recommended)
11532. /* AddGap(GapUsed, DoNotVacate) */ 
11533. 	
11534. 
11535. 		
11536. # 
11537. FileEnd
11538. /* ---------------------------------------------------------- */
11539. 
11540. # your stuff HERE (X)... post zone (file) code.
11541. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
11542. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
11543. 	# (X)
11544. 
11545. SetVariable(FileStepDescription,"Zone finished, reporting.")
11546. # FILE STEP
11547. 
11548. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
11549. 
11550. /* add message and move to a new line. */
11551. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
11552. ")
11553. 
11554. /* display the line. (hopefully.) */
11555. # Zone Footer Set Statistics Window Text
11556. 
11557. SetStatisticsWindowText("----------------------------------------------------------
11558. Zones Processed: 
11559. ----------------------------------------------------------
11560. !ZoneListByLine!
11561. ----------------------------------------------------------
11562. Zone Processing Step:
11563. !ZoneStepByLine!    
11564. ----------------------------------------------------------
11565. Current Zone:
11566. !ZoneFooter!
11567. ----------------------------------------------------------
11568. Volume Statistics:
11569. !VolumeStatisticsDetail!
11570. ----------------------------------------------------------
11571. Zone Detailed Report:
11572. ----------------------------------------------------------
11573. !ZoneStatisticsDetail!
11574. ----------------------------------------------------------
11575. ")
11576. 
11577. 
11578. 
11579. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
11580. 
11581. # BANNER SET
11582. 
11583. # DATE TIME RUN ELP
11584. 
11585. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
11586. /* Xinclude "..\Display\BannerSet.MyDc"X */
11587. /* pause(1) */
11588. 
11589. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
11590. 
11591. Title('!Heading!')
11592. /* pause(1) */
11593. 
11594. /* NOTE: Can't round or truncate to integer precision. */
11595. 
11596. pause(1)
11597. 
11598. # Zone When Finished
11599. 
11600. # BANNER SET
11601. 
11602. # DATE TIME RUN ELP
11603. 
11604. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
11605. /* Xinclude "..\Display\BannerSet.MyDc"X */
11606. /* pause(1) */
11607. 
11608. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
11609. 
11610. Title('!Heading!')
11611. /* pause(1) */
11612. 
11613. /* NOTE: Can't round or truncate to integer precision. */
11614. 
11615. AppendLogfile("!LogFileName!", "!Title!")
11616. 
11617. 
11618. 
11619. # Zone Statistics	
11620. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
11621. 
11622. # Footer:
11623. SetVariable(ZoneFooter, "----------------------------------------------------------
11624. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
11625. 
11626. Statistics Report:
11627. ------------------
11628.    Size:  
11629.    ------------------------
11630.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
11631.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
11632.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
11633. 
11634.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
11635.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
11636. 
11637.    Location:
11638.    ------------------------
11639.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
11640.              Files End: !ZoneEndCurrent!
11641.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
11642.       
11643.    Gap Settings:
11644.    ------------------------
11645.          Gap Requested: !ZoneGapSizePer!%
11646.       Volume Rounding: !ZoneVolRoundUpPer!%
11647.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
11648.                  
11649.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
11650.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
11651.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
11652.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
11653.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
11654.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
11655.      
11656.    Free Space after Zone:
11657.    ------------------------
11658.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
11659.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
11660.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
11661. 
11662. Directory and Files Select:
11663. ---------------------------
11664. !ZoneTypeSelectCurrent!               
11665. ---------------------------
11666. ----------------------------------------------------------
11667. ")
11668. 
11669. AppendLogfile("!LogFileName!", ".")
11670. AppendLogfile("!LogFileName!", "!ZoneFooter!")
11671. AppendLogfile("!LogFileName!", ".")
11672. 
11673. # Zone Footer Set Statistics Window Text
11674. 
11675. SetStatisticsWindowText("----------------------------------------------------------
11676. Zones Processed: 
11677. ----------------------------------------------------------
11678. !ZoneListByLine!
11679. ----------------------------------------------------------
11680. Zone Processing Step:
11681. !ZoneStepByLine!    
11682. ----------------------------------------------------------
11683. Current Zone:
11684. !ZoneFooter!
11685. ----------------------------------------------------------
11686. Volume Statistics:
11687. !VolumeStatisticsDetail!
11688. ----------------------------------------------------------
11689. Zone Detailed Report:
11690. ----------------------------------------------------------
11691. !ZoneStatisticsDetail!
11692. ----------------------------------------------------------
11693. ")
11694. 
11695. 
11696. 
11697. /* pause() */
11698. /* pause() */
11699. 
11700. 
11701. 
11702. 
11703. /* ---------------------------------------------------------- */
11704. 
11705. /* ---------------------------------------------------------- */
11706. /* Zone DevToDo */
11707. /* ---------------------------------------------------------- */
11708. /* Zone DevToDo */
11709. 
11710. SetVariable(ZoneLabel, "!ZoneLabelDevToDo!")
11711. SetVariable(ZoneDescription, "!ZoneDescriptionDevToDo!")
11712. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpDevToDo!")
11713. SetVariable(ZoneGapSize, "!ZoneGapSizeDevToDo!")
11714. SetVariable(ZoneTypeSelect,'# DevToDo start.
11715. # NotBlobsArchivesBu start.
11716. (not (
11717. # Blobs start.
11718. (
11719. # BlobsAndExceptions start.
11720. ( not(
11721.   FileName("*.bat")
11722.   or FileName("*.css")
11723.   or FileName("*.dll")
11724.   or FileName("*.exe")
11725.   or FileName("*.htm*")
11726.   or FileName("*.jar")
11727.   or FileName("*.js")
11728.   or FileName("*.script")
11729.   or FileName("*.wsf")
11730.   or (
11731. # Databases start.
11732. (
11733.   FileName("*.crypt*")
11734.   or FileName("*.db*")
11735.   or FileName("*.rdb*")
11736.   or FileName("*.dc*")
11737.   or FileName("*.dict*")
11738.   or FileName("*.?db*")
11739.   or FileName("*.?rdb*")
11740.   or FileName("*.md*")
11741.   or FileName("*.myd")
11742.   or FileName("*.ndf")
11743.   or FileName("*.ns?")
11744.   or FileName("*.pab")
11745.   or FileName("*.pst")
11746.   or FileName("*.sd?*")
11747.   or FileName("*.sq**")
11748.   or FileName("*.tmd")
11749.   or FileName("*.tps")
11750.   or FileName("*.tr*")
11751. )
11752. # Databases end.
11753. 
11754.     # BlobsAndExceptions
11755.     or 
11756. # Data start.
11757. (
11758.   DirectoryName("Data*")
11759.   or DirectoryName("Device*")
11760.   or DirectoryName("Export*")
11761.   or DirectoryName("Import*")
11762.   or DirectoryName("Log*")
11763.   or DirectoryName("*Log")
11764.   or DirectoryName("Maintenance*")
11765.   or DirectoryName("Rec*")
11766.   or DirectoryName("Sales*")
11767.   or DirectoryName("Search*")
11768.   or DirectoryName("User*")
11769. )
11770. # Data end.
11771. 
11772.     # BlobsAndExceptions
11773.   )
11774. ) )
11775. # BlobsAndExceptions end.
11776. 
11777. # Blobs
11778. ) and (
11779.   Size(BlobFileSize,0)
11780.   or (
11781.     FileName("*.arj")
11782.     or FileName("*.bup")
11783.     or FileName("*.bz2")
11784.     or FileName("*.chm")
11785.     or FileName("*.dvr-ms")
11786.     or FileName("*.gz")
11787.     or FileName("*.ifo")
11788.     or FileName("*.lzh")
11789.     or FileName("*.pdf")
11790.     or FileName("*.rpm")
11791.     or FileName("*.wmv")
11792.     or FileName("*.vob")
11793.     or FileName("*.z")
11794.   ) 
11795. )
11796. # Blobs end.
11797. 
11798. # NotBlobsArchivesBu
11799. or 
11800. # Archives start.
11801. (
11802.   DirectoryName("*Archive*")
11803.   or DirectoryName("*History*")
11804.   or DirectoryName("*Old")
11805.   or DirectoryName("* Old *")
11806.   or DirectoryName("Old *")
11807. 
11808.   or FileName("*.7z")
11809.   or FileName("*.cab")
11810.   or FileName("*.iso")
11811.   or FileName("*.msi")
11812.   or FileName("*.old")
11813.   or FileName("*.rar")
11814.   or FileName("*.tar")
11815.   or FileName("*.zip")
11816.   or
11817. # WinSysLow start.
11818. (
11819.   DirectoryName("$*")
11820.   or DirectoryName("0*")
11821.   or DirectoryName("1*")
11822.   or DirectoryName("2*")
11823.   or DirectoryName("3*")
11824.   or DirectoryName("4*")
11825.   or DirectoryName("5*")
11826.   or DirectoryName("6*")
11827.   or DirectoryName("7*")
11828.   or DirectoryName("8*")
11829.   or DirectoryName("9*")
11830. 
11831.   or DirectoryName("dllcache")
11832.   or DirectoryName("Downloaded Installations")
11833.   or DirectoryName("Ehome")
11834.   or DirectoryName("Fonts")
11835.   or DirectoryName("Help")
11836.   or DirectoryName("I386")
11837.   or DirectoryName("ie?updates")
11838.   or DirectoryName("Installer")
11839.   or DirectoryName("Installshield Installation Information")
11840.   or DirectoryName("IME")
11841.   or DirectoryName("*RECYCLE*")
11842.   or DirectoryName("ServicePackFiles")
11843.   or DirectoryName("SoftwareDistribution")
11844.   or DirectoryName("Speech")
11845.   or DirectoryName("Symbols")
11846.   or DirectoryName("System Volume Information")
11847.   or DirectoryName("windows.old")
11848. )
11849. # WinSysLow end.
11850. 
11851.   # Archives
11852. )
11853. # Archives end.
11854. 
11855. # NotBlobsArchivesBu
11856. or
11857. # Backups start.
11858. (
11859.   DirectoryName("*Backup*")
11860.   or DirectoryName("*Bu")
11861.   or DirectoryName("* Bu *")
11862.   or DirectoryName("Bu *")
11863. 
11864.   or FileName("*.bak")
11865.   or FileName("* - Copy*")
11866. )
11867. # Backups end.
11868. 
11869. # NotBlobsArchivesBu
11870. ) )
11871. # NotBlobsArchivesBu end.
11872. 
11873. # DevToDo
11874. and ( 
11875. # Dev start.
11876. (
11877.   DirectoryName("*Dev") 
11878.   or DirectoryName("Dev *") 
11879.   or DirectoryName("*Development*") 
11880.   or DirectoryName("DsVs*") 
11881.   or DirectoryName("Srt*") 
11882. )
11883. # Dev end.
11884. 
11885. # DevToDo
11886. or 
11887. # ToDo start.
11888. (
11889.   DirectoryName("*ToDo*")
11890. )
11891. # ToDo end.
11892. 
11893. # DevToDo
11894. )
11895. # DevToDo end.
11896. ')
11897. 
11898. 	# Zone Do Header
11899. 
11900. # Zone When Started
11901. 
11902. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
11903. # Display Set Zone
11904. 
11905. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
11906. SetVariable(FileStepDescription,	"")
11907. 
11908. SetVariable(ZoneStepByLine, 			"Zone started.
11909. ")
11910. 
11911. # BANNER SET
11912. 
11913. # DATE TIME RUN ELP
11914. 
11915. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
11916. /* Xinclude "..\Display\BannerSet.MyDc"X */
11917. /* pause(1) */
11918. 
11919. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
11920. 
11921. Title('!Heading!')
11922. /* pause(1) */
11923. 
11924. /* NOTE: Can't round or truncate to integer precision. */
11925. 
11926. AppendLogfile("!LogFileName!", "!Title!")
11927. 
11928. 
11929. 
11930. pause(1)
11931. 
11932. 
11933. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
11934. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
11935. 
11936. SetVariable(ZoneStepNoCurrent, 0)
11937. 
11938. 
11939. # Zone Do Current Clear
11940. 
11941. SetVariable(ZoneTypeSelectCurrent, 		"")
11942. 
11943. SetVariable(ZoneBeginCurrent, 			0)
11944. SetVariable(ZoneBeginPerCurrent, 		0)
11945. SetVariable(ZoneEndCurrent, 			0)
11946. SetVariable(ZoneEndPerCurrent, 			0)
11947. 
11948. SetVariable(ZoneSizeCurrent,			0)
11949. SetVariable(ZoneSizePerCurrent,			0)
11950. 
11951. SetVariable(ZoneGapRequestedCurrent,	0)
11952. SetVariable(ZoneGapRoundedCurrent, 		0)
11953. SetVariable(ZoneGapAdjustedCurrent, 	0)
11954. SetVariable(ZoneGapAvailableCurrent, 	0)
11955. SetVariable(ZoneGapCurrent,				0)
11956. SetVariable(ZoneGapUsedCurrent, 		0)
11957. 
11958. SetVariable(ZoneGapActualCurrent, 		0)
11959. SetVariable(ZoneGapActualPerCurrent, 	0)
11960. 
11961. SetVariable(ZoneSizeActual, 			0)
11962. SetVariable(ZoneSizeActualCurrent,		0)
11963. 
11964. SetVariable(ZoneEndActual, 				0)
11965. SetVariable(ZoneEndActualCurrent,		0)			
11966. SetVariable(ZoneSizeActualPerCurrent, 	0)
11967.       
11968. SetVariable(ZoneFilesFolders,			0)
11969. SetVariable(ZoneFilesFoldersPer,		0) 
11970. 
11971. SetVariable(ZoneFragments,				0)
11972. SetVariable(ZoneFragmentsPer,			0) 
11973. 		
11974. SetVariable(ZoneEndActualCurrent, 		0)
11975. SetVariable(ZoneEndActualPerCurrent, 	0)
11976. 
11977. # Gap Calculation Methodology:
11978. 	# Requested
11979. 	SetVariable(GapRequested, 			0) 
11980. 	SetVariable(GapRequestedStd, 		0) 
11981. 	SetVariable(GapRequestedMft, 		0) 
11982. 	SetVariable(GapRequestedOs, 		0) 
11983. 	SetVariable(GapRequestedOriginal, 	0) 
11984. 	
11985. 	# Gap Adjustments
11986. 	SetVariable(GapRounded, 			0)
11987. 	# SetVariable(GapAdjusted, 			0)
11988. 	SetVariable(GapAvailable, 			0)
11989. 	SetVariable(GapCurrent, 			0)
11990. 	SetVariable(GapActual, 				0)
11991. 	SetVariable(GapUsed, 				0)
11992. 	
11993. 	# Gap Adjustments
11994. 	SetVariable(GapRoundedLoc, 			0)
11995. 	# SetVariable(GapAdjustedLoc, 		0)
11996. 	SetVariable(GapAvailableLoc, 		0)
11997. 	SetVariable(GapCurrentLoc, 			0)
11998. 	SetVariable(GapActualLoc,			0)
11999. 	SetVariable(GapUsedLoc,				0)
12000. 	
12001. 	# Space usage
12002. 	SetVariable(ZoneFreePerRequested, 	0)
12003. 	SetVariable(ZoneFreePerUsed, 		0)
12004. 
12005. # Gap Size & Rounding
12006. 	SetVariable(ZoneGapSizePer, 		0)
12007. 	SetVariable(ZoneVolRoundUpPer, 		0)
12008. 	
12009. 	# Free Space
12010. 	SetVariable(ZoneFreeUsedPer, 		0)
12011. 	SetVariable(ZoneFreeRequestedPer, 	0)
12012. 
12013. 
12014. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
12015. 
12016. # Footer:
12017. SetVariable(ZoneFooter, "----------------------------------------------------------
12018. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
12019. 
12020. Statistics Report:
12021. ------------------
12022.    Size:  
12023.    ------------------------
12024.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
12025.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
12026.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
12027. 
12028.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
12029.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
12030. 
12031.    Location:
12032.    ------------------------
12033.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
12034.              Files End: !ZoneEndCurrent!
12035.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
12036.       
12037.    Gap Settings:
12038.    ------------------------
12039.          Gap Requested: !ZoneGapSizePer!%
12040.       Volume Rounding: !ZoneVolRoundUpPer!%
12041.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
12042.                  
12043.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
12044.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
12045.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
12046.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
12047.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
12048.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
12049.      
12050.    Free Space after Zone:
12051.    ------------------------
12052.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
12053.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
12054.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
12055. 
12056. Directory and Files Select:
12057. ---------------------------
12058. !ZoneTypeSelectCurrent!               
12059. ---------------------------
12060. ----------------------------------------------------------
12061. ")
12062. 
12063. # BANNER SET
12064. 
12065. # DATE TIME RUN ELP
12066. 
12067. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
12068. /* Xinclude "..\Display\BannerSet.MyDc"X */
12069. /* pause(1) */
12070. 
12071. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
12072. 
12073. Title('!Heading!')
12074. /* pause(1) */
12075. 
12076. /* NOTE: Can't round or truncate to integer precision. */
12077. 
12078. AppendLogfile("!LogFileName!", "!Title!")
12079. 
12080. 
12081. 
12082. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
12083. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
12084. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:18")
12085. 
12086. SetVariable(ZoneListByLine, "!ZoneListByLine!
12087. Zone: !ZoneNoCurrent! 2021-11-09 08:17:18 0:00:06 !ZoneLabel! !ZoneDescription!")
12088. 
12089. 
12090. /* Fixed Zone Position Handling */
12091. /* Literal number: */
12092. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
12093. /* Percentage of disk: */
12094. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
12095. /* Gap */
12096. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
12097. 
12098. /* ---------------------------------------------------------- */
12099. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
12100. # FILE STEP
12101. 
12102. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
12103. 
12104. /* add message and move to a new line. */
12105. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
12106. ")
12107. 
12108. /* display the line. (hopefully.) */
12109. # Zone Footer Set Statistics Window Text
12110. 
12111. SetStatisticsWindowText("----------------------------------------------------------
12112. Zones Processed: 
12113. ----------------------------------------------------------
12114. !ZoneListByLine!
12115. ----------------------------------------------------------
12116. Zone Processing Step:
12117. !ZoneStepByLine!    
12118. ----------------------------------------------------------
12119. Current Zone:
12120. !ZoneFooter!
12121. ----------------------------------------------------------
12122. Volume Statistics:
12123. !VolumeStatisticsDetail!
12124. ----------------------------------------------------------
12125. Zone Detailed Report:
12126. ----------------------------------------------------------
12127. !ZoneStatisticsDetail!
12128. ----------------------------------------------------------
12129. ")
12130. 
12131. 
12132. 
12133. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
12134. 
12135. # BANNER SET
12136. 
12137. # DATE TIME RUN ELP
12138. 
12139. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
12140. /* Xinclude "..\Display\BannerSet.MyDc"X */
12141. /* pause(1) */
12142. 
12143. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
12144. 
12145. Title('!Heading!')
12146. /* pause(1) */
12147. 
12148. /* NOTE: Can't round or truncate to integer precision. */
12149. 
12150. pause(1)
12151. 
12152. # your stuff HERE (X)... pre file select code.
12153. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
12154. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
12155. 	# (X)
12156. 
12157. FileSelect
12158. 
12159. 	# your stuff can't really go here (errors.)
12160. 	# maybe for some reason I don't know of...
12161. 	
12162. 	# Actions next...
12163. 	# DevToDo start.
12164. # NotBlobsArchivesBu start.
12165. (not (
12166. # Blobs start.
12167. (
12168. # BlobsAndExceptions start.
12169. ( not(
12170.   FileName("*.bat")
12171.   or FileName("*.css")
12172.   or FileName("*.dll")
12173.   or FileName("*.exe")
12174.   or FileName("*.htm*")
12175.   or FileName("*.jar")
12176.   or FileName("*.js")
12177.   or FileName("*.script")
12178.   or FileName("*.wsf")
12179.   or (
12180. # Databases start.
12181. (
12182.   FileName("*.crypt*")
12183.   or FileName("*.db*")
12184.   or FileName("*.rdb*")
12185.   or FileName("*.dc*")
12186.   or FileName("*.dict*")
12187.   or FileName("*.?db*")
12188.   or FileName("*.?rdb*")
12189.   or FileName("*.md*")
12190.   or FileName("*.myd")
12191.   or FileName("*.ndf")
12192.   or FileName("*.ns?")
12193.   or FileName("*.pab")
12194.   or FileName("*.pst")
12195.   or FileName("*.sd?*")
12196.   or FileName("*.sq**")
12197.   or FileName("*.tmd")
12198.   or FileName("*.tps")
12199.   or FileName("*.tr*")
12200. )
12201. # Databases end.
12202. 
12203.     # BlobsAndExceptions
12204.     or 
12205. # Data start.
12206. (
12207.   DirectoryName("Data*")
12208.   or DirectoryName("Device*")
12209.   or DirectoryName("Export*")
12210.   or DirectoryName("Import*")
12211.   or DirectoryName("Log*")
12212.   or DirectoryName("*Log")
12213.   or DirectoryName("Maintenance*")
12214.   or DirectoryName("Rec*")
12215.   or DirectoryName("Sales*")
12216.   or DirectoryName("Search*")
12217.   or DirectoryName("User*")
12218. )
12219. # Data end.
12220. 
12221.     # BlobsAndExceptions
12222.   )
12223. ) )
12224. # BlobsAndExceptions end.
12225. 
12226. # Blobs
12227. ) and (
12228.   Size(BlobFileSize,0)
12229.   or (
12230.     FileName("*.arj")
12231.     or FileName("*.bup")
12232.     or FileName("*.bz2")
12233.     or FileName("*.chm")
12234.     or FileName("*.dvr-ms")
12235.     or FileName("*.gz")
12236.     or FileName("*.ifo")
12237.     or FileName("*.lzh")
12238.     or FileName("*.pdf")
12239.     or FileName("*.rpm")
12240.     or FileName("*.wmv")
12241.     or FileName("*.vob")
12242.     or FileName("*.z")
12243.   ) 
12244. )
12245. # Blobs end.
12246. 
12247. # NotBlobsArchivesBu
12248. or 
12249. # Archives start.
12250. (
12251.   DirectoryName("*Archive*")
12252.   or DirectoryName("*History*")
12253.   or DirectoryName("*Old")
12254.   or DirectoryName("* Old *")
12255.   or DirectoryName("Old *")
12256. 
12257.   or FileName("*.7z")
12258.   or FileName("*.cab")
12259.   or FileName("*.iso")
12260.   or FileName("*.msi")
12261.   or FileName("*.old")
12262.   or FileName("*.rar")
12263.   or FileName("*.tar")
12264.   or FileName("*.zip")
12265.   or
12266. # WinSysLow start.
12267. (
12268.   DirectoryName("$*")
12269.   or DirectoryName("0*")
12270.   or DirectoryName("1*")
12271.   or DirectoryName("2*")
12272.   or DirectoryName("3*")
12273.   or DirectoryName("4*")
12274.   or DirectoryName("5*")
12275.   or DirectoryName("6*")
12276.   or DirectoryName("7*")
12277.   or DirectoryName("8*")
12278.   or DirectoryName("9*")
12279. 
12280.   or DirectoryName("dllcache")
12281.   or DirectoryName("Downloaded Installations")
12282.   or DirectoryName("Ehome")
12283.   or DirectoryName("Fonts")
12284.   or DirectoryName("Help")
12285.   or DirectoryName("I386")
12286.   or DirectoryName("ie?updates")
12287.   or DirectoryName("Installer")
12288.   or DirectoryName("Installshield Installation Information")
12289.   or DirectoryName("IME")
12290.   or DirectoryName("*RECYCLE*")
12291.   or DirectoryName("ServicePackFiles")
12292.   or DirectoryName("SoftwareDistribution")
12293.   or DirectoryName("Speech")
12294.   or DirectoryName("Symbols")
12295.   or DirectoryName("System Volume Information")
12296.   or DirectoryName("windows.old")
12297. )
12298. # WinSysLow end.
12299. 
12300.   # Archives
12301. )
12302. # Archives end.
12303. 
12304. # NotBlobsArchivesBu
12305. or
12306. # Backups start.
12307. (
12308.   DirectoryName("*Backup*")
12309.   or DirectoryName("*Bu")
12310.   or DirectoryName("* Bu *")
12311.   or DirectoryName("Bu *")
12312. 
12313.   or FileName("*.bak")
12314.   or FileName("* - Copy*")
12315. )
12316. # Backups end.
12317. 
12318. # NotBlobsArchivesBu
12319. ) )
12320. # NotBlobsArchivesBu end.
12321. 
12322. # DevToDo
12323. and ( 
12324. # Dev start.
12325. (
12326.   DirectoryName("*Dev") 
12327.   or DirectoryName("Dev *") 
12328.   or DirectoryName("*Development*") 
12329.   or DirectoryName("DsVs*") 
12330.   or DirectoryName("Srt*") 
12331. )
12332. # Dev end.
12333. 
12334. # DevToDo
12335. or 
12336. # ToDo start.
12337. (
12338.   DirectoryName("*ToDo*")
12339. )
12340. # ToDo end.
12341. 
12342. # DevToDo
12343. )
12344. # DevToDo end.
12345. 
12346. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
12347. 
12348. 	# Zone Do Footer
12349. 
12350. /* ---------------------------------------------------------- */
12351. # File Select
12352. 	# Select Statments
12353. # File Actions 
12354. 	# Standard or OS File Actions.
12355. 	# Resume...
12356. 	
12357. 	# your stuff HERE (X)... post zone (file) file actions code.
12358. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
12359. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
12360. 		# (X)
12361. 		
12362. 		/* ??? Set window? */
12363. 	
12364. 	# ADD THE GAP
12365. 		
12366. # Vacate (good for diagnostics)
12367. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
12368. 
12369. # DoNotVacate - DO NOT Vacate (recommended)
12370. 
12371. # Vacate
12372. /* AddGap(GapUsedLoc) */
12373. 
12374. # DO Not Vacate
12375. AddGap(GapUsedLoc, DoNotVacate) 
12376. 	
12377. 	
12378. /* ---------------------------------------------------------- */
12379. # (failed) TEST for boolean logic.
12380. 
12381. /* It should work in the gap calculations for turning options */
12382. /* on and off but it will NOT work here. */
12383. 
12384. /* Boolean setting X or FlagX. */
12385. /* Where X will be on or off: */
12386. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
12387. /*      For ON:  (X  *  FlagAny) */
12388. 
12389. /* 1) Failed, zero gap overrode the previous one. */
12390. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
12391. /* AddGap(GapUsedTemp) */ 
12392. 
12393. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
12394. /* AddGap(GapUsedTemp, DoNotVacate) */ 
12395. 
12396. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
12397. 
12398. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
12399. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
12400. /* AddGap(GapUsedTemp) */ 
12401. 
12402. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
12403. /* AddGap(GapUsedTemp, DoNotVacate) */ 
12404. 
12405. /* ---------------------------------------------------------- */
12406. 
12407. # Vacate
12408. /* AddGap(GapUsed) */
12409. 
12410. # DO NOT Vacate (recommended)
12411. /* AddGap(GapUsed, DoNotVacate) */ 
12412. 	
12413. 
12414. 		
12415. # 
12416. FileEnd
12417. /* ---------------------------------------------------------- */
12418. 
12419. # your stuff HERE (X)... post zone (file) code.
12420. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
12421. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
12422. 	# (X)
12423. 
12424. SetVariable(FileStepDescription,"Zone finished, reporting.")
12425. # FILE STEP
12426. 
12427. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
12428. 
12429. /* add message and move to a new line. */
12430. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
12431. ")
12432. 
12433. /* display the line. (hopefully.) */
12434. # Zone Footer Set Statistics Window Text
12435. 
12436. SetStatisticsWindowText("----------------------------------------------------------
12437. Zones Processed: 
12438. ----------------------------------------------------------
12439. !ZoneListByLine!
12440. ----------------------------------------------------------
12441. Zone Processing Step:
12442. !ZoneStepByLine!    
12443. ----------------------------------------------------------
12444. Current Zone:
12445. !ZoneFooter!
12446. ----------------------------------------------------------
12447. Volume Statistics:
12448. !VolumeStatisticsDetail!
12449. ----------------------------------------------------------
12450. Zone Detailed Report:
12451. ----------------------------------------------------------
12452. !ZoneStatisticsDetail!
12453. ----------------------------------------------------------
12454. ")
12455. 
12456. 
12457. 
12458. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
12459. 
12460. # BANNER SET
12461. 
12462. # DATE TIME RUN ELP
12463. 
12464. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
12465. /* Xinclude "..\Display\BannerSet.MyDc"X */
12466. /* pause(1) */
12467. 
12468. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
12469. 
12470. Title('!Heading!')
12471. /* pause(1) */
12472. 
12473. /* NOTE: Can't round or truncate to integer precision. */
12474. 
12475. pause(1)
12476. 
12477. # Zone When Finished
12478. 
12479. # BANNER SET
12480. 
12481. # DATE TIME RUN ELP
12482. 
12483. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
12484. /* Xinclude "..\Display\BannerSet.MyDc"X */
12485. /* pause(1) */
12486. 
12487. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
12488. 
12489. Title('!Heading!')
12490. /* pause(1) */
12491. 
12492. /* NOTE: Can't round or truncate to integer precision. */
12493. 
12494. AppendLogfile("!LogFileName!", "!Title!")
12495. 
12496. 
12497. 
12498. # Zone Statistics	
12499. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
12500. 
12501. # Footer:
12502. SetVariable(ZoneFooter, "----------------------------------------------------------
12503. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
12504. 
12505. Statistics Report:
12506. ------------------
12507.    Size:  
12508.    ------------------------
12509.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
12510.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
12511.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
12512. 
12513.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
12514.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
12515. 
12516.    Location:
12517.    ------------------------
12518.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
12519.              Files End: !ZoneEndCurrent!
12520.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
12521.       
12522.    Gap Settings:
12523.    ------------------------
12524.          Gap Requested: !ZoneGapSizePer!%
12525.       Volume Rounding: !ZoneVolRoundUpPer!%
12526.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
12527.                  
12528.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
12529.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
12530.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
12531.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
12532.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
12533.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
12534.      
12535.    Free Space after Zone:
12536.    ------------------------
12537.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
12538.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
12539.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
12540. 
12541. Directory and Files Select:
12542. ---------------------------
12543. !ZoneTypeSelectCurrent!               
12544. ---------------------------
12545. ----------------------------------------------------------
12546. ")
12547. 
12548. AppendLogfile("!LogFileName!", ".")
12549. AppendLogfile("!LogFileName!", "!ZoneFooter!")
12550. AppendLogfile("!LogFileName!", ".")
12551. 
12552. # Zone Footer Set Statistics Window Text
12553. 
12554. SetStatisticsWindowText("----------------------------------------------------------
12555. Zones Processed: 
12556. ----------------------------------------------------------
12557. !ZoneListByLine!
12558. ----------------------------------------------------------
12559. Zone Processing Step:
12560. !ZoneStepByLine!    
12561. ----------------------------------------------------------
12562. Current Zone:
12563. !ZoneFooter!
12564. ----------------------------------------------------------
12565. Volume Statistics:
12566. !VolumeStatisticsDetail!
12567. ----------------------------------------------------------
12568. Zone Detailed Report:
12569. ----------------------------------------------------------
12570. !ZoneStatisticsDetail!
12571. ----------------------------------------------------------
12572. ")
12573. 
12574. 
12575. 
12576. /* pause() */
12577. /* pause() */
12578. 
12579. 
12580. 
12581. 
12582. /* ---------------------------------------------------------- */
12583. 
12584. /* ---------------------------------------------------------- */
12585. /* Zone LinksCorp Links and Corp */
12586. /* ---------------------------------------------------------- */
12587. /* Zone LinksCorp Links and Corp */
12588. SetVariable(ZoneLabel, "!ZoneLabelLinksCorp!")
12589. SetVariable(ZoneDescription, "!ZoneDescriptionLinksCorp!")
12590. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpLinksCorp!")
12591. SetVariable(ZoneGapSize, "!ZoneGapSizeLinksCorp!")
12592. SetVariable(ZoneTypeSelect,'# LinksCorp start.
12593. # NotBlobsArchivesBu start.
12594. (not (
12595. # Blobs start.
12596. (
12597. # BlobsAndExceptions start.
12598. ( not(
12599.   FileName("*.bat")
12600.   or FileName("*.css")
12601.   or FileName("*.dll")
12602.   or FileName("*.exe")
12603.   or FileName("*.htm*")
12604.   or FileName("*.jar")
12605.   or FileName("*.js")
12606.   or FileName("*.script")
12607.   or FileName("*.wsf")
12608.   or (
12609. # Databases start.
12610. (
12611.   FileName("*.crypt*")
12612.   or FileName("*.db*")
12613.   or FileName("*.rdb*")
12614.   or FileName("*.dc*")
12615.   or FileName("*.dict*")
12616.   or FileName("*.?db*")
12617.   or FileName("*.?rdb*")
12618.   or FileName("*.md*")
12619.   or FileName("*.myd")
12620.   or FileName("*.ndf")
12621.   or FileName("*.ns?")
12622.   or FileName("*.pab")
12623.   or FileName("*.pst")
12624.   or FileName("*.sd?*")
12625.   or FileName("*.sq**")
12626.   or FileName("*.tmd")
12627.   or FileName("*.tps")
12628.   or FileName("*.tr*")
12629. )
12630. # Databases end.
12631. 
12632.     # BlobsAndExceptions
12633.     or 
12634. # Data start.
12635. (
12636.   DirectoryName("Data*")
12637.   or DirectoryName("Device*")
12638.   or DirectoryName("Export*")
12639.   or DirectoryName("Import*")
12640.   or DirectoryName("Log*")
12641.   or DirectoryName("*Log")
12642.   or DirectoryName("Maintenance*")
12643.   or DirectoryName("Rec*")
12644.   or DirectoryName("Sales*")
12645.   or DirectoryName("Search*")
12646.   or DirectoryName("User*")
12647. )
12648. # Data end.
12649. 
12650.     # BlobsAndExceptions
12651.   )
12652. ) )
12653. # BlobsAndExceptions end.
12654. 
12655. # Blobs
12656. ) and (
12657.   Size(BlobFileSize,0)
12658.   or (
12659.     FileName("*.arj")
12660.     or FileName("*.bup")
12661.     or FileName("*.bz2")
12662.     or FileName("*.chm")
12663.     or FileName("*.dvr-ms")
12664.     or FileName("*.gz")
12665.     or FileName("*.ifo")
12666.     or FileName("*.lzh")
12667.     or FileName("*.pdf")
12668.     or FileName("*.rpm")
12669.     or FileName("*.wmv")
12670.     or FileName("*.vob")
12671.     or FileName("*.z")
12672.   ) 
12673. )
12674. # Blobs end.
12675. 
12676. # NotBlobsArchivesBu
12677. or 
12678. # Archives start.
12679. (
12680.   DirectoryName("*Archive*")
12681.   or DirectoryName("*History*")
12682.   or DirectoryName("*Old")
12683.   or DirectoryName("* Old *")
12684.   or DirectoryName("Old *")
12685. 
12686.   or FileName("*.7z")
12687.   or FileName("*.cab")
12688.   or FileName("*.iso")
12689.   or FileName("*.msi")
12690.   or FileName("*.old")
12691.   or FileName("*.rar")
12692.   or FileName("*.tar")
12693.   or FileName("*.zip")
12694.   or
12695. # WinSysLow start.
12696. (
12697.   DirectoryName("$*")
12698.   or DirectoryName("0*")
12699.   or DirectoryName("1*")
12700.   or DirectoryName("2*")
12701.   or DirectoryName("3*")
12702.   or DirectoryName("4*")
12703.   or DirectoryName("5*")
12704.   or DirectoryName("6*")
12705.   or DirectoryName("7*")
12706.   or DirectoryName("8*")
12707.   or DirectoryName("9*")
12708. 
12709.   or DirectoryName("dllcache")
12710.   or DirectoryName("Downloaded Installations")
12711.   or DirectoryName("Ehome")
12712.   or DirectoryName("Fonts")
12713.   or DirectoryName("Help")
12714.   or DirectoryName("I386")
12715.   or DirectoryName("ie?updates")
12716.   or DirectoryName("Installer")
12717.   or DirectoryName("Installshield Installation Information")
12718.   or DirectoryName("IME")
12719.   or DirectoryName("*RECYCLE*")
12720.   or DirectoryName("ServicePackFiles")
12721.   or DirectoryName("SoftwareDistribution")
12722.   or DirectoryName("Speech")
12723.   or DirectoryName("Symbols")
12724.   or DirectoryName("System Volume Information")
12725.   or DirectoryName("windows.old")
12726. )
12727. # WinSysLow end.
12728. 
12729.   # Archives
12730. )
12731. # Archives end.
12732. 
12733. # NotBlobsArchivesBu
12734. or
12735. # Backups start.
12736. (
12737.   DirectoryName("*Backup*")
12738.   or DirectoryName("*Bu")
12739.   or DirectoryName("* Bu *")
12740.   or DirectoryName("Bu *")
12741. 
12742.   or FileName("*.bak")
12743.   or FileName("* - Copy*")
12744. )
12745. # Backups end.
12746. 
12747. # NotBlobsArchivesBu
12748. ) )
12749. # NotBlobsArchivesBu end.
12750. 
12751. # LinksCorp
12752. and ( 
12753. # Corp start.
12754. (
12755.     DirectoryName("*Corp*") or
12756.     DirectoryName("*Mdm*")
12757. )
12758. # Corp end.
12759. 
12760. # LinksCorp
12761. or 
12762. # Links start.
12763. (
12764.     DirectoryName("*Favorites*") or
12765.     DirectoryName("*Job*") or
12766.     DirectoryName("*Links*")
12767. )
12768. # Links end.
12769. 
12770. # LinksCorp
12771. or 
12772. # Support start.
12773. (
12774.   DirectoryName("*Logs*") or
12775.   DirectoryName("*Support*") or
12776.   DirectoryName("*Maintenance*")
12777. )
12778. # Support end.
12779. 
12780. # LinksCorp
12781. )
12782. # LinksCorp end.
12783. ')
12784. 
12785. 	# Zone Do Header
12786. 
12787. # Zone When Started
12788. 
12789. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
12790. # Display Set Zone
12791. 
12792. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
12793. SetVariable(FileStepDescription,	"")
12794. 
12795. SetVariable(ZoneStepByLine, 			"Zone started.
12796. ")
12797. 
12798. # BANNER SET
12799. 
12800. # DATE TIME RUN ELP
12801. 
12802. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
12803. /* Xinclude "..\Display\BannerSet.MyDc"X */
12804. /* pause(1) */
12805. 
12806. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
12807. 
12808. Title('!Heading!')
12809. /* pause(1) */
12810. 
12811. /* NOTE: Can't round or truncate to integer precision. */
12812. 
12813. AppendLogfile("!LogFileName!", "!Title!")
12814. 
12815. 
12816. 
12817. pause(1)
12818. 
12819. 
12820. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
12821. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
12822. 
12823. SetVariable(ZoneStepNoCurrent, 0)
12824. 
12825. 
12826. # Zone Do Current Clear
12827. 
12828. SetVariable(ZoneTypeSelectCurrent, 		"")
12829. 
12830. SetVariable(ZoneBeginCurrent, 			0)
12831. SetVariable(ZoneBeginPerCurrent, 		0)
12832. SetVariable(ZoneEndCurrent, 			0)
12833. SetVariable(ZoneEndPerCurrent, 			0)
12834. 
12835. SetVariable(ZoneSizeCurrent,			0)
12836. SetVariable(ZoneSizePerCurrent,			0)
12837. 
12838. SetVariable(ZoneGapRequestedCurrent,	0)
12839. SetVariable(ZoneGapRoundedCurrent, 		0)
12840. SetVariable(ZoneGapAdjustedCurrent, 	0)
12841. SetVariable(ZoneGapAvailableCurrent, 	0)
12842. SetVariable(ZoneGapCurrent,				0)
12843. SetVariable(ZoneGapUsedCurrent, 		0)
12844. 
12845. SetVariable(ZoneGapActualCurrent, 		0)
12846. SetVariable(ZoneGapActualPerCurrent, 	0)
12847. 
12848. SetVariable(ZoneSizeActual, 			0)
12849. SetVariable(ZoneSizeActualCurrent,		0)
12850. 
12851. SetVariable(ZoneEndActual, 				0)
12852. SetVariable(ZoneEndActualCurrent,		0)			
12853. SetVariable(ZoneSizeActualPerCurrent, 	0)
12854.       
12855. SetVariable(ZoneFilesFolders,			0)
12856. SetVariable(ZoneFilesFoldersPer,		0) 
12857. 
12858. SetVariable(ZoneFragments,				0)
12859. SetVariable(ZoneFragmentsPer,			0) 
12860. 		
12861. SetVariable(ZoneEndActualCurrent, 		0)
12862. SetVariable(ZoneEndActualPerCurrent, 	0)
12863. 
12864. # Gap Calculation Methodology:
12865. 	# Requested
12866. 	SetVariable(GapRequested, 			0) 
12867. 	SetVariable(GapRequestedStd, 		0) 
12868. 	SetVariable(GapRequestedMft, 		0) 
12869. 	SetVariable(GapRequestedOs, 		0) 
12870. 	SetVariable(GapRequestedOriginal, 	0) 
12871. 	
12872. 	# Gap Adjustments
12873. 	SetVariable(GapRounded, 			0)
12874. 	# SetVariable(GapAdjusted, 			0)
12875. 	SetVariable(GapAvailable, 			0)
12876. 	SetVariable(GapCurrent, 			0)
12877. 	SetVariable(GapActual, 				0)
12878. 	SetVariable(GapUsed, 				0)
12879. 	
12880. 	# Gap Adjustments
12881. 	SetVariable(GapRoundedLoc, 			0)
12882. 	# SetVariable(GapAdjustedLoc, 		0)
12883. 	SetVariable(GapAvailableLoc, 		0)
12884. 	SetVariable(GapCurrentLoc, 			0)
12885. 	SetVariable(GapActualLoc,			0)
12886. 	SetVariable(GapUsedLoc,				0)
12887. 	
12888. 	# Space usage
12889. 	SetVariable(ZoneFreePerRequested, 	0)
12890. 	SetVariable(ZoneFreePerUsed, 		0)
12891. 
12892. # Gap Size & Rounding
12893. 	SetVariable(ZoneGapSizePer, 		0)
12894. 	SetVariable(ZoneVolRoundUpPer, 		0)
12895. 	
12896. 	# Free Space
12897. 	SetVariable(ZoneFreeUsedPer, 		0)
12898. 	SetVariable(ZoneFreeRequestedPer, 	0)
12899. 
12900. 
12901. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
12902. 
12903. # Footer:
12904. SetVariable(ZoneFooter, "----------------------------------------------------------
12905. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
12906. 
12907. Statistics Report:
12908. ------------------
12909.    Size:  
12910.    ------------------------
12911.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
12912.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
12913.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
12914. 
12915.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
12916.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
12917. 
12918.    Location:
12919.    ------------------------
12920.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
12921.              Files End: !ZoneEndCurrent!
12922.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
12923.       
12924.    Gap Settings:
12925.    ------------------------
12926.          Gap Requested: !ZoneGapSizePer!%
12927.       Volume Rounding: !ZoneVolRoundUpPer!%
12928.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
12929.                  
12930.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
12931.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
12932.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
12933.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
12934.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
12935.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
12936.      
12937.    Free Space after Zone:
12938.    ------------------------
12939.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
12940.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
12941.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
12942. 
12943. Directory and Files Select:
12944. ---------------------------
12945. !ZoneTypeSelectCurrent!               
12946. ---------------------------
12947. ----------------------------------------------------------
12948. ")
12949. 
12950. # BANNER SET
12951. 
12952. # DATE TIME RUN ELP
12953. 
12954. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
12955. /* Xinclude "..\Display\BannerSet.MyDc"X */
12956. /* pause(1) */
12957. 
12958. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
12959. 
12960. Title('!Heading!')
12961. /* pause(1) */
12962. 
12963. /* NOTE: Can't round or truncate to integer precision. */
12964. 
12965. AppendLogfile("!LogFileName!", "!Title!")
12966. 
12967. 
12968. 
12969. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
12970. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
12971. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:18")
12972. 
12973. SetVariable(ZoneListByLine, "!ZoneListByLine!
12974. Zone: !ZoneNoCurrent! 2021-11-09 08:17:18 0:00:06 !ZoneLabel! !ZoneDescription!")
12975. 
12976. 
12977. /* Fixed Zone Position Handling */
12978. /* Literal number: */
12979. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
12980. /* Percentage of disk: */
12981. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
12982. /* Gap */
12983. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
12984. 
12985. /* ---------------------------------------------------------- */
12986. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
12987. # FILE STEP
12988. 
12989. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
12990. 
12991. /* add message and move to a new line. */
12992. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
12993. ")
12994. 
12995. /* display the line. (hopefully.) */
12996. # Zone Footer Set Statistics Window Text
12997. 
12998. SetStatisticsWindowText("----------------------------------------------------------
12999. Zones Processed: 
13000. ----------------------------------------------------------
13001. !ZoneListByLine!
13002. ----------------------------------------------------------
13003. Zone Processing Step:
13004. !ZoneStepByLine!    
13005. ----------------------------------------------------------
13006. Current Zone:
13007. !ZoneFooter!
13008. ----------------------------------------------------------
13009. Volume Statistics:
13010. !VolumeStatisticsDetail!
13011. ----------------------------------------------------------
13012. Zone Detailed Report:
13013. ----------------------------------------------------------
13014. !ZoneStatisticsDetail!
13015. ----------------------------------------------------------
13016. ")
13017. 
13018. 
13019. 
13020. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
13021. 
13022. # BANNER SET
13023. 
13024. # DATE TIME RUN ELP
13025. 
13026. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
13027. /* Xinclude "..\Display\BannerSet.MyDc"X */
13028. /* pause(1) */
13029. 
13030. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
13031. 
13032. Title('!Heading!')
13033. /* pause(1) */
13034. 
13035. /* NOTE: Can't round or truncate to integer precision. */
13036. 
13037. pause(1)
13038. 
13039. # your stuff HERE (X)... pre file select code.
13040. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
13041. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
13042. 	# (X)
13043. 
13044. FileSelect
13045. 
13046. 	# your stuff can't really go here (errors.)
13047. 	# maybe for some reason I don't know of...
13048. 	
13049. 	# Actions next...
13050. 	# LinksCorp start.
13051. # NotBlobsArchivesBu start.
13052. (not (
13053. # Blobs start.
13054. (
13055. # BlobsAndExceptions start.
13056. ( not(
13057.   FileName("*.bat")
13058.   or FileName("*.css")
13059.   or FileName("*.dll")
13060.   or FileName("*.exe")
13061.   or FileName("*.htm*")
13062.   or FileName("*.jar")
13063.   or FileName("*.js")
13064.   or FileName("*.script")
13065.   or FileName("*.wsf")
13066.   or (
13067. # Databases start.
13068. (
13069.   FileName("*.crypt*")
13070.   or FileName("*.db*")
13071.   or FileName("*.rdb*")
13072.   or FileName("*.dc*")
13073.   or FileName("*.dict*")
13074.   or FileName("*.?db*")
13075.   or FileName("*.?rdb*")
13076.   or FileName("*.md*")
13077.   or FileName("*.myd")
13078.   or FileName("*.ndf")
13079.   or FileName("*.ns?")
13080.   or FileName("*.pab")
13081.   or FileName("*.pst")
13082.   or FileName("*.sd?*")
13083.   or FileName("*.sq**")
13084.   or FileName("*.tmd")
13085.   or FileName("*.tps")
13086.   or FileName("*.tr*")
13087. )
13088. # Databases end.
13089. 
13090.     # BlobsAndExceptions
13091.     or 
13092. # Data start.
13093. (
13094.   DirectoryName("Data*")
13095.   or DirectoryName("Device*")
13096.   or DirectoryName("Export*")
13097.   or DirectoryName("Import*")
13098.   or DirectoryName("Log*")
13099.   or DirectoryName("*Log")
13100.   or DirectoryName("Maintenance*")
13101.   or DirectoryName("Rec*")
13102.   or DirectoryName("Sales*")
13103.   or DirectoryName("Search*")
13104.   or DirectoryName("User*")
13105. )
13106. # Data end.
13107. 
13108.     # BlobsAndExceptions
13109.   )
13110. ) )
13111. # BlobsAndExceptions end.
13112. 
13113. # Blobs
13114. ) and (
13115.   Size(BlobFileSize,0)
13116.   or (
13117.     FileName("*.arj")
13118.     or FileName("*.bup")
13119.     or FileName("*.bz2")
13120.     or FileName("*.chm")
13121.     or FileName("*.dvr-ms")
13122.     or FileName("*.gz")
13123.     or FileName("*.ifo")
13124.     or FileName("*.lzh")
13125.     or FileName("*.pdf")
13126.     or FileName("*.rpm")
13127.     or FileName("*.wmv")
13128.     or FileName("*.vob")
13129.     or FileName("*.z")
13130.   ) 
13131. )
13132. # Blobs end.
13133. 
13134. # NotBlobsArchivesBu
13135. or 
13136. # Archives start.
13137. (
13138.   DirectoryName("*Archive*")
13139.   or DirectoryName("*History*")
13140.   or DirectoryName("*Old")
13141.   or DirectoryName("* Old *")
13142.   or DirectoryName("Old *")
13143. 
13144.   or FileName("*.7z")
13145.   or FileName("*.cab")
13146.   or FileName("*.iso")
13147.   or FileName("*.msi")
13148.   or FileName("*.old")
13149.   or FileName("*.rar")
13150.   or FileName("*.tar")
13151.   or FileName("*.zip")
13152.   or
13153. # WinSysLow start.
13154. (
13155.   DirectoryName("$*")
13156.   or DirectoryName("0*")
13157.   or DirectoryName("1*")
13158.   or DirectoryName("2*")
13159.   or DirectoryName("3*")
13160.   or DirectoryName("4*")
13161.   or DirectoryName("5*")
13162.   or DirectoryName("6*")
13163.   or DirectoryName("7*")
13164.   or DirectoryName("8*")
13165.   or DirectoryName("9*")
13166. 
13167.   or DirectoryName("dllcache")
13168.   or DirectoryName("Downloaded Installations")
13169.   or DirectoryName("Ehome")
13170.   or DirectoryName("Fonts")
13171.   or DirectoryName("Help")
13172.   or DirectoryName("I386")
13173.   or DirectoryName("ie?updates")
13174.   or DirectoryName("Installer")
13175.   or DirectoryName("Installshield Installation Information")
13176.   or DirectoryName("IME")
13177.   or DirectoryName("*RECYCLE*")
13178.   or DirectoryName("ServicePackFiles")
13179.   or DirectoryName("SoftwareDistribution")
13180.   or DirectoryName("Speech")
13181.   or DirectoryName("Symbols")
13182.   or DirectoryName("System Volume Information")
13183.   or DirectoryName("windows.old")
13184. )
13185. # WinSysLow end.
13186. 
13187.   # Archives
13188. )
13189. # Archives end.
13190. 
13191. # NotBlobsArchivesBu
13192. or
13193. # Backups start.
13194. (
13195.   DirectoryName("*Backup*")
13196.   or DirectoryName("*Bu")
13197.   or DirectoryName("* Bu *")
13198.   or DirectoryName("Bu *")
13199. 
13200.   or FileName("*.bak")
13201.   or FileName("* - Copy*")
13202. )
13203. # Backups end.
13204. 
13205. # NotBlobsArchivesBu
13206. ) )
13207. # NotBlobsArchivesBu end.
13208. 
13209. # LinksCorp
13210. and ( 
13211. # Corp start.
13212. (
13213.     DirectoryName("*Corp*") or
13214.     DirectoryName("*Mdm*")
13215. )
13216. # Corp end.
13217. 
13218. # LinksCorp
13219. or 
13220. # Links start.
13221. (
13222.     DirectoryName("*Favorites*") or
13223.     DirectoryName("*Job*") or
13224.     DirectoryName("*Links*")
13225. )
13226. # Links end.
13227. 
13228. # LinksCorp
13229. or 
13230. # Support start.
13231. (
13232.   DirectoryName("*Logs*") or
13233.   DirectoryName("*Support*") or
13234.   DirectoryName("*Maintenance*")
13235. )
13236. # Support end.
13237. 
13238. # LinksCorp
13239. )
13240. # LinksCorp end.
13241. 
13242. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
13243. 
13244. 	# Zone Do Footer
13245. 
13246. /* ---------------------------------------------------------- */
13247. # File Select
13248. 	# Select Statments
13249. # File Actions 
13250. 	# Standard or OS File Actions.
13251. 	# Resume...
13252. 	
13253. 	# your stuff HERE (X)... post zone (file) file actions code.
13254. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
13255. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
13256. 		# (X)
13257. 		
13258. 		/* ??? Set window? */
13259. 	
13260. 	# ADD THE GAP
13261. 		
13262. # Vacate (good for diagnostics)
13263. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
13264. 
13265. # DoNotVacate - DO NOT Vacate (recommended)
13266. 
13267. # Vacate
13268. /* AddGap(GapUsedLoc) */
13269. 
13270. # DO Not Vacate
13271. AddGap(GapUsedLoc, DoNotVacate) 
13272. 	
13273. 	
13274. /* ---------------------------------------------------------- */
13275. # (failed) TEST for boolean logic.
13276. 
13277. /* It should work in the gap calculations for turning options */
13278. /* on and off but it will NOT work here. */
13279. 
13280. /* Boolean setting X or FlagX. */
13281. /* Where X will be on or off: */
13282. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
13283. /*      For ON:  (X  *  FlagAny) */
13284. 
13285. /* 1) Failed, zero gap overrode the previous one. */
13286. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
13287. /* AddGap(GapUsedTemp) */ 
13288. 
13289. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
13290. /* AddGap(GapUsedTemp, DoNotVacate) */ 
13291. 
13292. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
13293. 
13294. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
13295. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
13296. /* AddGap(GapUsedTemp) */ 
13297. 
13298. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
13299. /* AddGap(GapUsedTemp, DoNotVacate) */ 
13300. 
13301. /* ---------------------------------------------------------- */
13302. 
13303. # Vacate
13304. /* AddGap(GapUsed) */
13305. 
13306. # DO NOT Vacate (recommended)
13307. /* AddGap(GapUsed, DoNotVacate) */ 
13308. 	
13309. 
13310. 		
13311. # 
13312. FileEnd
13313. /* ---------------------------------------------------------- */
13314. 
13315. # your stuff HERE (X)... post zone (file) code.
13316. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
13317. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
13318. 	# (X)
13319. 
13320. SetVariable(FileStepDescription,"Zone finished, reporting.")
13321. # FILE STEP
13322. 
13323. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
13324. 
13325. /* add message and move to a new line. */
13326. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
13327. ")
13328. 
13329. /* display the line. (hopefully.) */
13330. # Zone Footer Set Statistics Window Text
13331. 
13332. SetStatisticsWindowText("----------------------------------------------------------
13333. Zones Processed: 
13334. ----------------------------------------------------------
13335. !ZoneListByLine!
13336. ----------------------------------------------------------
13337. Zone Processing Step:
13338. !ZoneStepByLine!    
13339. ----------------------------------------------------------
13340. Current Zone:
13341. !ZoneFooter!
13342. ----------------------------------------------------------
13343. Volume Statistics:
13344. !VolumeStatisticsDetail!
13345. ----------------------------------------------------------
13346. Zone Detailed Report:
13347. ----------------------------------------------------------
13348. !ZoneStatisticsDetail!
13349. ----------------------------------------------------------
13350. ")
13351. 
13352. 
13353. 
13354. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
13355. 
13356. # BANNER SET
13357. 
13358. # DATE TIME RUN ELP
13359. 
13360. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
13361. /* Xinclude "..\Display\BannerSet.MyDc"X */
13362. /* pause(1) */
13363. 
13364. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
13365. 
13366. Title('!Heading!')
13367. /* pause(1) */
13368. 
13369. /* NOTE: Can't round or truncate to integer precision. */
13370. 
13371. pause(1)
13372. 
13373. # Zone When Finished
13374. 
13375. # BANNER SET
13376. 
13377. # DATE TIME RUN ELP
13378. 
13379. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:18 0:00:06")
13380. /* Xinclude "..\Display\BannerSet.MyDc"X */
13381. /* pause(1) */
13382. 
13383. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
13384. 
13385. Title('!Heading!')
13386. /* pause(1) */
13387. 
13388. /* NOTE: Can't round or truncate to integer precision. */
13389. 
13390. AppendLogfile("!LogFileName!", "!Title!")
13391. 
13392. 
13393. 
13394. # Zone Statistics	
13395. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
13396. 
13397. # Footer:
13398. SetVariable(ZoneFooter, "----------------------------------------------------------
13399. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:18
13400. 
13401. Statistics Report:
13402. ------------------
13403.    Size:  
13404.    ------------------------
13405.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
13406.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
13407.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
13408. 
13409.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
13410.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
13411. 
13412.    Location:
13413.    ------------------------
13414.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
13415.              Files End: !ZoneEndCurrent!
13416.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
13417.       
13418.    Gap Settings:
13419.    ------------------------
13420.          Gap Requested: !ZoneGapSizePer!%
13421.       Volume Rounding: !ZoneVolRoundUpPer!%
13422.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
13423.                  
13424.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
13425.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
13426.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
13427.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
13428.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
13429.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
13430.      
13431.    Free Space after Zone:
13432.    ------------------------
13433.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
13434.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
13435.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
13436. 
13437. Directory and Files Select:
13438. ---------------------------
13439. !ZoneTypeSelectCurrent!               
13440. ---------------------------
13441. ----------------------------------------------------------
13442. ")
13443. 
13444. AppendLogfile("!LogFileName!", ".")
13445. AppendLogfile("!LogFileName!", "!ZoneFooter!")
13446. AppendLogfile("!LogFileName!", ".")
13447. 
13448. # Zone Footer Set Statistics Window Text
13449. 
13450. SetStatisticsWindowText("----------------------------------------------------------
13451. Zones Processed: 
13452. ----------------------------------------------------------
13453. !ZoneListByLine!
13454. ----------------------------------------------------------
13455. Zone Processing Step:
13456. !ZoneStepByLine!    
13457. ----------------------------------------------------------
13458. Current Zone:
13459. !ZoneFooter!
13460. ----------------------------------------------------------
13461. Volume Statistics:
13462. !VolumeStatisticsDetail!
13463. ----------------------------------------------------------
13464. Zone Detailed Report:
13465. ----------------------------------------------------------
13466. !ZoneStatisticsDetail!
13467. ----------------------------------------------------------
13468. ")
13469. 
13470. 
13471. 
13472. /* pause() */
13473. /* pause() */
13474. 
13475. 
13476. 
13477. 
13478. /* ---------------------------------------------------------- */
13479. 
13480. 
13481. /* ---------------------------------------------------------- */
13482. /* Zone People */
13483. /* ---------------------------------------------------------- */
13484. /* Zone People */
13485. SetVariable(ZoneLabel, "!ZoneLabelPeople!")
13486. SetVariable(ZoneDescription, "!ZoneDescriptionPeople!")
13487. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpPeople!")
13488. SetVariable(ZoneGapSize, "!ZoneGapSizePeople!")
13489. SetVariable(ZoneTypeSelect,'# People start.
13490. # NotBlobsArchivesBu start.
13491. (not (
13492. # Blobs start.
13493. (
13494. # BlobsAndExceptions start.
13495. ( not(
13496.   FileName("*.bat")
13497.   or FileName("*.css")
13498.   or FileName("*.dll")
13499.   or FileName("*.exe")
13500.   or FileName("*.htm*")
13501.   or FileName("*.jar")
13502.   or FileName("*.js")
13503.   or FileName("*.script")
13504.   or FileName("*.wsf")
13505.   or (
13506. # Databases start.
13507. (
13508.   FileName("*.crypt*")
13509.   or FileName("*.db*")
13510.   or FileName("*.rdb*")
13511.   or FileName("*.dc*")
13512.   or FileName("*.dict*")
13513.   or FileName("*.?db*")
13514.   or FileName("*.?rdb*")
13515.   or FileName("*.md*")
13516.   or FileName("*.myd")
13517.   or FileName("*.ndf")
13518.   or FileName("*.ns?")
13519.   or FileName("*.pab")
13520.   or FileName("*.pst")
13521.   or FileName("*.sd?*")
13522.   or FileName("*.sq**")
13523.   or FileName("*.tmd")
13524.   or FileName("*.tps")
13525.   or FileName("*.tr*")
13526. )
13527. # Databases end.
13528. 
13529.     # BlobsAndExceptions
13530.     or 
13531. # Data start.
13532. (
13533.   DirectoryName("Data*")
13534.   or DirectoryName("Device*")
13535.   or DirectoryName("Export*")
13536.   or DirectoryName("Import*")
13537.   or DirectoryName("Log*")
13538.   or DirectoryName("*Log")
13539.   or DirectoryName("Maintenance*")
13540.   or DirectoryName("Rec*")
13541.   or DirectoryName("Sales*")
13542.   or DirectoryName("Search*")
13543.   or DirectoryName("User*")
13544. )
13545. # Data end.
13546. 
13547.     # BlobsAndExceptions
13548.   )
13549. ) )
13550. # BlobsAndExceptions end.
13551. 
13552. # Blobs
13553. ) and (
13554.   Size(BlobFileSize,0)
13555.   or (
13556.     FileName("*.arj")
13557.     or FileName("*.bup")
13558.     or FileName("*.bz2")
13559.     or FileName("*.chm")
13560.     or FileName("*.dvr-ms")
13561.     or FileName("*.gz")
13562.     or FileName("*.ifo")
13563.     or FileName("*.lzh")
13564.     or FileName("*.pdf")
13565.     or FileName("*.rpm")
13566.     or FileName("*.wmv")
13567.     or FileName("*.vob")
13568.     or FileName("*.z")
13569.   ) 
13570. )
13571. # Blobs end.
13572. 
13573. # NotBlobsArchivesBu
13574. or 
13575. # Archives start.
13576. (
13577.   DirectoryName("*Archive*")
13578.   or DirectoryName("*History*")
13579.   or DirectoryName("*Old")
13580.   or DirectoryName("* Old *")
13581.   or DirectoryName("Old *")
13582. 
13583.   or FileName("*.7z")
13584.   or FileName("*.cab")
13585.   or FileName("*.iso")
13586.   or FileName("*.msi")
13587.   or FileName("*.old")
13588.   or FileName("*.rar")
13589.   or FileName("*.tar")
13590.   or FileName("*.zip")
13591.   or
13592. # WinSysLow start.
13593. (
13594.   DirectoryName("$*")
13595.   or DirectoryName("0*")
13596.   or DirectoryName("1*")
13597.   or DirectoryName("2*")
13598.   or DirectoryName("3*")
13599.   or DirectoryName("4*")
13600.   or DirectoryName("5*")
13601.   or DirectoryName("6*")
13602.   or DirectoryName("7*")
13603.   or DirectoryName("8*")
13604.   or DirectoryName("9*")
13605. 
13606.   or DirectoryName("dllcache")
13607.   or DirectoryName("Downloaded Installations")
13608.   or DirectoryName("Ehome")
13609.   or DirectoryName("Fonts")
13610.   or DirectoryName("Help")
13611.   or DirectoryName("I386")
13612.   or DirectoryName("ie?updates")
13613.   or DirectoryName("Installer")
13614.   or DirectoryName("Installshield Installation Information")
13615.   or DirectoryName("IME")
13616.   or DirectoryName("*RECYCLE*")
13617.   or DirectoryName("ServicePackFiles")
13618.   or DirectoryName("SoftwareDistribution")
13619.   or DirectoryName("Speech")
13620.   or DirectoryName("Symbols")
13621.   or DirectoryName("System Volume Information")
13622.   or DirectoryName("windows.old")
13623. )
13624. # WinSysLow end.
13625. 
13626.   # Archives
13627. )
13628. # Archives end.
13629. 
13630. # NotBlobsArchivesBu
13631. or
13632. # Backups start.
13633. (
13634.   DirectoryName("*Backup*")
13635.   or DirectoryName("*Bu")
13636.   or DirectoryName("* Bu *")
13637.   or DirectoryName("Bu *")
13638. 
13639.   or FileName("*.bak")
13640.   or FileName("* - Copy*")
13641. )
13642. # Backups end.
13643. 
13644. # NotBlobsArchivesBu
13645. ) )
13646. # NotBlobsArchivesBu end.
13647. 
13648. # People
13649. and (
13650. # People start.
13651. (
13652.   DirectoryName("*Capture*")
13653.   or DirectoryName("*Document*")
13654.   or DirectoryName("*Download*")
13655.   or DirectoryName("*Kids*")
13656.   or DirectoryName("Mail*")
13657.   or DirectoryName("*Mail")
13658.   or DirectoryName("My*")
13659.   or DirectoryName("*Person*")
13660.   or DirectoryName("Private*")
13661.   or DirectoryName("Users")
13662.   
13663.   # Individual People HERE:
13664.   or DirectoryName("Dgh*")
13665. )
13666. # People end.
13667. 
13668. # People
13669. )
13670. # People end.
13671. ')
13672. 
13673. 	# Zone Do Header
13674. 
13675. # Zone When Started
13676. 
13677. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
13678. # Display Set Zone
13679. 
13680. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
13681. SetVariable(FileStepDescription,	"")
13682. 
13683. SetVariable(ZoneStepByLine, 			"Zone started.
13684. ")
13685. 
13686. # BANNER SET
13687. 
13688. # DATE TIME RUN ELP
13689. 
13690. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
13691. /* Xinclude "..\Display\BannerSet.MyDc"X */
13692. /* pause(1) */
13693. 
13694. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
13695. 
13696. Title('!Heading!')
13697. /* pause(1) */
13698. 
13699. /* NOTE: Can't round or truncate to integer precision. */
13700. 
13701. AppendLogfile("!LogFileName!", "!Title!")
13702. 
13703. 
13704. 
13705. pause(1)
13706. 
13707. 
13708. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
13709. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
13710. 
13711. SetVariable(ZoneStepNoCurrent, 0)
13712. 
13713. 
13714. # Zone Do Current Clear
13715. 
13716. SetVariable(ZoneTypeSelectCurrent, 		"")
13717. 
13718. SetVariable(ZoneBeginCurrent, 			0)
13719. SetVariable(ZoneBeginPerCurrent, 		0)
13720. SetVariable(ZoneEndCurrent, 			0)
13721. SetVariable(ZoneEndPerCurrent, 			0)
13722. 
13723. SetVariable(ZoneSizeCurrent,			0)
13724. SetVariable(ZoneSizePerCurrent,			0)
13725. 
13726. SetVariable(ZoneGapRequestedCurrent,	0)
13727. SetVariable(ZoneGapRoundedCurrent, 		0)
13728. SetVariable(ZoneGapAdjustedCurrent, 	0)
13729. SetVariable(ZoneGapAvailableCurrent, 	0)
13730. SetVariable(ZoneGapCurrent,				0)
13731. SetVariable(ZoneGapUsedCurrent, 		0)
13732. 
13733. SetVariable(ZoneGapActualCurrent, 		0)
13734. SetVariable(ZoneGapActualPerCurrent, 	0)
13735. 
13736. SetVariable(ZoneSizeActual, 			0)
13737. SetVariable(ZoneSizeActualCurrent,		0)
13738. 
13739. SetVariable(ZoneEndActual, 				0)
13740. SetVariable(ZoneEndActualCurrent,		0)			
13741. SetVariable(ZoneSizeActualPerCurrent, 	0)
13742.       
13743. SetVariable(ZoneFilesFolders,			0)
13744. SetVariable(ZoneFilesFoldersPer,		0) 
13745. 
13746. SetVariable(ZoneFragments,				0)
13747. SetVariable(ZoneFragmentsPer,			0) 
13748. 		
13749. SetVariable(ZoneEndActualCurrent, 		0)
13750. SetVariable(ZoneEndActualPerCurrent, 	0)
13751. 
13752. # Gap Calculation Methodology:
13753. 	# Requested
13754. 	SetVariable(GapRequested, 			0) 
13755. 	SetVariable(GapRequestedStd, 		0) 
13756. 	SetVariable(GapRequestedMft, 		0) 
13757. 	SetVariable(GapRequestedOs, 		0) 
13758. 	SetVariable(GapRequestedOriginal, 	0) 
13759. 	
13760. 	# Gap Adjustments
13761. 	SetVariable(GapRounded, 			0)
13762. 	# SetVariable(GapAdjusted, 			0)
13763. 	SetVariable(GapAvailable, 			0)
13764. 	SetVariable(GapCurrent, 			0)
13765. 	SetVariable(GapActual, 				0)
13766. 	SetVariable(GapUsed, 				0)
13767. 	
13768. 	# Gap Adjustments
13769. 	SetVariable(GapRoundedLoc, 			0)
13770. 	# SetVariable(GapAdjustedLoc, 		0)
13771. 	SetVariable(GapAvailableLoc, 		0)
13772. 	SetVariable(GapCurrentLoc, 			0)
13773. 	SetVariable(GapActualLoc,			0)
13774. 	SetVariable(GapUsedLoc,				0)
13775. 	
13776. 	# Space usage
13777. 	SetVariable(ZoneFreePerRequested, 	0)
13778. 	SetVariable(ZoneFreePerUsed, 		0)
13779. 
13780. # Gap Size & Rounding
13781. 	SetVariable(ZoneGapSizePer, 		0)
13782. 	SetVariable(ZoneVolRoundUpPer, 		0)
13783. 	
13784. 	# Free Space
13785. 	SetVariable(ZoneFreeUsedPer, 		0)
13786. 	SetVariable(ZoneFreeRequestedPer, 	0)
13787. 
13788. 
13789. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
13790. 
13791. # Footer:
13792. SetVariable(ZoneFooter, "----------------------------------------------------------
13793. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
13794. 
13795. Statistics Report:
13796. ------------------
13797.    Size:  
13798.    ------------------------
13799.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
13800.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
13801.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
13802. 
13803.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
13804.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
13805. 
13806.    Location:
13807.    ------------------------
13808.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
13809.              Files End: !ZoneEndCurrent!
13810.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
13811.       
13812.    Gap Settings:
13813.    ------------------------
13814.          Gap Requested: !ZoneGapSizePer!%
13815.       Volume Rounding: !ZoneVolRoundUpPer!%
13816.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
13817.                  
13818.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
13819.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
13820.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
13821.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
13822.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
13823.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
13824.      
13825.    Free Space after Zone:
13826.    ------------------------
13827.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
13828.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
13829.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
13830. 
13831. Directory and Files Select:
13832. ---------------------------
13833. !ZoneTypeSelectCurrent!               
13834. ---------------------------
13835. ----------------------------------------------------------
13836. ")
13837. 
13838. # BANNER SET
13839. 
13840. # DATE TIME RUN ELP
13841. 
13842. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
13843. /* Xinclude "..\Display\BannerSet.MyDc"X */
13844. /* pause(1) */
13845. 
13846. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
13847. 
13848. Title('!Heading!')
13849. /* pause(1) */
13850. 
13851. /* NOTE: Can't round or truncate to integer precision. */
13852. 
13853. AppendLogfile("!LogFileName!", "!Title!")
13854. 
13855. 
13856. 
13857. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
13858. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
13859. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:19")
13860. 
13861. SetVariable(ZoneListByLine, "!ZoneListByLine!
13862. Zone: !ZoneNoCurrent! 2021-11-09 08:17:19 0:00:07 !ZoneLabel! !ZoneDescription!")
13863. 
13864. 
13865. /* Fixed Zone Position Handling */
13866. /* Literal number: */
13867. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
13868. /* Percentage of disk: */
13869. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
13870. /* Gap */
13871. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
13872. 
13873. /* ---------------------------------------------------------- */
13874. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
13875. # FILE STEP
13876. 
13877. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
13878. 
13879. /* add message and move to a new line. */
13880. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
13881. ")
13882. 
13883. /* display the line. (hopefully.) */
13884. # Zone Footer Set Statistics Window Text
13885. 
13886. SetStatisticsWindowText("----------------------------------------------------------
13887. Zones Processed: 
13888. ----------------------------------------------------------
13889. !ZoneListByLine!
13890. ----------------------------------------------------------
13891. Zone Processing Step:
13892. !ZoneStepByLine!    
13893. ----------------------------------------------------------
13894. Current Zone:
13895. !ZoneFooter!
13896. ----------------------------------------------------------
13897. Volume Statistics:
13898. !VolumeStatisticsDetail!
13899. ----------------------------------------------------------
13900. Zone Detailed Report:
13901. ----------------------------------------------------------
13902. !ZoneStatisticsDetail!
13903. ----------------------------------------------------------
13904. ")
13905. 
13906. 
13907. 
13908. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
13909. 
13910. # BANNER SET
13911. 
13912. # DATE TIME RUN ELP
13913. 
13914. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
13915. /* Xinclude "..\Display\BannerSet.MyDc"X */
13916. /* pause(1) */
13917. 
13918. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
13919. 
13920. Title('!Heading!')
13921. /* pause(1) */
13922. 
13923. /* NOTE: Can't round or truncate to integer precision. */
13924. 
13925. pause(1)
13926. 
13927. # your stuff HERE (X)... pre file select code.
13928. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
13929. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
13930. 	# (X)
13931. 
13932. FileSelect
13933. 
13934. 	# your stuff can't really go here (errors.)
13935. 	# maybe for some reason I don't know of...
13936. 	
13937. 	# Actions next...
13938. 	# People start.
13939. # NotBlobsArchivesBu start.
13940. (not (
13941. # Blobs start.
13942. (
13943. # BlobsAndExceptions start.
13944. ( not(
13945.   FileName("*.bat")
13946.   or FileName("*.css")
13947.   or FileName("*.dll")
13948.   or FileName("*.exe")
13949.   or FileName("*.htm*")
13950.   or FileName("*.jar")
13951.   or FileName("*.js")
13952.   or FileName("*.script")
13953.   or FileName("*.wsf")
13954.   or (
13955. # Databases start.
13956. (
13957.   FileName("*.crypt*")
13958.   or FileName("*.db*")
13959.   or FileName("*.rdb*")
13960.   or FileName("*.dc*")
13961.   or FileName("*.dict*")
13962.   or FileName("*.?db*")
13963.   or FileName("*.?rdb*")
13964.   or FileName("*.md*")
13965.   or FileName("*.myd")
13966.   or FileName("*.ndf")
13967.   or FileName("*.ns?")
13968.   or FileName("*.pab")
13969.   or FileName("*.pst")
13970.   or FileName("*.sd?*")
13971.   or FileName("*.sq**")
13972.   or FileName("*.tmd")
13973.   or FileName("*.tps")
13974.   or FileName("*.tr*")
13975. )
13976. # Databases end.
13977. 
13978.     # BlobsAndExceptions
13979.     or 
13980. # Data start.
13981. (
13982.   DirectoryName("Data*")
13983.   or DirectoryName("Device*")
13984.   or DirectoryName("Export*")
13985.   or DirectoryName("Import*")
13986.   or DirectoryName("Log*")
13987.   or DirectoryName("*Log")
13988.   or DirectoryName("Maintenance*")
13989.   or DirectoryName("Rec*")
13990.   or DirectoryName("Sales*")
13991.   or DirectoryName("Search*")
13992.   or DirectoryName("User*")
13993. )
13994. # Data end.
13995. 
13996.     # BlobsAndExceptions
13997.   )
13998. ) )
13999. # BlobsAndExceptions end.
14000. 
14001. # Blobs
14002. ) and (
14003.   Size(BlobFileSize,0)
14004.   or (
14005.     FileName("*.arj")
14006.     or FileName("*.bup")
14007.     or FileName("*.bz2")
14008.     or FileName("*.chm")
14009.     or FileName("*.dvr-ms")
14010.     or FileName("*.gz")
14011.     or FileName("*.ifo")
14012.     or FileName("*.lzh")
14013.     or FileName("*.pdf")
14014.     or FileName("*.rpm")
14015.     or FileName("*.wmv")
14016.     or FileName("*.vob")
14017.     or FileName("*.z")
14018.   ) 
14019. )
14020. # Blobs end.
14021. 
14022. # NotBlobsArchivesBu
14023. or 
14024. # Archives start.
14025. (
14026.   DirectoryName("*Archive*")
14027.   or DirectoryName("*History*")
14028.   or DirectoryName("*Old")
14029.   or DirectoryName("* Old *")
14030.   or DirectoryName("Old *")
14031. 
14032.   or FileName("*.7z")
14033.   or FileName("*.cab")
14034.   or FileName("*.iso")
14035.   or FileName("*.msi")
14036.   or FileName("*.old")
14037.   or FileName("*.rar")
14038.   or FileName("*.tar")
14039.   or FileName("*.zip")
14040.   or
14041. # WinSysLow start.
14042. (
14043.   DirectoryName("$*")
14044.   or DirectoryName("0*")
14045.   or DirectoryName("1*")
14046.   or DirectoryName("2*")
14047.   or DirectoryName("3*")
14048.   or DirectoryName("4*")
14049.   or DirectoryName("5*")
14050.   or DirectoryName("6*")
14051.   or DirectoryName("7*")
14052.   or DirectoryName("8*")
14053.   or DirectoryName("9*")
14054. 
14055.   or DirectoryName("dllcache")
14056.   or DirectoryName("Downloaded Installations")
14057.   or DirectoryName("Ehome")
14058.   or DirectoryName("Fonts")
14059.   or DirectoryName("Help")
14060.   or DirectoryName("I386")
14061.   or DirectoryName("ie?updates")
14062.   or DirectoryName("Installer")
14063.   or DirectoryName("Installshield Installation Information")
14064.   or DirectoryName("IME")
14065.   or DirectoryName("*RECYCLE*")
14066.   or DirectoryName("ServicePackFiles")
14067.   or DirectoryName("SoftwareDistribution")
14068.   or DirectoryName("Speech")
14069.   or DirectoryName("Symbols")
14070.   or DirectoryName("System Volume Information")
14071.   or DirectoryName("windows.old")
14072. )
14073. # WinSysLow end.
14074. 
14075.   # Archives
14076. )
14077. # Archives end.
14078. 
14079. # NotBlobsArchivesBu
14080. or
14081. # Backups start.
14082. (
14083.   DirectoryName("*Backup*")
14084.   or DirectoryName("*Bu")
14085.   or DirectoryName("* Bu *")
14086.   or DirectoryName("Bu *")
14087. 
14088.   or FileName("*.bak")
14089.   or FileName("* - Copy*")
14090. )
14091. # Backups end.
14092. 
14093. # NotBlobsArchivesBu
14094. ) )
14095. # NotBlobsArchivesBu end.
14096. 
14097. # People
14098. and (
14099. # People start.
14100. (
14101.   DirectoryName("*Capture*")
14102.   or DirectoryName("*Document*")
14103.   or DirectoryName("*Download*")
14104.   or DirectoryName("*Kids*")
14105.   or DirectoryName("Mail*")
14106.   or DirectoryName("*Mail")
14107.   or DirectoryName("My*")
14108.   or DirectoryName("*Person*")
14109.   or DirectoryName("Private*")
14110.   or DirectoryName("Users")
14111.   
14112.   # Individual People HERE:
14113.   or DirectoryName("Dgh*")
14114. )
14115. # People end.
14116. 
14117. # People
14118. )
14119. # People end.
14120. 
14121. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
14122. 
14123. 	# Zone Do Footer
14124. 
14125. /* ---------------------------------------------------------- */
14126. # File Select
14127. 	# Select Statments
14128. # File Actions 
14129. 	# Standard or OS File Actions.
14130. 	# Resume...
14131. 	
14132. 	# your stuff HERE (X)... post zone (file) file actions code.
14133. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
14134. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
14135. 		# (X)
14136. 		
14137. 		/* ??? Set window? */
14138. 	
14139. 	# ADD THE GAP
14140. 		
14141. # Vacate (good for diagnostics)
14142. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
14143. 
14144. # DoNotVacate - DO NOT Vacate (recommended)
14145. 
14146. # Vacate
14147. /* AddGap(GapUsedLoc) */
14148. 
14149. # DO Not Vacate
14150. AddGap(GapUsedLoc, DoNotVacate) 
14151. 	
14152. 	
14153. /* ---------------------------------------------------------- */
14154. # (failed) TEST for boolean logic.
14155. 
14156. /* It should work in the gap calculations for turning options */
14157. /* on and off but it will NOT work here. */
14158. 
14159. /* Boolean setting X or FlagX. */
14160. /* Where X will be on or off: */
14161. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
14162. /*      For ON:  (X  *  FlagAny) */
14163. 
14164. /* 1) Failed, zero gap overrode the previous one. */
14165. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
14166. /* AddGap(GapUsedTemp) */ 
14167. 
14168. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
14169. /* AddGap(GapUsedTemp, DoNotVacate) */ 
14170. 
14171. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
14172. 
14173. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
14174. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
14175. /* AddGap(GapUsedTemp) */ 
14176. 
14177. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
14178. /* AddGap(GapUsedTemp, DoNotVacate) */ 
14179. 
14180. /* ---------------------------------------------------------- */
14181. 
14182. # Vacate
14183. /* AddGap(GapUsed) */
14184. 
14185. # DO NOT Vacate (recommended)
14186. /* AddGap(GapUsed, DoNotVacate) */ 
14187. 	
14188. 
14189. 		
14190. # 
14191. FileEnd
14192. /* ---------------------------------------------------------- */
14193. 
14194. # your stuff HERE (X)... post zone (file) code.
14195. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
14196. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
14197. 	# (X)
14198. 
14199. SetVariable(FileStepDescription,"Zone finished, reporting.")
14200. # FILE STEP
14201. 
14202. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
14203. 
14204. /* add message and move to a new line. */
14205. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
14206. ")
14207. 
14208. /* display the line. (hopefully.) */
14209. # Zone Footer Set Statistics Window Text
14210. 
14211. SetStatisticsWindowText("----------------------------------------------------------
14212. Zones Processed: 
14213. ----------------------------------------------------------
14214. !ZoneListByLine!
14215. ----------------------------------------------------------
14216. Zone Processing Step:
14217. !ZoneStepByLine!    
14218. ----------------------------------------------------------
14219. Current Zone:
14220. !ZoneFooter!
14221. ----------------------------------------------------------
14222. Volume Statistics:
14223. !VolumeStatisticsDetail!
14224. ----------------------------------------------------------
14225. Zone Detailed Report:
14226. ----------------------------------------------------------
14227. !ZoneStatisticsDetail!
14228. ----------------------------------------------------------
14229. ")
14230. 
14231. 
14232. 
14233. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
14234. 
14235. # BANNER SET
14236. 
14237. # DATE TIME RUN ELP
14238. 
14239. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14240. /* Xinclude "..\Display\BannerSet.MyDc"X */
14241. /* pause(1) */
14242. 
14243. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14244. 
14245. Title('!Heading!')
14246. /* pause(1) */
14247. 
14248. /* NOTE: Can't round or truncate to integer precision. */
14249. 
14250. pause(1)
14251. 
14252. # Zone When Finished
14253. 
14254. # BANNER SET
14255. 
14256. # DATE TIME RUN ELP
14257. 
14258. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14259. /* Xinclude "..\Display\BannerSet.MyDc"X */
14260. /* pause(1) */
14261. 
14262. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14263. 
14264. Title('!Heading!')
14265. /* pause(1) */
14266. 
14267. /* NOTE: Can't round or truncate to integer precision. */
14268. 
14269. AppendLogfile("!LogFileName!", "!Title!")
14270. 
14271. 
14272. 
14273. # Zone Statistics	
14274. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
14275. 
14276. # Footer:
14277. SetVariable(ZoneFooter, "----------------------------------------------------------
14278. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
14279. 
14280. Statistics Report:
14281. ------------------
14282.    Size:  
14283.    ------------------------
14284.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
14285.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
14286.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
14287. 
14288.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
14289.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
14290. 
14291.    Location:
14292.    ------------------------
14293.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
14294.              Files End: !ZoneEndCurrent!
14295.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
14296.       
14297.    Gap Settings:
14298.    ------------------------
14299.          Gap Requested: !ZoneGapSizePer!%
14300.       Volume Rounding: !ZoneVolRoundUpPer!%
14301.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
14302.                  
14303.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
14304.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
14305.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
14306.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
14307.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
14308.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
14309.      
14310.    Free Space after Zone:
14311.    ------------------------
14312.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
14313.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
14314.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
14315. 
14316. Directory and Files Select:
14317. ---------------------------
14318. !ZoneTypeSelectCurrent!               
14319. ---------------------------
14320. ----------------------------------------------------------
14321. ")
14322. 
14323. AppendLogfile("!LogFileName!", ".")
14324. AppendLogfile("!LogFileName!", "!ZoneFooter!")
14325. AppendLogfile("!LogFileName!", ".")
14326. 
14327. # Zone Footer Set Statistics Window Text
14328. 
14329. SetStatisticsWindowText("----------------------------------------------------------
14330. Zones Processed: 
14331. ----------------------------------------------------------
14332. !ZoneListByLine!
14333. ----------------------------------------------------------
14334. Zone Processing Step:
14335. !ZoneStepByLine!    
14336. ----------------------------------------------------------
14337. Current Zone:
14338. !ZoneFooter!
14339. ----------------------------------------------------------
14340. Volume Statistics:
14341. !VolumeStatisticsDetail!
14342. ----------------------------------------------------------
14343. Zone Detailed Report:
14344. ----------------------------------------------------------
14345. !ZoneStatisticsDetail!
14346. ----------------------------------------------------------
14347. ")
14348. 
14349. 
14350. 
14351. /* pause() */
14352. /* pause() */
14353. 
14354. 
14355. 
14356. 
14357. /* ---------------------------------------------------------- */
14358. 
14359. 
14360. /* ---------------------------------------------------------- */
14361. // "4" & "5" now 8 & 9
14362. /* XXXXXXXXXXXXXXXXXXXXXXXXX */
14363. /* Process MFT & Dir's HERE. */
14364. 	SetVariable(FileStepDescription,"Calculating Gap for MFT and DIR.")
14365. # BANNER SET
14366. 
14367. # DATE TIME RUN ELP
14368. 
14369. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14370. /* Xinclude "..\Display\BannerSet.MyDc"X */
14371. /* pause(1) */
14372. 
14373. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14374. 
14375. Title('!Heading!')
14376. /* pause(1) */
14377. 
14378. /* NOTE: Can't round or truncate to integer precision. */
14379. 
14380. AppendLogfile("!LogFileName!", "!Title!")
14381. 
14382. 
14383. 
14384. 
14385. AppendLogfile("!LogFileName!", "MftLocation: !MftLocation! DoNotVacate 2021-11-09 08:17:19")
14386. 
14387. SetVariable(MftGapSlack, MftLocation - VolumeUsedTotal)
14388. AppendLogfile("!LogFileName!", "MftGapSlack: !MftGapSlack!")
14389. 
14390. SetVariable(MftGapSlackPerUsed, MftGapSlack / VolumeFreeAdj)
14391. AppendLogfile("!LogFileName!", "MftGapSlackPerUsed: !MftGapSlackPerUsed!")
14392. 
14393. AppendLogfile("!LogFileName!", "VolumeUsed before: !VolumeUsedTotal!")
14394. SetVariable(VolumeUsedTotal, MftLocation)
14395. AppendLogfile("!LogFileName!", "VolumeUsed at location: !VolumeUsedTotal!")
14396. 
14397. SetVariable(VolumeFreePerUsed, VolumeFreePerUsed + (MftGapSlack / VolumeFree))
14398. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!")
14399. 
14400. /* ---------------------------------------------------------- */
14401. #  MFT
14402. /* Mft Method: MakeGap(MftLocation, DoNotVacate) */ 
14403. 
14404. /* ---------------------------------------------------------- */
14405. /* Mft Method: MakeGap(MftLocation, DoNotVacate) */ 
14406.   
14407. SetVariable(ZoneLabel,				"MFT") // "4" 
14408. SetVariable(ZoneDescription, 		"MFT - Master File Table")
14409. SetVariable(ZoneCurrentAjust, 		1)
14410. /* and some other special NTFS files. */
14411. SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpMft!")
14412. SetVariable(ZoneGapSize, 			"!ZoneGapSizeMft!")
14413. SetVariable(ZoneTypeSelect,'# MFT start.
14414. SelectNtfsSystemFiles(yes)
14415. # MFT end.')
14416. 
14417. 	# Zone Do Header
14418. 
14419. # Zone When Started
14420. 
14421. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
14422. # Display Set Zone
14423. 
14424. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
14425. SetVariable(FileStepDescription,	"")
14426. 
14427. SetVariable(ZoneStepByLine, 			"Zone started.
14428. ")
14429. 
14430. # BANNER SET
14431. 
14432. # DATE TIME RUN ELP
14433. 
14434. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14435. /* Xinclude "..\Display\BannerSet.MyDc"X */
14436. /* pause(1) */
14437. 
14438. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14439. 
14440. Title('!Heading!')
14441. /* pause(1) */
14442. 
14443. /* NOTE: Can't round or truncate to integer precision. */
14444. 
14445. AppendLogfile("!LogFileName!", "!Title!")
14446. 
14447. 
14448. 
14449. pause(1)
14450. 
14451. 
14452. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
14453. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
14454. 
14455. SetVariable(ZoneStepNoCurrent, 0)
14456. 
14457. 
14458. # Zone Do Current Clear
14459. 
14460. SetVariable(ZoneTypeSelectCurrent, 		"")
14461. 
14462. SetVariable(ZoneBeginCurrent, 			0)
14463. SetVariable(ZoneBeginPerCurrent, 		0)
14464. SetVariable(ZoneEndCurrent, 			0)
14465. SetVariable(ZoneEndPerCurrent, 			0)
14466. 
14467. SetVariable(ZoneSizeCurrent,			0)
14468. SetVariable(ZoneSizePerCurrent,			0)
14469. 
14470. SetVariable(ZoneGapRequestedCurrent,	0)
14471. SetVariable(ZoneGapRoundedCurrent, 		0)
14472. SetVariable(ZoneGapAdjustedCurrent, 	0)
14473. SetVariable(ZoneGapAvailableCurrent, 	0)
14474. SetVariable(ZoneGapCurrent,				0)
14475. SetVariable(ZoneGapUsedCurrent, 		0)
14476. 
14477. SetVariable(ZoneGapActualCurrent, 		0)
14478. SetVariable(ZoneGapActualPerCurrent, 	0)
14479. 
14480. SetVariable(ZoneSizeActual, 			0)
14481. SetVariable(ZoneSizeActualCurrent,		0)
14482. 
14483. SetVariable(ZoneEndActual, 				0)
14484. SetVariable(ZoneEndActualCurrent,		0)			
14485. SetVariable(ZoneSizeActualPerCurrent, 	0)
14486.       
14487. SetVariable(ZoneFilesFolders,			0)
14488. SetVariable(ZoneFilesFoldersPer,		0) 
14489. 
14490. SetVariable(ZoneFragments,				0)
14491. SetVariable(ZoneFragmentsPer,			0) 
14492. 		
14493. SetVariable(ZoneEndActualCurrent, 		0)
14494. SetVariable(ZoneEndActualPerCurrent, 	0)
14495. 
14496. # Gap Calculation Methodology:
14497. 	# Requested
14498. 	SetVariable(GapRequested, 			0) 
14499. 	SetVariable(GapRequestedStd, 		0) 
14500. 	SetVariable(GapRequestedMft, 		0) 
14501. 	SetVariable(GapRequestedOs, 		0) 
14502. 	SetVariable(GapRequestedOriginal, 	0) 
14503. 	
14504. 	# Gap Adjustments
14505. 	SetVariable(GapRounded, 			0)
14506. 	# SetVariable(GapAdjusted, 			0)
14507. 	SetVariable(GapAvailable, 			0)
14508. 	SetVariable(GapCurrent, 			0)
14509. 	SetVariable(GapActual, 				0)
14510. 	SetVariable(GapUsed, 				0)
14511. 	
14512. 	# Gap Adjustments
14513. 	SetVariable(GapRoundedLoc, 			0)
14514. 	# SetVariable(GapAdjustedLoc, 		0)
14515. 	SetVariable(GapAvailableLoc, 		0)
14516. 	SetVariable(GapCurrentLoc, 			0)
14517. 	SetVariable(GapActualLoc,			0)
14518. 	SetVariable(GapUsedLoc,				0)
14519. 	
14520. 	# Space usage
14521. 	SetVariable(ZoneFreePerRequested, 	0)
14522. 	SetVariable(ZoneFreePerUsed, 		0)
14523. 
14524. # Gap Size & Rounding
14525. 	SetVariable(ZoneGapSizePer, 		0)
14526. 	SetVariable(ZoneVolRoundUpPer, 		0)
14527. 	
14528. 	# Free Space
14529. 	SetVariable(ZoneFreeUsedPer, 		0)
14530. 	SetVariable(ZoneFreeRequestedPer, 	0)
14531. 
14532. 
14533. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
14534. 
14535. # Footer:
14536. SetVariable(ZoneFooter, "----------------------------------------------------------
14537. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
14538. 
14539. Statistics Report:
14540. ------------------
14541.    Size:  
14542.    ------------------------
14543.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
14544.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
14545.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
14546. 
14547.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
14548.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
14549. 
14550.    Location:
14551.    ------------------------
14552.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
14553.              Files End: !ZoneEndCurrent!
14554.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
14555.       
14556.    Gap Settings:
14557.    ------------------------
14558.          Gap Requested: !ZoneGapSizePer!%
14559.       Volume Rounding: !ZoneVolRoundUpPer!%
14560.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
14561.                  
14562.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
14563.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
14564.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
14565.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
14566.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
14567.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
14568.      
14569.    Free Space after Zone:
14570.    ------------------------
14571.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
14572.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
14573.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
14574. 
14575. Directory and Files Select:
14576. ---------------------------
14577. !ZoneTypeSelectCurrent!               
14578. ---------------------------
14579. ----------------------------------------------------------
14580. ")
14581. 
14582. # BANNER SET
14583. 
14584. # DATE TIME RUN ELP
14585. 
14586. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14587. /* Xinclude "..\Display\BannerSet.MyDc"X */
14588. /* pause(1) */
14589. 
14590. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14591. 
14592. Title('!Heading!')
14593. /* pause(1) */
14594. 
14595. /* NOTE: Can't round or truncate to integer precision. */
14596. 
14597. AppendLogfile("!LogFileName!", "!Title!")
14598. 
14599. 
14600. 
14601. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
14602. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
14603. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:19")
14604. 
14605. SetVariable(ZoneListByLine, "!ZoneListByLine!
14606. Zone: !ZoneNoCurrent! 2021-11-09 08:17:19 0:00:07 !ZoneLabel! !ZoneDescription!")
14607. 
14608. 
14609. /* Fixed Zone Position Handling */
14610. /* Literal number: */
14611. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
14612. /* Percentage of disk: */
14613. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
14614. /* Gap */
14615. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
14616. 
14617. /* ---------------------------------------------------------- */
14618. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
14619. # FILE STEP
14620. 
14621. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
14622. 
14623. /* add message and move to a new line. */
14624. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
14625. ")
14626. 
14627. /* display the line. (hopefully.) */
14628. # Zone Footer Set Statistics Window Text
14629. 
14630. SetStatisticsWindowText("----------------------------------------------------------
14631. Zones Processed: 
14632. ----------------------------------------------------------
14633. !ZoneListByLine!
14634. ----------------------------------------------------------
14635. Zone Processing Step:
14636. !ZoneStepByLine!    
14637. ----------------------------------------------------------
14638. Current Zone:
14639. !ZoneFooter!
14640. ----------------------------------------------------------
14641. Volume Statistics:
14642. !VolumeStatisticsDetail!
14643. ----------------------------------------------------------
14644. Zone Detailed Report:
14645. ----------------------------------------------------------
14646. !ZoneStatisticsDetail!
14647. ----------------------------------------------------------
14648. ")
14649. 
14650. 
14651. 
14652. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
14653. 
14654. # BANNER SET
14655. 
14656. # DATE TIME RUN ELP
14657. 
14658. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14659. /* Xinclude "..\Display\BannerSet.MyDc"X */
14660. /* pause(1) */
14661. 
14662. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14663. 
14664. Title('!Heading!')
14665. /* pause(1) */
14666. 
14667. /* NOTE: Can't round or truncate to integer precision. */
14668. 
14669. pause(1)
14670. 
14671. # your stuff HERE (X)... pre file select code.
14672. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
14673. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
14674. 	# (X)
14675. 
14676. FileSelect
14677. 
14678. 	# your stuff can't really go here (errors.)
14679. 	# maybe for some reason I don't know of...
14680. 	
14681. 	# Actions next...
14682. 	# MFT start.
14683. SelectNtfsSystemFiles(yes)
14684. # MFT end.
14685. 	FileActions
14686. 	  		/* ---------------------------------------------------------- */
14687. 	# Gap
14688. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
14689. 		# FILE STEP
14690. 
14691. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
14692. 
14693. /* add message and move to a new line. */
14694. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
14695. ")
14696. 
14697. /* display the line. (hopefully.) */
14698. # Zone Footer Set Statistics Window Text
14699. 
14700. SetStatisticsWindowText("----------------------------------------------------------
14701. Zones Processed: 
14702. ----------------------------------------------------------
14703. !ZoneListByLine!
14704. ----------------------------------------------------------
14705. Zone Processing Step:
14706. !ZoneStepByLine!    
14707. ----------------------------------------------------------
14708. Current Zone:
14709. !ZoneFooter!
14710. ----------------------------------------------------------
14711. Volume Statistics:
14712. !VolumeStatisticsDetail!
14713. ----------------------------------------------------------
14714. Zone Detailed Report:
14715. ----------------------------------------------------------
14716. !ZoneStatisticsDetail!
14717. ----------------------------------------------------------
14718. ")
14719. 
14720. 
14721. 
14722. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
14723. 
14724. # BANNER SET
14725. 
14726. # DATE TIME RUN ELP
14727. 
14728. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
14729. /* Xinclude "..\Display\BannerSet.MyDc"X */
14730. /* pause(1) */
14731. 
14732. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
14733. 
14734. Title('!Heading!')
14735. /* pause(1) */
14736. 
14737. /* NOTE: Can't round or truncate to integer precision. */
14738. 
14739. pause(1)
14740. 	
14741. 	# ACTUAL GAP
14742. 		/* AddGap Variant. */
14743. 	  	# Zone Do Gap
14744. # Gap Calculation Methods:
14745. 
14746. /* 1) Anything you need to add first. */
14747. /* empty */
14748. 
14749. /* ---------------------------------------------------------- */
14750. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
14751. 	# GapRequestedStd.
14752. 
14753. 		/* ---------------------------------------------------------- */
14754. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
14755. 
14756. 		# Gap Calculation Methods:
14757. 
14758. /* AddGap Variants */
14759. 
14760. 	/* Standard */
14761. 		# Gap Calculation Methods:
14762. 	/* AddGap Variants */
14763. 	/* Standard */
14764. 
14765. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
14766. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
14767. 
14768. 	SetVariable(GapRequested, GapRequestedStd)
14769. 	
14770. 
14771. 	/* MFT Low High Method */
14772. 		# Gap Calculation Methods:
14773. 	/* AddGap Variants */
14774. 	/* MFT Low High Method */
14775. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
14776. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
14777. 	SetVariable(GapRequested, GapRequestedMft)
14778. 	
14779. 
14780. 	/* OS Volume Type Method */
14781. 		# Gap Calculation Methods:
14782. 	/* AddGap Variants */
14783. 	/* OS Volume Type Method */
14784. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
14785. 	SetVariable(GapRequested, GapRequestedOs)
14786. 
14787. 
14788. 
14789. /* MakeGap Variants */
14790. 
14791. 	/* Original Os 1-3 + MFT 2 */
14792. 		# Gap Calculation Methods:
14793. 	/* MakeGap Variants */
14794. 	/* Original Os 1-3 + MFT 2 */
14795. 	/* plus MFT gap placed inline at the dividing zone. */
14796. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
14797. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
14798. 	SetVariable(GapRequested, GapRequestedOrig)
14799. 	
14800. 	
14801. /* Note: You could comment out the ones not in use */
14802. /* However having the data in the log is useful. */
14803. /* Therefore the following line is otherwise needed. */
14804. 
14805. /* Standard used */
14806. 
14807. SetVariable(GapRequested, GapRequestedStd)
14808. 
14809. # Gap Calculation Methods:
14810. 
14811. /* AddGap Variants */
14812. 	/* Standard */
14813. 	/* MFT Low High Method */
14814. 	/* OS Volume Type Method */
14815. 
14816. /* MakeGap Variants */
14817. 	/* Original Os 1-3 + MFT 2 */
14818. 
14819. /* Note: You could comment out the ones not in use */
14820. /* However having the data in the log is useful. */
14821. /* Therefore the following line is otherwise needed. */
14822. 
14823. /* Standard is used currently */
14824. 
14825. 
14826. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
14827. 
14828. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
14829. 
14830. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
14831. 
14832. /* ---------------------------------------------------------- */
14833. /* 3) SMALL ZONE ADJUSTMENT. */
14834. /* Gab cant be larger than half the Zone Size. */
14835. 
14836. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
14837. 	
14838. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
14839. 
14840. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
14841. 
14842. /* ---------------------------------------------------------- */
14843. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
14844. # Gap Adjustments.
14845. 
14846. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
14847. 	
14848. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
14849. 
14850. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
14851. 
14852. /* ---------------------------------------------------------- */
14853. # BYPASS THIS.
14854. 	/* This is definitely wrong. */
14855. 	/* The question is can we steal gap from the next zone */
14856. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
14857. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
14858. 		# Zone Overflow.
14859. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
14860. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
14861. 
14862. /* ---------------------------------------------------------- */
14863. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
14864. # Remaining free space available.
14865. 
14866. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
14867. 	
14868. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
14869. 
14870. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
14871. 
14872. /* ---------------------------------------------------------- */
14873. # CURRENT gap to use.
14874. 
14875. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
14876. 
14877. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
14878. 
14879. /* ---------------------------------------------------------- */
14880. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
14881. # Debugging.
14882. 
14883. 	SetVariable(GapUsed, GapCurrent) // for debugging
14884. 
14885. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
14886. 
14887. 		# Your code HERE
14888. 
14889. /* ---------------------------------------------------------- */
14890. /* 7) YOUR CODE. */
14891. # YOUR CODE HERE:
14892. 	# INPUT: GapCurrent or GapCurrentLoc
14893. 	# OUTPUT: GapUsed...
14894. 
14895. /* ---------------------------------------------------------- */
14896. # Gap Size.
14897. # Actual Size of Gap.
14898. 
14899. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
14900. 
14901. /* ---------------------------------------------------------- */
14902. /* xxxxxxxxxxxxxxxxxxxxxx */
14903. # ADD THE GAP
14904. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
14905. /* xxxxxxxxxxxxxxxxxxxxxx */
14906. 
14907. 	
14908. 	# Zone Statistics	
14909. 	# Zone / Volume Statistics and Display
14910. 		
14911. 	# Accumulate Totals
14912.   	# Volume totals
14913. 
14914. /* Current total space used (by Zones and Gaps) */
14915. 
14916. SetVariable(VolumeZoneUsed, GapUsed)
14917. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
14918. /* Percentage */
14919. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
14920. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
14921. 
14922. /* Current total of free space requested */
14923. 
14924. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
14925. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
14926. /* Percent. */
14927. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
14928. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
14929. 
14930. /* Current total of free space used */
14931. 
14932. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
14933. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
14934. /* Percent */
14935. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
14936. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
14937. 
14938. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
14939. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
14940. /* Xinclude "..\DebugDisplayPause.MyDc"X */
14941. 
14942. 
14943. 	# Current Values
14944. 	# Cluster, Sector, Block adjust for display.
14945. 	# Bytes per cluster is volume specific.
14946. 
14947. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
14948. 
14949. # Current Zone values.
14950. 	# Begin, end and size.
14951. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
14952. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
14953. 
14954. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
14955. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
14956. 
14957. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
14958. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
14959. 
14960. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
14961. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
14962. 
14963. 	SetVariable(ZoneFragments,				"!ZONE210N!")
14964. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
14965. 		
14966. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
14967. /* identical code to here: (separation not needed. TEST.) */	
14968. 
14969. # Current Gap, Actual and Free Values
14970. 	# Gap
14971. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
14972. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
14973. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
14974. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
14975. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
14976. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
14977. 	
14978. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
14979. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
14980. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
14981. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
14982. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
14983. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
14984. 	
14985. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
14986. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
14987. 	
14988. 	# Actual Size and End
14989. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
14990. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
14991. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
14992. 	
14993. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
14994. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
14995. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
14996. 
14997. # Gap Size & Rounding
14998. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
14999. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
15000. 	
15001. 	# Free Space
15002. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
15003. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
15004. 
15005. 	# Footer:
15006. SetVariable(ZoneFooter, "----------------------------------------------------------
15007. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
15008. 
15009. Statistics Report:
15010. ------------------
15011.    Size:  
15012.    ------------------------
15013.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
15014.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
15015.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
15016. 
15017.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
15018.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
15019. 
15020.    Location:
15021.    ------------------------
15022.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
15023.              Files End: !ZoneEndCurrent!
15024.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
15025.       
15026.    Gap Settings:
15027.    ------------------------
15028.          Gap Requested: !ZoneGapSizePer!%
15029.       Volume Rounding: !ZoneVolRoundUpPer!%
15030.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
15031.                  
15032.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
15033.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
15034.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
15035.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
15036.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
15037.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
15038.      
15039.    Free Space after Zone:
15040.    ------------------------
15041.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
15042.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
15043.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
15044. 
15045. Directory and Files Select:
15046. ---------------------------
15047. !ZoneTypeSelectCurrent!               
15048. ---------------------------
15049. ----------------------------------------------------------
15050. ")
15051. 	# Zone Footer Set Statistics Window Text
15052. 
15053. SetStatisticsWindowText("----------------------------------------------------------
15054. Zones Processed: 
15055. ----------------------------------------------------------
15056. !ZoneListByLine!
15057. ----------------------------------------------------------
15058. Zone Processing Step:
15059. !ZoneStepByLine!    
15060. ----------------------------------------------------------
15061. Current Zone:
15062. !ZoneFooter!
15063. ----------------------------------------------------------
15064. Volume Statistics:
15065. !VolumeStatisticsDetail!
15066. ----------------------------------------------------------
15067. Zone Detailed Report:
15068. ----------------------------------------------------------
15069. !ZoneStatisticsDetail!
15070. ----------------------------------------------------------
15071. ")
15072. 
15073. 
15074. 	
15075.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
15076. 
15077. 	# Add Zone to list of zones for display.
15078. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
15079. 	# ??? Free Stats?
15080. 	# Footer:
15081. SetVariable(ZoneFooter, "----------------------------------------------------------
15082. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
15083. 
15084. Statistics Report:
15085. ------------------
15086.    Size:  
15087.    ------------------------
15088.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
15089.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
15090.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
15091. 
15092.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
15093.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
15094. 
15095.    Location:
15096.    ------------------------
15097.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
15098.              Files End: !ZoneEndCurrent!
15099.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
15100.       
15101.    Gap Settings:
15102.    ------------------------
15103.          Gap Requested: !ZoneGapSizePer!%
15104.       Volume Rounding: !ZoneVolRoundUpPer!%
15105.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
15106.                  
15107.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
15108.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
15109.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
15110.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
15111.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
15112.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
15113.      
15114.    Free Space after Zone:
15115.    ------------------------
15116.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
15117.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
15118.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
15119. 
15120. Directory and Files Select:
15121. ---------------------------
15122. !ZoneTypeSelectCurrent!               
15123. ---------------------------
15124. ----------------------------------------------------------
15125. ")
15126. 
15127. 	# Add Zone Details to Report.	
15128. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
15129. !ZoneFooter!")
15130. 
15131. 
15132. 	
15133. 		SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
15134. 		# FILE STEP
15135. 
15136. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
15137. 
15138. /* add message and move to a new line. */
15139. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
15140. ")
15141. 
15142. /* display the line. (hopefully.) */
15143. # Zone Footer Set Statistics Window Text
15144. 
15145. SetStatisticsWindowText("----------------------------------------------------------
15146. Zones Processed: 
15147. ----------------------------------------------------------
15148. !ZoneListByLine!
15149. ----------------------------------------------------------
15150. Zone Processing Step:
15151. !ZoneStepByLine!    
15152. ----------------------------------------------------------
15153. Current Zone:
15154. !ZoneFooter!
15155. ----------------------------------------------------------
15156. Volume Statistics:
15157. !VolumeStatisticsDetail!
15158. ----------------------------------------------------------
15159. Zone Detailed Report:
15160. ----------------------------------------------------------
15161. !ZoneStatisticsDetail!
15162. ----------------------------------------------------------
15163. ")
15164. 
15165. 
15166. 
15167. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
15168. 
15169. # BANNER SET
15170. 
15171. # DATE TIME RUN ELP
15172. 
15173. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15174. /* Xinclude "..\Display\BannerSet.MyDc"X */
15175. /* pause(1) */
15176. 
15177. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15178. 
15179. Title('!Heading!')
15180. /* pause(1) */
15181. 
15182. /* NOTE: Can't round or truncate to integer precision. */
15183. 
15184. pause(1)
15185. 	
15186. 		SetVariable(MftZone, ZoneCurrent) 
15187. 
15188. 		# File Action - MFT.
15189. PlaceNtfsSystemFiles(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes), MftSize * 0.1)
15190. 	
15191. 
15192.   		SetVariable(MftSize,ZoneSize) 
15193. 
15194. 		SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
15195. 		# FILE STEP
15196. 
15197. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
15198. 
15199. /* add message and move to a new line. */
15200. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
15201. ")
15202. 
15203. /* display the line. (hopefully.) */
15204. # Zone Footer Set Statistics Window Text
15205. 
15206. SetStatisticsWindowText("----------------------------------------------------------
15207. Zones Processed: 
15208. ----------------------------------------------------------
15209. !ZoneListByLine!
15210. ----------------------------------------------------------
15211. Zone Processing Step:
15212. !ZoneStepByLine!    
15213. ----------------------------------------------------------
15214. Current Zone:
15215. !ZoneFooter!
15216. ----------------------------------------------------------
15217. Volume Statistics:
15218. !VolumeStatisticsDetail!
15219. ----------------------------------------------------------
15220. Zone Detailed Report:
15221. ----------------------------------------------------------
15222. !ZoneStatisticsDetail!
15223. ----------------------------------------------------------
15224. ")
15225. 
15226. 
15227. 
15228. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
15229. 
15230. # BANNER SET
15231. 
15232. # DATE TIME RUN ELP
15233. 
15234. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15235. /* Xinclude "..\Display\BannerSet.MyDc"X */
15236. /* pause(1) */
15237. 
15238. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15239. 
15240. Title('!Heading!')
15241. /* pause(1) */
15242. 
15243. /* NOTE: Can't round or truncate to integer precision. */
15244. 
15245. pause(1)
15246.   	# Zone Do Footer
15247. 
15248. /* ---------------------------------------------------------- */
15249. # File Select
15250. 	# Select Statments
15251. # File Actions 
15252. 	# Standard or OS File Actions.
15253. 	# Resume...
15254. 	
15255. 	# your stuff HERE (X)... post zone (file) file actions code.
15256. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
15257. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
15258. 		# (X)
15259. 		
15260. 		/* ??? Set window? */
15261. 	
15262. 	# ADD THE GAP
15263. 		
15264. # Vacate (good for diagnostics)
15265. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
15266. 
15267. # DoNotVacate - DO NOT Vacate (recommended)
15268. 
15269. # Vacate
15270. /* AddGap(GapUsedLoc) */
15271. 
15272. # DO Not Vacate
15273. AddGap(GapUsedLoc, DoNotVacate) 
15274. 	
15275. 	
15276. /* ---------------------------------------------------------- */
15277. # (failed) TEST for boolean logic.
15278. 
15279. /* It should work in the gap calculations for turning options */
15280. /* on and off but it will NOT work here. */
15281. 
15282. /* Boolean setting X or FlagX. */
15283. /* Where X will be on or off: */
15284. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
15285. /*      For ON:  (X  *  FlagAny) */
15286. 
15287. /* 1) Failed, zero gap overrode the previous one. */
15288. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
15289. /* AddGap(GapUsedTemp) */ 
15290. 
15291. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
15292. /* AddGap(GapUsedTemp, DoNotVacate) */ 
15293. 
15294. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
15295. 
15296. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
15297. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
15298. /* AddGap(GapUsedTemp) */ 
15299. 
15300. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
15301. /* AddGap(GapUsedTemp, DoNotVacate) */ 
15302. 
15303. /* ---------------------------------------------------------- */
15304. 
15305. # Vacate
15306. /* AddGap(GapUsed) */
15307. 
15308. # DO NOT Vacate (recommended)
15309. /* AddGap(GapUsed, DoNotVacate) */ 
15310. 	
15311. 
15312. 		
15313. # 
15314. FileEnd
15315. /* ---------------------------------------------------------- */
15316. 
15317. # your stuff HERE (X)... post zone (file) code.
15318. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
15319. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
15320. 	# (X)
15321. 
15322. SetVariable(FileStepDescription,"Zone finished, reporting.")
15323. # FILE STEP
15324. 
15325. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
15326. 
15327. /* add message and move to a new line. */
15328. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
15329. ")
15330. 
15331. /* display the line. (hopefully.) */
15332. # Zone Footer Set Statistics Window Text
15333. 
15334. SetStatisticsWindowText("----------------------------------------------------------
15335. Zones Processed: 
15336. ----------------------------------------------------------
15337. !ZoneListByLine!
15338. ----------------------------------------------------------
15339. Zone Processing Step:
15340. !ZoneStepByLine!    
15341. ----------------------------------------------------------
15342. Current Zone:
15343. !ZoneFooter!
15344. ----------------------------------------------------------
15345. Volume Statistics:
15346. !VolumeStatisticsDetail!
15347. ----------------------------------------------------------
15348. Zone Detailed Report:
15349. ----------------------------------------------------------
15350. !ZoneStatisticsDetail!
15351. ----------------------------------------------------------
15352. ")
15353. 
15354. 
15355. 
15356. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
15357. 
15358. # BANNER SET
15359. 
15360. # DATE TIME RUN ELP
15361. 
15362. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15363. /* Xinclude "..\Display\BannerSet.MyDc"X */
15364. /* pause(1) */
15365. 
15366. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15367. 
15368. Title('!Heading!')
15369. /* pause(1) */
15370. 
15371. /* NOTE: Can't round or truncate to integer precision. */
15372. 
15373. pause(1)
15374. 
15375. # Zone When Finished
15376. 
15377. # BANNER SET
15378. 
15379. # DATE TIME RUN ELP
15380. 
15381. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15382. /* Xinclude "..\Display\BannerSet.MyDc"X */
15383. /* pause(1) */
15384. 
15385. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15386. 
15387. Title('!Heading!')
15388. /* pause(1) */
15389. 
15390. /* NOTE: Can't round or truncate to integer precision. */
15391. 
15392. AppendLogfile("!LogFileName!", "!Title!")
15393. 
15394. 
15395. 
15396. # Zone Statistics	
15397. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
15398. 
15399. # Footer:
15400. SetVariable(ZoneFooter, "----------------------------------------------------------
15401. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
15402. 
15403. Statistics Report:
15404. ------------------
15405.    Size:  
15406.    ------------------------
15407.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
15408.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
15409.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
15410. 
15411.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
15412.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
15413. 
15414.    Location:
15415.    ------------------------
15416.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
15417.              Files End: !ZoneEndCurrent!
15418.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
15419.       
15420.    Gap Settings:
15421.    ------------------------
15422.          Gap Requested: !ZoneGapSizePer!%
15423.       Volume Rounding: !ZoneVolRoundUpPer!%
15424.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
15425.                  
15426.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
15427.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
15428.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
15429.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
15430.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
15431.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
15432.      
15433.    Free Space after Zone:
15434.    ------------------------
15435.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
15436.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
15437.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
15438. 
15439. Directory and Files Select:
15440. ---------------------------
15441. !ZoneTypeSelectCurrent!               
15442. ---------------------------
15443. ----------------------------------------------------------
15444. ")
15445. 
15446. AppendLogfile("!LogFileName!", ".")
15447. AppendLogfile("!LogFileName!", "!ZoneFooter!")
15448. AppendLogfile("!LogFileName!", ".")
15449. 
15450. # Zone Footer Set Statistics Window Text
15451. 
15452. SetStatisticsWindowText("----------------------------------------------------------
15453. Zones Processed: 
15454. ----------------------------------------------------------
15455. !ZoneListByLine!
15456. ----------------------------------------------------------
15457. Zone Processing Step:
15458. !ZoneStepByLine!    
15459. ----------------------------------------------------------
15460. Current Zone:
15461. !ZoneFooter!
15462. ----------------------------------------------------------
15463. Volume Statistics:
15464. !VolumeStatisticsDetail!
15465. ----------------------------------------------------------
15466. Zone Detailed Report:
15467. ----------------------------------------------------------
15468. !ZoneStatisticsDetail!
15469. ----------------------------------------------------------
15470. ")
15471. 
15472. 
15473. 
15474. /* pause() */
15475. /* pause() */
15476. 
15477. 
15478. 
15479. /* ---------------------------------------------------------- */
15480. 
15481.   
15482. /* ---------------------------------------------------------- */
15483. # DIR
15484. 
15485. /* ---------------------------------------------------------- */
15486. SetVariable(ZoneLabel,				"DIR") // "5"
15487. SetVariable(ZoneDescription, 		"Directories.")
15488. SetVariable(ZoneCurrentAjust, 		2)
15489. SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpDir!")
15490. SetVariable(ZoneGapSize, 			"!ZoneGapSizeDir!")
15491. SetVariable(ZoneTypeSelect,'# DIR start.
15492. Directory(yes)
15493. # DIR end.
15494. ')
15495. 
15496. 	# Zone Do Header
15497. 
15498. # Zone When Started
15499. 
15500. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
15501. # Display Set Zone
15502. 
15503. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
15504. SetVariable(FileStepDescription,	"")
15505. 
15506. SetVariable(ZoneStepByLine, 			"Zone started.
15507. ")
15508. 
15509. # BANNER SET
15510. 
15511. # DATE TIME RUN ELP
15512. 
15513. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15514. /* Xinclude "..\Display\BannerSet.MyDc"X */
15515. /* pause(1) */
15516. 
15517. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15518. 
15519. Title('!Heading!')
15520. /* pause(1) */
15521. 
15522. /* NOTE: Can't round or truncate to integer precision. */
15523. 
15524. AppendLogfile("!LogFileName!", "!Title!")
15525. 
15526. 
15527. 
15528. pause(1)
15529. 
15530. 
15531. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
15532. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
15533. 
15534. SetVariable(ZoneStepNoCurrent, 0)
15535. 
15536. 
15537. # Zone Do Current Clear
15538. 
15539. SetVariable(ZoneTypeSelectCurrent, 		"")
15540. 
15541. SetVariable(ZoneBeginCurrent, 			0)
15542. SetVariable(ZoneBeginPerCurrent, 		0)
15543. SetVariable(ZoneEndCurrent, 			0)
15544. SetVariable(ZoneEndPerCurrent, 			0)
15545. 
15546. SetVariable(ZoneSizeCurrent,			0)
15547. SetVariable(ZoneSizePerCurrent,			0)
15548. 
15549. SetVariable(ZoneGapRequestedCurrent,	0)
15550. SetVariable(ZoneGapRoundedCurrent, 		0)
15551. SetVariable(ZoneGapAdjustedCurrent, 	0)
15552. SetVariable(ZoneGapAvailableCurrent, 	0)
15553. SetVariable(ZoneGapCurrent,				0)
15554. SetVariable(ZoneGapUsedCurrent, 		0)
15555. 
15556. SetVariable(ZoneGapActualCurrent, 		0)
15557. SetVariable(ZoneGapActualPerCurrent, 	0)
15558. 
15559. SetVariable(ZoneSizeActual, 			0)
15560. SetVariable(ZoneSizeActualCurrent,		0)
15561. 
15562. SetVariable(ZoneEndActual, 				0)
15563. SetVariable(ZoneEndActualCurrent,		0)			
15564. SetVariable(ZoneSizeActualPerCurrent, 	0)
15565.       
15566. SetVariable(ZoneFilesFolders,			0)
15567. SetVariable(ZoneFilesFoldersPer,		0) 
15568. 
15569. SetVariable(ZoneFragments,				0)
15570. SetVariable(ZoneFragmentsPer,			0) 
15571. 		
15572. SetVariable(ZoneEndActualCurrent, 		0)
15573. SetVariable(ZoneEndActualPerCurrent, 	0)
15574. 
15575. # Gap Calculation Methodology:
15576. 	# Requested
15577. 	SetVariable(GapRequested, 			0) 
15578. 	SetVariable(GapRequestedStd, 		0) 
15579. 	SetVariable(GapRequestedMft, 		0) 
15580. 	SetVariable(GapRequestedOs, 		0) 
15581. 	SetVariable(GapRequestedOriginal, 	0) 
15582. 	
15583. 	# Gap Adjustments
15584. 	SetVariable(GapRounded, 			0)
15585. 	# SetVariable(GapAdjusted, 			0)
15586. 	SetVariable(GapAvailable, 			0)
15587. 	SetVariable(GapCurrent, 			0)
15588. 	SetVariable(GapActual, 				0)
15589. 	SetVariable(GapUsed, 				0)
15590. 	
15591. 	# Gap Adjustments
15592. 	SetVariable(GapRoundedLoc, 			0)
15593. 	# SetVariable(GapAdjustedLoc, 		0)
15594. 	SetVariable(GapAvailableLoc, 		0)
15595. 	SetVariable(GapCurrentLoc, 			0)
15596. 	SetVariable(GapActualLoc,			0)
15597. 	SetVariable(GapUsedLoc,				0)
15598. 	
15599. 	# Space usage
15600. 	SetVariable(ZoneFreePerRequested, 	0)
15601. 	SetVariable(ZoneFreePerUsed, 		0)
15602. 
15603. # Gap Size & Rounding
15604. 	SetVariable(ZoneGapSizePer, 		0)
15605. 	SetVariable(ZoneVolRoundUpPer, 		0)
15606. 	
15607. 	# Free Space
15608. 	SetVariable(ZoneFreeUsedPer, 		0)
15609. 	SetVariable(ZoneFreeRequestedPer, 	0)
15610. 
15611. 
15612. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
15613. 
15614. # Footer:
15615. SetVariable(ZoneFooter, "----------------------------------------------------------
15616. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
15617. 
15618. Statistics Report:
15619. ------------------
15620.    Size:  
15621.    ------------------------
15622.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
15623.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
15624.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
15625. 
15626.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
15627.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
15628. 
15629.    Location:
15630.    ------------------------
15631.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
15632.              Files End: !ZoneEndCurrent!
15633.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
15634.       
15635.    Gap Settings:
15636.    ------------------------
15637.          Gap Requested: !ZoneGapSizePer!%
15638.       Volume Rounding: !ZoneVolRoundUpPer!%
15639.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
15640.                  
15641.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
15642.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
15643.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
15644.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
15645.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
15646.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
15647.      
15648.    Free Space after Zone:
15649.    ------------------------
15650.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
15651.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
15652.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
15653. 
15654. Directory and Files Select:
15655. ---------------------------
15656. !ZoneTypeSelectCurrent!               
15657. ---------------------------
15658. ----------------------------------------------------------
15659. ")
15660. 
15661. # BANNER SET
15662. 
15663. # DATE TIME RUN ELP
15664. 
15665. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15666. /* Xinclude "..\Display\BannerSet.MyDc"X */
15667. /* pause(1) */
15668. 
15669. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15670. 
15671. Title('!Heading!')
15672. /* pause(1) */
15673. 
15674. /* NOTE: Can't round or truncate to integer precision. */
15675. 
15676. AppendLogfile("!LogFileName!", "!Title!")
15677. 
15678. 
15679. 
15680. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
15681. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
15682. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:19")
15683. 
15684. SetVariable(ZoneListByLine, "!ZoneListByLine!
15685. Zone: !ZoneNoCurrent! 2021-11-09 08:17:19 0:00:07 !ZoneLabel! !ZoneDescription!")
15686. 
15687. 
15688. /* Fixed Zone Position Handling */
15689. /* Literal number: */
15690. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
15691. /* Percentage of disk: */
15692. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
15693. /* Gap */
15694. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
15695. 
15696. /* ---------------------------------------------------------- */
15697. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
15698. # FILE STEP
15699. 
15700. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
15701. 
15702. /* add message and move to a new line. */
15703. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
15704. ")
15705. 
15706. /* display the line. (hopefully.) */
15707. # Zone Footer Set Statistics Window Text
15708. 
15709. SetStatisticsWindowText("----------------------------------------------------------
15710. Zones Processed: 
15711. ----------------------------------------------------------
15712. !ZoneListByLine!
15713. ----------------------------------------------------------
15714. Zone Processing Step:
15715. !ZoneStepByLine!    
15716. ----------------------------------------------------------
15717. Current Zone:
15718. !ZoneFooter!
15719. ----------------------------------------------------------
15720. Volume Statistics:
15721. !VolumeStatisticsDetail!
15722. ----------------------------------------------------------
15723. Zone Detailed Report:
15724. ----------------------------------------------------------
15725. !ZoneStatisticsDetail!
15726. ----------------------------------------------------------
15727. ")
15728. 
15729. 
15730. 
15731. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
15732. 
15733. # BANNER SET
15734. 
15735. # DATE TIME RUN ELP
15736. 
15737. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15738. /* Xinclude "..\Display\BannerSet.MyDc"X */
15739. /* pause(1) */
15740. 
15741. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15742. 
15743. Title('!Heading!')
15744. /* pause(1) */
15745. 
15746. /* NOTE: Can't round or truncate to integer precision. */
15747. 
15748. pause(1)
15749. 
15750. # your stuff HERE (X)... pre file select code.
15751. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
15752. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
15753. 	# (X)
15754. 
15755. FileSelect
15756. 
15757. 	# your stuff can't really go here (errors.)
15758. 	# maybe for some reason I don't know of...
15759. 	
15760. 	# Actions next...
15761. 	# DIR start.
15762. Directory(yes)
15763. # DIR end.
15764. 
15765. 	FileActions
15766. 	  		/* ---------------------------------------------------------- */
15767. 	# Gap
15768. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
15769. 		# FILE STEP
15770. 
15771. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
15772. 
15773. /* add message and move to a new line. */
15774. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
15775. ")
15776. 
15777. /* display the line. (hopefully.) */
15778. # Zone Footer Set Statistics Window Text
15779. 
15780. SetStatisticsWindowText("----------------------------------------------------------
15781. Zones Processed: 
15782. ----------------------------------------------------------
15783. !ZoneListByLine!
15784. ----------------------------------------------------------
15785. Zone Processing Step:
15786. !ZoneStepByLine!    
15787. ----------------------------------------------------------
15788. Current Zone:
15789. !ZoneFooter!
15790. ----------------------------------------------------------
15791. Volume Statistics:
15792. !VolumeStatisticsDetail!
15793. ----------------------------------------------------------
15794. Zone Detailed Report:
15795. ----------------------------------------------------------
15796. !ZoneStatisticsDetail!
15797. ----------------------------------------------------------
15798. ")
15799. 
15800. 
15801. 
15802. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
15803. 
15804. # BANNER SET
15805. 
15806. # DATE TIME RUN ELP
15807. 
15808. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
15809. /* Xinclude "..\Display\BannerSet.MyDc"X */
15810. /* pause(1) */
15811. 
15812. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
15813. 
15814. Title('!Heading!')
15815. /* pause(1) */
15816. 
15817. /* NOTE: Can't round or truncate to integer precision. */
15818. 
15819. pause(1)
15820. 	
15821. 	# ACTUAL GAP
15822. 		/* AddGap Variant. */
15823. 	  	# Zone Do Gap
15824. # Gap Calculation Methods:
15825. 
15826. /* 1) Anything you need to add first. */
15827. /* empty */
15828. 
15829. /* ---------------------------------------------------------- */
15830. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
15831. 	# GapRequestedStd.
15832. 
15833. 		/* ---------------------------------------------------------- */
15834. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
15835. 
15836. 		# Gap Calculation Methods:
15837. 
15838. /* AddGap Variants */
15839. 
15840. 	/* Standard */
15841. 		# Gap Calculation Methods:
15842. 	/* AddGap Variants */
15843. 	/* Standard */
15844. 
15845. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
15846. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
15847. 
15848. 	SetVariable(GapRequested, GapRequestedStd)
15849. 	
15850. 
15851. 	/* MFT Low High Method */
15852. 		# Gap Calculation Methods:
15853. 	/* AddGap Variants */
15854. 	/* MFT Low High Method */
15855. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
15856. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
15857. 	SetVariable(GapRequested, GapRequestedMft)
15858. 	
15859. 
15860. 	/* OS Volume Type Method */
15861. 		# Gap Calculation Methods:
15862. 	/* AddGap Variants */
15863. 	/* OS Volume Type Method */
15864. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
15865. 	SetVariable(GapRequested, GapRequestedOs)
15866. 
15867. 
15868. 
15869. /* MakeGap Variants */
15870. 
15871. 	/* Original Os 1-3 + MFT 2 */
15872. 		# Gap Calculation Methods:
15873. 	/* MakeGap Variants */
15874. 	/* Original Os 1-3 + MFT 2 */
15875. 	/* plus MFT gap placed inline at the dividing zone. */
15876. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
15877. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
15878. 	SetVariable(GapRequested, GapRequestedOrig)
15879. 	
15880. 	
15881. /* Note: You could comment out the ones not in use */
15882. /* However having the data in the log is useful. */
15883. /* Therefore the following line is otherwise needed. */
15884. 
15885. /* Standard used */
15886. 
15887. SetVariable(GapRequested, GapRequestedStd)
15888. 
15889. # Gap Calculation Methods:
15890. 
15891. /* AddGap Variants */
15892. 	/* Standard */
15893. 	/* MFT Low High Method */
15894. 	/* OS Volume Type Method */
15895. 
15896. /* MakeGap Variants */
15897. 	/* Original Os 1-3 + MFT 2 */
15898. 
15899. /* Note: You could comment out the ones not in use */
15900. /* However having the data in the log is useful. */
15901. /* Therefore the following line is otherwise needed. */
15902. 
15903. /* Standard is used currently */
15904. 
15905. 
15906. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
15907. 
15908. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
15909. 
15910. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
15911. 
15912. /* ---------------------------------------------------------- */
15913. /* 3) SMALL ZONE ADJUSTMENT. */
15914. /* Gab cant be larger than half the Zone Size. */
15915. 
15916. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
15917. 	
15918. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
15919. 
15920. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
15921. 
15922. /* ---------------------------------------------------------- */
15923. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
15924. # Gap Adjustments.
15925. 
15926. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
15927. 	
15928. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
15929. 
15930. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
15931. 
15932. /* ---------------------------------------------------------- */
15933. # BYPASS THIS.
15934. 	/* This is definitely wrong. */
15935. 	/* The question is can we steal gap from the next zone */
15936. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
15937. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
15938. 		# Zone Overflow.
15939. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
15940. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
15941. 
15942. /* ---------------------------------------------------------- */
15943. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
15944. # Remaining free space available.
15945. 
15946. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
15947. 	
15948. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
15949. 
15950. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
15951. 
15952. /* ---------------------------------------------------------- */
15953. # CURRENT gap to use.
15954. 
15955. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
15956. 
15957. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
15958. 
15959. /* ---------------------------------------------------------- */
15960. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
15961. # Debugging.
15962. 
15963. 	SetVariable(GapUsed, GapCurrent) // for debugging
15964. 
15965. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
15966. 
15967. 		# Your code HERE
15968. 
15969. /* ---------------------------------------------------------- */
15970. /* 7) YOUR CODE. */
15971. # YOUR CODE HERE:
15972. 	# INPUT: GapCurrent or GapCurrentLoc
15973. 	# OUTPUT: GapUsed...
15974. 
15975. /* ---------------------------------------------------------- */
15976. # Gap Size.
15977. # Actual Size of Gap.
15978. 
15979. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
15980. 
15981. /* ---------------------------------------------------------- */
15982. /* xxxxxxxxxxxxxxxxxxxxxx */
15983. # ADD THE GAP
15984. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
15985. /* xxxxxxxxxxxxxxxxxxxxxx */
15986. 
15987. 	
15988. 	# Zone Statistics	
15989. 	# Zone / Volume Statistics and Display
15990. 		
15991. 	# Accumulate Totals
15992.   	# Volume totals
15993. 
15994. /* Current total space used (by Zones and Gaps) */
15995. 
15996. SetVariable(VolumeZoneUsed, GapUsed)
15997. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
15998. /* Percentage */
15999. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
16000. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
16001. 
16002. /* Current total of free space requested */
16003. 
16004. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
16005. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
16006. /* Percent. */
16007. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
16008. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
16009. 
16010. /* Current total of free space used */
16011. 
16012. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
16013. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
16014. /* Percent */
16015. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
16016. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
16017. 
16018. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
16019. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
16020. /* Xinclude "..\DebugDisplayPause.MyDc"X */
16021. 
16022. 
16023. 	# Current Values
16024. 	# Cluster, Sector, Block adjust for display.
16025. 	# Bytes per cluster is volume specific.
16026. 
16027. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
16028. 
16029. # Current Zone values.
16030. 	# Begin, end and size.
16031. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
16032. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
16033. 
16034. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
16035. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
16036. 
16037. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
16038. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
16039. 
16040. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
16041. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
16042. 
16043. 	SetVariable(ZoneFragments,				"!ZONE210N!")
16044. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
16045. 		
16046. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
16047. /* identical code to here: (separation not needed. TEST.) */	
16048. 
16049. # Current Gap, Actual and Free Values
16050. 	# Gap
16051. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
16052. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
16053. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
16054. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
16055. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
16056. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
16057. 	
16058. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
16059. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
16060. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
16061. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
16062. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
16063. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
16064. 	
16065. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
16066. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
16067. 	
16068. 	# Actual Size and End
16069. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
16070. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
16071. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
16072. 	
16073. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
16074. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
16075. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
16076. 
16077. # Gap Size & Rounding
16078. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
16079. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
16080. 	
16081. 	# Free Space
16082. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
16083. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
16084. 
16085. 	# Footer:
16086. SetVariable(ZoneFooter, "----------------------------------------------------------
16087. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
16088. 
16089. Statistics Report:
16090. ------------------
16091.    Size:  
16092.    ------------------------
16093.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
16094.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
16095.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
16096. 
16097.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
16098.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
16099. 
16100.    Location:
16101.    ------------------------
16102.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
16103.              Files End: !ZoneEndCurrent!
16104.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
16105.       
16106.    Gap Settings:
16107.    ------------------------
16108.          Gap Requested: !ZoneGapSizePer!%
16109.       Volume Rounding: !ZoneVolRoundUpPer!%
16110.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
16111.                  
16112.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
16113.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
16114.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
16115.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
16116.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
16117.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
16118.      
16119.    Free Space after Zone:
16120.    ------------------------
16121.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
16122.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
16123.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
16124. 
16125. Directory and Files Select:
16126. ---------------------------
16127. !ZoneTypeSelectCurrent!               
16128. ---------------------------
16129. ----------------------------------------------------------
16130. ")
16131. 	# Zone Footer Set Statistics Window Text
16132. 
16133. SetStatisticsWindowText("----------------------------------------------------------
16134. Zones Processed: 
16135. ----------------------------------------------------------
16136. !ZoneListByLine!
16137. ----------------------------------------------------------
16138. Zone Processing Step:
16139. !ZoneStepByLine!    
16140. ----------------------------------------------------------
16141. Current Zone:
16142. !ZoneFooter!
16143. ----------------------------------------------------------
16144. Volume Statistics:
16145. !VolumeStatisticsDetail!
16146. ----------------------------------------------------------
16147. Zone Detailed Report:
16148. ----------------------------------------------------------
16149. !ZoneStatisticsDetail!
16150. ----------------------------------------------------------
16151. ")
16152. 
16153. 
16154. 	
16155.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
16156. 
16157. 	# Add Zone to list of zones for display.
16158. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
16159. 	# ??? Free Stats?
16160. 	# Footer:
16161. SetVariable(ZoneFooter, "----------------------------------------------------------
16162. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
16163. 
16164. Statistics Report:
16165. ------------------
16166.    Size:  
16167.    ------------------------
16168.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
16169.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
16170.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
16171. 
16172.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
16173.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
16174. 
16175.    Location:
16176.    ------------------------
16177.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
16178.              Files End: !ZoneEndCurrent!
16179.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
16180.       
16181.    Gap Settings:
16182.    ------------------------
16183.          Gap Requested: !ZoneGapSizePer!%
16184.       Volume Rounding: !ZoneVolRoundUpPer!%
16185.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
16186.                  
16187.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
16188.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
16189.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
16190.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
16191.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
16192.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
16193.      
16194.    Free Space after Zone:
16195.    ------------------------
16196.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
16197.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
16198.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
16199. 
16200. Directory and Files Select:
16201. ---------------------------
16202. !ZoneTypeSelectCurrent!               
16203. ---------------------------
16204. ----------------------------------------------------------
16205. ")
16206. 
16207. 	# Add Zone Details to Report.	
16208. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
16209. !ZoneFooter!")
16210. 
16211. 
16212. 	
16213. 		SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
16214. 		# FILE STEP
16215. 
16216. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
16217. 
16218. /* add message and move to a new line. */
16219. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
16220. ")
16221. 
16222. /* display the line. (hopefully.) */
16223. # Zone Footer Set Statistics Window Text
16224. 
16225. SetStatisticsWindowText("----------------------------------------------------------
16226. Zones Processed: 
16227. ----------------------------------------------------------
16228. !ZoneListByLine!
16229. ----------------------------------------------------------
16230. Zone Processing Step:
16231. !ZoneStepByLine!    
16232. ----------------------------------------------------------
16233. Current Zone:
16234. !ZoneFooter!
16235. ----------------------------------------------------------
16236. Volume Statistics:
16237. !VolumeStatisticsDetail!
16238. ----------------------------------------------------------
16239. Zone Detailed Report:
16240. ----------------------------------------------------------
16241. !ZoneStatisticsDetail!
16242. ----------------------------------------------------------
16243. ")
16244. 
16245. 
16246. 
16247. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
16248. 
16249. # BANNER SET
16250. 
16251. # DATE TIME RUN ELP
16252. 
16253. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16254. /* Xinclude "..\Display\BannerSet.MyDc"X */
16255. /* pause(1) */
16256. 
16257. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16258. 
16259. Title('!Heading!')
16260. /* pause(1) */
16261. 
16262. /* NOTE: Can't round or truncate to integer precision. */
16263. 
16264. pause(1)
16265. 	
16266. 		!include "..\ActionVerbs\ZoneDoActionTypeDir.MyDc"!
16267. 
16268. 		SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
16269. 		# FILE STEP
16270. 
16271. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
16272. 
16273. /* add message and move to a new line. */
16274. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
16275. ")
16276. 
16277. /* display the line. (hopefully.) */
16278. # Zone Footer Set Statistics Window Text
16279. 
16280. SetStatisticsWindowText("----------------------------------------------------------
16281. Zones Processed: 
16282. ----------------------------------------------------------
16283. !ZoneListByLine!
16284. ----------------------------------------------------------
16285. Zone Processing Step:
16286. !ZoneStepByLine!    
16287. ----------------------------------------------------------
16288. Current Zone:
16289. !ZoneFooter!
16290. ----------------------------------------------------------
16291. Volume Statistics:
16292. !VolumeStatisticsDetail!
16293. ----------------------------------------------------------
16294. Zone Detailed Report:
16295. ----------------------------------------------------------
16296. !ZoneStatisticsDetail!
16297. ----------------------------------------------------------
16298. ")
16299. 
16300. 
16301. 
16302. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
16303. 
16304. # BANNER SET
16305. 
16306. # DATE TIME RUN ELP
16307. 
16308. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16309. /* Xinclude "..\Display\BannerSet.MyDc"X */
16310. /* pause(1) */
16311. 
16312. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16313. 
16314. Title('!Heading!')
16315. /* pause(1) */
16316. 
16317. /* NOTE: Can't round or truncate to integer precision. */
16318. 
16319. pause(1)
16320. 	# Zone Do Footer
16321. 
16322. /* ---------------------------------------------------------- */
16323. # File Select
16324. 	# Select Statments
16325. # File Actions 
16326. 	# Standard or OS File Actions.
16327. 	# Resume...
16328. 	
16329. 	# your stuff HERE (X)... post zone (file) file actions code.
16330. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
16331. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
16332. 		# (X)
16333. 		
16334. 		/* ??? Set window? */
16335. 	
16336. 	# ADD THE GAP
16337. 		
16338. # Vacate (good for diagnostics)
16339. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
16340. 
16341. # DoNotVacate - DO NOT Vacate (recommended)
16342. 
16343. # Vacate
16344. /* AddGap(GapUsedLoc) */
16345. 
16346. # DO Not Vacate
16347. AddGap(GapUsedLoc, DoNotVacate) 
16348. 	
16349. 	
16350. /* ---------------------------------------------------------- */
16351. # (failed) TEST for boolean logic.
16352. 
16353. /* It should work in the gap calculations for turning options */
16354. /* on and off but it will NOT work here. */
16355. 
16356. /* Boolean setting X or FlagX. */
16357. /* Where X will be on or off: */
16358. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
16359. /*      For ON:  (X  *  FlagAny) */
16360. 
16361. /* 1) Failed, zero gap overrode the previous one. */
16362. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
16363. /* AddGap(GapUsedTemp) */ 
16364. 
16365. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
16366. /* AddGap(GapUsedTemp, DoNotVacate) */ 
16367. 
16368. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
16369. 
16370. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
16371. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
16372. /* AddGap(GapUsedTemp) */ 
16373. 
16374. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
16375. /* AddGap(GapUsedTemp, DoNotVacate) */ 
16376. 
16377. /* ---------------------------------------------------------- */
16378. 
16379. # Vacate
16380. /* AddGap(GapUsed) */
16381. 
16382. # DO NOT Vacate (recommended)
16383. /* AddGap(GapUsed, DoNotVacate) */ 
16384. 	
16385. 
16386. 		
16387. # 
16388. FileEnd
16389. /* ---------------------------------------------------------- */
16390. 
16391. # your stuff HERE (X)... post zone (file) code.
16392. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
16393. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
16394. 	# (X)
16395. 
16396. SetVariable(FileStepDescription,"Zone finished, reporting.")
16397. # FILE STEP
16398. 
16399. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
16400. 
16401. /* add message and move to a new line. */
16402. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
16403. ")
16404. 
16405. /* display the line. (hopefully.) */
16406. # Zone Footer Set Statistics Window Text
16407. 
16408. SetStatisticsWindowText("----------------------------------------------------------
16409. Zones Processed: 
16410. ----------------------------------------------------------
16411. !ZoneListByLine!
16412. ----------------------------------------------------------
16413. Zone Processing Step:
16414. !ZoneStepByLine!    
16415. ----------------------------------------------------------
16416. Current Zone:
16417. !ZoneFooter!
16418. ----------------------------------------------------------
16419. Volume Statistics:
16420. !VolumeStatisticsDetail!
16421. ----------------------------------------------------------
16422. Zone Detailed Report:
16423. ----------------------------------------------------------
16424. !ZoneStatisticsDetail!
16425. ----------------------------------------------------------
16426. ")
16427. 
16428. 
16429. 
16430. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
16431. 
16432. # BANNER SET
16433. 
16434. # DATE TIME RUN ELP
16435. 
16436. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16437. /* Xinclude "..\Display\BannerSet.MyDc"X */
16438. /* pause(1) */
16439. 
16440. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16441. 
16442. Title('!Heading!')
16443. /* pause(1) */
16444. 
16445. /* NOTE: Can't round or truncate to integer precision. */
16446. 
16447. pause(1)
16448. 
16449. # Zone When Finished
16450. 
16451. # BANNER SET
16452. 
16453. # DATE TIME RUN ELP
16454. 
16455. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16456. /* Xinclude "..\Display\BannerSet.MyDc"X */
16457. /* pause(1) */
16458. 
16459. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16460. 
16461. Title('!Heading!')
16462. /* pause(1) */
16463. 
16464. /* NOTE: Can't round or truncate to integer precision. */
16465. 
16466. AppendLogfile("!LogFileName!", "!Title!")
16467. 
16468. 
16469. 
16470. # Zone Statistics	
16471. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
16472. 
16473. # Footer:
16474. SetVariable(ZoneFooter, "----------------------------------------------------------
16475. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
16476. 
16477. Statistics Report:
16478. ------------------
16479.    Size:  
16480.    ------------------------
16481.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
16482.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
16483.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
16484. 
16485.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
16486.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
16487. 
16488.    Location:
16489.    ------------------------
16490.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
16491.              Files End: !ZoneEndCurrent!
16492.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
16493.       
16494.    Gap Settings:
16495.    ------------------------
16496.          Gap Requested: !ZoneGapSizePer!%
16497.       Volume Rounding: !ZoneVolRoundUpPer!%
16498.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
16499.                  
16500.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
16501.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
16502.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
16503.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
16504.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
16505.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
16506.      
16507.    Free Space after Zone:
16508.    ------------------------
16509.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
16510.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
16511.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
16512. 
16513. Directory and Files Select:
16514. ---------------------------
16515. !ZoneTypeSelectCurrent!               
16516. ---------------------------
16517. ----------------------------------------------------------
16518. ")
16519. 
16520. AppendLogfile("!LogFileName!", ".")
16521. AppendLogfile("!LogFileName!", "!ZoneFooter!")
16522. AppendLogfile("!LogFileName!", ".")
16523. 
16524. # Zone Footer Set Statistics Window Text
16525. 
16526. SetStatisticsWindowText("----------------------------------------------------------
16527. Zones Processed: 
16528. ----------------------------------------------------------
16529. !ZoneListByLine!
16530. ----------------------------------------------------------
16531. Zone Processing Step:
16532. !ZoneStepByLine!    
16533. ----------------------------------------------------------
16534. Current Zone:
16535. !ZoneFooter!
16536. ----------------------------------------------------------
16537. Volume Statistics:
16538. !VolumeStatisticsDetail!
16539. ----------------------------------------------------------
16540. Zone Detailed Report:
16541. ----------------------------------------------------------
16542. !ZoneStatisticsDetail!
16543. ----------------------------------------------------------
16544. ")
16545. 
16546. 
16547. 
16548. /* pause() */
16549. /* pause() */
16550. 
16551. 
16552. 
16553. 
16554. /* Mft Method: MFT GAP HERE. */
16555. /* For fixed zone locations */
16556. AppendLogfile("!LogFileName!", "Mft Zone: !MftZone! Location: !MftLocation! Gap: !MftGap! 2021-11-09 08:17:19")
16557. /* MakeGap(MftGap, DoNotVacate) */
16558. /* ---------------------------------------------------------- */
16559. 
16560. 
16561. /* ---------------------------------------------------------- */
16562. /* Mft Method: MFT GAP HERE. */
16563. /* For fixed zone locations */
16564. AppendLogfile("!LogFileName!", "Mft Zone: !MftZone! Location: !MftLocation! Gap: !MftGap! 2021-11-09 08:17:19")
16565. /* MakeGap(MftGap, DoNotVacate) */
16566.   
16567. /* ---------------------------------------------------------- */
16568. # PageHiberDump
16569. 
16570. # You cannot move Pagefile or Hiberfil generally speaking.
16571. # This might work in safe mode with preparation.
16572. # Zone PageHiberDump.
16573. # Possibly a Gap should be vacated so there is a space available upon recreation of the files.
16574. 
16575. /* ---------------------------------------------------------- */
16576. # PageHiberDump
16577. # You cannot move Pagefile or Hiberfil generally speaking.
16578. # This might work in safe mode with preparation.
16579. # Zone PageHiberDump.
16580. # Possibly a Gap should be vacated so there is a space available upon recreation of the files.
16581. 
16582. 	SetVariable(ZoneLabel, 			"!ZoneLabelPageHiberDump!")
16583. 	SetVariable(ZoneDescription, 		"!ZoneDescriptionPageHiberDump!")
16584. 	SetVariable(ZoneVolRoundUp, 		"!ZoneVolRoundUpPageHiberDump!")
16585. 	SetVariable(ZoneGapSize, 		"!ZoneGapSizePageHiberDump!")
16586. 	SetVariable(ZoneTypeSelect,'# PageHiberDump start.
16587. (
16588. # Os PageHiberDump start.
16589. (
16590.   FileName("DataStore.edb")
16591.   or FileName("DUMP*.*")
16592.   or FileName("Hiberfil.sys")
16593.   or FileName("MEMORY.DMP")
16594.   or FileName("Pagefile.sys")
16595. )
16596. # Os PageHiberDump end.
16597. 
16598. )
16599. # PageHiberDump end.
16600. ')
16601. 
16602. 		# Zone Do Header
16603. 
16604. # Zone When Started
16605. 
16606. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
16607. # Display Set Zone
16608. 
16609. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
16610. SetVariable(FileStepDescription,	"")
16611. 
16612. SetVariable(ZoneStepByLine, 			"Zone started.
16613. ")
16614. 
16615. # BANNER SET
16616. 
16617. # DATE TIME RUN ELP
16618. 
16619. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16620. /* Xinclude "..\Display\BannerSet.MyDc"X */
16621. /* pause(1) */
16622. 
16623. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16624. 
16625. Title('!Heading!')
16626. /* pause(1) */
16627. 
16628. /* NOTE: Can't round or truncate to integer precision. */
16629. 
16630. AppendLogfile("!LogFileName!", "!Title!")
16631. 
16632. 
16633. 
16634. pause(1)
16635. 
16636. 
16637. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
16638. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
16639. 
16640. SetVariable(ZoneStepNoCurrent, 0)
16641. 
16642. 
16643. # Zone Do Current Clear
16644. 
16645. SetVariable(ZoneTypeSelectCurrent, 		"")
16646. 
16647. SetVariable(ZoneBeginCurrent, 			0)
16648. SetVariable(ZoneBeginPerCurrent, 		0)
16649. SetVariable(ZoneEndCurrent, 			0)
16650. SetVariable(ZoneEndPerCurrent, 			0)
16651. 
16652. SetVariable(ZoneSizeCurrent,			0)
16653. SetVariable(ZoneSizePerCurrent,			0)
16654. 
16655. SetVariable(ZoneGapRequestedCurrent,	0)
16656. SetVariable(ZoneGapRoundedCurrent, 		0)
16657. SetVariable(ZoneGapAdjustedCurrent, 	0)
16658. SetVariable(ZoneGapAvailableCurrent, 	0)
16659. SetVariable(ZoneGapCurrent,				0)
16660. SetVariable(ZoneGapUsedCurrent, 		0)
16661. 
16662. SetVariable(ZoneGapActualCurrent, 		0)
16663. SetVariable(ZoneGapActualPerCurrent, 	0)
16664. 
16665. SetVariable(ZoneSizeActual, 			0)
16666. SetVariable(ZoneSizeActualCurrent,		0)
16667. 
16668. SetVariable(ZoneEndActual, 				0)
16669. SetVariable(ZoneEndActualCurrent,		0)			
16670. SetVariable(ZoneSizeActualPerCurrent, 	0)
16671.       
16672. SetVariable(ZoneFilesFolders,			0)
16673. SetVariable(ZoneFilesFoldersPer,		0) 
16674. 
16675. SetVariable(ZoneFragments,				0)
16676. SetVariable(ZoneFragmentsPer,			0) 
16677. 		
16678. SetVariable(ZoneEndActualCurrent, 		0)
16679. SetVariable(ZoneEndActualPerCurrent, 	0)
16680. 
16681. # Gap Calculation Methodology:
16682. 	# Requested
16683. 	SetVariable(GapRequested, 			0) 
16684. 	SetVariable(GapRequestedStd, 		0) 
16685. 	SetVariable(GapRequestedMft, 		0) 
16686. 	SetVariable(GapRequestedOs, 		0) 
16687. 	SetVariable(GapRequestedOriginal, 	0) 
16688. 	
16689. 	# Gap Adjustments
16690. 	SetVariable(GapRounded, 			0)
16691. 	# SetVariable(GapAdjusted, 			0)
16692. 	SetVariable(GapAvailable, 			0)
16693. 	SetVariable(GapCurrent, 			0)
16694. 	SetVariable(GapActual, 				0)
16695. 	SetVariable(GapUsed, 				0)
16696. 	
16697. 	# Gap Adjustments
16698. 	SetVariable(GapRoundedLoc, 			0)
16699. 	# SetVariable(GapAdjustedLoc, 		0)
16700. 	SetVariable(GapAvailableLoc, 		0)
16701. 	SetVariable(GapCurrentLoc, 			0)
16702. 	SetVariable(GapActualLoc,			0)
16703. 	SetVariable(GapUsedLoc,				0)
16704. 	
16705. 	# Space usage
16706. 	SetVariable(ZoneFreePerRequested, 	0)
16707. 	SetVariable(ZoneFreePerUsed, 		0)
16708. 
16709. # Gap Size & Rounding
16710. 	SetVariable(ZoneGapSizePer, 		0)
16711. 	SetVariable(ZoneVolRoundUpPer, 		0)
16712. 	
16713. 	# Free Space
16714. 	SetVariable(ZoneFreeUsedPer, 		0)
16715. 	SetVariable(ZoneFreeRequestedPer, 	0)
16716. 
16717. 
16718. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
16719. 
16720. # Footer:
16721. SetVariable(ZoneFooter, "----------------------------------------------------------
16722. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
16723. 
16724. Statistics Report:
16725. ------------------
16726.    Size:  
16727.    ------------------------
16728.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
16729.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
16730.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
16731. 
16732.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
16733.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
16734. 
16735.    Location:
16736.    ------------------------
16737.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
16738.              Files End: !ZoneEndCurrent!
16739.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
16740.       
16741.    Gap Settings:
16742.    ------------------------
16743.          Gap Requested: !ZoneGapSizePer!%
16744.       Volume Rounding: !ZoneVolRoundUpPer!%
16745.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
16746.                  
16747.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
16748.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
16749.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
16750.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
16751.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
16752.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
16753.      
16754.    Free Space after Zone:
16755.    ------------------------
16756.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
16757.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
16758.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
16759. 
16760. Directory and Files Select:
16761. ---------------------------
16762. !ZoneTypeSelectCurrent!               
16763. ---------------------------
16764. ----------------------------------------------------------
16765. ")
16766. 
16767. # BANNER SET
16768. 
16769. # DATE TIME RUN ELP
16770. 
16771. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16772. /* Xinclude "..\Display\BannerSet.MyDc"X */
16773. /* pause(1) */
16774. 
16775. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16776. 
16777. Title('!Heading!')
16778. /* pause(1) */
16779. 
16780. /* NOTE: Can't round or truncate to integer precision. */
16781. 
16782. AppendLogfile("!LogFileName!", "!Title!")
16783. 
16784. 
16785. 
16786. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
16787. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
16788. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:19")
16789. 
16790. SetVariable(ZoneListByLine, "!ZoneListByLine!
16791. Zone: !ZoneNoCurrent! 2021-11-09 08:17:19 0:00:07 !ZoneLabel! !ZoneDescription!")
16792. 
16793. 
16794. /* Fixed Zone Position Handling */
16795. /* Literal number: */
16796. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
16797. /* Percentage of disk: */
16798. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
16799. /* Gap */
16800. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
16801. 
16802. /* ---------------------------------------------------------- */
16803. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
16804. # FILE STEP
16805. 
16806. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
16807. 
16808. /* add message and move to a new line. */
16809. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
16810. ")
16811. 
16812. /* display the line. (hopefully.) */
16813. # Zone Footer Set Statistics Window Text
16814. 
16815. SetStatisticsWindowText("----------------------------------------------------------
16816. Zones Processed: 
16817. ----------------------------------------------------------
16818. !ZoneListByLine!
16819. ----------------------------------------------------------
16820. Zone Processing Step:
16821. !ZoneStepByLine!    
16822. ----------------------------------------------------------
16823. Current Zone:
16824. !ZoneFooter!
16825. ----------------------------------------------------------
16826. Volume Statistics:
16827. !VolumeStatisticsDetail!
16828. ----------------------------------------------------------
16829. Zone Detailed Report:
16830. ----------------------------------------------------------
16831. !ZoneStatisticsDetail!
16832. ----------------------------------------------------------
16833. ")
16834. 
16835. 
16836. 
16837. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
16838. 
16839. # BANNER SET
16840. 
16841. # DATE TIME RUN ELP
16842. 
16843. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16844. /* Xinclude "..\Display\BannerSet.MyDc"X */
16845. /* pause(1) */
16846. 
16847. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16848. 
16849. Title('!Heading!')
16850. /* pause(1) */
16851. 
16852. /* NOTE: Can't round or truncate to integer precision. */
16853. 
16854. pause(1)
16855. 
16856. # your stuff HERE (X)... pre file select code.
16857. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
16858. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
16859. 	# (X)
16860. 
16861. FileSelect
16862. 
16863. 	# your stuff can't really go here (errors.)
16864. 	# maybe for some reason I don't know of...
16865. 	
16866. 	# Actions next...
16867. 		# PageHiberDump start.
16868. (
16869. # Os PageHiberDump start.
16870. (
16871.   FileName("DataStore.edb")
16872.   or FileName("DUMP*.*")
16873.   or FileName("Hiberfil.sys")
16874.   or FileName("MEMORY.DMP")
16875.   or FileName("Pagefile.sys")
16876. )
16877. # Os PageHiberDump end.
16878. 
16879. )
16880. # PageHiberDump end.
16881. 
16882. 		FileActions
16883. 		  		/* ---------------------------------------------------------- */
16884. 	# Gap
16885. 		SetVariable(FileStepDescription,"!FileStepDescriptionFileActionGap!")
16886. 		# FILE STEP
16887. 
16888. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
16889. 
16890. /* add message and move to a new line. */
16891. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
16892. ")
16893. 
16894. /* display the line. (hopefully.) */
16895. # Zone Footer Set Statistics Window Text
16896. 
16897. SetStatisticsWindowText("----------------------------------------------------------
16898. Zones Processed: 
16899. ----------------------------------------------------------
16900. !ZoneListByLine!
16901. ----------------------------------------------------------
16902. Zone Processing Step:
16903. !ZoneStepByLine!    
16904. ----------------------------------------------------------
16905. Current Zone:
16906. !ZoneFooter!
16907. ----------------------------------------------------------
16908. Volume Statistics:
16909. !VolumeStatisticsDetail!
16910. ----------------------------------------------------------
16911. Zone Detailed Report:
16912. ----------------------------------------------------------
16913. !ZoneStatisticsDetail!
16914. ----------------------------------------------------------
16915. ")
16916. 
16917. 
16918. 
16919. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
16920. 
16921. # BANNER SET
16922. 
16923. # DATE TIME RUN ELP
16924. 
16925. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
16926. /* Xinclude "..\Display\BannerSet.MyDc"X */
16927. /* pause(1) */
16928. 
16929. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
16930. 
16931. Title('!Heading!')
16932. /* pause(1) */
16933. 
16934. /* NOTE: Can't round or truncate to integer precision. */
16935. 
16936. pause(1)
16937. 	
16938. 	# ACTUAL GAP
16939. 		/* AddGap Variant. */
16940. 	  	# Zone Do Gap
16941. # Gap Calculation Methods:
16942. 
16943. /* 1) Anything you need to add first. */
16944. /* empty */
16945. 
16946. /* ---------------------------------------------------------- */
16947. /* 2) REQUESTED: Get the GapRequested using the Method from Settings. */
16948. 	# GapRequestedStd.
16949. 
16950. 		/* ---------------------------------------------------------- */
16951. 		# GAP CALCULATION METHOD (CURRENTLY STANDARD)
16952. 
16953. 		# Gap Calculation Methods:
16954. 
16955. /* AddGap Variants */
16956. 
16957. 	/* Standard */
16958. 		# Gap Calculation Methods:
16959. 	/* AddGap Variants */
16960. 	/* Standard */
16961. 
16962. 	SetVariable(GapRequestedStd, VolumeFreeAdj * ZoneGapSize)
16963. 	AppendLogfile("!LogFileName!", " Std Gap size: !GapRequestedStd!")
16964. 
16965. 	SetVariable(GapRequested, GapRequestedStd)
16966. 	
16967. 
16968. 	/* MFT Low High Method */
16969. 		# Gap Calculation Methods:
16970. 	/* AddGap Variants */
16971. 	/* MFT Low High Method */
16972. 	SetVariable(GapRequestedMft, (100 - MftPer) * (VolumeFreeAdj * ZoneGapSize) )
16973. 	AppendLogfile("!LogFileName!", " Mft Gap size: !GapRequestedMft!")
16974. 	SetVariable(GapRequested, GapRequestedMft)
16975. 	
16976. 
16977. 	/* OS Volume Type Method */
16978. 		# Gap Calculation Methods:
16979. 	/* AddGap Variants */
16980. 	/* OS Volume Type Method */
16981. 	AppendLogfile("!LogFileName!", "  OS Gap size: !GapRequestedOs!")
16982. 	SetVariable(GapRequested, GapRequestedOs)
16983. 
16984. 
16985. 
16986. /* MakeGap Variants */
16987. 
16988. 	/* Original Os 1-3 + MFT 2 */
16989. 		# Gap Calculation Methods:
16990. 	/* MakeGap Variants */
16991. 	/* Original Os 1-3 + MFT 2 */
16992. 	/* plus MFT gap placed inline at the dividing zone. */
16993. 	SetVariable(GapRequestedOrig, VolumeFreeAdj * ZoneGapSize)
16994. 	AppendLogfile("!LogFileName!", "Orig Gap size: !GapRequestedOrig!")
16995. 	SetVariable(GapRequested, GapRequestedOrig)
16996. 	
16997. 	
16998. /* Note: You could comment out the ones not in use */
16999. /* However having the data in the log is useful. */
17000. /* Therefore the following line is otherwise needed. */
17001. 
17002. /* Standard used */
17003. 
17004. SetVariable(GapRequested, GapRequestedStd)
17005. 
17006. # Gap Calculation Methods:
17007. 
17008. /* AddGap Variants */
17009. 	/* Standard */
17010. 	/* MFT Low High Method */
17011. 	/* OS Volume Type Method */
17012. 
17013. /* MakeGap Variants */
17014. 	/* Original Os 1-3 + MFT 2 */
17015. 
17016. /* Note: You could comment out the ones not in use */
17017. /* However having the data in the log is useful. */
17018. /* Therefore the following line is otherwise needed. */
17019. 
17020. /* Standard is used currently */
17021. 
17022. 
17023. 	# SetVariable(GapRequested, GapRequested[Std, Mft, Os...] )
17024. 
17025. 	SetVariable(GapRequestedLoc, ZoneEnd + GapRequested)
17026. 
17027. 	AppendLogfile("!LogFileName!", "  Gap requested: !GapRequested! at !GapRequestedLoc!")
17028. 
17029. /* ---------------------------------------------------------- */
17030. /* 3) SMALL ZONE ADJUSTMENT. */
17031. /* Gab cant be larger than half the Zone Size. */
17032. 
17033. 	SetVariable(GapAdjusted, Minimum(GapRequested, ZoneSize * 2 ) )
17034. 	
17035. 	SetVariable(GapAdjustedLoc, ZoneEnd + GapAdjusted)
17036. 
17037. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! at !GapAdjustedLoc!")
17038. 
17039. /* ---------------------------------------------------------- */
17040. /* 4) VOLUME ROUND UP: to round Volume even numbers to prevent constant zone moves. */
17041. # Gap Adjustments.
17042. 
17043. 	SetVariable(GapRoundedLoc, RoundUp(GapAdjustedLoc, ZoneVolRoundUp * VolumeSize) )
17044. 	
17045. 	SetVariable(GapRounded, GapRoundedLoc - ZoneEnd)
17046. 
17047. 	AppendLogfile("!LogFileName!", "  Gap rounded: !GapRounded! at !GapRoundedLoc!")
17048. 
17049. /* ---------------------------------------------------------- */
17050. # BYPASS THIS.
17051. 	/* This is definitely wrong. */
17052. 	/* The question is can we steal gap from the next zone */
17053. 	/* More... Can we put the gap on the bottom of the zone and pack upward. */
17054. 	/* X) OVERFLOW: Adjust for previous zone overflow. */
17055. 		# Zone Overflow.
17056. 		# SetVariable(GapAdjusted, GapRounded + VolumeFreeRequested - VolumeFreeUsed)
17057. 			# AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAdjusted! (VolumeFreeRequested # !VolumeFreeRequested! 			        # VolumeFreeUsed !				# VolumeFreeUsed!)")
17058. 
17059. /* ---------------------------------------------------------- */
17060. /* 5) END OF VOLUME: Adjust for total remaining volume space available. */
17061. # Remaining free space available.
17062. 
17063. 	SetVariable(GapAvailableLoc, MaxNextZoneBegin - VolumeRoundUpTiny)
17064. 	
17065. 	SetVariable(GapAvailable, GapAvailableLoc - ZoneEnd)
17066. 
17067. 	AppendLogfile("!LogFileName!", "  Gap adjusted: !GapAvailable! at !GapAvailableLoc!")
17068. 
17069. /* ---------------------------------------------------------- */
17070. # CURRENT gap to use.
17071. 
17072. 	SetVariable(GapCurrentLoc, Minimum(GapRoundedLoc, GapAvailableLoc) )
17073. 
17074. 	SetVariable(GapCurrent, GapCurrentLoc - ZoneEnd)
17075. 
17076. /* ---------------------------------------------------------- */
17077. /* 6) GAP USED DEBUG: An access point to add debugging or other code of yours. */
17078. # Debugging.
17079. 
17080. 	SetVariable(GapUsed, GapCurrent) // for debugging
17081. 
17082. 	SetVariable(GapUsedLoc, GapCurrentLoc) // for debugging
17083. 
17084. 		# Your code HERE
17085. 
17086. /* ---------------------------------------------------------- */
17087. /* 7) YOUR CODE. */
17088. # YOUR CODE HERE:
17089. 	# INPUT: GapCurrent or GapCurrentLoc
17090. 	# OUTPUT: GapUsed...
17091. 
17092. /* ---------------------------------------------------------- */
17093. # Gap Size.
17094. # Actual Size of Gap.
17095. 
17096. 	SetVariable(GapActual, GapUsedLoc - ZoneEnd)
17097. 
17098. /* ---------------------------------------------------------- */
17099. /* xxxxxxxxxxxxxxxxxxxxxx */
17100. # ADD THE GAP
17101. 	/* Xinclude "..\Gap\GapCommandDo.MyDc"X */
17102. /* xxxxxxxxxxxxxxxxxxxxxx */
17103. 
17104. 	
17105. 	# Zone Statistics	
17106. 	# Zone / Volume Statistics and Display
17107. 		
17108. 	# Accumulate Totals
17109.   	# Volume totals
17110. 
17111. /* Current total space used (by Zones and Gaps) */
17112. 
17113. SetVariable(VolumeZoneUsed, GapUsed)
17114. AppendLogfile("!LogFileName!", "VolumeUsed: !VolumeZoneUsed! of !VolumeSize!")
17115. /* Percentage */
17116. SetVariable(VolumeZoneUsedPer, VolumeZoneUsed / VolumeSize * 100)
17117. AppendLogfile("!LogFileName!", "VolumeZoneUsedPer: !VolumeZoneUsedPer!")
17118. 
17119. /* Current total of free space requested */
17120. 
17121. SetVariable(VolumeFreeRequested, VolumeFreeRequested + GapRequested)
17122. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
17123. /* Percent. */
17124. SetVariable(VolumeFreeRequestedPer, VolumeFreeRequested / VolumeSize * 100)
17125. AppendLogfile("!LogFileName!", "VolumeFreeRequested: !VolumeFreeRequested!")
17126. 
17127. /* Current total of free space used */
17128. 
17129. SetVariable(VolumeFreeUsed, VolumeFreeUsed + GapActual)
17130. AppendLogfile("!LogFileName!", "VolumeFreeUsed: !ZoneFreeUsed!")
17131. /* Percent */
17132. SetVariable(VolumeFreeUsedPer, VolumeFreeUsed  / VolumeFree * 100)
17133. AppendLogfile("!LogFileName!", "VolumeFreePerUsed: !VolumeFreePerUsed!%")
17134. 
17135. # DEBUG EXAMPLE: Debugging. Use of DebugMessage to troubleshoot Gap Calculation.
17136. /* SetVariable(DebugMessage, "GAP:Req !GapRequested!Rnd !GapRounded!Adj !GapAdjusted!Ava !GapAvailable!Cur !GapCurrent!Act !GapActual!") */
17137. /* Xinclude "..\DebugDisplayPause.MyDc"X */
17138. 
17139. 
17140. 	# Current Values
17141. 	# Cluster, Sector, Block adjust for display.
17142. 	# Bytes per cluster is volume specific.
17143. 
17144. 	SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
17145. 
17146. # Current Zone values.
17147. 	# Begin, end and size.
17148. 	SetVariable(ZoneBeginCurrent, 			ZoneBegin / DisplayUnitDivisorCurrent)
17149. 	SetVariable(ZoneBeginPerCurrent, 		ZoneBeginCurrent / VolumeSize * 100)
17150. 
17151. 	SetVariable(ZoneEndCurrent, 			ZoneEnd / DisplayUnitDivisorCurrent)
17152. 	SetVariable(ZoneEndPerCurrent, 			ZoneEndCurrentPer / VolumeSize * 100)
17153. 
17154. 	SetVariable(ZoneSizeCurrent, 			ZoneSize / DisplayUnitDivisorCurrent)
17155. 	SetVariable(ZoneSizePerCurrent,			ZoneSize / VolumeSize * 100)
17156. 
17157. 	SetVariable(ZoneFilesFolders,			"!ZONE220N!")
17158. 	SetVariable(ZoneFilesFoldersPer,		ZoneFilesFolders / FILES220N * 100) 
17159. 
17160. 	SetVariable(ZoneFragments,				"!ZONE210N!")
17161. 	SetVariable(ZoneFragmentsPer,			ZoneFragments / FILES210N * 100) 
17162. 		
17163. /* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
17164. /* identical code to here: (separation not needed. TEST.) */	
17165. 
17166. # Current Gap, Actual and Free Values
17167. 	# Gap
17168. 	SetVariable(ZoneGapRequestedCurrent,	GapRequested / DisplayUnitDivisorCurrent)
17169. 	SetVariable(ZoneGapAdjustedCurrent, 	GapAdjusted / DisplayUnitDivisorCurrent)
17170. 	SetVariable(ZoneGapRoundedCurrent, 		GapRounded / DisplayUnitDivisorCurrent)
17171. 	SetVariable(ZoneGapAvailableCurrent, 	GapAvailable / DisplayUnitDivisorCurrent)
17172. 	SetVariable(ZoneGapCurrent, 			GapCurrent / DisplayUnitDivisorCurrent)
17173. 	SetVariable(ZoneGapUsedCurrent, 		GapUsed / DisplayUnitDivisorCurrent)
17174. 	
17175. 	SetVariable(ZoneGapRequestedLocCurrent,	GapRequestedLoc / DisplayUnitDivisorCurrent)
17176. 	SetVariable(ZoneGapAdjustedLocCurrent,GapAdjustedLoc / DisplayUnitDivisorCurrent)
17177. 	SetVariable(ZoneGapRoundedLocCurrent, 	GapRoundedLoc / DisplayUnitDivisorCurrent)
17178. 	SetVariable(ZoneGapAvailableLocCurrent, GapAvailableLoc / DisplayUnitDivisorCurrent)
17179. 	SetVariable(ZoneGapLocCurrent, 			GapCurrentLoc / DisplayUnitDivisorCurrent)
17180. 	SetVariable(ZoneGapUsedLocCurrent, 		GapUsedLoc / DisplayUnitDivisorCurrent)
17181. 	
17182. 	SetVariable(ZoneGapActualCurrent, 		GapActual / DisplayUnitDivisorCurrent)
17183. 	SetVariable(ZoneGapActualPerCurrent, 	GapActual / VolumeSize * 100)
17184. 	
17185. 	# Actual Size and End
17186. 	SetVariable(ZoneSizeActual, 			ZoneSize + GapActual)
17187. 	SetVariable(ZoneSizeActualCurrent, 		ZoneSizeActual / DisplayUnitDivisorCurrent)
17188. 	SetVariable(ZoneSizeActualPerCurrent, 	ZoneSizeActual / VolumeSize * 100)
17189. 	
17190. 	SetVariable(ZoneEndActual, 				ZoneEnd + GapActual)
17191. 	SetVariable(ZoneEndActualCurrent, 		ZoneEndActual / DisplayUnitDivisorCurrent)
17192. 	SetVariable(ZoneEndActualPerCurrent, 	ZoneEndActual / VolumeSize * 100)
17193. 
17194. # Gap Size & Rounding
17195. 	SetVariable(ZoneGapSizePer, 			ZoneGapSize * 100)
17196. 	SetVariable(ZoneVolRoundUpPer, 			ZoneVolRoundUp * 100)
17197. 	
17198. 	# Free Space
17199. 	SetVariable(ZoneFreeUsedPer, 			GapActual / VolumeFreeUsed * 100)
17200. 	SetVariable(ZoneFreeRequestedPer, 		ZoneGapRequested / VolumeFreeRequested * 100)
17201. 
17202. 	# Footer:
17203. SetVariable(ZoneFooter, "----------------------------------------------------------
17204. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
17205. 
17206. Statistics Report:
17207. ------------------
17208.    Size:  
17209.    ------------------------
17210.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
17211.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
17212.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
17213. 
17214.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
17215.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
17216. 
17217.    Location:
17218.    ------------------------
17219.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
17220.              Files End: !ZoneEndCurrent!
17221.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
17222.       
17223.    Gap Settings:
17224.    ------------------------
17225.          Gap Requested: !ZoneGapSizePer!%
17226.       Volume Rounding: !ZoneVolRoundUpPer!%
17227.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
17228.                  
17229.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
17230.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
17231.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
17232.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
17233.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
17234.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
17235.      
17236.    Free Space after Zone:
17237.    ------------------------
17238.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
17239.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
17240.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
17241. 
17242. Directory and Files Select:
17243. ---------------------------
17244. !ZoneTypeSelectCurrent!               
17245. ---------------------------
17246. ----------------------------------------------------------
17247. ")
17248. 	# Zone Footer Set Statistics Window Text
17249. 
17250. SetStatisticsWindowText("----------------------------------------------------------
17251. Zones Processed: 
17252. ----------------------------------------------------------
17253. !ZoneListByLine!
17254. ----------------------------------------------------------
17255. Zone Processing Step:
17256. !ZoneStepByLine!    
17257. ----------------------------------------------------------
17258. Current Zone:
17259. !ZoneFooter!
17260. ----------------------------------------------------------
17261. Volume Statistics:
17262. !VolumeStatisticsDetail!
17263. ----------------------------------------------------------
17264. Zone Detailed Report:
17265. ----------------------------------------------------------
17266. !ZoneStatisticsDetail!
17267. ----------------------------------------------------------
17268. ")
17269. 
17270. 
17271. 	
17272.   	/* Xinclude "..\Gap\GapZoneActualFreeSetCurrent.MyDc"X */
17273. 
17274. 	# Add Zone to list of zones for display.
17275. 	SetVariable(ZoneListByLine, "!ZoneListByLine! - ( size !ZoneSizeCurrent! / actual gap !ZoneGapActualCurrent! / actual size !ZoneSizeActualCurrent!) - [begin !ZoneBeginCurrent! / end !ZoneEndCurrent! / gap used !ZoneGapUsedCurrent! / gap unused !ZoneGapAvailableCurrent! / round up !ZoneVolRoundUp!]")
17276. 	# ??? Free Stats?
17277. 	# Footer:
17278. SetVariable(ZoneFooter, "----------------------------------------------------------
17279. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
17280. 
17281. Statistics Report:
17282. ------------------
17283.    Size:  
17284.    ------------------------
17285.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
17286.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
17287.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
17288. 
17289.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
17290.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
17291. 
17292.    Location:
17293.    ------------------------
17294.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
17295.              Files End: !ZoneEndCurrent!
17296.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
17297.       
17298.    Gap Settings:
17299.    ------------------------
17300.          Gap Requested: !ZoneGapSizePer!%
17301.       Volume Rounding: !ZoneVolRoundUpPer!%
17302.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
17303.                  
17304.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
17305.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
17306.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
17307.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
17308.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
17309.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
17310.      
17311.    Free Space after Zone:
17312.    ------------------------
17313.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
17314.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
17315.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
17316. 
17317. Directory and Files Select:
17318. ---------------------------
17319. !ZoneTypeSelectCurrent!               
17320. ---------------------------
17321. ----------------------------------------------------------
17322. ")
17323. 
17324. 	# Add Zone Details to Report.	
17325. 	SetVariable(ZoneStatisticsDetail, 	"!ZoneStatisticsDetail!
17326. !ZoneFooter!")
17327. 
17328. 
17329. 	
17330. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionStart!")
17331. 			# FILE STEP
17332. 
17333. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
17334. 
17335. /* add message and move to a new line. */
17336. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
17337. ")
17338. 
17339. /* display the line. (hopefully.) */
17340. # Zone Footer Set Statistics Window Text
17341. 
17342. SetStatisticsWindowText("----------------------------------------------------------
17343. Zones Processed: 
17344. ----------------------------------------------------------
17345. !ZoneListByLine!
17346. ----------------------------------------------------------
17347. Zone Processing Step:
17348. !ZoneStepByLine!    
17349. ----------------------------------------------------------
17350. Current Zone:
17351. !ZoneFooter!
17352. ----------------------------------------------------------
17353. Volume Statistics:
17354. !VolumeStatisticsDetail!
17355. ----------------------------------------------------------
17356. Zone Detailed Report:
17357. ----------------------------------------------------------
17358. !ZoneStatisticsDetail!
17359. ----------------------------------------------------------
17360. ")
17361. 
17362. 
17363. 
17364. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
17365. 
17366. # BANNER SET
17367. 
17368. # DATE TIME RUN ELP
17369. 
17370. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
17371. /* Xinclude "..\Display\BannerSet.MyDc"X */
17372. /* pause(1) */
17373. 
17374. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
17375. 
17376. Title('!Heading!')
17377. /* pause(1) */
17378. 
17379. /* NOTE: Can't round or truncate to integer precision. */
17380. 
17381. pause(1)
17382. 
17383. 			/* "..\ActionVerbs\ZoneDoActionThis.MyDc" */
17384. 			# File Action - SortByImportSequence with SkipBlock.
17385. SortByImportSequence(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes)) 
17386. 	
17387. 
17388. 			SetVariable(FileStepDescription, "!FileStepDescriptionFileActionEnd!")
17389. 		# FILE STEP
17390. 
17391. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
17392. 
17393. /* add message and move to a new line. */
17394. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
17395. ")
17396. 
17397. /* display the line. (hopefully.) */
17398. # Zone Footer Set Statistics Window Text
17399. 
17400. SetStatisticsWindowText("----------------------------------------------------------
17401. Zones Processed: 
17402. ----------------------------------------------------------
17403. !ZoneListByLine!
17404. ----------------------------------------------------------
17405. Zone Processing Step:
17406. !ZoneStepByLine!    
17407. ----------------------------------------------------------
17408. Current Zone:
17409. !ZoneFooter!
17410. ----------------------------------------------------------
17411. Volume Statistics:
17412. !VolumeStatisticsDetail!
17413. ----------------------------------------------------------
17414. Zone Detailed Report:
17415. ----------------------------------------------------------
17416. !ZoneStatisticsDetail!
17417. ----------------------------------------------------------
17418. ")
17419. 
17420. 
17421. 
17422. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
17423. 
17424. # BANNER SET
17425. 
17426. # DATE TIME RUN ELP
17427. 
17428. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
17429. /* Xinclude "..\Display\BannerSet.MyDc"X */
17430. /* pause(1) */
17431. 
17432. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
17433. 
17434. Title('!Heading!')
17435. /* pause(1) */
17436. 
17437. /* NOTE: Can't round or truncate to integer precision. */
17438. 
17439. pause(1)
17440. 
17441. 		# Zone Do Footer
17442. 
17443. /* ---------------------------------------------------------- */
17444. # File Select
17445. 	# Select Statments
17446. # File Actions 
17447. 	# Standard or OS File Actions.
17448. 	# Resume...
17449. 	
17450. 	# your stuff HERE (X)... post zone (file) file actions code.
17451. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
17452. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
17453. 		# (X)
17454. 		
17455. 		/* ??? Set window? */
17456. 	
17457. 	# ADD THE GAP
17458. 		
17459. # Vacate (good for diagnostics)
17460. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
17461. 
17462. # DoNotVacate - DO NOT Vacate (recommended)
17463. 
17464. # Vacate
17465. /* AddGap(GapUsedLoc) */
17466. 
17467. # DO Not Vacate
17468. AddGap(GapUsedLoc, DoNotVacate) 
17469. 	
17470. 	
17471. /* ---------------------------------------------------------- */
17472. # (failed) TEST for boolean logic.
17473. 
17474. /* It should work in the gap calculations for turning options */
17475. /* on and off but it will NOT work here. */
17476. 
17477. /* Boolean setting X or FlagX. */
17478. /* Where X will be on or off: */
17479. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
17480. /*      For ON:  (X  *  FlagAny) */
17481. 
17482. /* 1) Failed, zero gap overrode the previous one. */
17483. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
17484. /* AddGap(GapUsedTemp) */ 
17485. 
17486. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
17487. /* AddGap(GapUsedTemp, DoNotVacate) */ 
17488. 
17489. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
17490. 
17491. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
17492. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
17493. /* AddGap(GapUsedTemp) */ 
17494. 
17495. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
17496. /* AddGap(GapUsedTemp, DoNotVacate) */ 
17497. 
17498. /* ---------------------------------------------------------- */
17499. 
17500. # Vacate
17501. /* AddGap(GapUsed) */
17502. 
17503. # DO NOT Vacate (recommended)
17504. /* AddGap(GapUsed, DoNotVacate) */ 
17505. 	
17506. 
17507. 		
17508. # 
17509. FileEnd
17510. /* ---------------------------------------------------------- */
17511. 
17512. # your stuff HERE (X)... post zone (file) code.
17513. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
17514. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
17515. 	# (X)
17516. 
17517. SetVariable(FileStepDescription,"Zone finished, reporting.")
17518. # FILE STEP
17519. 
17520. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
17521. 
17522. /* add message and move to a new line. */
17523. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
17524. ")
17525. 
17526. /* display the line. (hopefully.) */
17527. # Zone Footer Set Statistics Window Text
17528. 
17529. SetStatisticsWindowText("----------------------------------------------------------
17530. Zones Processed: 
17531. ----------------------------------------------------------
17532. !ZoneListByLine!
17533. ----------------------------------------------------------
17534. Zone Processing Step:
17535. !ZoneStepByLine!    
17536. ----------------------------------------------------------
17537. Current Zone:
17538. !ZoneFooter!
17539. ----------------------------------------------------------
17540. Volume Statistics:
17541. !VolumeStatisticsDetail!
17542. ----------------------------------------------------------
17543. Zone Detailed Report:
17544. ----------------------------------------------------------
17545. !ZoneStatisticsDetail!
17546. ----------------------------------------------------------
17547. ")
17548. 
17549. 
17550. 
17551. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
17552. 
17553. # BANNER SET
17554. 
17555. # DATE TIME RUN ELP
17556. 
17557. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
17558. /* Xinclude "..\Display\BannerSet.MyDc"X */
17559. /* pause(1) */
17560. 
17561. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
17562. 
17563. Title('!Heading!')
17564. /* pause(1) */
17565. 
17566. /* NOTE: Can't round or truncate to integer precision. */
17567. 
17568. pause(1)
17569. 
17570. # Zone When Finished
17571. 
17572. # BANNER SET
17573. 
17574. # DATE TIME RUN ELP
17575. 
17576. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:19 0:00:07")
17577. /* Xinclude "..\Display\BannerSet.MyDc"X */
17578. /* pause(1) */
17579. 
17580. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
17581. 
17582. Title('!Heading!')
17583. /* pause(1) */
17584. 
17585. /* NOTE: Can't round or truncate to integer precision. */
17586. 
17587. AppendLogfile("!LogFileName!", "!Title!")
17588. 
17589. 
17590. 
17591. # Zone Statistics	
17592. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
17593. 
17594. # Footer:
17595. SetVariable(ZoneFooter, "----------------------------------------------------------
17596. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:19
17597. 
17598. Statistics Report:
17599. ------------------
17600.    Size:  
17601.    ------------------------
17602.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
17603.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
17604.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
17605. 
17606.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
17607.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
17608. 
17609.    Location:
17610.    ------------------------
17611.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
17612.              Files End: !ZoneEndCurrent!
17613.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
17614.       
17615.    Gap Settings:
17616.    ------------------------
17617.          Gap Requested: !ZoneGapSizePer!%
17618.       Volume Rounding: !ZoneVolRoundUpPer!%
17619.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
17620.                  
17621.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
17622.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
17623.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
17624.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
17625.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
17626.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
17627.      
17628.    Free Space after Zone:
17629.    ------------------------
17630.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
17631.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
17632.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
17633. 
17634. Directory and Files Select:
17635. ---------------------------
17636. !ZoneTypeSelectCurrent!               
17637. ---------------------------
17638. ----------------------------------------------------------
17639. ")
17640. 
17641. AppendLogfile("!LogFileName!", ".")
17642. AppendLogfile("!LogFileName!", "!ZoneFooter!")
17643. AppendLogfile("!LogFileName!", ".")
17644. 
17645. # Zone Footer Set Statistics Window Text
17646. 
17647. SetStatisticsWindowText("----------------------------------------------------------
17648. Zones Processed: 
17649. ----------------------------------------------------------
17650. !ZoneListByLine!
17651. ----------------------------------------------------------
17652. Zone Processing Step:
17653. !ZoneStepByLine!    
17654. ----------------------------------------------------------
17655. Current Zone:
17656. !ZoneFooter!
17657. ----------------------------------------------------------
17658. Volume Statistics:
17659. !VolumeStatisticsDetail!
17660. ----------------------------------------------------------
17661. Zone Detailed Report:
17662. ----------------------------------------------------------
17663. !ZoneStatisticsDetail!
17664. ----------------------------------------------------------
17665. ")
17666. 
17667. 
17668. 
17669. /* pause() */
17670. /* pause() */
17671. 
17672. 
17673. 
17674. /* ---------------------------------------------------------- */
17675.   
17676. 
17677. /* ---------------------------------------------------------- */
17678. 
17679. /* XXXXXXXXXXXXXXXXXXXXXXXXX */
17680. 
17681. /* ---------------------------------------------------------- */
17682. /* Zone Games */
17683. /* ---------------------------------------------------------- */
17684. /* Zone Games */
17685. SetVariable(ZoneLabel, "!ZoneLabelGames!")
17686. SetVariable(ZoneDescription, "!ZoneDescriptionGames!")
17687. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpGames!")
17688. SetVariable(ZoneGapSize, "!ZoneGapSizeGames!")
17689. SetVariable(ZoneTypeSelect,'# Games start.
17690. # NotBlobsArchivesBu start.
17691. (not (
17692. # Blobs start.
17693. (
17694. # BlobsAndExceptions start.
17695. ( not(
17696.   FileName("*.bat")
17697.   or FileName("*.css")
17698.   or FileName("*.dll")
17699.   or FileName("*.exe")
17700.   or FileName("*.htm*")
17701.   or FileName("*.jar")
17702.   or FileName("*.js")
17703.   or FileName("*.script")
17704.   or FileName("*.wsf")
17705.   or (
17706. # Databases start.
17707. (
17708.   FileName("*.crypt*")
17709.   or FileName("*.db*")
17710.   or FileName("*.rdb*")
17711.   or FileName("*.dc*")
17712.   or FileName("*.dict*")
17713.   or FileName("*.?db*")
17714.   or FileName("*.?rdb*")
17715.   or FileName("*.md*")
17716.   or FileName("*.myd")
17717.   or FileName("*.ndf")
17718.   or FileName("*.ns?")
17719.   or FileName("*.pab")
17720.   or FileName("*.pst")
17721.   or FileName("*.sd?*")
17722.   or FileName("*.sq**")
17723.   or FileName("*.tmd")
17724.   or FileName("*.tps")
17725.   or FileName("*.tr*")
17726. )
17727. # Databases end.
17728. 
17729.     # BlobsAndExceptions
17730.     or 
17731. # Data start.
17732. (
17733.   DirectoryName("Data*")
17734.   or DirectoryName("Device*")
17735.   or DirectoryName("Export*")
17736.   or DirectoryName("Import*")
17737.   or DirectoryName("Log*")
17738.   or DirectoryName("*Log")
17739.   or DirectoryName("Maintenance*")
17740.   or DirectoryName("Rec*")
17741.   or DirectoryName("Sales*")
17742.   or DirectoryName("Search*")
17743.   or DirectoryName("User*")
17744. )
17745. # Data end.
17746. 
17747.     # BlobsAndExceptions
17748.   )
17749. ) )
17750. # BlobsAndExceptions end.
17751. 
17752. # Blobs
17753. ) and (
17754.   Size(BlobFileSize,0)
17755.   or (
17756.     FileName("*.arj")
17757.     or FileName("*.bup")
17758.     or FileName("*.bz2")
17759.     or FileName("*.chm")
17760.     or FileName("*.dvr-ms")
17761.     or FileName("*.gz")
17762.     or FileName("*.ifo")
17763.     or FileName("*.lzh")
17764.     or FileName("*.pdf")
17765.     or FileName("*.rpm")
17766.     or FileName("*.wmv")
17767.     or FileName("*.vob")
17768.     or FileName("*.z")
17769.   ) 
17770. )
17771. # Blobs end.
17772. 
17773. # NotBlobsArchivesBu
17774. or 
17775. # Archives start.
17776. (
17777.   DirectoryName("*Archive*")
17778.   or DirectoryName("*History*")
17779.   or DirectoryName("*Old")
17780.   or DirectoryName("* Old *")
17781.   or DirectoryName("Old *")
17782. 
17783.   or FileName("*.7z")
17784.   or FileName("*.cab")
17785.   or FileName("*.iso")
17786.   or FileName("*.msi")
17787.   or FileName("*.old")
17788.   or FileName("*.rar")
17789.   or FileName("*.tar")
17790.   or FileName("*.zip")
17791.   or
17792. # WinSysLow start.
17793. (
17794.   DirectoryName("$*")
17795.   or DirectoryName("0*")
17796.   or DirectoryName("1*")
17797.   or DirectoryName("2*")
17798.   or DirectoryName("3*")
17799.   or DirectoryName("4*")
17800.   or DirectoryName("5*")
17801.   or DirectoryName("6*")
17802.   or DirectoryName("7*")
17803.   or DirectoryName("8*")
17804.   or DirectoryName("9*")
17805. 
17806.   or DirectoryName("dllcache")
17807.   or DirectoryName("Downloaded Installations")
17808.   or DirectoryName("Ehome")
17809.   or DirectoryName("Fonts")
17810.   or DirectoryName("Help")
17811.   or DirectoryName("I386")
17812.   or DirectoryName("ie?updates")
17813.   or DirectoryName("Installer")
17814.   or DirectoryName("Installshield Installation Information")
17815.   or DirectoryName("IME")
17816.   or DirectoryName("*RECYCLE*")
17817.   or DirectoryName("ServicePackFiles")
17818.   or DirectoryName("SoftwareDistribution")
17819.   or DirectoryName("Speech")
17820.   or DirectoryName("Symbols")
17821.   or DirectoryName("System Volume Information")
17822.   or DirectoryName("windows.old")
17823. )
17824. # WinSysLow end.
17825. 
17826.   # Archives
17827. )
17828. # Archives end.
17829. 
17830. # NotBlobsArchivesBu
17831. or
17832. # Backups start.
17833. (
17834.   DirectoryName("*Backup*")
17835.   or DirectoryName("*Bu")
17836.   or DirectoryName("* Bu *")
17837.   or DirectoryName("Bu *")
17838. 
17839.   or FileName("*.bak")
17840.   or FileName("* - Copy*")
17841. )
17842. # Backups end.
17843. 
17844. # NotBlobsArchivesBu
17845. ) )
17846. # NotBlobsArchivesBu end.
17847. 
17848. # People
17849. and (
17850. # Games start.
17851. (
17852.   DirectoryName("Game*")
17853.   or DirectoryName("Epic*")
17854.   or DirectoryName("*XBox*")
17855.   or DirectoryName("*PS2*")
17856. )
17857. # Games end.
17858. 
17859. # People
17860. )
17861. # People end.
17862. ')
17863. 
17864. 	# Zone Do Header
17865. 
17866. # Zone When Started
17867. 
17868. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
17869. # Display Set Zone
17870. 
17871. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
17872. SetVariable(FileStepDescription,	"")
17873. 
17874. SetVariable(ZoneStepByLine, 			"Zone started.
17875. ")
17876. 
17877. # BANNER SET
17878. 
17879. # DATE TIME RUN ELP
17880. 
17881. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
17882. /* Xinclude "..\Display\BannerSet.MyDc"X */
17883. /* pause(1) */
17884. 
17885. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
17886. 
17887. Title('!Heading!')
17888. /* pause(1) */
17889. 
17890. /* NOTE: Can't round or truncate to integer precision. */
17891. 
17892. AppendLogfile("!LogFileName!", "!Title!")
17893. 
17894. 
17895. 
17896. pause(1)
17897. 
17898. 
17899. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
17900. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
17901. 
17902. SetVariable(ZoneStepNoCurrent, 0)
17903. 
17904. 
17905. # Zone Do Current Clear
17906. 
17907. SetVariable(ZoneTypeSelectCurrent, 		"")
17908. 
17909. SetVariable(ZoneBeginCurrent, 			0)
17910. SetVariable(ZoneBeginPerCurrent, 		0)
17911. SetVariable(ZoneEndCurrent, 			0)
17912. SetVariable(ZoneEndPerCurrent, 			0)
17913. 
17914. SetVariable(ZoneSizeCurrent,			0)
17915. SetVariable(ZoneSizePerCurrent,			0)
17916. 
17917. SetVariable(ZoneGapRequestedCurrent,	0)
17918. SetVariable(ZoneGapRoundedCurrent, 		0)
17919. SetVariable(ZoneGapAdjustedCurrent, 	0)
17920. SetVariable(ZoneGapAvailableCurrent, 	0)
17921. SetVariable(ZoneGapCurrent,				0)
17922. SetVariable(ZoneGapUsedCurrent, 		0)
17923. 
17924. SetVariable(ZoneGapActualCurrent, 		0)
17925. SetVariable(ZoneGapActualPerCurrent, 	0)
17926. 
17927. SetVariable(ZoneSizeActual, 			0)
17928. SetVariable(ZoneSizeActualCurrent,		0)
17929. 
17930. SetVariable(ZoneEndActual, 				0)
17931. SetVariable(ZoneEndActualCurrent,		0)			
17932. SetVariable(ZoneSizeActualPerCurrent, 	0)
17933.       
17934. SetVariable(ZoneFilesFolders,			0)
17935. SetVariable(ZoneFilesFoldersPer,		0) 
17936. 
17937. SetVariable(ZoneFragments,				0)
17938. SetVariable(ZoneFragmentsPer,			0) 
17939. 		
17940. SetVariable(ZoneEndActualCurrent, 		0)
17941. SetVariable(ZoneEndActualPerCurrent, 	0)
17942. 
17943. # Gap Calculation Methodology:
17944. 	# Requested
17945. 	SetVariable(GapRequested, 			0) 
17946. 	SetVariable(GapRequestedStd, 		0) 
17947. 	SetVariable(GapRequestedMft, 		0) 
17948. 	SetVariable(GapRequestedOs, 		0) 
17949. 	SetVariable(GapRequestedOriginal, 	0) 
17950. 	
17951. 	# Gap Adjustments
17952. 	SetVariable(GapRounded, 			0)
17953. 	# SetVariable(GapAdjusted, 			0)
17954. 	SetVariable(GapAvailable, 			0)
17955. 	SetVariable(GapCurrent, 			0)
17956. 	SetVariable(GapActual, 				0)
17957. 	SetVariable(GapUsed, 				0)
17958. 	
17959. 	# Gap Adjustments
17960. 	SetVariable(GapRoundedLoc, 			0)
17961. 	# SetVariable(GapAdjustedLoc, 		0)
17962. 	SetVariable(GapAvailableLoc, 		0)
17963. 	SetVariable(GapCurrentLoc, 			0)
17964. 	SetVariable(GapActualLoc,			0)
17965. 	SetVariable(GapUsedLoc,				0)
17966. 	
17967. 	# Space usage
17968. 	SetVariable(ZoneFreePerRequested, 	0)
17969. 	SetVariable(ZoneFreePerUsed, 		0)
17970. 
17971. # Gap Size & Rounding
17972. 	SetVariable(ZoneGapSizePer, 		0)
17973. 	SetVariable(ZoneVolRoundUpPer, 		0)
17974. 	
17975. 	# Free Space
17976. 	SetVariable(ZoneFreeUsedPer, 		0)
17977. 	SetVariable(ZoneFreeRequestedPer, 	0)
17978. 
17979. 
17980. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
17981. 
17982. # Footer:
17983. SetVariable(ZoneFooter, "----------------------------------------------------------
17984. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
17985. 
17986. Statistics Report:
17987. ------------------
17988.    Size:  
17989.    ------------------------
17990.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
17991.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
17992.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
17993. 
17994.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
17995.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
17996. 
17997.    Location:
17998.    ------------------------
17999.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
18000.              Files End: !ZoneEndCurrent!
18001.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
18002.       
18003.    Gap Settings:
18004.    ------------------------
18005.          Gap Requested: !ZoneGapSizePer!%
18006.       Volume Rounding: !ZoneVolRoundUpPer!%
18007.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
18008.                  
18009.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
18010.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
18011.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
18012.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
18013.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
18014.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
18015.      
18016.    Free Space after Zone:
18017.    ------------------------
18018.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
18019.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
18020.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
18021. 
18022. Directory and Files Select:
18023. ---------------------------
18024. !ZoneTypeSelectCurrent!               
18025. ---------------------------
18026. ----------------------------------------------------------
18027. ")
18028. 
18029. # BANNER SET
18030. 
18031. # DATE TIME RUN ELP
18032. 
18033. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18034. /* Xinclude "..\Display\BannerSet.MyDc"X */
18035. /* pause(1) */
18036. 
18037. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18038. 
18039. Title('!Heading!')
18040. /* pause(1) */
18041. 
18042. /* NOTE: Can't round or truncate to integer precision. */
18043. 
18044. AppendLogfile("!LogFileName!", "!Title!")
18045. 
18046. 
18047. 
18048. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
18049. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
18050. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:20")
18051. 
18052. SetVariable(ZoneListByLine, "!ZoneListByLine!
18053. Zone: !ZoneNoCurrent! 2021-11-09 08:17:20 0:00:08 !ZoneLabel! !ZoneDescription!")
18054. 
18055. 
18056. /* Fixed Zone Position Handling */
18057. /* Literal number: */
18058. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
18059. /* Percentage of disk: */
18060. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
18061. /* Gap */
18062. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
18063. 
18064. /* ---------------------------------------------------------- */
18065. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
18066. # FILE STEP
18067. 
18068. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
18069. 
18070. /* add message and move to a new line. */
18071. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
18072. ")
18073. 
18074. /* display the line. (hopefully.) */
18075. # Zone Footer Set Statistics Window Text
18076. 
18077. SetStatisticsWindowText("----------------------------------------------------------
18078. Zones Processed: 
18079. ----------------------------------------------------------
18080. !ZoneListByLine!
18081. ----------------------------------------------------------
18082. Zone Processing Step:
18083. !ZoneStepByLine!    
18084. ----------------------------------------------------------
18085. Current Zone:
18086. !ZoneFooter!
18087. ----------------------------------------------------------
18088. Volume Statistics:
18089. !VolumeStatisticsDetail!
18090. ----------------------------------------------------------
18091. Zone Detailed Report:
18092. ----------------------------------------------------------
18093. !ZoneStatisticsDetail!
18094. ----------------------------------------------------------
18095. ")
18096. 
18097. 
18098. 
18099. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
18100. 
18101. # BANNER SET
18102. 
18103. # DATE TIME RUN ELP
18104. 
18105. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18106. /* Xinclude "..\Display\BannerSet.MyDc"X */
18107. /* pause(1) */
18108. 
18109. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18110. 
18111. Title('!Heading!')
18112. /* pause(1) */
18113. 
18114. /* NOTE: Can't round or truncate to integer precision. */
18115. 
18116. pause(1)
18117. 
18118. # your stuff HERE (X)... pre file select code.
18119. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
18120. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
18121. 	# (X)
18122. 
18123. FileSelect
18124. 
18125. 	# your stuff can't really go here (errors.)
18126. 	# maybe for some reason I don't know of...
18127. 	
18128. 	# Actions next...
18129. 	# Games start.
18130. # NotBlobsArchivesBu start.
18131. (not (
18132. # Blobs start.
18133. (
18134. # BlobsAndExceptions start.
18135. ( not(
18136.   FileName("*.bat")
18137.   or FileName("*.css")
18138.   or FileName("*.dll")
18139.   or FileName("*.exe")
18140.   or FileName("*.htm*")
18141.   or FileName("*.jar")
18142.   or FileName("*.js")
18143.   or FileName("*.script")
18144.   or FileName("*.wsf")
18145.   or (
18146. # Databases start.
18147. (
18148.   FileName("*.crypt*")
18149.   or FileName("*.db*")
18150.   or FileName("*.rdb*")
18151.   or FileName("*.dc*")
18152.   or FileName("*.dict*")
18153.   or FileName("*.?db*")
18154.   or FileName("*.?rdb*")
18155.   or FileName("*.md*")
18156.   or FileName("*.myd")
18157.   or FileName("*.ndf")
18158.   or FileName("*.ns?")
18159.   or FileName("*.pab")
18160.   or FileName("*.pst")
18161.   or FileName("*.sd?*")
18162.   or FileName("*.sq**")
18163.   or FileName("*.tmd")
18164.   or FileName("*.tps")
18165.   or FileName("*.tr*")
18166. )
18167. # Databases end.
18168. 
18169.     # BlobsAndExceptions
18170.     or 
18171. # Data start.
18172. (
18173.   DirectoryName("Data*")
18174.   or DirectoryName("Device*")
18175.   or DirectoryName("Export*")
18176.   or DirectoryName("Import*")
18177.   or DirectoryName("Log*")
18178.   or DirectoryName("*Log")
18179.   or DirectoryName("Maintenance*")
18180.   or DirectoryName("Rec*")
18181.   or DirectoryName("Sales*")
18182.   or DirectoryName("Search*")
18183.   or DirectoryName("User*")
18184. )
18185. # Data end.
18186. 
18187.     # BlobsAndExceptions
18188.   )
18189. ) )
18190. # BlobsAndExceptions end.
18191. 
18192. # Blobs
18193. ) and (
18194.   Size(BlobFileSize,0)
18195.   or (
18196.     FileName("*.arj")
18197.     or FileName("*.bup")
18198.     or FileName("*.bz2")
18199.     or FileName("*.chm")
18200.     or FileName("*.dvr-ms")
18201.     or FileName("*.gz")
18202.     or FileName("*.ifo")
18203.     or FileName("*.lzh")
18204.     or FileName("*.pdf")
18205.     or FileName("*.rpm")
18206.     or FileName("*.wmv")
18207.     or FileName("*.vob")
18208.     or FileName("*.z")
18209.   ) 
18210. )
18211. # Blobs end.
18212. 
18213. # NotBlobsArchivesBu
18214. or 
18215. # Archives start.
18216. (
18217.   DirectoryName("*Archive*")
18218.   or DirectoryName("*History*")
18219.   or DirectoryName("*Old")
18220.   or DirectoryName("* Old *")
18221.   or DirectoryName("Old *")
18222. 
18223.   or FileName("*.7z")
18224.   or FileName("*.cab")
18225.   or FileName("*.iso")
18226.   or FileName("*.msi")
18227.   or FileName("*.old")
18228.   or FileName("*.rar")
18229.   or FileName("*.tar")
18230.   or FileName("*.zip")
18231.   or
18232. # WinSysLow start.
18233. (
18234.   DirectoryName("$*")
18235.   or DirectoryName("0*")
18236.   or DirectoryName("1*")
18237.   or DirectoryName("2*")
18238.   or DirectoryName("3*")
18239.   or DirectoryName("4*")
18240.   or DirectoryName("5*")
18241.   or DirectoryName("6*")
18242.   or DirectoryName("7*")
18243.   or DirectoryName("8*")
18244.   or DirectoryName("9*")
18245. 
18246.   or DirectoryName("dllcache")
18247.   or DirectoryName("Downloaded Installations")
18248.   or DirectoryName("Ehome")
18249.   or DirectoryName("Fonts")
18250.   or DirectoryName("Help")
18251.   or DirectoryName("I386")
18252.   or DirectoryName("ie?updates")
18253.   or DirectoryName("Installer")
18254.   or DirectoryName("Installshield Installation Information")
18255.   or DirectoryName("IME")
18256.   or DirectoryName("*RECYCLE*")
18257.   or DirectoryName("ServicePackFiles")
18258.   or DirectoryName("SoftwareDistribution")
18259.   or DirectoryName("Speech")
18260.   or DirectoryName("Symbols")
18261.   or DirectoryName("System Volume Information")
18262.   or DirectoryName("windows.old")
18263. )
18264. # WinSysLow end.
18265. 
18266.   # Archives
18267. )
18268. # Archives end.
18269. 
18270. # NotBlobsArchivesBu
18271. or
18272. # Backups start.
18273. (
18274.   DirectoryName("*Backup*")
18275.   or DirectoryName("*Bu")
18276.   or DirectoryName("* Bu *")
18277.   or DirectoryName("Bu *")
18278. 
18279.   or FileName("*.bak")
18280.   or FileName("* - Copy*")
18281. )
18282. # Backups end.
18283. 
18284. # NotBlobsArchivesBu
18285. ) )
18286. # NotBlobsArchivesBu end.
18287. 
18288. # People
18289. and (
18290. # Games start.
18291. (
18292.   DirectoryName("Game*")
18293.   or DirectoryName("Epic*")
18294.   or DirectoryName("*XBox*")
18295.   or DirectoryName("*PS2*")
18296. )
18297. # Games end.
18298. 
18299. # People
18300. )
18301. # People end.
18302. 
18303. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
18304. 
18305. 	# Zone Do Footer
18306. 
18307. /* ---------------------------------------------------------- */
18308. # File Select
18309. 	# Select Statments
18310. # File Actions 
18311. 	# Standard or OS File Actions.
18312. 	# Resume...
18313. 	
18314. 	# your stuff HERE (X)... post zone (file) file actions code.
18315. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
18316. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
18317. 		# (X)
18318. 		
18319. 		/* ??? Set window? */
18320. 	
18321. 	# ADD THE GAP
18322. 		
18323. # Vacate (good for diagnostics)
18324. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
18325. 
18326. # DoNotVacate - DO NOT Vacate (recommended)
18327. 
18328. # Vacate
18329. /* AddGap(GapUsedLoc) */
18330. 
18331. # DO Not Vacate
18332. AddGap(GapUsedLoc, DoNotVacate) 
18333. 	
18334. 	
18335. /* ---------------------------------------------------------- */
18336. # (failed) TEST for boolean logic.
18337. 
18338. /* It should work in the gap calculations for turning options */
18339. /* on and off but it will NOT work here. */
18340. 
18341. /* Boolean setting X or FlagX. */
18342. /* Where X will be on or off: */
18343. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
18344. /*      For ON:  (X  *  FlagAny) */
18345. 
18346. /* 1) Failed, zero gap overrode the previous one. */
18347. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
18348. /* AddGap(GapUsedTemp) */ 
18349. 
18350. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
18351. /* AddGap(GapUsedTemp, DoNotVacate) */ 
18352. 
18353. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
18354. 
18355. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
18356. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
18357. /* AddGap(GapUsedTemp) */ 
18358. 
18359. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
18360. /* AddGap(GapUsedTemp, DoNotVacate) */ 
18361. 
18362. /* ---------------------------------------------------------- */
18363. 
18364. # Vacate
18365. /* AddGap(GapUsed) */
18366. 
18367. # DO NOT Vacate (recommended)
18368. /* AddGap(GapUsed, DoNotVacate) */ 
18369. 	
18370. 
18371. 		
18372. # 
18373. FileEnd
18374. /* ---------------------------------------------------------- */
18375. 
18376. # your stuff HERE (X)... post zone (file) code.
18377. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
18378. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
18379. 	# (X)
18380. 
18381. SetVariable(FileStepDescription,"Zone finished, reporting.")
18382. # FILE STEP
18383. 
18384. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
18385. 
18386. /* add message and move to a new line. */
18387. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
18388. ")
18389. 
18390. /* display the line. (hopefully.) */
18391. # Zone Footer Set Statistics Window Text
18392. 
18393. SetStatisticsWindowText("----------------------------------------------------------
18394. Zones Processed: 
18395. ----------------------------------------------------------
18396. !ZoneListByLine!
18397. ----------------------------------------------------------
18398. Zone Processing Step:
18399. !ZoneStepByLine!    
18400. ----------------------------------------------------------
18401. Current Zone:
18402. !ZoneFooter!
18403. ----------------------------------------------------------
18404. Volume Statistics:
18405. !VolumeStatisticsDetail!
18406. ----------------------------------------------------------
18407. Zone Detailed Report:
18408. ----------------------------------------------------------
18409. !ZoneStatisticsDetail!
18410. ----------------------------------------------------------
18411. ")
18412. 
18413. 
18414. 
18415. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
18416. 
18417. # BANNER SET
18418. 
18419. # DATE TIME RUN ELP
18420. 
18421. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18422. /* Xinclude "..\Display\BannerSet.MyDc"X */
18423. /* pause(1) */
18424. 
18425. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18426. 
18427. Title('!Heading!')
18428. /* pause(1) */
18429. 
18430. /* NOTE: Can't round or truncate to integer precision. */
18431. 
18432. pause(1)
18433. 
18434. # Zone When Finished
18435. 
18436. # BANNER SET
18437. 
18438. # DATE TIME RUN ELP
18439. 
18440. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18441. /* Xinclude "..\Display\BannerSet.MyDc"X */
18442. /* pause(1) */
18443. 
18444. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18445. 
18446. Title('!Heading!')
18447. /* pause(1) */
18448. 
18449. /* NOTE: Can't round or truncate to integer precision. */
18450. 
18451. AppendLogfile("!LogFileName!", "!Title!")
18452. 
18453. 
18454. 
18455. # Zone Statistics	
18456. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
18457. 
18458. # Footer:
18459. SetVariable(ZoneFooter, "----------------------------------------------------------
18460. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
18461. 
18462. Statistics Report:
18463. ------------------
18464.    Size:  
18465.    ------------------------
18466.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
18467.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
18468.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
18469. 
18470.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
18471.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
18472. 
18473.    Location:
18474.    ------------------------
18475.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
18476.              Files End: !ZoneEndCurrent!
18477.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
18478.       
18479.    Gap Settings:
18480.    ------------------------
18481.          Gap Requested: !ZoneGapSizePer!%
18482.       Volume Rounding: !ZoneVolRoundUpPer!%
18483.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
18484.                  
18485.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
18486.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
18487.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
18488.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
18489.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
18490.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
18491.      
18492.    Free Space after Zone:
18493.    ------------------------
18494.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
18495.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
18496.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
18497. 
18498. Directory and Files Select:
18499. ---------------------------
18500. !ZoneTypeSelectCurrent!               
18501. ---------------------------
18502. ----------------------------------------------------------
18503. ")
18504. 
18505. AppendLogfile("!LogFileName!", ".")
18506. AppendLogfile("!LogFileName!", "!ZoneFooter!")
18507. AppendLogfile("!LogFileName!", ".")
18508. 
18509. # Zone Footer Set Statistics Window Text
18510. 
18511. SetStatisticsWindowText("----------------------------------------------------------
18512. Zones Processed: 
18513. ----------------------------------------------------------
18514. !ZoneListByLine!
18515. ----------------------------------------------------------
18516. Zone Processing Step:
18517. !ZoneStepByLine!    
18518. ----------------------------------------------------------
18519. Current Zone:
18520. !ZoneFooter!
18521. ----------------------------------------------------------
18522. Volume Statistics:
18523. !VolumeStatisticsDetail!
18524. ----------------------------------------------------------
18525. Zone Detailed Report:
18526. ----------------------------------------------------------
18527. !ZoneStatisticsDetail!
18528. ----------------------------------------------------------
18529. ")
18530. 
18531. 
18532. 
18533. /* pause() */
18534. /* pause() */
18535. 
18536. 
18537. 
18538. 
18539. /* ---------------------------------------------------------- */
18540. 
18541. 
18542. /* ---------------------------------------------------------- */
18543. /* Zone Shares */
18544. /* ---------------------------------------------------------- */
18545. /* Zone Shares */
18546. SetVariable(ZoneLabel, "!ZoneLabelShares!")
18547. SetVariable(ZoneDescription, "!ZoneDescriptionShares!")
18548. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpShares!")
18549. SetVariable(ZoneGapSize, "!ZoneGapSizeShares!")
18550. SetVariable(ZoneTypeSelect,'# Shares start.
18551. # NotBlobsArchivesBu start.
18552. (not (
18553. # Blobs start.
18554. (
18555. # BlobsAndExceptions start.
18556. ( not(
18557.   FileName("*.bat")
18558.   or FileName("*.css")
18559.   or FileName("*.dll")
18560.   or FileName("*.exe")
18561.   or FileName("*.htm*")
18562.   or FileName("*.jar")
18563.   or FileName("*.js")
18564.   or FileName("*.script")
18565.   or FileName("*.wsf")
18566.   or (
18567. # Databases start.
18568. (
18569.   FileName("*.crypt*")
18570.   or FileName("*.db*")
18571.   or FileName("*.rdb*")
18572.   or FileName("*.dc*")
18573.   or FileName("*.dict*")
18574.   or FileName("*.?db*")
18575.   or FileName("*.?rdb*")
18576.   or FileName("*.md*")
18577.   or FileName("*.myd")
18578.   or FileName("*.ndf")
18579.   or FileName("*.ns?")
18580.   or FileName("*.pab")
18581.   or FileName("*.pst")
18582.   or FileName("*.sd?*")
18583.   or FileName("*.sq**")
18584.   or FileName("*.tmd")
18585.   or FileName("*.tps")
18586.   or FileName("*.tr*")
18587. )
18588. # Databases end.
18589. 
18590.     # BlobsAndExceptions
18591.     or 
18592. # Data start.
18593. (
18594.   DirectoryName("Data*")
18595.   or DirectoryName("Device*")
18596.   or DirectoryName("Export*")
18597.   or DirectoryName("Import*")
18598.   or DirectoryName("Log*")
18599.   or DirectoryName("*Log")
18600.   or DirectoryName("Maintenance*")
18601.   or DirectoryName("Rec*")
18602.   or DirectoryName("Sales*")
18603.   or DirectoryName("Search*")
18604.   or DirectoryName("User*")
18605. )
18606. # Data end.
18607. 
18608.     # BlobsAndExceptions
18609.   )
18610. ) )
18611. # BlobsAndExceptions end.
18612. 
18613. # Blobs
18614. ) and (
18615.   Size(BlobFileSize,0)
18616.   or (
18617.     FileName("*.arj")
18618.     or FileName("*.bup")
18619.     or FileName("*.bz2")
18620.     or FileName("*.chm")
18621.     or FileName("*.dvr-ms")
18622.     or FileName("*.gz")
18623.     or FileName("*.ifo")
18624.     or FileName("*.lzh")
18625.     or FileName("*.pdf")
18626.     or FileName("*.rpm")
18627.     or FileName("*.wmv")
18628.     or FileName("*.vob")
18629.     or FileName("*.z")
18630.   ) 
18631. )
18632. # Blobs end.
18633. 
18634. # NotBlobsArchivesBu
18635. or 
18636. # Archives start.
18637. (
18638.   DirectoryName("*Archive*")
18639.   or DirectoryName("*History*")
18640.   or DirectoryName("*Old")
18641.   or DirectoryName("* Old *")
18642.   or DirectoryName("Old *")
18643. 
18644.   or FileName("*.7z")
18645.   or FileName("*.cab")
18646.   or FileName("*.iso")
18647.   or FileName("*.msi")
18648.   or FileName("*.old")
18649.   or FileName("*.rar")
18650.   or FileName("*.tar")
18651.   or FileName("*.zip")
18652.   or
18653. # WinSysLow start.
18654. (
18655.   DirectoryName("$*")
18656.   or DirectoryName("0*")
18657.   or DirectoryName("1*")
18658.   or DirectoryName("2*")
18659.   or DirectoryName("3*")
18660.   or DirectoryName("4*")
18661.   or DirectoryName("5*")
18662.   or DirectoryName("6*")
18663.   or DirectoryName("7*")
18664.   or DirectoryName("8*")
18665.   or DirectoryName("9*")
18666. 
18667.   or DirectoryName("dllcache")
18668.   or DirectoryName("Downloaded Installations")
18669.   or DirectoryName("Ehome")
18670.   or DirectoryName("Fonts")
18671.   or DirectoryName("Help")
18672.   or DirectoryName("I386")
18673.   or DirectoryName("ie?updates")
18674.   or DirectoryName("Installer")
18675.   or DirectoryName("Installshield Installation Information")
18676.   or DirectoryName("IME")
18677.   or DirectoryName("*RECYCLE*")
18678.   or DirectoryName("ServicePackFiles")
18679.   or DirectoryName("SoftwareDistribution")
18680.   or DirectoryName("Speech")
18681.   or DirectoryName("Symbols")
18682.   or DirectoryName("System Volume Information")
18683.   or DirectoryName("windows.old")
18684. )
18685. # WinSysLow end.
18686. 
18687.   # Archives
18688. )
18689. # Archives end.
18690. 
18691. # NotBlobsArchivesBu
18692. or
18693. # Backups start.
18694. (
18695.   DirectoryName("*Backup*")
18696.   or DirectoryName("*Bu")
18697.   or DirectoryName("* Bu *")
18698.   or DirectoryName("Bu *")
18699. 
18700.   or FileName("*.bak")
18701.   or FileName("* - Copy*")
18702. )
18703. # Backups end.
18704. 
18705. # NotBlobsArchivesBu
18706. ) )
18707. # NotBlobsArchivesBu end.
18708. 
18709. # Shares
18710. and (
18711. # Share start.
18712. (
18713.   DirectoryName("*Common*")
18714.   or DirectoryName("Media*")
18715.   or DirectoryName("Multimedia*")
18716.   or DirectoryName("*Public*")
18717.   or DirectoryName("*Share*")
18718. )
18719. # Share end.
18720. 
18721. # Shares
18722. or 
18723. # Family start.
18724. (
18725.     DirectoryName("*Family*")
18726. )
18727. # Family end.
18728. 
18729. # Shares
18730. )
18731. # Shares end.
18732. ')
18733. 
18734. 	# Zone Do Header
18735. 
18736. # Zone When Started
18737. 
18738. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
18739. # Display Set Zone
18740. 
18741. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
18742. SetVariable(FileStepDescription,	"")
18743. 
18744. SetVariable(ZoneStepByLine, 			"Zone started.
18745. ")
18746. 
18747. # BANNER SET
18748. 
18749. # DATE TIME RUN ELP
18750. 
18751. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18752. /* Xinclude "..\Display\BannerSet.MyDc"X */
18753. /* pause(1) */
18754. 
18755. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18756. 
18757. Title('!Heading!')
18758. /* pause(1) */
18759. 
18760. /* NOTE: Can't round or truncate to integer precision. */
18761. 
18762. AppendLogfile("!LogFileName!", "!Title!")
18763. 
18764. 
18765. 
18766. pause(1)
18767. 
18768. 
18769. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
18770. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
18771. 
18772. SetVariable(ZoneStepNoCurrent, 0)
18773. 
18774. 
18775. # Zone Do Current Clear
18776. 
18777. SetVariable(ZoneTypeSelectCurrent, 		"")
18778. 
18779. SetVariable(ZoneBeginCurrent, 			0)
18780. SetVariable(ZoneBeginPerCurrent, 		0)
18781. SetVariable(ZoneEndCurrent, 			0)
18782. SetVariable(ZoneEndPerCurrent, 			0)
18783. 
18784. SetVariable(ZoneSizeCurrent,			0)
18785. SetVariable(ZoneSizePerCurrent,			0)
18786. 
18787. SetVariable(ZoneGapRequestedCurrent,	0)
18788. SetVariable(ZoneGapRoundedCurrent, 		0)
18789. SetVariable(ZoneGapAdjustedCurrent, 	0)
18790. SetVariable(ZoneGapAvailableCurrent, 	0)
18791. SetVariable(ZoneGapCurrent,				0)
18792. SetVariable(ZoneGapUsedCurrent, 		0)
18793. 
18794. SetVariable(ZoneGapActualCurrent, 		0)
18795. SetVariable(ZoneGapActualPerCurrent, 	0)
18796. 
18797. SetVariable(ZoneSizeActual, 			0)
18798. SetVariable(ZoneSizeActualCurrent,		0)
18799. 
18800. SetVariable(ZoneEndActual, 				0)
18801. SetVariable(ZoneEndActualCurrent,		0)			
18802. SetVariable(ZoneSizeActualPerCurrent, 	0)
18803.       
18804. SetVariable(ZoneFilesFolders,			0)
18805. SetVariable(ZoneFilesFoldersPer,		0) 
18806. 
18807. SetVariable(ZoneFragments,				0)
18808. SetVariable(ZoneFragmentsPer,			0) 
18809. 		
18810. SetVariable(ZoneEndActualCurrent, 		0)
18811. SetVariable(ZoneEndActualPerCurrent, 	0)
18812. 
18813. # Gap Calculation Methodology:
18814. 	# Requested
18815. 	SetVariable(GapRequested, 			0) 
18816. 	SetVariable(GapRequestedStd, 		0) 
18817. 	SetVariable(GapRequestedMft, 		0) 
18818. 	SetVariable(GapRequestedOs, 		0) 
18819. 	SetVariable(GapRequestedOriginal, 	0) 
18820. 	
18821. 	# Gap Adjustments
18822. 	SetVariable(GapRounded, 			0)
18823. 	# SetVariable(GapAdjusted, 			0)
18824. 	SetVariable(GapAvailable, 			0)
18825. 	SetVariable(GapCurrent, 			0)
18826. 	SetVariable(GapActual, 				0)
18827. 	SetVariable(GapUsed, 				0)
18828. 	
18829. 	# Gap Adjustments
18830. 	SetVariable(GapRoundedLoc, 			0)
18831. 	# SetVariable(GapAdjustedLoc, 		0)
18832. 	SetVariable(GapAvailableLoc, 		0)
18833. 	SetVariable(GapCurrentLoc, 			0)
18834. 	SetVariable(GapActualLoc,			0)
18835. 	SetVariable(GapUsedLoc,				0)
18836. 	
18837. 	# Space usage
18838. 	SetVariable(ZoneFreePerRequested, 	0)
18839. 	SetVariable(ZoneFreePerUsed, 		0)
18840. 
18841. # Gap Size & Rounding
18842. 	SetVariable(ZoneGapSizePer, 		0)
18843. 	SetVariable(ZoneVolRoundUpPer, 		0)
18844. 	
18845. 	# Free Space
18846. 	SetVariable(ZoneFreeUsedPer, 		0)
18847. 	SetVariable(ZoneFreeRequestedPer, 	0)
18848. 
18849. 
18850. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
18851. 
18852. # Footer:
18853. SetVariable(ZoneFooter, "----------------------------------------------------------
18854. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
18855. 
18856. Statistics Report:
18857. ------------------
18858.    Size:  
18859.    ------------------------
18860.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
18861.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
18862.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
18863. 
18864.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
18865.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
18866. 
18867.    Location:
18868.    ------------------------
18869.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
18870.              Files End: !ZoneEndCurrent!
18871.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
18872.       
18873.    Gap Settings:
18874.    ------------------------
18875.          Gap Requested: !ZoneGapSizePer!%
18876.       Volume Rounding: !ZoneVolRoundUpPer!%
18877.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
18878.                  
18879.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
18880.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
18881.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
18882.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
18883.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
18884.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
18885.      
18886.    Free Space after Zone:
18887.    ------------------------
18888.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
18889.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
18890.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
18891. 
18892. Directory and Files Select:
18893. ---------------------------
18894. !ZoneTypeSelectCurrent!               
18895. ---------------------------
18896. ----------------------------------------------------------
18897. ")
18898. 
18899. # BANNER SET
18900. 
18901. # DATE TIME RUN ELP
18902. 
18903. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18904. /* Xinclude "..\Display\BannerSet.MyDc"X */
18905. /* pause(1) */
18906. 
18907. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18908. 
18909. Title('!Heading!')
18910. /* pause(1) */
18911. 
18912. /* NOTE: Can't round or truncate to integer precision. */
18913. 
18914. AppendLogfile("!LogFileName!", "!Title!")
18915. 
18916. 
18917. 
18918. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
18919. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
18920. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:20")
18921. 
18922. SetVariable(ZoneListByLine, "!ZoneListByLine!
18923. Zone: !ZoneNoCurrent! 2021-11-09 08:17:20 0:00:08 !ZoneLabel! !ZoneDescription!")
18924. 
18925. 
18926. /* Fixed Zone Position Handling */
18927. /* Literal number: */
18928. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
18929. /* Percentage of disk: */
18930. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
18931. /* Gap */
18932. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
18933. 
18934. /* ---------------------------------------------------------- */
18935. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
18936. # FILE STEP
18937. 
18938. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
18939. 
18940. /* add message and move to a new line. */
18941. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
18942. ")
18943. 
18944. /* display the line. (hopefully.) */
18945. # Zone Footer Set Statistics Window Text
18946. 
18947. SetStatisticsWindowText("----------------------------------------------------------
18948. Zones Processed: 
18949. ----------------------------------------------------------
18950. !ZoneListByLine!
18951. ----------------------------------------------------------
18952. Zone Processing Step:
18953. !ZoneStepByLine!    
18954. ----------------------------------------------------------
18955. Current Zone:
18956. !ZoneFooter!
18957. ----------------------------------------------------------
18958. Volume Statistics:
18959. !VolumeStatisticsDetail!
18960. ----------------------------------------------------------
18961. Zone Detailed Report:
18962. ----------------------------------------------------------
18963. !ZoneStatisticsDetail!
18964. ----------------------------------------------------------
18965. ")
18966. 
18967. 
18968. 
18969. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
18970. 
18971. # BANNER SET
18972. 
18973. # DATE TIME RUN ELP
18974. 
18975. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
18976. /* Xinclude "..\Display\BannerSet.MyDc"X */
18977. /* pause(1) */
18978. 
18979. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
18980. 
18981. Title('!Heading!')
18982. /* pause(1) */
18983. 
18984. /* NOTE: Can't round or truncate to integer precision. */
18985. 
18986. pause(1)
18987. 
18988. # your stuff HERE (X)... pre file select code.
18989. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
18990. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
18991. 	# (X)
18992. 
18993. FileSelect
18994. 
18995. 	# your stuff can't really go here (errors.)
18996. 	# maybe for some reason I don't know of...
18997. 	
18998. 	# Actions next...
18999. 	# Shares start.
19000. # NotBlobsArchivesBu start.
19001. (not (
19002. # Blobs start.
19003. (
19004. # BlobsAndExceptions start.
19005. ( not(
19006.   FileName("*.bat")
19007.   or FileName("*.css")
19008.   or FileName("*.dll")
19009.   or FileName("*.exe")
19010.   or FileName("*.htm*")
19011.   or FileName("*.jar")
19012.   or FileName("*.js")
19013.   or FileName("*.script")
19014.   or FileName("*.wsf")
19015.   or (
19016. # Databases start.
19017. (
19018.   FileName("*.crypt*")
19019.   or FileName("*.db*")
19020.   or FileName("*.rdb*")
19021.   or FileName("*.dc*")
19022.   or FileName("*.dict*")
19023.   or FileName("*.?db*")
19024.   or FileName("*.?rdb*")
19025.   or FileName("*.md*")
19026.   or FileName("*.myd")
19027.   or FileName("*.ndf")
19028.   or FileName("*.ns?")
19029.   or FileName("*.pab")
19030.   or FileName("*.pst")
19031.   or FileName("*.sd?*")
19032.   or FileName("*.sq**")
19033.   or FileName("*.tmd")
19034.   or FileName("*.tps")
19035.   or FileName("*.tr*")
19036. )
19037. # Databases end.
19038. 
19039.     # BlobsAndExceptions
19040.     or 
19041. # Data start.
19042. (
19043.   DirectoryName("Data*")
19044.   or DirectoryName("Device*")
19045.   or DirectoryName("Export*")
19046.   or DirectoryName("Import*")
19047.   or DirectoryName("Log*")
19048.   or DirectoryName("*Log")
19049.   or DirectoryName("Maintenance*")
19050.   or DirectoryName("Rec*")
19051.   or DirectoryName("Sales*")
19052.   or DirectoryName("Search*")
19053.   or DirectoryName("User*")
19054. )
19055. # Data end.
19056. 
19057.     # BlobsAndExceptions
19058.   )
19059. ) )
19060. # BlobsAndExceptions end.
19061. 
19062. # Blobs
19063. ) and (
19064.   Size(BlobFileSize,0)
19065.   or (
19066.     FileName("*.arj")
19067.     or FileName("*.bup")
19068.     or FileName("*.bz2")
19069.     or FileName("*.chm")
19070.     or FileName("*.dvr-ms")
19071.     or FileName("*.gz")
19072.     or FileName("*.ifo")
19073.     or FileName("*.lzh")
19074.     or FileName("*.pdf")
19075.     or FileName("*.rpm")
19076.     or FileName("*.wmv")
19077.     or FileName("*.vob")
19078.     or FileName("*.z")
19079.   ) 
19080. )
19081. # Blobs end.
19082. 
19083. # NotBlobsArchivesBu
19084. or 
19085. # Archives start.
19086. (
19087.   DirectoryName("*Archive*")
19088.   or DirectoryName("*History*")
19089.   or DirectoryName("*Old")
19090.   or DirectoryName("* Old *")
19091.   or DirectoryName("Old *")
19092. 
19093.   or FileName("*.7z")
19094.   or FileName("*.cab")
19095.   or FileName("*.iso")
19096.   or FileName("*.msi")
19097.   or FileName("*.old")
19098.   or FileName("*.rar")
19099.   or FileName("*.tar")
19100.   or FileName("*.zip")
19101.   or
19102. # WinSysLow start.
19103. (
19104.   DirectoryName("$*")
19105.   or DirectoryName("0*")
19106.   or DirectoryName("1*")
19107.   or DirectoryName("2*")
19108.   or DirectoryName("3*")
19109.   or DirectoryName("4*")
19110.   or DirectoryName("5*")
19111.   or DirectoryName("6*")
19112.   or DirectoryName("7*")
19113.   or DirectoryName("8*")
19114.   or DirectoryName("9*")
19115. 
19116.   or DirectoryName("dllcache")
19117.   or DirectoryName("Downloaded Installations")
19118.   or DirectoryName("Ehome")
19119.   or DirectoryName("Fonts")
19120.   or DirectoryName("Help")
19121.   or DirectoryName("I386")
19122.   or DirectoryName("ie?updates")
19123.   or DirectoryName("Installer")
19124.   or DirectoryName("Installshield Installation Information")
19125.   or DirectoryName("IME")
19126.   or DirectoryName("*RECYCLE*")
19127.   or DirectoryName("ServicePackFiles")
19128.   or DirectoryName("SoftwareDistribution")
19129.   or DirectoryName("Speech")
19130.   or DirectoryName("Symbols")
19131.   or DirectoryName("System Volume Information")
19132.   or DirectoryName("windows.old")
19133. )
19134. # WinSysLow end.
19135. 
19136.   # Archives
19137. )
19138. # Archives end.
19139. 
19140. # NotBlobsArchivesBu
19141. or
19142. # Backups start.
19143. (
19144.   DirectoryName("*Backup*")
19145.   or DirectoryName("*Bu")
19146.   or DirectoryName("* Bu *")
19147.   or DirectoryName("Bu *")
19148. 
19149.   or FileName("*.bak")
19150.   or FileName("* - Copy*")
19151. )
19152. # Backups end.
19153. 
19154. # NotBlobsArchivesBu
19155. ) )
19156. # NotBlobsArchivesBu end.
19157. 
19158. # Shares
19159. and (
19160. # Share start.
19161. (
19162.   DirectoryName("*Common*")
19163.   or DirectoryName("Media*")
19164.   or DirectoryName("Multimedia*")
19165.   or DirectoryName("*Public*")
19166.   or DirectoryName("*Share*")
19167. )
19168. # Share end.
19169. 
19170. # Shares
19171. or 
19172. # Family start.
19173. (
19174.     DirectoryName("*Family*")
19175. )
19176. # Family end.
19177. 
19178. # Shares
19179. )
19180. # Shares end.
19181. 
19182. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
19183. 
19184. 	# Zone Do Footer
19185. 
19186. /* ---------------------------------------------------------- */
19187. # File Select
19188. 	# Select Statments
19189. # File Actions 
19190. 	# Standard or OS File Actions.
19191. 	# Resume...
19192. 	
19193. 	# your stuff HERE (X)... post zone (file) file actions code.
19194. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
19195. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
19196. 		# (X)
19197. 		
19198. 		/* ??? Set window? */
19199. 	
19200. 	# ADD THE GAP
19201. 		
19202. # Vacate (good for diagnostics)
19203. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
19204. 
19205. # DoNotVacate - DO NOT Vacate (recommended)
19206. 
19207. # Vacate
19208. /* AddGap(GapUsedLoc) */
19209. 
19210. # DO Not Vacate
19211. AddGap(GapUsedLoc, DoNotVacate) 
19212. 	
19213. 	
19214. /* ---------------------------------------------------------- */
19215. # (failed) TEST for boolean logic.
19216. 
19217. /* It should work in the gap calculations for turning options */
19218. /* on and off but it will NOT work here. */
19219. 
19220. /* Boolean setting X or FlagX. */
19221. /* Where X will be on or off: */
19222. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
19223. /*      For ON:  (X  *  FlagAny) */
19224. 
19225. /* 1) Failed, zero gap overrode the previous one. */
19226. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
19227. /* AddGap(GapUsedTemp) */ 
19228. 
19229. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
19230. /* AddGap(GapUsedTemp, DoNotVacate) */ 
19231. 
19232. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
19233. 
19234. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
19235. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
19236. /* AddGap(GapUsedTemp) */ 
19237. 
19238. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
19239. /* AddGap(GapUsedTemp, DoNotVacate) */ 
19240. 
19241. /* ---------------------------------------------------------- */
19242. 
19243. # Vacate
19244. /* AddGap(GapUsed) */
19245. 
19246. # DO NOT Vacate (recommended)
19247. /* AddGap(GapUsed, DoNotVacate) */ 
19248. 	
19249. 
19250. 		
19251. # 
19252. FileEnd
19253. /* ---------------------------------------------------------- */
19254. 
19255. # your stuff HERE (X)... post zone (file) code.
19256. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
19257. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
19258. 	# (X)
19259. 
19260. SetVariable(FileStepDescription,"Zone finished, reporting.")
19261. # FILE STEP
19262. 
19263. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
19264. 
19265. /* add message and move to a new line. */
19266. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
19267. ")
19268. 
19269. /* display the line. (hopefully.) */
19270. # Zone Footer Set Statistics Window Text
19271. 
19272. SetStatisticsWindowText("----------------------------------------------------------
19273. Zones Processed: 
19274. ----------------------------------------------------------
19275. !ZoneListByLine!
19276. ----------------------------------------------------------
19277. Zone Processing Step:
19278. !ZoneStepByLine!    
19279. ----------------------------------------------------------
19280. Current Zone:
19281. !ZoneFooter!
19282. ----------------------------------------------------------
19283. Volume Statistics:
19284. !VolumeStatisticsDetail!
19285. ----------------------------------------------------------
19286. Zone Detailed Report:
19287. ----------------------------------------------------------
19288. !ZoneStatisticsDetail!
19289. ----------------------------------------------------------
19290. ")
19291. 
19292. 
19293. 
19294. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
19295. 
19296. # BANNER SET
19297. 
19298. # DATE TIME RUN ELP
19299. 
19300. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
19301. /* Xinclude "..\Display\BannerSet.MyDc"X */
19302. /* pause(1) */
19303. 
19304. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
19305. 
19306. Title('!Heading!')
19307. /* pause(1) */
19308. 
19309. /* NOTE: Can't round or truncate to integer precision. */
19310. 
19311. pause(1)
19312. 
19313. # Zone When Finished
19314. 
19315. # BANNER SET
19316. 
19317. # DATE TIME RUN ELP
19318. 
19319. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
19320. /* Xinclude "..\Display\BannerSet.MyDc"X */
19321. /* pause(1) */
19322. 
19323. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
19324. 
19325. Title('!Heading!')
19326. /* pause(1) */
19327. 
19328. /* NOTE: Can't round or truncate to integer precision. */
19329. 
19330. AppendLogfile("!LogFileName!", "!Title!")
19331. 
19332. 
19333. 
19334. # Zone Statistics	
19335. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
19336. 
19337. # Footer:
19338. SetVariable(ZoneFooter, "----------------------------------------------------------
19339. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
19340. 
19341. Statistics Report:
19342. ------------------
19343.    Size:  
19344.    ------------------------
19345.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
19346.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
19347.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
19348. 
19349.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
19350.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
19351. 
19352.    Location:
19353.    ------------------------
19354.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
19355.              Files End: !ZoneEndCurrent!
19356.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
19357.       
19358.    Gap Settings:
19359.    ------------------------
19360.          Gap Requested: !ZoneGapSizePer!%
19361.       Volume Rounding: !ZoneVolRoundUpPer!%
19362.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
19363.                  
19364.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
19365.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
19366.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
19367.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
19368.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
19369.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
19370.      
19371.    Free Space after Zone:
19372.    ------------------------
19373.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
19374.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
19375.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
19376. 
19377. Directory and Files Select:
19378. ---------------------------
19379. !ZoneTypeSelectCurrent!               
19380. ---------------------------
19381. ----------------------------------------------------------
19382. ")
19383. 
19384. AppendLogfile("!LogFileName!", ".")
19385. AppendLogfile("!LogFileName!", "!ZoneFooter!")
19386. AppendLogfile("!LogFileName!", ".")
19387. 
19388. # Zone Footer Set Statistics Window Text
19389. 
19390. SetStatisticsWindowText("----------------------------------------------------------
19391. Zones Processed: 
19392. ----------------------------------------------------------
19393. !ZoneListByLine!
19394. ----------------------------------------------------------
19395. Zone Processing Step:
19396. !ZoneStepByLine!    
19397. ----------------------------------------------------------
19398. Current Zone:
19399. !ZoneFooter!
19400. ----------------------------------------------------------
19401. Volume Statistics:
19402. !VolumeStatisticsDetail!
19403. ----------------------------------------------------------
19404. Zone Detailed Report:
19405. ----------------------------------------------------------
19406. !ZoneStatisticsDetail!
19407. ----------------------------------------------------------
19408. ")
19409. 
19410. 
19411. 
19412. /* pause() */
19413. /* pause() */
19414. 
19415. 
19416. 
19417. 
19418. /* ---------------------------------------------------------- */
19419. 
19420. 
19421. /* ---------------------------------------------------------- */
19422. /* Zone SystemOtherData System Other and Data */
19423. /* ---------------------------------------------------------- */
19424. /* Zone SystemOtherData System Other and Data */
19425. SetVariable(ZoneLabel, "!ZoneLabelSystemOtherData!")
19426. SetVariable(ZoneDescription, "!ZoneDescriptionSystemOtherData!")
19427. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpSystemOtherData!")
19428. SetVariable(ZoneGapSize, "!ZoneGapSizeSystemOtherData!")
19429. SetVariable(ZoneTypeSelect,'# SystemOtherData start.
19430. # NotBlobsArchivesBu start.
19431. (not (
19432. # Blobs start.
19433. (
19434. # BlobsAndExceptions start.
19435. ( not(
19436.   FileName("*.bat")
19437.   or FileName("*.css")
19438.   or FileName("*.dll")
19439.   or FileName("*.exe")
19440.   or FileName("*.htm*")
19441.   or FileName("*.jar")
19442.   or FileName("*.js")
19443.   or FileName("*.script")
19444.   or FileName("*.wsf")
19445.   or (
19446. # Databases start.
19447. (
19448.   FileName("*.crypt*")
19449.   or FileName("*.db*")
19450.   or FileName("*.rdb*")
19451.   or FileName("*.dc*")
19452.   or FileName("*.dict*")
19453.   or FileName("*.?db*")
19454.   or FileName("*.?rdb*")
19455.   or FileName("*.md*")
19456.   or FileName("*.myd")
19457.   or FileName("*.ndf")
19458.   or FileName("*.ns?")
19459.   or FileName("*.pab")
19460.   or FileName("*.pst")
19461.   or FileName("*.sd?*")
19462.   or FileName("*.sq**")
19463.   or FileName("*.tmd")
19464.   or FileName("*.tps")
19465.   or FileName("*.tr*")
19466. )
19467. # Databases end.
19468. 
19469.     # BlobsAndExceptions
19470.     or 
19471. # Data start.
19472. (
19473.   DirectoryName("Data*")
19474.   or DirectoryName("Device*")
19475.   or DirectoryName("Export*")
19476.   or DirectoryName("Import*")
19477.   or DirectoryName("Log*")
19478.   or DirectoryName("*Log")
19479.   or DirectoryName("Maintenance*")
19480.   or DirectoryName("Rec*")
19481.   or DirectoryName("Sales*")
19482.   or DirectoryName("Search*")
19483.   or DirectoryName("User*")
19484. )
19485. # Data end.
19486. 
19487.     # BlobsAndExceptions
19488.   )
19489. ) )
19490. # BlobsAndExceptions end.
19491. 
19492. # Blobs
19493. ) and (
19494.   Size(BlobFileSize,0)
19495.   or (
19496.     FileName("*.arj")
19497.     or FileName("*.bup")
19498.     or FileName("*.bz2")
19499.     or FileName("*.chm")
19500.     or FileName("*.dvr-ms")
19501.     or FileName("*.gz")
19502.     or FileName("*.ifo")
19503.     or FileName("*.lzh")
19504.     or FileName("*.pdf")
19505.     or FileName("*.rpm")
19506.     or FileName("*.wmv")
19507.     or FileName("*.vob")
19508.     or FileName("*.z")
19509.   ) 
19510. )
19511. # Blobs end.
19512. 
19513. # NotBlobsArchivesBu
19514. or 
19515. # Archives start.
19516. (
19517.   DirectoryName("*Archive*")
19518.   or DirectoryName("*History*")
19519.   or DirectoryName("*Old")
19520.   or DirectoryName("* Old *")
19521.   or DirectoryName("Old *")
19522. 
19523.   or FileName("*.7z")
19524.   or FileName("*.cab")
19525.   or FileName("*.iso")
19526.   or FileName("*.msi")
19527.   or FileName("*.old")
19528.   or FileName("*.rar")
19529.   or FileName("*.tar")
19530.   or FileName("*.zip")
19531.   or
19532. # WinSysLow start.
19533. (
19534.   DirectoryName("$*")
19535.   or DirectoryName("0*")
19536.   or DirectoryName("1*")
19537.   or DirectoryName("2*")
19538.   or DirectoryName("3*")
19539.   or DirectoryName("4*")
19540.   or DirectoryName("5*")
19541.   or DirectoryName("6*")
19542.   or DirectoryName("7*")
19543.   or DirectoryName("8*")
19544.   or DirectoryName("9*")
19545. 
19546.   or DirectoryName("dllcache")
19547.   or DirectoryName("Downloaded Installations")
19548.   or DirectoryName("Ehome")
19549.   or DirectoryName("Fonts")
19550.   or DirectoryName("Help")
19551.   or DirectoryName("I386")
19552.   or DirectoryName("ie?updates")
19553.   or DirectoryName("Installer")
19554.   or DirectoryName("Installshield Installation Information")
19555.   or DirectoryName("IME")
19556.   or DirectoryName("*RECYCLE*")
19557.   or DirectoryName("ServicePackFiles")
19558.   or DirectoryName("SoftwareDistribution")
19559.   or DirectoryName("Speech")
19560.   or DirectoryName("Symbols")
19561.   or DirectoryName("System Volume Information")
19562.   or DirectoryName("windows.old")
19563. )
19564. # WinSysLow end.
19565. 
19566.   # Archives
19567. )
19568. # Archives end.
19569. 
19570. # NotBlobsArchivesBu
19571. or
19572. # Backups start.
19573. (
19574.   DirectoryName("*Backup*")
19575.   or DirectoryName("*Bu")
19576.   or DirectoryName("* Bu *")
19577.   or DirectoryName("Bu *")
19578. 
19579.   or FileName("*.bak")
19580.   or FileName("* - Copy*")
19581. )
19582. # Backups end.
19583. 
19584. # NotBlobsArchivesBu
19585. ) )
19586. # NotBlobsArchivesBu end.
19587. 
19588. # SystemOtherData
19589. and ( 
19590. # Data start.
19591. (
19592.   DirectoryName("Data*")
19593.   or DirectoryName("Device*")
19594.   or DirectoryName("Export*")
19595.   or DirectoryName("Import*")
19596.   or DirectoryName("Log*")
19597.   or DirectoryName("*Log")
19598.   or DirectoryName("Maintenance*")
19599.   or DirectoryName("Rec*")
19600.   or DirectoryName("Sales*")
19601.   or DirectoryName("Search*")
19602.   or DirectoryName("User*")
19603. )
19604. # Data end.
19605.  
19606. # SystemOtherData
19607. or  
19608. # Databases start.
19609. (
19610.   FileName("*.crypt*")
19611.   or FileName("*.db*")
19612.   or FileName("*.rdb*")
19613.   or FileName("*.dc*")
19614.   or FileName("*.dict*")
19615.   or FileName("*.?db*")
19616.   or FileName("*.?rdb*")
19617.   or FileName("*.md*")
19618.   or FileName("*.myd")
19619.   or FileName("*.ndf")
19620.   or FileName("*.ns?")
19621.   or FileName("*.pab")
19622.   or FileName("*.pst")
19623.   or FileName("*.sd?*")
19624.   or FileName("*.sq**")
19625.   or FileName("*.tmd")
19626.   or FileName("*.tps")
19627.   or FileName("*.tr*")
19628. )
19629. # Databases end.
19630. 
19631. # SystemOtherData
19632. )
19633. # SystemOtherData end.
19634. ')
19635. 
19636. 	# Zone Do Header
19637. 
19638. # Zone When Started
19639. 
19640. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
19641. # Display Set Zone
19642. 
19643. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
19644. SetVariable(FileStepDescription,	"")
19645. 
19646. SetVariable(ZoneStepByLine, 			"Zone started.
19647. ")
19648. 
19649. # BANNER SET
19650. 
19651. # DATE TIME RUN ELP
19652. 
19653. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
19654. /* Xinclude "..\Display\BannerSet.MyDc"X */
19655. /* pause(1) */
19656. 
19657. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
19658. 
19659. Title('!Heading!')
19660. /* pause(1) */
19661. 
19662. /* NOTE: Can't round or truncate to integer precision. */
19663. 
19664. AppendLogfile("!LogFileName!", "!Title!")
19665. 
19666. 
19667. 
19668. pause(1)
19669. 
19670. 
19671. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
19672. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
19673. 
19674. SetVariable(ZoneStepNoCurrent, 0)
19675. 
19676. 
19677. # Zone Do Current Clear
19678. 
19679. SetVariable(ZoneTypeSelectCurrent, 		"")
19680. 
19681. SetVariable(ZoneBeginCurrent, 			0)
19682. SetVariable(ZoneBeginPerCurrent, 		0)
19683. SetVariable(ZoneEndCurrent, 			0)
19684. SetVariable(ZoneEndPerCurrent, 			0)
19685. 
19686. SetVariable(ZoneSizeCurrent,			0)
19687. SetVariable(ZoneSizePerCurrent,			0)
19688. 
19689. SetVariable(ZoneGapRequestedCurrent,	0)
19690. SetVariable(ZoneGapRoundedCurrent, 		0)
19691. SetVariable(ZoneGapAdjustedCurrent, 	0)
19692. SetVariable(ZoneGapAvailableCurrent, 	0)
19693. SetVariable(ZoneGapCurrent,				0)
19694. SetVariable(ZoneGapUsedCurrent, 		0)
19695. 
19696. SetVariable(ZoneGapActualCurrent, 		0)
19697. SetVariable(ZoneGapActualPerCurrent, 	0)
19698. 
19699. SetVariable(ZoneSizeActual, 			0)
19700. SetVariable(ZoneSizeActualCurrent,		0)
19701. 
19702. SetVariable(ZoneEndActual, 				0)
19703. SetVariable(ZoneEndActualCurrent,		0)			
19704. SetVariable(ZoneSizeActualPerCurrent, 	0)
19705.       
19706. SetVariable(ZoneFilesFolders,			0)
19707. SetVariable(ZoneFilesFoldersPer,		0) 
19708. 
19709. SetVariable(ZoneFragments,				0)
19710. SetVariable(ZoneFragmentsPer,			0) 
19711. 		
19712. SetVariable(ZoneEndActualCurrent, 		0)
19713. SetVariable(ZoneEndActualPerCurrent, 	0)
19714. 
19715. # Gap Calculation Methodology:
19716. 	# Requested
19717. 	SetVariable(GapRequested, 			0) 
19718. 	SetVariable(GapRequestedStd, 		0) 
19719. 	SetVariable(GapRequestedMft, 		0) 
19720. 	SetVariable(GapRequestedOs, 		0) 
19721. 	SetVariable(GapRequestedOriginal, 	0) 
19722. 	
19723. 	# Gap Adjustments
19724. 	SetVariable(GapRounded, 			0)
19725. 	# SetVariable(GapAdjusted, 			0)
19726. 	SetVariable(GapAvailable, 			0)
19727. 	SetVariable(GapCurrent, 			0)
19728. 	SetVariable(GapActual, 				0)
19729. 	SetVariable(GapUsed, 				0)
19730. 	
19731. 	# Gap Adjustments
19732. 	SetVariable(GapRoundedLoc, 			0)
19733. 	# SetVariable(GapAdjustedLoc, 		0)
19734. 	SetVariable(GapAvailableLoc, 		0)
19735. 	SetVariable(GapCurrentLoc, 			0)
19736. 	SetVariable(GapActualLoc,			0)
19737. 	SetVariable(GapUsedLoc,				0)
19738. 	
19739. 	# Space usage
19740. 	SetVariable(ZoneFreePerRequested, 	0)
19741. 	SetVariable(ZoneFreePerUsed, 		0)
19742. 
19743. # Gap Size & Rounding
19744. 	SetVariable(ZoneGapSizePer, 		0)
19745. 	SetVariable(ZoneVolRoundUpPer, 		0)
19746. 	
19747. 	# Free Space
19748. 	SetVariable(ZoneFreeUsedPer, 		0)
19749. 	SetVariable(ZoneFreeRequestedPer, 	0)
19750. 
19751. 
19752. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
19753. 
19754. # Footer:
19755. SetVariable(ZoneFooter, "----------------------------------------------------------
19756. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
19757. 
19758. Statistics Report:
19759. ------------------
19760.    Size:  
19761.    ------------------------
19762.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
19763.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
19764.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
19765. 
19766.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
19767.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
19768. 
19769.    Location:
19770.    ------------------------
19771.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
19772.              Files End: !ZoneEndCurrent!
19773.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
19774.       
19775.    Gap Settings:
19776.    ------------------------
19777.          Gap Requested: !ZoneGapSizePer!%
19778.       Volume Rounding: !ZoneVolRoundUpPer!%
19779.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
19780.                  
19781.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
19782.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
19783.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
19784.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
19785.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
19786.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
19787.      
19788.    Free Space after Zone:
19789.    ------------------------
19790.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
19791.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
19792.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
19793. 
19794. Directory and Files Select:
19795. ---------------------------
19796. !ZoneTypeSelectCurrent!               
19797. ---------------------------
19798. ----------------------------------------------------------
19799. ")
19800. 
19801. # BANNER SET
19802. 
19803. # DATE TIME RUN ELP
19804. 
19805. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
19806. /* Xinclude "..\Display\BannerSet.MyDc"X */
19807. /* pause(1) */
19808. 
19809. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
19810. 
19811. Title('!Heading!')
19812. /* pause(1) */
19813. 
19814. /* NOTE: Can't round or truncate to integer precision. */
19815. 
19816. AppendLogfile("!LogFileName!", "!Title!")
19817. 
19818. 
19819. 
19820. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
19821. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
19822. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:20")
19823. 
19824. SetVariable(ZoneListByLine, "!ZoneListByLine!
19825. Zone: !ZoneNoCurrent! 2021-11-09 08:17:20 0:00:08 !ZoneLabel! !ZoneDescription!")
19826. 
19827. 
19828. /* Fixed Zone Position Handling */
19829. /* Literal number: */
19830. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
19831. /* Percentage of disk: */
19832. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
19833. /* Gap */
19834. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
19835. 
19836. /* ---------------------------------------------------------- */
19837. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
19838. # FILE STEP
19839. 
19840. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
19841. 
19842. /* add message and move to a new line. */
19843. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
19844. ")
19845. 
19846. /* display the line. (hopefully.) */
19847. # Zone Footer Set Statistics Window Text
19848. 
19849. SetStatisticsWindowText("----------------------------------------------------------
19850. Zones Processed: 
19851. ----------------------------------------------------------
19852. !ZoneListByLine!
19853. ----------------------------------------------------------
19854. Zone Processing Step:
19855. !ZoneStepByLine!    
19856. ----------------------------------------------------------
19857. Current Zone:
19858. !ZoneFooter!
19859. ----------------------------------------------------------
19860. Volume Statistics:
19861. !VolumeStatisticsDetail!
19862. ----------------------------------------------------------
19863. Zone Detailed Report:
19864. ----------------------------------------------------------
19865. !ZoneStatisticsDetail!
19866. ----------------------------------------------------------
19867. ")
19868. 
19869. 
19870. 
19871. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
19872. 
19873. # BANNER SET
19874. 
19875. # DATE TIME RUN ELP
19876. 
19877. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
19878. /* Xinclude "..\Display\BannerSet.MyDc"X */
19879. /* pause(1) */
19880. 
19881. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
19882. 
19883. Title('!Heading!')
19884. /* pause(1) */
19885. 
19886. /* NOTE: Can't round or truncate to integer precision. */
19887. 
19888. pause(1)
19889. 
19890. # your stuff HERE (X)... pre file select code.
19891. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
19892. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
19893. 	# (X)
19894. 
19895. FileSelect
19896. 
19897. 	# your stuff can't really go here (errors.)
19898. 	# maybe for some reason I don't know of...
19899. 	
19900. 	# Actions next...
19901. 	# SystemOtherData start.
19902. # NotBlobsArchivesBu start.
19903. (not (
19904. # Blobs start.
19905. (
19906. # BlobsAndExceptions start.
19907. ( not(
19908.   FileName("*.bat")
19909.   or FileName("*.css")
19910.   or FileName("*.dll")
19911.   or FileName("*.exe")
19912.   or FileName("*.htm*")
19913.   or FileName("*.jar")
19914.   or FileName("*.js")
19915.   or FileName("*.script")
19916.   or FileName("*.wsf")
19917.   or (
19918. # Databases start.
19919. (
19920.   FileName("*.crypt*")
19921.   or FileName("*.db*")
19922.   or FileName("*.rdb*")
19923.   or FileName("*.dc*")
19924.   or FileName("*.dict*")
19925.   or FileName("*.?db*")
19926.   or FileName("*.?rdb*")
19927.   or FileName("*.md*")
19928.   or FileName("*.myd")
19929.   or FileName("*.ndf")
19930.   or FileName("*.ns?")
19931.   or FileName("*.pab")
19932.   or FileName("*.pst")
19933.   or FileName("*.sd?*")
19934.   or FileName("*.sq**")
19935.   or FileName("*.tmd")
19936.   or FileName("*.tps")
19937.   or FileName("*.tr*")
19938. )
19939. # Databases end.
19940. 
19941.     # BlobsAndExceptions
19942.     or 
19943. # Data start.
19944. (
19945.   DirectoryName("Data*")
19946.   or DirectoryName("Device*")
19947.   or DirectoryName("Export*")
19948.   or DirectoryName("Import*")
19949.   or DirectoryName("Log*")
19950.   or DirectoryName("*Log")
19951.   or DirectoryName("Maintenance*")
19952.   or DirectoryName("Rec*")
19953.   or DirectoryName("Sales*")
19954.   or DirectoryName("Search*")
19955.   or DirectoryName("User*")
19956. )
19957. # Data end.
19958. 
19959.     # BlobsAndExceptions
19960.   )
19961. ) )
19962. # BlobsAndExceptions end.
19963. 
19964. # Blobs
19965. ) and (
19966.   Size(BlobFileSize,0)
19967.   or (
19968.     FileName("*.arj")
19969.     or FileName("*.bup")
19970.     or FileName("*.bz2")
19971.     or FileName("*.chm")
19972.     or FileName("*.dvr-ms")
19973.     or FileName("*.gz")
19974.     or FileName("*.ifo")
19975.     or FileName("*.lzh")
19976.     or FileName("*.pdf")
19977.     or FileName("*.rpm")
19978.     or FileName("*.wmv")
19979.     or FileName("*.vob")
19980.     or FileName("*.z")
19981.   ) 
19982. )
19983. # Blobs end.
19984. 
19985. # NotBlobsArchivesBu
19986. or 
19987. # Archives start.
19988. (
19989.   DirectoryName("*Archive*")
19990.   or DirectoryName("*History*")
19991.   or DirectoryName("*Old")
19992.   or DirectoryName("* Old *")
19993.   or DirectoryName("Old *")
19994. 
19995.   or FileName("*.7z")
19996.   or FileName("*.cab")
19997.   or FileName("*.iso")
19998.   or FileName("*.msi")
19999.   or FileName("*.old")
20000.   or FileName("*.rar")
20001.   or FileName("*.tar")
20002.   or FileName("*.zip")
20003.   or
20004. # WinSysLow start.
20005. (
20006.   DirectoryName("$*")
20007.   or DirectoryName("0*")
20008.   or DirectoryName("1*")
20009.   or DirectoryName("2*")
20010.   or DirectoryName("3*")
20011.   or DirectoryName("4*")
20012.   or DirectoryName("5*")
20013.   or DirectoryName("6*")
20014.   or DirectoryName("7*")
20015.   or DirectoryName("8*")
20016.   or DirectoryName("9*")
20017. 
20018.   or DirectoryName("dllcache")
20019.   or DirectoryName("Downloaded Installations")
20020.   or DirectoryName("Ehome")
20021.   or DirectoryName("Fonts")
20022.   or DirectoryName("Help")
20023.   or DirectoryName("I386")
20024.   or DirectoryName("ie?updates")
20025.   or DirectoryName("Installer")
20026.   or DirectoryName("Installshield Installation Information")
20027.   or DirectoryName("IME")
20028.   or DirectoryName("*RECYCLE*")
20029.   or DirectoryName("ServicePackFiles")
20030.   or DirectoryName("SoftwareDistribution")
20031.   or DirectoryName("Speech")
20032.   or DirectoryName("Symbols")
20033.   or DirectoryName("System Volume Information")
20034.   or DirectoryName("windows.old")
20035. )
20036. # WinSysLow end.
20037. 
20038.   # Archives
20039. )
20040. # Archives end.
20041. 
20042. # NotBlobsArchivesBu
20043. or
20044. # Backups start.
20045. (
20046.   DirectoryName("*Backup*")
20047.   or DirectoryName("*Bu")
20048.   or DirectoryName("* Bu *")
20049.   or DirectoryName("Bu *")
20050. 
20051.   or FileName("*.bak")
20052.   or FileName("* - Copy*")
20053. )
20054. # Backups end.
20055. 
20056. # NotBlobsArchivesBu
20057. ) )
20058. # NotBlobsArchivesBu end.
20059. 
20060. # SystemOtherData
20061. and ( 
20062. # Data start.
20063. (
20064.   DirectoryName("Data*")
20065.   or DirectoryName("Device*")
20066.   or DirectoryName("Export*")
20067.   or DirectoryName("Import*")
20068.   or DirectoryName("Log*")
20069.   or DirectoryName("*Log")
20070.   or DirectoryName("Maintenance*")
20071.   or DirectoryName("Rec*")
20072.   or DirectoryName("Sales*")
20073.   or DirectoryName("Search*")
20074.   or DirectoryName("User*")
20075. )
20076. # Data end.
20077.  
20078. # SystemOtherData
20079. or  
20080. # Databases start.
20081. (
20082.   FileName("*.crypt*")
20083.   or FileName("*.db*")
20084.   or FileName("*.rdb*")
20085.   or FileName("*.dc*")
20086.   or FileName("*.dict*")
20087.   or FileName("*.?db*")
20088.   or FileName("*.?rdb*")
20089.   or FileName("*.md*")
20090.   or FileName("*.myd")
20091.   or FileName("*.ndf")
20092.   or FileName("*.ns?")
20093.   or FileName("*.pab")
20094.   or FileName("*.pst")
20095.   or FileName("*.sd?*")
20096.   or FileName("*.sq**")
20097.   or FileName("*.tmd")
20098.   or FileName("*.tps")
20099.   or FileName("*.tr*")
20100. )
20101. # Databases end.
20102. 
20103. # SystemOtherData
20104. )
20105. # SystemOtherData end.
20106. 
20107. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
20108. 
20109. 	# Zone Do Footer
20110. 
20111. /* ---------------------------------------------------------- */
20112. # File Select
20113. 	# Select Statments
20114. # File Actions 
20115. 	# Standard or OS File Actions.
20116. 	# Resume...
20117. 	
20118. 	# your stuff HERE (X)... post zone (file) file actions code.
20119. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
20120. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
20121. 		# (X)
20122. 		
20123. 		/* ??? Set window? */
20124. 	
20125. 	# ADD THE GAP
20126. 		
20127. # Vacate (good for diagnostics)
20128. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
20129. 
20130. # DoNotVacate - DO NOT Vacate (recommended)
20131. 
20132. # Vacate
20133. /* AddGap(GapUsedLoc) */
20134. 
20135. # DO Not Vacate
20136. AddGap(GapUsedLoc, DoNotVacate) 
20137. 	
20138. 	
20139. /* ---------------------------------------------------------- */
20140. # (failed) TEST for boolean logic.
20141. 
20142. /* It should work in the gap calculations for turning options */
20143. /* on and off but it will NOT work here. */
20144. 
20145. /* Boolean setting X or FlagX. */
20146. /* Where X will be on or off: */
20147. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
20148. /*      For ON:  (X  *  FlagAny) */
20149. 
20150. /* 1) Failed, zero gap overrode the previous one. */
20151. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
20152. /* AddGap(GapUsedTemp) */ 
20153. 
20154. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
20155. /* AddGap(GapUsedTemp, DoNotVacate) */ 
20156. 
20157. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
20158. 
20159. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
20160. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
20161. /* AddGap(GapUsedTemp) */ 
20162. 
20163. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
20164. /* AddGap(GapUsedTemp, DoNotVacate) */ 
20165. 
20166. /* ---------------------------------------------------------- */
20167. 
20168. # Vacate
20169. /* AddGap(GapUsed) */
20170. 
20171. # DO NOT Vacate (recommended)
20172. /* AddGap(GapUsed, DoNotVacate) */ 
20173. 	
20174. 
20175. 		
20176. # 
20177. FileEnd
20178. /* ---------------------------------------------------------- */
20179. 
20180. # your stuff HERE (X)... post zone (file) code.
20181. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
20182. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
20183. 	# (X)
20184. 
20185. SetVariable(FileStepDescription,"Zone finished, reporting.")
20186. # FILE STEP
20187. 
20188. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
20189. 
20190. /* add message and move to a new line. */
20191. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
20192. ")
20193. 
20194. /* display the line. (hopefully.) */
20195. # Zone Footer Set Statistics Window Text
20196. 
20197. SetStatisticsWindowText("----------------------------------------------------------
20198. Zones Processed: 
20199. ----------------------------------------------------------
20200. !ZoneListByLine!
20201. ----------------------------------------------------------
20202. Zone Processing Step:
20203. !ZoneStepByLine!    
20204. ----------------------------------------------------------
20205. Current Zone:
20206. !ZoneFooter!
20207. ----------------------------------------------------------
20208. Volume Statistics:
20209. !VolumeStatisticsDetail!
20210. ----------------------------------------------------------
20211. Zone Detailed Report:
20212. ----------------------------------------------------------
20213. !ZoneStatisticsDetail!
20214. ----------------------------------------------------------
20215. ")
20216. 
20217. 
20218. 
20219. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
20220. 
20221. # BANNER SET
20222. 
20223. # DATE TIME RUN ELP
20224. 
20225. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
20226. /* Xinclude "..\Display\BannerSet.MyDc"X */
20227. /* pause(1) */
20228. 
20229. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
20230. 
20231. Title('!Heading!')
20232. /* pause(1) */
20233. 
20234. /* NOTE: Can't round or truncate to integer precision. */
20235. 
20236. pause(1)
20237. 
20238. # Zone When Finished
20239. 
20240. # BANNER SET
20241. 
20242. # DATE TIME RUN ELP
20243. 
20244. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
20245. /* Xinclude "..\Display\BannerSet.MyDc"X */
20246. /* pause(1) */
20247. 
20248. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
20249. 
20250. Title('!Heading!')
20251. /* pause(1) */
20252. 
20253. /* NOTE: Can't round or truncate to integer precision. */
20254. 
20255. AppendLogfile("!LogFileName!", "!Title!")
20256. 
20257. 
20258. 
20259. # Zone Statistics	
20260. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
20261. 
20262. # Footer:
20263. SetVariable(ZoneFooter, "----------------------------------------------------------
20264. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
20265. 
20266. Statistics Report:
20267. ------------------
20268.    Size:  
20269.    ------------------------
20270.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
20271.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
20272.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
20273. 
20274.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
20275.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
20276. 
20277.    Location:
20278.    ------------------------
20279.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
20280.              Files End: !ZoneEndCurrent!
20281.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
20282.       
20283.    Gap Settings:
20284.    ------------------------
20285.          Gap Requested: !ZoneGapSizePer!%
20286.       Volume Rounding: !ZoneVolRoundUpPer!%
20287.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
20288.                  
20289.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
20290.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
20291.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
20292.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
20293.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
20294.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
20295.      
20296.    Free Space after Zone:
20297.    ------------------------
20298.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
20299.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
20300.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
20301. 
20302. Directory and Files Select:
20303. ---------------------------
20304. !ZoneTypeSelectCurrent!               
20305. ---------------------------
20306. ----------------------------------------------------------
20307. ")
20308. 
20309. AppendLogfile("!LogFileName!", ".")
20310. AppendLogfile("!LogFileName!", "!ZoneFooter!")
20311. AppendLogfile("!LogFileName!", ".")
20312. 
20313. # Zone Footer Set Statistics Window Text
20314. 
20315. SetStatisticsWindowText("----------------------------------------------------------
20316. Zones Processed: 
20317. ----------------------------------------------------------
20318. !ZoneListByLine!
20319. ----------------------------------------------------------
20320. Zone Processing Step:
20321. !ZoneStepByLine!    
20322. ----------------------------------------------------------
20323. Current Zone:
20324. !ZoneFooter!
20325. ----------------------------------------------------------
20326. Volume Statistics:
20327. !VolumeStatisticsDetail!
20328. ----------------------------------------------------------
20329. Zone Detailed Report:
20330. ----------------------------------------------------------
20331. !ZoneStatisticsDetail!
20332. ----------------------------------------------------------
20333. ")
20334. 
20335. 
20336. 
20337. /* pause() */
20338. /* pause() */
20339. 
20340. 
20341. 
20342. 
20343. /* ---------------------------------------------------------- */
20344. 
20345. 
20346. /* ---------------------------------------------------------- */
20347. /* Zone Reference & World */
20348. /* ---------------------------------------------------------- */
20349. /* Zone Reference & World */
20350. SetVariable(ZoneLabel, "!ZoneLabelReference!")
20351. SetVariable(ZoneDescription, "!ZoneDescriptionReference!")
20352. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpReference!")
20353. SetVariable(ZoneGapSize, "!ZoneGapSizeReference!")
20354. SetVariable(ZoneTypeSelect,'# Reference start.
20355. # NotBlobsArchivesBu start.
20356. (not (
20357. # Blobs start.
20358. (
20359. # BlobsAndExceptions start.
20360. ( not(
20361.   FileName("*.bat")
20362.   or FileName("*.css")
20363.   or FileName("*.dll")
20364.   or FileName("*.exe")
20365.   or FileName("*.htm*")
20366.   or FileName("*.jar")
20367.   or FileName("*.js")
20368.   or FileName("*.script")
20369.   or FileName("*.wsf")
20370.   or (
20371. # Databases start.
20372. (
20373.   FileName("*.crypt*")
20374.   or FileName("*.db*")
20375.   or FileName("*.rdb*")
20376.   or FileName("*.dc*")
20377.   or FileName("*.dict*")
20378.   or FileName("*.?db*")
20379.   or FileName("*.?rdb*")
20380.   or FileName("*.md*")
20381.   or FileName("*.myd")
20382.   or FileName("*.ndf")
20383.   or FileName("*.ns?")
20384.   or FileName("*.pab")
20385.   or FileName("*.pst")
20386.   or FileName("*.sd?*")
20387.   or FileName("*.sq**")
20388.   or FileName("*.tmd")
20389.   or FileName("*.tps")
20390.   or FileName("*.tr*")
20391. )
20392. # Databases end.
20393. 
20394.     # BlobsAndExceptions
20395.     or 
20396. # Data start.
20397. (
20398.   DirectoryName("Data*")
20399.   or DirectoryName("Device*")
20400.   or DirectoryName("Export*")
20401.   or DirectoryName("Import*")
20402.   or DirectoryName("Log*")
20403.   or DirectoryName("*Log")
20404.   or DirectoryName("Maintenance*")
20405.   or DirectoryName("Rec*")
20406.   or DirectoryName("Sales*")
20407.   or DirectoryName("Search*")
20408.   or DirectoryName("User*")
20409. )
20410. # Data end.
20411. 
20412.     # BlobsAndExceptions
20413.   )
20414. ) )
20415. # BlobsAndExceptions end.
20416. 
20417. # Blobs
20418. ) and (
20419.   Size(BlobFileSize,0)
20420.   or (
20421.     FileName("*.arj")
20422.     or FileName("*.bup")
20423.     or FileName("*.bz2")
20424.     or FileName("*.chm")
20425.     or FileName("*.dvr-ms")
20426.     or FileName("*.gz")
20427.     or FileName("*.ifo")
20428.     or FileName("*.lzh")
20429.     or FileName("*.pdf")
20430.     or FileName("*.rpm")
20431.     or FileName("*.wmv")
20432.     or FileName("*.vob")
20433.     or FileName("*.z")
20434.   ) 
20435. )
20436. # Blobs end.
20437. 
20438. # NotBlobsArchivesBu
20439. or 
20440. # Archives start.
20441. (
20442.   DirectoryName("*Archive*")
20443.   or DirectoryName("*History*")
20444.   or DirectoryName("*Old")
20445.   or DirectoryName("* Old *")
20446.   or DirectoryName("Old *")
20447. 
20448.   or FileName("*.7z")
20449.   or FileName("*.cab")
20450.   or FileName("*.iso")
20451.   or FileName("*.msi")
20452.   or FileName("*.old")
20453.   or FileName("*.rar")
20454.   or FileName("*.tar")
20455.   or FileName("*.zip")
20456.   or
20457. # WinSysLow start.
20458. (
20459.   DirectoryName("$*")
20460.   or DirectoryName("0*")
20461.   or DirectoryName("1*")
20462.   or DirectoryName("2*")
20463.   or DirectoryName("3*")
20464.   or DirectoryName("4*")
20465.   or DirectoryName("5*")
20466.   or DirectoryName("6*")
20467.   or DirectoryName("7*")
20468.   or DirectoryName("8*")
20469.   or DirectoryName("9*")
20470. 
20471.   or DirectoryName("dllcache")
20472.   or DirectoryName("Downloaded Installations")
20473.   or DirectoryName("Ehome")
20474.   or DirectoryName("Fonts")
20475.   or DirectoryName("Help")
20476.   or DirectoryName("I386")
20477.   or DirectoryName("ie?updates")
20478.   or DirectoryName("Installer")
20479.   or DirectoryName("Installshield Installation Information")
20480.   or DirectoryName("IME")
20481.   or DirectoryName("*RECYCLE*")
20482.   or DirectoryName("ServicePackFiles")
20483.   or DirectoryName("SoftwareDistribution")
20484.   or DirectoryName("Speech")
20485.   or DirectoryName("Symbols")
20486.   or DirectoryName("System Volume Information")
20487.   or DirectoryName("windows.old")
20488. )
20489. # WinSysLow end.
20490. 
20491.   # Archives
20492. )
20493. # Archives end.
20494. 
20495. # NotBlobsArchivesBu
20496. or
20497. # Backups start.
20498. (
20499.   DirectoryName("*Backup*")
20500.   or DirectoryName("*Bu")
20501.   or DirectoryName("* Bu *")
20502.   or DirectoryName("Bu *")
20503. 
20504.   or FileName("*.bak")
20505.   or FileName("* - Copy*")
20506. )
20507. # Backups end.
20508. 
20509. # NotBlobsArchivesBu
20510. ) )
20511. # NotBlobsArchivesBu end.
20512. 
20513. # Reference
20514. and (
20515. # Reference start.
20516. (
20517.   DirectoryName("World*") or
20518.   DirectoryName("Education*") or
20519.   DirectoryName("Entertainment*") or
20520.   DirectoryName("Food*") or
20521.   DirectoryName("Geography*") or
20522.   DirectoryName("Help*") or
20523.   DirectoryName("Humo*") or
20524.   DirectoryName("Internet*") or
20525.   DirectoryName("Legal*") or
20526.   DirectoryName("Linquistics*") or
20527.   DirectoryName("Media*") or
20528.   DirectoryName("Multimedia*") or
20529.   DirectoryName("Reference*") or
20530.   DirectoryName("Sales*") or
20531.   DirectoryName("Science*") or
20532.   DirectoryName("Social*") or
20533.   DirectoryName("Technology*")
20534. )
20535. # Reference end.
20536. 
20537. # Reference
20538. )
20539. # Reference end.
20540. ')
20541. 
20542. 	# Zone Do Header
20543. 
20544. # Zone When Started
20545. 
20546. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
20547. # Display Set Zone
20548. 
20549. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
20550. SetVariable(FileStepDescription,	"")
20551. 
20552. SetVariable(ZoneStepByLine, 			"Zone started.
20553. ")
20554. 
20555. # BANNER SET
20556. 
20557. # DATE TIME RUN ELP
20558. 
20559. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
20560. /* Xinclude "..\Display\BannerSet.MyDc"X */
20561. /* pause(1) */
20562. 
20563. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
20564. 
20565. Title('!Heading!')
20566. /* pause(1) */
20567. 
20568. /* NOTE: Can't round or truncate to integer precision. */
20569. 
20570. AppendLogfile("!LogFileName!", "!Title!")
20571. 
20572. 
20573. 
20574. pause(1)
20575. 
20576. 
20577. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
20578. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
20579. 
20580. SetVariable(ZoneStepNoCurrent, 0)
20581. 
20582. 
20583. # Zone Do Current Clear
20584. 
20585. SetVariable(ZoneTypeSelectCurrent, 		"")
20586. 
20587. SetVariable(ZoneBeginCurrent, 			0)
20588. SetVariable(ZoneBeginPerCurrent, 		0)
20589. SetVariable(ZoneEndCurrent, 			0)
20590. SetVariable(ZoneEndPerCurrent, 			0)
20591. 
20592. SetVariable(ZoneSizeCurrent,			0)
20593. SetVariable(ZoneSizePerCurrent,			0)
20594. 
20595. SetVariable(ZoneGapRequestedCurrent,	0)
20596. SetVariable(ZoneGapRoundedCurrent, 		0)
20597. SetVariable(ZoneGapAdjustedCurrent, 	0)
20598. SetVariable(ZoneGapAvailableCurrent, 	0)
20599. SetVariable(ZoneGapCurrent,				0)
20600. SetVariable(ZoneGapUsedCurrent, 		0)
20601. 
20602. SetVariable(ZoneGapActualCurrent, 		0)
20603. SetVariable(ZoneGapActualPerCurrent, 	0)
20604. 
20605. SetVariable(ZoneSizeActual, 			0)
20606. SetVariable(ZoneSizeActualCurrent,		0)
20607. 
20608. SetVariable(ZoneEndActual, 				0)
20609. SetVariable(ZoneEndActualCurrent,		0)			
20610. SetVariable(ZoneSizeActualPerCurrent, 	0)
20611.       
20612. SetVariable(ZoneFilesFolders,			0)
20613. SetVariable(ZoneFilesFoldersPer,		0) 
20614. 
20615. SetVariable(ZoneFragments,				0)
20616. SetVariable(ZoneFragmentsPer,			0) 
20617. 		
20618. SetVariable(ZoneEndActualCurrent, 		0)
20619. SetVariable(ZoneEndActualPerCurrent, 	0)
20620. 
20621. # Gap Calculation Methodology:
20622. 	# Requested
20623. 	SetVariable(GapRequested, 			0) 
20624. 	SetVariable(GapRequestedStd, 		0) 
20625. 	SetVariable(GapRequestedMft, 		0) 
20626. 	SetVariable(GapRequestedOs, 		0) 
20627. 	SetVariable(GapRequestedOriginal, 	0) 
20628. 	
20629. 	# Gap Adjustments
20630. 	SetVariable(GapRounded, 			0)
20631. 	# SetVariable(GapAdjusted, 			0)
20632. 	SetVariable(GapAvailable, 			0)
20633. 	SetVariable(GapCurrent, 			0)
20634. 	SetVariable(GapActual, 				0)
20635. 	SetVariable(GapUsed, 				0)
20636. 	
20637. 	# Gap Adjustments
20638. 	SetVariable(GapRoundedLoc, 			0)
20639. 	# SetVariable(GapAdjustedLoc, 		0)
20640. 	SetVariable(GapAvailableLoc, 		0)
20641. 	SetVariable(GapCurrentLoc, 			0)
20642. 	SetVariable(GapActualLoc,			0)
20643. 	SetVariable(GapUsedLoc,				0)
20644. 	
20645. 	# Space usage
20646. 	SetVariable(ZoneFreePerRequested, 	0)
20647. 	SetVariable(ZoneFreePerUsed, 		0)
20648. 
20649. # Gap Size & Rounding
20650. 	SetVariable(ZoneGapSizePer, 		0)
20651. 	SetVariable(ZoneVolRoundUpPer, 		0)
20652. 	
20653. 	# Free Space
20654. 	SetVariable(ZoneFreeUsedPer, 		0)
20655. 	SetVariable(ZoneFreeRequestedPer, 	0)
20656. 
20657. 
20658. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
20659. 
20660. # Footer:
20661. SetVariable(ZoneFooter, "----------------------------------------------------------
20662. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
20663. 
20664. Statistics Report:
20665. ------------------
20666.    Size:  
20667.    ------------------------
20668.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
20669.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
20670.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
20671. 
20672.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
20673.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
20674. 
20675.    Location:
20676.    ------------------------
20677.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
20678.              Files End: !ZoneEndCurrent!
20679.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
20680.       
20681.    Gap Settings:
20682.    ------------------------
20683.          Gap Requested: !ZoneGapSizePer!%
20684.       Volume Rounding: !ZoneVolRoundUpPer!%
20685.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
20686.                  
20687.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
20688.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
20689.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
20690.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
20691.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
20692.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
20693.      
20694.    Free Space after Zone:
20695.    ------------------------
20696.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
20697.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
20698.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
20699. 
20700. Directory and Files Select:
20701. ---------------------------
20702. !ZoneTypeSelectCurrent!               
20703. ---------------------------
20704. ----------------------------------------------------------
20705. ")
20706. 
20707. # BANNER SET
20708. 
20709. # DATE TIME RUN ELP
20710. 
20711. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
20712. /* Xinclude "..\Display\BannerSet.MyDc"X */
20713. /* pause(1) */
20714. 
20715. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
20716. 
20717. Title('!Heading!')
20718. /* pause(1) */
20719. 
20720. /* NOTE: Can't round or truncate to integer precision. */
20721. 
20722. AppendLogfile("!LogFileName!", "!Title!")
20723. 
20724. 
20725. 
20726. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
20727. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
20728. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:20")
20729. 
20730. SetVariable(ZoneListByLine, "!ZoneListByLine!
20731. Zone: !ZoneNoCurrent! 2021-11-09 08:17:20 0:00:08 !ZoneLabel! !ZoneDescription!")
20732. 
20733. 
20734. /* Fixed Zone Position Handling */
20735. /* Literal number: */
20736. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
20737. /* Percentage of disk: */
20738. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
20739. /* Gap */
20740. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
20741. 
20742. /* ---------------------------------------------------------- */
20743. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
20744. # FILE STEP
20745. 
20746. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
20747. 
20748. /* add message and move to a new line. */
20749. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
20750. ")
20751. 
20752. /* display the line. (hopefully.) */
20753. # Zone Footer Set Statistics Window Text
20754. 
20755. SetStatisticsWindowText("----------------------------------------------------------
20756. Zones Processed: 
20757. ----------------------------------------------------------
20758. !ZoneListByLine!
20759. ----------------------------------------------------------
20760. Zone Processing Step:
20761. !ZoneStepByLine!    
20762. ----------------------------------------------------------
20763. Current Zone:
20764. !ZoneFooter!
20765. ----------------------------------------------------------
20766. Volume Statistics:
20767. !VolumeStatisticsDetail!
20768. ----------------------------------------------------------
20769. Zone Detailed Report:
20770. ----------------------------------------------------------
20771. !ZoneStatisticsDetail!
20772. ----------------------------------------------------------
20773. ")
20774. 
20775. 
20776. 
20777. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
20778. 
20779. # BANNER SET
20780. 
20781. # DATE TIME RUN ELP
20782. 
20783. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
20784. /* Xinclude "..\Display\BannerSet.MyDc"X */
20785. /* pause(1) */
20786. 
20787. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
20788. 
20789. Title('!Heading!')
20790. /* pause(1) */
20791. 
20792. /* NOTE: Can't round or truncate to integer precision. */
20793. 
20794. pause(1)
20795. 
20796. # your stuff HERE (X)... pre file select code.
20797. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
20798. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
20799. 	# (X)
20800. 
20801. FileSelect
20802. 
20803. 	# your stuff can't really go here (errors.)
20804. 	# maybe for some reason I don't know of...
20805. 	
20806. 	# Actions next...
20807. 	# Reference start.
20808. # NotBlobsArchivesBu start.
20809. (not (
20810. # Blobs start.
20811. (
20812. # BlobsAndExceptions start.
20813. ( not(
20814.   FileName("*.bat")
20815.   or FileName("*.css")
20816.   or FileName("*.dll")
20817.   or FileName("*.exe")
20818.   or FileName("*.htm*")
20819.   or FileName("*.jar")
20820.   or FileName("*.js")
20821.   or FileName("*.script")
20822.   or FileName("*.wsf")
20823.   or (
20824. # Databases start.
20825. (
20826.   FileName("*.crypt*")
20827.   or FileName("*.db*")
20828.   or FileName("*.rdb*")
20829.   or FileName("*.dc*")
20830.   or FileName("*.dict*")
20831.   or FileName("*.?db*")
20832.   or FileName("*.?rdb*")
20833.   or FileName("*.md*")
20834.   or FileName("*.myd")
20835.   or FileName("*.ndf")
20836.   or FileName("*.ns?")
20837.   or FileName("*.pab")
20838.   or FileName("*.pst")
20839.   or FileName("*.sd?*")
20840.   or FileName("*.sq**")
20841.   or FileName("*.tmd")
20842.   or FileName("*.tps")
20843.   or FileName("*.tr*")
20844. )
20845. # Databases end.
20846. 
20847.     # BlobsAndExceptions
20848.     or 
20849. # Data start.
20850. (
20851.   DirectoryName("Data*")
20852.   or DirectoryName("Device*")
20853.   or DirectoryName("Export*")
20854.   or DirectoryName("Import*")
20855.   or DirectoryName("Log*")
20856.   or DirectoryName("*Log")
20857.   or DirectoryName("Maintenance*")
20858.   or DirectoryName("Rec*")
20859.   or DirectoryName("Sales*")
20860.   or DirectoryName("Search*")
20861.   or DirectoryName("User*")
20862. )
20863. # Data end.
20864. 
20865.     # BlobsAndExceptions
20866.   )
20867. ) )
20868. # BlobsAndExceptions end.
20869. 
20870. # Blobs
20871. ) and (
20872.   Size(BlobFileSize,0)
20873.   or (
20874.     FileName("*.arj")
20875.     or FileName("*.bup")
20876.     or FileName("*.bz2")
20877.     or FileName("*.chm")
20878.     or FileName("*.dvr-ms")
20879.     or FileName("*.gz")
20880.     or FileName("*.ifo")
20881.     or FileName("*.lzh")
20882.     or FileName("*.pdf")
20883.     or FileName("*.rpm")
20884.     or FileName("*.wmv")
20885.     or FileName("*.vob")
20886.     or FileName("*.z")
20887.   ) 
20888. )
20889. # Blobs end.
20890. 
20891. # NotBlobsArchivesBu
20892. or 
20893. # Archives start.
20894. (
20895.   DirectoryName("*Archive*")
20896.   or DirectoryName("*History*")
20897.   or DirectoryName("*Old")
20898.   or DirectoryName("* Old *")
20899.   or DirectoryName("Old *")
20900. 
20901.   or FileName("*.7z")
20902.   or FileName("*.cab")
20903.   or FileName("*.iso")
20904.   or FileName("*.msi")
20905.   or FileName("*.old")
20906.   or FileName("*.rar")
20907.   or FileName("*.tar")
20908.   or FileName("*.zip")
20909.   or
20910. # WinSysLow start.
20911. (
20912.   DirectoryName("$*")
20913.   or DirectoryName("0*")
20914.   or DirectoryName("1*")
20915.   or DirectoryName("2*")
20916.   or DirectoryName("3*")
20917.   or DirectoryName("4*")
20918.   or DirectoryName("5*")
20919.   or DirectoryName("6*")
20920.   or DirectoryName("7*")
20921.   or DirectoryName("8*")
20922.   or DirectoryName("9*")
20923. 
20924.   or DirectoryName("dllcache")
20925.   or DirectoryName("Downloaded Installations")
20926.   or DirectoryName("Ehome")
20927.   or DirectoryName("Fonts")
20928.   or DirectoryName("Help")
20929.   or DirectoryName("I386")
20930.   or DirectoryName("ie?updates")
20931.   or DirectoryName("Installer")
20932.   or DirectoryName("Installshield Installation Information")
20933.   or DirectoryName("IME")
20934.   or DirectoryName("*RECYCLE*")
20935.   or DirectoryName("ServicePackFiles")
20936.   or DirectoryName("SoftwareDistribution")
20937.   or DirectoryName("Speech")
20938.   or DirectoryName("Symbols")
20939.   or DirectoryName("System Volume Information")
20940.   or DirectoryName("windows.old")
20941. )
20942. # WinSysLow end.
20943. 
20944.   # Archives
20945. )
20946. # Archives end.
20947. 
20948. # NotBlobsArchivesBu
20949. or
20950. # Backups start.
20951. (
20952.   DirectoryName("*Backup*")
20953.   or DirectoryName("*Bu")
20954.   or DirectoryName("* Bu *")
20955.   or DirectoryName("Bu *")
20956. 
20957.   or FileName("*.bak")
20958.   or FileName("* - Copy*")
20959. )
20960. # Backups end.
20961. 
20962. # NotBlobsArchivesBu
20963. ) )
20964. # NotBlobsArchivesBu end.
20965. 
20966. # Reference
20967. and (
20968. # Reference start.
20969. (
20970.   DirectoryName("World*") or
20971.   DirectoryName("Education*") or
20972.   DirectoryName("Entertainment*") or
20973.   DirectoryName("Food*") or
20974.   DirectoryName("Geography*") or
20975.   DirectoryName("Help*") or
20976.   DirectoryName("Humo*") or
20977.   DirectoryName("Internet*") or
20978.   DirectoryName("Legal*") or
20979.   DirectoryName("Linquistics*") or
20980.   DirectoryName("Media*") or
20981.   DirectoryName("Multimedia*") or
20982.   DirectoryName("Reference*") or
20983.   DirectoryName("Sales*") or
20984.   DirectoryName("Science*") or
20985.   DirectoryName("Social*") or
20986.   DirectoryName("Technology*")
20987. )
20988. # Reference end.
20989. 
20990. # Reference
20991. )
20992. # Reference end.
20993. 
20994. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
20995. 
20996. 	# Zone Do Footer
20997. 
20998. /* ---------------------------------------------------------- */
20999. # File Select
21000. 	# Select Statments
21001. # File Actions 
21002. 	# Standard or OS File Actions.
21003. 	# Resume...
21004. 	
21005. 	# your stuff HERE (X)... post zone (file) file actions code.
21006. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
21007. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
21008. 		# (X)
21009. 		
21010. 		/* ??? Set window? */
21011. 	
21012. 	# ADD THE GAP
21013. 		
21014. # Vacate (good for diagnostics)
21015. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
21016. 
21017. # DoNotVacate - DO NOT Vacate (recommended)
21018. 
21019. # Vacate
21020. /* AddGap(GapUsedLoc) */
21021. 
21022. # DO Not Vacate
21023. AddGap(GapUsedLoc, DoNotVacate) 
21024. 	
21025. 	
21026. /* ---------------------------------------------------------- */
21027. # (failed) TEST for boolean logic.
21028. 
21029. /* It should work in the gap calculations for turning options */
21030. /* on and off but it will NOT work here. */
21031. 
21032. /* Boolean setting X or FlagX. */
21033. /* Where X will be on or off: */
21034. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
21035. /*      For ON:  (X  *  FlagAny) */
21036. 
21037. /* 1) Failed, zero gap overrode the previous one. */
21038. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
21039. /* AddGap(GapUsedTemp) */ 
21040. 
21041. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
21042. /* AddGap(GapUsedTemp, DoNotVacate) */ 
21043. 
21044. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
21045. 
21046. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
21047. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
21048. /* AddGap(GapUsedTemp) */ 
21049. 
21050. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
21051. /* AddGap(GapUsedTemp, DoNotVacate) */ 
21052. 
21053. /* ---------------------------------------------------------- */
21054. 
21055. # Vacate
21056. /* AddGap(GapUsed) */
21057. 
21058. # DO NOT Vacate (recommended)
21059. /* AddGap(GapUsed, DoNotVacate) */ 
21060. 	
21061. 
21062. 		
21063. # 
21064. FileEnd
21065. /* ---------------------------------------------------------- */
21066. 
21067. # your stuff HERE (X)... post zone (file) code.
21068. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
21069. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
21070. 	# (X)
21071. 
21072. SetVariable(FileStepDescription,"Zone finished, reporting.")
21073. # FILE STEP
21074. 
21075. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
21076. 
21077. /* add message and move to a new line. */
21078. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
21079. ")
21080. 
21081. /* display the line. (hopefully.) */
21082. # Zone Footer Set Statistics Window Text
21083. 
21084. SetStatisticsWindowText("----------------------------------------------------------
21085. Zones Processed: 
21086. ----------------------------------------------------------
21087. !ZoneListByLine!
21088. ----------------------------------------------------------
21089. Zone Processing Step:
21090. !ZoneStepByLine!    
21091. ----------------------------------------------------------
21092. Current Zone:
21093. !ZoneFooter!
21094. ----------------------------------------------------------
21095. Volume Statistics:
21096. !VolumeStatisticsDetail!
21097. ----------------------------------------------------------
21098. Zone Detailed Report:
21099. ----------------------------------------------------------
21100. !ZoneStatisticsDetail!
21101. ----------------------------------------------------------
21102. ")
21103. 
21104. 
21105. 
21106. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
21107. 
21108. # BANNER SET
21109. 
21110. # DATE TIME RUN ELP
21111. 
21112. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
21113. /* Xinclude "..\Display\BannerSet.MyDc"X */
21114. /* pause(1) */
21115. 
21116. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21117. 
21118. Title('!Heading!')
21119. /* pause(1) */
21120. 
21121. /* NOTE: Can't round or truncate to integer precision. */
21122. 
21123. pause(1)
21124. 
21125. # Zone When Finished
21126. 
21127. # BANNER SET
21128. 
21129. # DATE TIME RUN ELP
21130. 
21131. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:20 0:00:08")
21132. /* Xinclude "..\Display\BannerSet.MyDc"X */
21133. /* pause(1) */
21134. 
21135. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21136. 
21137. Title('!Heading!')
21138. /* pause(1) */
21139. 
21140. /* NOTE: Can't round or truncate to integer precision. */
21141. 
21142. AppendLogfile("!LogFileName!", "!Title!")
21143. 
21144. 
21145. 
21146. # Zone Statistics	
21147. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
21148. 
21149. # Footer:
21150. SetVariable(ZoneFooter, "----------------------------------------------------------
21151. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:20
21152. 
21153. Statistics Report:
21154. ------------------
21155.    Size:  
21156.    ------------------------
21157.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
21158.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
21159.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
21160. 
21161.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
21162.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
21163. 
21164.    Location:
21165.    ------------------------
21166.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
21167.              Files End: !ZoneEndCurrent!
21168.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
21169.       
21170.    Gap Settings:
21171.    ------------------------
21172.          Gap Requested: !ZoneGapSizePer!%
21173.       Volume Rounding: !ZoneVolRoundUpPer!%
21174.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
21175.                  
21176.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
21177.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
21178.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
21179.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
21180.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
21181.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
21182.      
21183.    Free Space after Zone:
21184.    ------------------------
21185.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
21186.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
21187.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
21188. 
21189. Directory and Files Select:
21190. ---------------------------
21191. !ZoneTypeSelectCurrent!               
21192. ---------------------------
21193. ----------------------------------------------------------
21194. ")
21195. 
21196. AppendLogfile("!LogFileName!", ".")
21197. AppendLogfile("!LogFileName!", "!ZoneFooter!")
21198. AppendLogfile("!LogFileName!", ".")
21199. 
21200. # Zone Footer Set Statistics Window Text
21201. 
21202. SetStatisticsWindowText("----------------------------------------------------------
21203. Zones Processed: 
21204. ----------------------------------------------------------
21205. !ZoneListByLine!
21206. ----------------------------------------------------------
21207. Zone Processing Step:
21208. !ZoneStepByLine!    
21209. ----------------------------------------------------------
21210. Current Zone:
21211. !ZoneFooter!
21212. ----------------------------------------------------------
21213. Volume Statistics:
21214. !VolumeStatisticsDetail!
21215. ----------------------------------------------------------
21216. Zone Detailed Report:
21217. ----------------------------------------------------------
21218. !ZoneStatisticsDetail!
21219. ----------------------------------------------------------
21220. ")
21221. 
21222. 
21223. 
21224. /* pause() */
21225. /* pause() */
21226. 
21227. 
21228. 
21229. 
21230. /* ---------------------------------------------------------- */
21231. 
21232. 
21233. /* ---------------------------------------------------------- */
21234. /* Zone SpaceHogs (BLOBS) */
21235. /* ---------------------------------------------------------- */
21236. /* Zone SpaceHogs (BLOBS) */
21237. SetVariable(ZoneLabel, "!ZoneLabelSpaceHogs!")
21238. SetVariable(ZoneDescription, "!ZoneDescriptionSpaceHogs!")
21239. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpSpaceHogs!")
21240. SetVariable(ZoneGapSize, "!ZoneGapSizeSpaceHogs!")
21241. SetVariable(ZoneTypeSelect,'# SpaceHogs start.
21242. not(
21243. # Archives start.
21244. (
21245.   DirectoryName("*Archive*")
21246.   or DirectoryName("*History*")
21247.   or DirectoryName("*Old")
21248.   or DirectoryName("* Old *")
21249.   or DirectoryName("Old *")
21250. 
21251.   or FileName("*.7z")
21252.   or FileName("*.cab")
21253.   or FileName("*.iso")
21254.   or FileName("*.msi")
21255.   or FileName("*.old")
21256.   or FileName("*.rar")
21257.   or FileName("*.tar")
21258.   or FileName("*.zip")
21259.   or
21260. # WinSysLow start.
21261. (
21262.   DirectoryName("$*")
21263.   or DirectoryName("0*")
21264.   or DirectoryName("1*")
21265.   or DirectoryName("2*")
21266.   or DirectoryName("3*")
21267.   or DirectoryName("4*")
21268.   or DirectoryName("5*")
21269.   or DirectoryName("6*")
21270.   or DirectoryName("7*")
21271.   or DirectoryName("8*")
21272.   or DirectoryName("9*")
21273. 
21274.   or DirectoryName("dllcache")
21275.   or DirectoryName("Downloaded Installations")
21276.   or DirectoryName("Ehome")
21277.   or DirectoryName("Fonts")
21278.   or DirectoryName("Help")
21279.   or DirectoryName("I386")
21280.   or DirectoryName("ie?updates")
21281.   or DirectoryName("Installer")
21282.   or DirectoryName("Installshield Installation Information")
21283.   or DirectoryName("IME")
21284.   or DirectoryName("*RECYCLE*")
21285.   or DirectoryName("ServicePackFiles")
21286.   or DirectoryName("SoftwareDistribution")
21287.   or DirectoryName("Speech")
21288.   or DirectoryName("Symbols")
21289.   or DirectoryName("System Volume Information")
21290.   or DirectoryName("windows.old")
21291. )
21292. # WinSysLow end.
21293. 
21294.   # Archives
21295. )
21296. # Archives end.
21297. 
21298. or 
21299. # Backups start.
21300. (
21301.   DirectoryName("*Backup*")
21302.   or DirectoryName("*Bu")
21303.   or DirectoryName("* Bu *")
21304.   or DirectoryName("Bu *")
21305. 
21306.   or FileName("*.bak")
21307.   or FileName("* - Copy*")
21308. )
21309. # Backups end.
21310. 
21311. # SpaceHogs
21312. ) and (
21313. # Blobs start.
21314. (
21315. # BlobsAndExceptions start.
21316. ( not(
21317.   FileName("*.bat")
21318.   or FileName("*.css")
21319.   or FileName("*.dll")
21320.   or FileName("*.exe")
21321.   or FileName("*.htm*")
21322.   or FileName("*.jar")
21323.   or FileName("*.js")
21324.   or FileName("*.script")
21325.   or FileName("*.wsf")
21326.   or (
21327. # Databases start.
21328. (
21329.   FileName("*.crypt*")
21330.   or FileName("*.db*")
21331.   or FileName("*.rdb*")
21332.   or FileName("*.dc*")
21333.   or FileName("*.dict*")
21334.   or FileName("*.?db*")
21335.   or FileName("*.?rdb*")
21336.   or FileName("*.md*")
21337.   or FileName("*.myd")
21338.   or FileName("*.ndf")
21339.   or FileName("*.ns?")
21340.   or FileName("*.pab")
21341.   or FileName("*.pst")
21342.   or FileName("*.sd?*")
21343.   or FileName("*.sq**")
21344.   or FileName("*.tmd")
21345.   or FileName("*.tps")
21346.   or FileName("*.tr*")
21347. )
21348. # Databases end.
21349. 
21350.     # BlobsAndExceptions
21351.     or 
21352. # Data start.
21353. (
21354.   DirectoryName("Data*")
21355.   or DirectoryName("Device*")
21356.   or DirectoryName("Export*")
21357.   or DirectoryName("Import*")
21358.   or DirectoryName("Log*")
21359.   or DirectoryName("*Log")
21360.   or DirectoryName("Maintenance*")
21361.   or DirectoryName("Rec*")
21362.   or DirectoryName("Sales*")
21363.   or DirectoryName("Search*")
21364.   or DirectoryName("User*")
21365. )
21366. # Data end.
21367. 
21368.     # BlobsAndExceptions
21369.   )
21370. ) )
21371. # BlobsAndExceptions end.
21372. 
21373. # Blobs
21374. ) and (
21375.   Size(BlobFileSize,0)
21376.   or (
21377.     FileName("*.arj")
21378.     or FileName("*.bup")
21379.     or FileName("*.bz2")
21380.     or FileName("*.chm")
21381.     or FileName("*.dvr-ms")
21382.     or FileName("*.gz")
21383.     or FileName("*.ifo")
21384.     or FileName("*.lzh")
21385.     or FileName("*.pdf")
21386.     or FileName("*.rpm")
21387.     or FileName("*.wmv")
21388.     or FileName("*.vob")
21389.     or FileName("*.z")
21390.   ) 
21391. )
21392. # Blobs end.
21393. 
21394. # SpaceHogs
21395. ) 
21396. # SpaceHogs end.
21397. ')
21398. 
21399. /* Note: This should be all Blob Files but not archives and backups */
21400. /* It does not matter in my case because given the sorting the */
21401. /* "z Archive", "z Bu" and "z Backup" directories sort to the end. */
21402. 
21403. 	# Zone Do Header
21404. 
21405. # Zone When Started
21406. 
21407. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
21408. # Display Set Zone
21409. 
21410. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
21411. SetVariable(FileStepDescription,	"")
21412. 
21413. SetVariable(ZoneStepByLine, 			"Zone started.
21414. ")
21415. 
21416. # BANNER SET
21417. 
21418. # DATE TIME RUN ELP
21419. 
21420. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
21421. /* Xinclude "..\Display\BannerSet.MyDc"X */
21422. /* pause(1) */
21423. 
21424. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21425. 
21426. Title('!Heading!')
21427. /* pause(1) */
21428. 
21429. /* NOTE: Can't round or truncate to integer precision. */
21430. 
21431. AppendLogfile("!LogFileName!", "!Title!")
21432. 
21433. 
21434. 
21435. pause(1)
21436. 
21437. 
21438. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
21439. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
21440. 
21441. SetVariable(ZoneStepNoCurrent, 0)
21442. 
21443. 
21444. # Zone Do Current Clear
21445. 
21446. SetVariable(ZoneTypeSelectCurrent, 		"")
21447. 
21448. SetVariable(ZoneBeginCurrent, 			0)
21449. SetVariable(ZoneBeginPerCurrent, 		0)
21450. SetVariable(ZoneEndCurrent, 			0)
21451. SetVariable(ZoneEndPerCurrent, 			0)
21452. 
21453. SetVariable(ZoneSizeCurrent,			0)
21454. SetVariable(ZoneSizePerCurrent,			0)
21455. 
21456. SetVariable(ZoneGapRequestedCurrent,	0)
21457. SetVariable(ZoneGapRoundedCurrent, 		0)
21458. SetVariable(ZoneGapAdjustedCurrent, 	0)
21459. SetVariable(ZoneGapAvailableCurrent, 	0)
21460. SetVariable(ZoneGapCurrent,				0)
21461. SetVariable(ZoneGapUsedCurrent, 		0)
21462. 
21463. SetVariable(ZoneGapActualCurrent, 		0)
21464. SetVariable(ZoneGapActualPerCurrent, 	0)
21465. 
21466. SetVariable(ZoneSizeActual, 			0)
21467. SetVariable(ZoneSizeActualCurrent,		0)
21468. 
21469. SetVariable(ZoneEndActual, 				0)
21470. SetVariable(ZoneEndActualCurrent,		0)			
21471. SetVariable(ZoneSizeActualPerCurrent, 	0)
21472.       
21473. SetVariable(ZoneFilesFolders,			0)
21474. SetVariable(ZoneFilesFoldersPer,		0) 
21475. 
21476. SetVariable(ZoneFragments,				0)
21477. SetVariable(ZoneFragmentsPer,			0) 
21478. 		
21479. SetVariable(ZoneEndActualCurrent, 		0)
21480. SetVariable(ZoneEndActualPerCurrent, 	0)
21481. 
21482. # Gap Calculation Methodology:
21483. 	# Requested
21484. 	SetVariable(GapRequested, 			0) 
21485. 	SetVariable(GapRequestedStd, 		0) 
21486. 	SetVariable(GapRequestedMft, 		0) 
21487. 	SetVariable(GapRequestedOs, 		0) 
21488. 	SetVariable(GapRequestedOriginal, 	0) 
21489. 	
21490. 	# Gap Adjustments
21491. 	SetVariable(GapRounded, 			0)
21492. 	# SetVariable(GapAdjusted, 			0)
21493. 	SetVariable(GapAvailable, 			0)
21494. 	SetVariable(GapCurrent, 			0)
21495. 	SetVariable(GapActual, 				0)
21496. 	SetVariable(GapUsed, 				0)
21497. 	
21498. 	# Gap Adjustments
21499. 	SetVariable(GapRoundedLoc, 			0)
21500. 	# SetVariable(GapAdjustedLoc, 		0)
21501. 	SetVariable(GapAvailableLoc, 		0)
21502. 	SetVariable(GapCurrentLoc, 			0)
21503. 	SetVariable(GapActualLoc,			0)
21504. 	SetVariable(GapUsedLoc,				0)
21505. 	
21506. 	# Space usage
21507. 	SetVariable(ZoneFreePerRequested, 	0)
21508. 	SetVariable(ZoneFreePerUsed, 		0)
21509. 
21510. # Gap Size & Rounding
21511. 	SetVariable(ZoneGapSizePer, 		0)
21512. 	SetVariable(ZoneVolRoundUpPer, 		0)
21513. 	
21514. 	# Free Space
21515. 	SetVariable(ZoneFreeUsedPer, 		0)
21516. 	SetVariable(ZoneFreeRequestedPer, 	0)
21517. 
21518. 
21519. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
21520. 
21521. # Footer:
21522. SetVariable(ZoneFooter, "----------------------------------------------------------
21523. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:21
21524. 
21525. Statistics Report:
21526. ------------------
21527.    Size:  
21528.    ------------------------
21529.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
21530.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
21531.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
21532. 
21533.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
21534.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
21535. 
21536.    Location:
21537.    ------------------------
21538.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
21539.              Files End: !ZoneEndCurrent!
21540.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
21541.       
21542.    Gap Settings:
21543.    ------------------------
21544.          Gap Requested: !ZoneGapSizePer!%
21545.       Volume Rounding: !ZoneVolRoundUpPer!%
21546.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
21547.                  
21548.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
21549.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
21550.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
21551.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
21552.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
21553.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
21554.      
21555.    Free Space after Zone:
21556.    ------------------------
21557.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
21558.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
21559.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
21560. 
21561. Directory and Files Select:
21562. ---------------------------
21563. !ZoneTypeSelectCurrent!               
21564. ---------------------------
21565. ----------------------------------------------------------
21566. ")
21567. 
21568. # BANNER SET
21569. 
21570. # DATE TIME RUN ELP
21571. 
21572. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
21573. /* Xinclude "..\Display\BannerSet.MyDc"X */
21574. /* pause(1) */
21575. 
21576. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21577. 
21578. Title('!Heading!')
21579. /* pause(1) */
21580. 
21581. /* NOTE: Can't round or truncate to integer precision. */
21582. 
21583. AppendLogfile("!LogFileName!", "!Title!")
21584. 
21585. 
21586. 
21587. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
21588. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
21589. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:21")
21590. 
21591. SetVariable(ZoneListByLine, "!ZoneListByLine!
21592. Zone: !ZoneNoCurrent! 2021-11-09 08:17:21 0:00:09 !ZoneLabel! !ZoneDescription!")
21593. 
21594. 
21595. /* Fixed Zone Position Handling */
21596. /* Literal number: */
21597. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
21598. /* Percentage of disk: */
21599. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
21600. /* Gap */
21601. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
21602. 
21603. /* ---------------------------------------------------------- */
21604. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
21605. # FILE STEP
21606. 
21607. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
21608. 
21609. /* add message and move to a new line. */
21610. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
21611. ")
21612. 
21613. /* display the line. (hopefully.) */
21614. # Zone Footer Set Statistics Window Text
21615. 
21616. SetStatisticsWindowText("----------------------------------------------------------
21617. Zones Processed: 
21618. ----------------------------------------------------------
21619. !ZoneListByLine!
21620. ----------------------------------------------------------
21621. Zone Processing Step:
21622. !ZoneStepByLine!    
21623. ----------------------------------------------------------
21624. Current Zone:
21625. !ZoneFooter!
21626. ----------------------------------------------------------
21627. Volume Statistics:
21628. !VolumeStatisticsDetail!
21629. ----------------------------------------------------------
21630. Zone Detailed Report:
21631. ----------------------------------------------------------
21632. !ZoneStatisticsDetail!
21633. ----------------------------------------------------------
21634. ")
21635. 
21636. 
21637. 
21638. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
21639. 
21640. # BANNER SET
21641. 
21642. # DATE TIME RUN ELP
21643. 
21644. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
21645. /* Xinclude "..\Display\BannerSet.MyDc"X */
21646. /* pause(1) */
21647. 
21648. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21649. 
21650. Title('!Heading!')
21651. /* pause(1) */
21652. 
21653. /* NOTE: Can't round or truncate to integer precision. */
21654. 
21655. pause(1)
21656. 
21657. # your stuff HERE (X)... pre file select code.
21658. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
21659. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
21660. 	# (X)
21661. 
21662. FileSelect
21663. 
21664. 	# your stuff can't really go here (errors.)
21665. 	# maybe for some reason I don't know of...
21666. 	
21667. 	# Actions next...
21668. 	# SpaceHogs start.
21669. not(
21670. # Archives start.
21671. (
21672.   DirectoryName("*Archive*")
21673.   or DirectoryName("*History*")
21674.   or DirectoryName("*Old")
21675.   or DirectoryName("* Old *")
21676.   or DirectoryName("Old *")
21677. 
21678.   or FileName("*.7z")
21679.   or FileName("*.cab")
21680.   or FileName("*.iso")
21681.   or FileName("*.msi")
21682.   or FileName("*.old")
21683.   or FileName("*.rar")
21684.   or FileName("*.tar")
21685.   or FileName("*.zip")
21686.   or
21687. # WinSysLow start.
21688. (
21689.   DirectoryName("$*")
21690.   or DirectoryName("0*")
21691.   or DirectoryName("1*")
21692.   or DirectoryName("2*")
21693.   or DirectoryName("3*")
21694.   or DirectoryName("4*")
21695.   or DirectoryName("5*")
21696.   or DirectoryName("6*")
21697.   or DirectoryName("7*")
21698.   or DirectoryName("8*")
21699.   or DirectoryName("9*")
21700. 
21701.   or DirectoryName("dllcache")
21702.   or DirectoryName("Downloaded Installations")
21703.   or DirectoryName("Ehome")
21704.   or DirectoryName("Fonts")
21705.   or DirectoryName("Help")
21706.   or DirectoryName("I386")
21707.   or DirectoryName("ie?updates")
21708.   or DirectoryName("Installer")
21709.   or DirectoryName("Installshield Installation Information")
21710.   or DirectoryName("IME")
21711.   or DirectoryName("*RECYCLE*")
21712.   or DirectoryName("ServicePackFiles")
21713.   or DirectoryName("SoftwareDistribution")
21714.   or DirectoryName("Speech")
21715.   or DirectoryName("Symbols")
21716.   or DirectoryName("System Volume Information")
21717.   or DirectoryName("windows.old")
21718. )
21719. # WinSysLow end.
21720. 
21721.   # Archives
21722. )
21723. # Archives end.
21724. 
21725. or 
21726. # Backups start.
21727. (
21728.   DirectoryName("*Backup*")
21729.   or DirectoryName("*Bu")
21730.   or DirectoryName("* Bu *")
21731.   or DirectoryName("Bu *")
21732. 
21733.   or FileName("*.bak")
21734.   or FileName("* - Copy*")
21735. )
21736. # Backups end.
21737. 
21738. # SpaceHogs
21739. ) and (
21740. # Blobs start.
21741. (
21742. # BlobsAndExceptions start.
21743. ( not(
21744.   FileName("*.bat")
21745.   or FileName("*.css")
21746.   or FileName("*.dll")
21747.   or FileName("*.exe")
21748.   or FileName("*.htm*")
21749.   or FileName("*.jar")
21750.   or FileName("*.js")
21751.   or FileName("*.script")
21752.   or FileName("*.wsf")
21753.   or (
21754. # Databases start.
21755. (
21756.   FileName("*.crypt*")
21757.   or FileName("*.db*")
21758.   or FileName("*.rdb*")
21759.   or FileName("*.dc*")
21760.   or FileName("*.dict*")
21761.   or FileName("*.?db*")
21762.   or FileName("*.?rdb*")
21763.   or FileName("*.md*")
21764.   or FileName("*.myd")
21765.   or FileName("*.ndf")
21766.   or FileName("*.ns?")
21767.   or FileName("*.pab")
21768.   or FileName("*.pst")
21769.   or FileName("*.sd?*")
21770.   or FileName("*.sq**")
21771.   or FileName("*.tmd")
21772.   or FileName("*.tps")
21773.   or FileName("*.tr*")
21774. )
21775. # Databases end.
21776. 
21777.     # BlobsAndExceptions
21778.     or 
21779. # Data start.
21780. (
21781.   DirectoryName("Data*")
21782.   or DirectoryName("Device*")
21783.   or DirectoryName("Export*")
21784.   or DirectoryName("Import*")
21785.   or DirectoryName("Log*")
21786.   or DirectoryName("*Log")
21787.   or DirectoryName("Maintenance*")
21788.   or DirectoryName("Rec*")
21789.   or DirectoryName("Sales*")
21790.   or DirectoryName("Search*")
21791.   or DirectoryName("User*")
21792. )
21793. # Data end.
21794. 
21795.     # BlobsAndExceptions
21796.   )
21797. ) )
21798. # BlobsAndExceptions end.
21799. 
21800. # Blobs
21801. ) and (
21802.   Size(BlobFileSize,0)
21803.   or (
21804.     FileName("*.arj")
21805.     or FileName("*.bup")
21806.     or FileName("*.bz2")
21807.     or FileName("*.chm")
21808.     or FileName("*.dvr-ms")
21809.     or FileName("*.gz")
21810.     or FileName("*.ifo")
21811.     or FileName("*.lzh")
21812.     or FileName("*.pdf")
21813.     or FileName("*.rpm")
21814.     or FileName("*.wmv")
21815.     or FileName("*.vob")
21816.     or FileName("*.z")
21817.   ) 
21818. )
21819. # Blobs end.
21820. 
21821. # SpaceHogs
21822. ) 
21823. # SpaceHogs end.
21824. 
21825. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
21826. 
21827. 	# Zone Do Footer
21828. 
21829. /* ---------------------------------------------------------- */
21830. # File Select
21831. 	# Select Statments
21832. # File Actions 
21833. 	# Standard or OS File Actions.
21834. 	# Resume...
21835. 	
21836. 	# your stuff HERE (X)... post zone (file) file actions code.
21837. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
21838. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
21839. 		# (X)
21840. 		
21841. 		/* ??? Set window? */
21842. 	
21843. 	# ADD THE GAP
21844. 		
21845. # Vacate (good for diagnostics)
21846. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
21847. 
21848. # DoNotVacate - DO NOT Vacate (recommended)
21849. 
21850. # Vacate
21851. /* AddGap(GapUsedLoc) */
21852. 
21853. # DO Not Vacate
21854. AddGap(GapUsedLoc, DoNotVacate) 
21855. 	
21856. 	
21857. /* ---------------------------------------------------------- */
21858. # (failed) TEST for boolean logic.
21859. 
21860. /* It should work in the gap calculations for turning options */
21861. /* on and off but it will NOT work here. */
21862. 
21863. /* Boolean setting X or FlagX. */
21864. /* Where X will be on or off: */
21865. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
21866. /*      For ON:  (X  *  FlagAny) */
21867. 
21868. /* 1) Failed, zero gap overrode the previous one. */
21869. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
21870. /* AddGap(GapUsedTemp) */ 
21871. 
21872. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
21873. /* AddGap(GapUsedTemp, DoNotVacate) */ 
21874. 
21875. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
21876. 
21877. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
21878. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
21879. /* AddGap(GapUsedTemp) */ 
21880. 
21881. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
21882. /* AddGap(GapUsedTemp, DoNotVacate) */ 
21883. 
21884. /* ---------------------------------------------------------- */
21885. 
21886. # Vacate
21887. /* AddGap(GapUsed) */
21888. 
21889. # DO NOT Vacate (recommended)
21890. /* AddGap(GapUsed, DoNotVacate) */ 
21891. 	
21892. 
21893. 		
21894. # 
21895. FileEnd
21896. /* ---------------------------------------------------------- */
21897. 
21898. # your stuff HERE (X)... post zone (file) code.
21899. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
21900. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
21901. 	# (X)
21902. 
21903. SetVariable(FileStepDescription,"Zone finished, reporting.")
21904. # FILE STEP
21905. 
21906. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
21907. 
21908. /* add message and move to a new line. */
21909. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
21910. ")
21911. 
21912. /* display the line. (hopefully.) */
21913. # Zone Footer Set Statistics Window Text
21914. 
21915. SetStatisticsWindowText("----------------------------------------------------------
21916. Zones Processed: 
21917. ----------------------------------------------------------
21918. !ZoneListByLine!
21919. ----------------------------------------------------------
21920. Zone Processing Step:
21921. !ZoneStepByLine!    
21922. ----------------------------------------------------------
21923. Current Zone:
21924. !ZoneFooter!
21925. ----------------------------------------------------------
21926. Volume Statistics:
21927. !VolumeStatisticsDetail!
21928. ----------------------------------------------------------
21929. Zone Detailed Report:
21930. ----------------------------------------------------------
21931. !ZoneStatisticsDetail!
21932. ----------------------------------------------------------
21933. ")
21934. 
21935. 
21936. 
21937. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
21938. 
21939. # BANNER SET
21940. 
21941. # DATE TIME RUN ELP
21942. 
21943. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
21944. /* Xinclude "..\Display\BannerSet.MyDc"X */
21945. /* pause(1) */
21946. 
21947. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21948. 
21949. Title('!Heading!')
21950. /* pause(1) */
21951. 
21952. /* NOTE: Can't round or truncate to integer precision. */
21953. 
21954. pause(1)
21955. 
21956. # Zone When Finished
21957. 
21958. # BANNER SET
21959. 
21960. # DATE TIME RUN ELP
21961. 
21962. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
21963. /* Xinclude "..\Display\BannerSet.MyDc"X */
21964. /* pause(1) */
21965. 
21966. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
21967. 
21968. Title('!Heading!')
21969. /* pause(1) */
21970. 
21971. /* NOTE: Can't round or truncate to integer precision. */
21972. 
21973. AppendLogfile("!LogFileName!", "!Title!")
21974. 
21975. 
21976. 
21977. # Zone Statistics	
21978. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
21979. 
21980. # Footer:
21981. SetVariable(ZoneFooter, "----------------------------------------------------------
21982. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:21
21983. 
21984. Statistics Report:
21985. ------------------
21986.    Size:  
21987.    ------------------------
21988.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
21989.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
21990.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
21991. 
21992.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
21993.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
21994. 
21995.    Location:
21996.    ------------------------
21997.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
21998.              Files End: !ZoneEndCurrent!
21999.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
22000.       
22001.    Gap Settings:
22002.    ------------------------
22003.          Gap Requested: !ZoneGapSizePer!%
22004.       Volume Rounding: !ZoneVolRoundUpPer!%
22005.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
22006.                  
22007.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
22008.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
22009.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
22010.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
22011.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
22012.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
22013.      
22014.    Free Space after Zone:
22015.    ------------------------
22016.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
22017.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
22018.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
22019. 
22020. Directory and Files Select:
22021. ---------------------------
22022. !ZoneTypeSelectCurrent!               
22023. ---------------------------
22024. ----------------------------------------------------------
22025. ")
22026. 
22027. AppendLogfile("!LogFileName!", ".")
22028. AppendLogfile("!LogFileName!", "!ZoneFooter!")
22029. AppendLogfile("!LogFileName!", ".")
22030. 
22031. # Zone Footer Set Statistics Window Text
22032. 
22033. SetStatisticsWindowText("----------------------------------------------------------
22034. Zones Processed: 
22035. ----------------------------------------------------------
22036. !ZoneListByLine!
22037. ----------------------------------------------------------
22038. Zone Processing Step:
22039. !ZoneStepByLine!    
22040. ----------------------------------------------------------
22041. Current Zone:
22042. !ZoneFooter!
22043. ----------------------------------------------------------
22044. Volume Statistics:
22045. !VolumeStatisticsDetail!
22046. ----------------------------------------------------------
22047. Zone Detailed Report:
22048. ----------------------------------------------------------
22049. !ZoneStatisticsDetail!
22050. ----------------------------------------------------------
22051. ")
22052. 
22053. 
22054. 
22055. /* pause() */
22056. /* pause() */
22057. 
22058. 
22059. 
22060. 
22061. /* ---------------------------------------------------------- */
22062. 
22063. 
22064. /* ---------------------------------------------------------- */
22065. /* Zone ArchivesBu (All) Archives and Backups*/
22066. /* ---------------------------------------------------------- */
22067. /* Zone ArchivesBu (All) Archives and Backups*/
22068. 
22069. SetVariable(ZoneLabel, "!ZoneLabelArchivesBu!")
22070. SetVariable(ZoneDescription, "!ZoneDescriptionArchivesBu!")
22071. SetVariable(ZoneVolRoundUp, "!ZoneVolRoundUpArchivesBu!")
22072. SetVariable(ZoneGapSize, "!ZoneGapSizeArchivesBu!")
22073. SetVariable(ZoneTypeSelect,'# ArchivesBu start.
22074. all
22075. # ArchivesBu end.
22076. ')
22077. 
22078. /* Note: This should be all Blob archives and backups */
22079. /* The sorting the "z Archive", "z Bu" and "z Backup" directories */
22080. /* sort to the very end of the Volume. */
22081. 
22082. 	# Zone Do Header
22083. 
22084. # Zone When Started
22085. 
22086. SetVariable(FileStepDescription, "!FileStepDescriptionZoneStart!")
22087. # Display Set Zone
22088. 
22089. SetVariable(ZoneStepDescription,	"!ZoneLabel! - !ZoneDescription!")
22090. SetVariable(FileStepDescription,	"")
22091. 
22092. SetVariable(ZoneStepByLine, 			"Zone started.
22093. ")
22094. 
22095. # BANNER SET
22096. 
22097. # DATE TIME RUN ELP
22098. 
22099. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22100. /* Xinclude "..\Display\BannerSet.MyDc"X */
22101. /* pause(1) */
22102. 
22103. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22104. 
22105. Title('!Heading!')
22106. /* pause(1) */
22107. 
22108. /* NOTE: Can't round or truncate to integer precision. */
22109. 
22110. AppendLogfile("!LogFileName!", "!Title!")
22111. 
22112. 
22113. 
22114. pause(1)
22115. 
22116. 
22117. SetVariable(ZoneNoCurrent, ZoneNoCurrent + 1)
22118. SetVariable(ZoneNoAdjCurrent, ZoneNoCurrent + ZoneCurrentAjust)
22119. 
22120. SetVariable(ZoneStepNoCurrent, 0)
22121. 
22122. 
22123. # Zone Do Current Clear
22124. 
22125. SetVariable(ZoneTypeSelectCurrent, 		"")
22126. 
22127. SetVariable(ZoneBeginCurrent, 			0)
22128. SetVariable(ZoneBeginPerCurrent, 		0)
22129. SetVariable(ZoneEndCurrent, 			0)
22130. SetVariable(ZoneEndPerCurrent, 			0)
22131. 
22132. SetVariable(ZoneSizeCurrent,			0)
22133. SetVariable(ZoneSizePerCurrent,			0)
22134. 
22135. SetVariable(ZoneGapRequestedCurrent,	0)
22136. SetVariable(ZoneGapRoundedCurrent, 		0)
22137. SetVariable(ZoneGapAdjustedCurrent, 	0)
22138. SetVariable(ZoneGapAvailableCurrent, 	0)
22139. SetVariable(ZoneGapCurrent,				0)
22140. SetVariable(ZoneGapUsedCurrent, 		0)
22141. 
22142. SetVariable(ZoneGapActualCurrent, 		0)
22143. SetVariable(ZoneGapActualPerCurrent, 	0)
22144. 
22145. SetVariable(ZoneSizeActual, 			0)
22146. SetVariable(ZoneSizeActualCurrent,		0)
22147. 
22148. SetVariable(ZoneEndActual, 				0)
22149. SetVariable(ZoneEndActualCurrent,		0)			
22150. SetVariable(ZoneSizeActualPerCurrent, 	0)
22151.       
22152. SetVariable(ZoneFilesFolders,			0)
22153. SetVariable(ZoneFilesFoldersPer,		0) 
22154. 
22155. SetVariable(ZoneFragments,				0)
22156. SetVariable(ZoneFragmentsPer,			0) 
22157. 		
22158. SetVariable(ZoneEndActualCurrent, 		0)
22159. SetVariable(ZoneEndActualPerCurrent, 	0)
22160. 
22161. # Gap Calculation Methodology:
22162. 	# Requested
22163. 	SetVariable(GapRequested, 			0) 
22164. 	SetVariable(GapRequestedStd, 		0) 
22165. 	SetVariable(GapRequestedMft, 		0) 
22166. 	SetVariable(GapRequestedOs, 		0) 
22167. 	SetVariable(GapRequestedOriginal, 	0) 
22168. 	
22169. 	# Gap Adjustments
22170. 	SetVariable(GapRounded, 			0)
22171. 	# SetVariable(GapAdjusted, 			0)
22172. 	SetVariable(GapAvailable, 			0)
22173. 	SetVariable(GapCurrent, 			0)
22174. 	SetVariable(GapActual, 				0)
22175. 	SetVariable(GapUsed, 				0)
22176. 	
22177. 	# Gap Adjustments
22178. 	SetVariable(GapRoundedLoc, 			0)
22179. 	# SetVariable(GapAdjustedLoc, 		0)
22180. 	SetVariable(GapAvailableLoc, 		0)
22181. 	SetVariable(GapCurrentLoc, 			0)
22182. 	SetVariable(GapActualLoc,			0)
22183. 	SetVariable(GapUsedLoc,				0)
22184. 	
22185. 	# Space usage
22186. 	SetVariable(ZoneFreePerRequested, 	0)
22187. 	SetVariable(ZoneFreePerUsed, 		0)
22188. 
22189. # Gap Size & Rounding
22190. 	SetVariable(ZoneGapSizePer, 		0)
22191. 	SetVariable(ZoneVolRoundUpPer, 		0)
22192. 	
22193. 	# Free Space
22194. 	SetVariable(ZoneFreeUsedPer, 		0)
22195. 	SetVariable(ZoneFreeRequestedPer, 	0)
22196. 
22197. 
22198. SetVariable(ZoneTypeSelectCurrent, "!ZoneTypeSelect!")
22199. 
22200. # Footer:
22201. SetVariable(ZoneFooter, "----------------------------------------------------------
22202. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:21
22203. 
22204. Statistics Report:
22205. ------------------
22206.    Size:  
22207.    ------------------------
22208.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
22209.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
22210.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
22211. 
22212.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
22213.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
22214. 
22215.    Location:
22216.    ------------------------
22217.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
22218.              Files End: !ZoneEndCurrent!
22219.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
22220.       
22221.    Gap Settings:
22222.    ------------------------
22223.          Gap Requested: !ZoneGapSizePer!%
22224.       Volume Rounding: !ZoneVolRoundUpPer!%
22225.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
22226.                  
22227.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
22228.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
22229.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
22230.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
22231.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
22232.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
22233.      
22234.    Free Space after Zone:
22235.    ------------------------
22236.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
22237.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
22238.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
22239. 
22240. Directory and Files Select:
22241. ---------------------------
22242. !ZoneTypeSelectCurrent!               
22243. ---------------------------
22244. ----------------------------------------------------------
22245. ")
22246. 
22247. # BANNER SET
22248. 
22249. # DATE TIME RUN ELP
22250. 
22251. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22252. /* Xinclude "..\Display\BannerSet.MyDc"X */
22253. /* pause(1) */
22254. 
22255. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22256. 
22257. Title('!Heading!')
22258. /* pause(1) */
22259. 
22260. /* NOTE: Can't round or truncate to integer precision. */
22261. 
22262. AppendLogfile("!LogFileName!", "!Title!")
22263. 
22264. 
22265. 
22266. AppendLogfile("!LogFileName!", "Zone !ZoneNoCurrent! (!ZoneNoCurrent! + !ZoneCurrentAdjust!) of !ZoneCount!.")
22267. AppendLogfile("!LogFileName!", "Zone !ZoneCurrentDescription!:")
22268. AppendLogfile("!LogFileName!", "Time: 2021-11-09 08:17:21")
22269. 
22270. SetVariable(ZoneListByLine, "!ZoneListByLine!
22271. Zone: !ZoneNoCurrent! 2021-11-09 08:17:21 0:00:09 !ZoneLabel! !ZoneDescription!")
22272. 
22273. 
22274. /* Fixed Zone Position Handling */
22275. /* Literal number: */
22276. /* SetVariable(Temp, RoundUp( (ZoneBegin * ZoneFixedToggle * (0-1)), (ZoneLocationCurrent * ZoneFixedToggle) ) */
22277. /* Percentage of disk: */
22278. # XXX SetVariable(Temp, RoundUp(ZoneBegin * ZoneFixedToggle * (0-1), ZoneLocationCurrent * ZoneFixedToggle * VolumeSize))
22279. /* Gap */
22280. /* XXXXXXXXXXXXXXXXXXXXXXX MakeGap(Temp, DoNotVacate) // will move if toggle is on (1). xxx method Mft */
22281. 
22282. /* ---------------------------------------------------------- */
22283. SetVariable(FileStepDescription, "!FileStepDescriptionFileSelect!")
22284. # FILE STEP
22285. 
22286. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
22287. 
22288. /* add message and move to a new line. */
22289. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
22290. ")
22291. 
22292. /* display the line. (hopefully.) */
22293. # Zone Footer Set Statistics Window Text
22294. 
22295. SetStatisticsWindowText("----------------------------------------------------------
22296. Zones Processed: 
22297. ----------------------------------------------------------
22298. !ZoneListByLine!
22299. ----------------------------------------------------------
22300. Zone Processing Step:
22301. !ZoneStepByLine!    
22302. ----------------------------------------------------------
22303. Current Zone:
22304. !ZoneFooter!
22305. ----------------------------------------------------------
22306. Volume Statistics:
22307. !VolumeStatisticsDetail!
22308. ----------------------------------------------------------
22309. Zone Detailed Report:
22310. ----------------------------------------------------------
22311. !ZoneStatisticsDetail!
22312. ----------------------------------------------------------
22313. ")
22314. 
22315. 
22316. 
22317. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
22318. 
22319. # BANNER SET
22320. 
22321. # DATE TIME RUN ELP
22322. 
22323. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22324. /* Xinclude "..\Display\BannerSet.MyDc"X */
22325. /* pause(1) */
22326. 
22327. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22328. 
22329. Title('!Heading!')
22330. /* pause(1) */
22331. 
22332. /* NOTE: Can't round or truncate to integer precision. */
22333. 
22334. pause(1)
22335. 
22336. # your stuff HERE (X)... pre file select code.
22337. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePre!")
22338. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
22339. 	# (X)
22340. 
22341. FileSelect
22342. 
22343. 	# your stuff can't really go here (errors.)
22344. 	# maybe for some reason I don't know of...
22345. 	
22346. 	# Actions next...
22347. 	# ArchivesBu start.
22348. all
22349. # ArchivesBu end.
22350. 
22351. 		SortByName(Ascending SkipBlock(SkipBlockFiles,SkipBlockBytes))
22352. 
22353. 	# Zone Do Footer
22354. 
22355. /* ---------------------------------------------------------- */
22356. # File Select
22357. 	# Select Statments
22358. # File Actions 
22359. 	# Standard or OS File Actions.
22360. 	# Resume...
22361. 	
22362. 	# your stuff HERE (X)... post zone (file) file actions code.
22363. 		# SetVariable(FileStepDescription, "!FileStepDescriptionYourFileActionsPre!")
22364. 		# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
22365. 		# (X)
22366. 		
22367. 		/* ??? Set window? */
22368. 	
22369. 	# ADD THE GAP
22370. 		
22371. # Vacate (good for diagnostics)
22372. /* Xinclude "..\Gap\GapCommandDoVacate.MyDc"X */
22373. 
22374. # DoNotVacate - DO NOT Vacate (recommended)
22375. 
22376. # Vacate
22377. /* AddGap(GapUsedLoc) */
22378. 
22379. # DO Not Vacate
22380. AddGap(GapUsedLoc, DoNotVacate) 
22381. 	
22382. 	
22383. /* ---------------------------------------------------------- */
22384. # (failed) TEST for boolean logic.
22385. 
22386. /* It should work in the gap calculations for turning options */
22387. /* on and off but it will NOT work here. */
22388. 
22389. /* Boolean setting X or FlagX. */
22390. /* Where X will be on or off: */
22391. /*     For OFF:  (X  * (FlagAny - 1) * (0-1)) */
22392. /*      For ON:  (X  *  FlagAny) */
22393. 
22394. /* 1) Failed, zero gap overrode the previous one. */
22395. /* SetVariable(GapUsedTemp, GapUsed * ((FlagDoNotVacate - 1) * (0-1))) */
22396. /* AddGap(GapUsedTemp) */ 
22397. 
22398. /* SetVariable(GapUsedTemp, GapUsed * FlagDoNotVacate) */
22399. /* AddGap(GapUsedTemp, DoNotVacate) */ 
22400. 
22401. /* 2) Also Failed: AddGap(GapUsedTemp, FlagDoNotVacate) */ 
22402. 
22403. /* 3) Try? (no, won't work, you get zero for DoNotVacate GapUsed one way or the other.) */
22404. /* SetVariable(GapUsedTemp, GapUsed * FlagVacate) */
22405. /* AddGap(GapUsedTemp) */ 
22406. 
22407. /* SetVariable(GapUsedTemp, GapUsed * ((FlagVacate - 1) * (0-1))) */
22408. /* AddGap(GapUsedTemp, DoNotVacate) */ 
22409. 
22410. /* ---------------------------------------------------------- */
22411. 
22412. # Vacate
22413. /* AddGap(GapUsed) */
22414. 
22415. # DO NOT Vacate (recommended)
22416. /* AddGap(GapUsed, DoNotVacate) */ 
22417. 	
22418. 
22419. 		
22420. # 
22421. FileEnd
22422. /* ---------------------------------------------------------- */
22423. 
22424. # your stuff HERE (X)... post zone (file) code.
22425. 	# SetVariable(FileStepDescription, "!FileStepDescriptionYourZonePost!")
22426. 	# Xinclude "..\Display\DisplaySetFileStep.MyDc"X
22427. 	# (X)
22428. 
22429. SetVariable(FileStepDescription,"Zone finished, reporting.")
22430. # FILE STEP
22431. 
22432. SetVariable(ZoneStepNoCurrent, ZoneStepNoCurrent + 1)
22433. 
22434. /* add message and move to a new line. */
22435. SetVariable(ZoneStepByLine, 	"!ZoneStepByLine!!ZoneStepNoCurrent! !FileStepDescription!
22436. ")
22437. 
22438. /* display the line. (hopefully.) */
22439. # Zone Footer Set Statistics Window Text
22440. 
22441. SetStatisticsWindowText("----------------------------------------------------------
22442. Zones Processed: 
22443. ----------------------------------------------------------
22444. !ZoneListByLine!
22445. ----------------------------------------------------------
22446. Zone Processing Step:
22447. !ZoneStepByLine!    
22448. ----------------------------------------------------------
22449. Current Zone:
22450. !ZoneFooter!
22451. ----------------------------------------------------------
22452. Volume Statistics:
22453. !VolumeStatisticsDetail!
22454. ----------------------------------------------------------
22455. Zone Detailed Report:
22456. ----------------------------------------------------------
22457. !ZoneStatisticsDetail!
22458. ----------------------------------------------------------
22459. ")
22460. 
22461. 
22462. 
22463. /* SetVariable(FileStepDescription, "!FileStepDescription!") */
22464. 
22465. # BANNER SET
22466. 
22467. # DATE TIME RUN ELP
22468. 
22469. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22470. /* Xinclude "..\Display\BannerSet.MyDc"X */
22471. /* pause(1) */
22472. 
22473. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22474. 
22475. Title('!Heading!')
22476. /* pause(1) */
22477. 
22478. /* NOTE: Can't round or truncate to integer precision. */
22479. 
22480. pause(1)
22481. 
22482. # Zone When Finished
22483. 
22484. # BANNER SET
22485. 
22486. # DATE TIME RUN ELP
22487. 
22488. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22489. /* Xinclude "..\Display\BannerSet.MyDc"X */
22490. /* pause(1) */
22491. 
22492. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22493. 
22494. Title('!Heading!')
22495. /* pause(1) */
22496. 
22497. /* NOTE: Can't round or truncate to integer precision. */
22498. 
22499. AppendLogfile("!LogFileName!", "!Title!")
22500. 
22501. 
22502. 
22503. # Zone Statistics	
22504. /* Xinclude "..\ZoneDoStatistics.MyDc"X */
22505. 
22506. # Footer:
22507. SetVariable(ZoneFooter, "----------------------------------------------------------
22508. Zone: !ZoneNoCurrent! !ZoneLabel! !ZoneDescription! 2021-11-09 08:17:21
22509. 
22510. Statistics Report:
22511. ------------------
22512.    Size:  
22513.    ------------------------
22514.                  Files: !ZoneSizeCurrent! (!ZoneSizePerCurrent!%)
22515.                   Gap: !ZoneGapActualCurrent! (!ZoneGapActualPerCurrent!%)
22516.                 Total: !ZoneSizeActualCurrent! (!ZoneEndActualPerCurrent!%)
22517. 
22518.         Files/folders: !ZoneFilesFolders! (!ZoneFilesFoldersPer!%) 
22519.             Fragments: !ZoneFragments! (!ZoneFragmentsPer!%) 
22520. 
22521.    Location:
22522.    ------------------------
22523.            Zone Start: !ZoneBeginCurrent! (!ZoneBeginPerCurrent!%)
22524.              Files End: !ZoneEndCurrent!
22525.              Zone End: !ZoneEndActualCurrent! (!ZoneEndActualPerCurrent!%)
22526.       
22527.    Gap Settings:
22528.    ------------------------
22529.          Gap Requested: !ZoneGapSizePer!%
22530.       Volume Rounding: !ZoneVolRoundUpPer!%
22531.            Actual Gap: !ZoneGapActualPerCurrent!% (!ZoneGapActualCurrent!)
22532.                  
22533.                The desired min gap size. (GapRequested): !ZoneGapRequestedCurrent!  !ZoneGapRequestedLocCurrent!
22534.               Must be half the zone size. (GapAdjusted): !ZoneGapAdjustedCurrent!  !ZoneGapAdjustedLocCurrent!
22535.                Align to the volume evenly. (GapRounded): !ZoneGapRoundedCurrent! !ZoneGapRoundedLocCurrent!
22536.           The remaining space available. (GapAvailable): !ZoneGapAvailableCurrent! !ZoneGapAvailableLocCurrent!
22537.       The lower of adjusted and available. (GapCurrent): !ZoneGapCurrent! !ZoneGapLocCurrent!
22538.     (GapCurrent) after any code you inserted. (GapUsed): !ZoneGapUsedCurrent! !ZoneGapUsedLocCurrent!
22539.      
22540.    Free Space after Zone:
22541.    ------------------------
22542.               Total Requested: !VolumeFreeRequested! (!VolumeFreeRequestedPer!%)
22543.                    Total Used: !VolumeFreeUsed! (!VolumeFreeUsedPer!%)
22544.          Volume Used by Zones: !VolumeZoneUsed! (!VolumeZoneUsedPer!%)
22545. 
22546. Directory and Files Select:
22547. ---------------------------
22548. !ZoneTypeSelectCurrent!               
22549. ---------------------------
22550. ----------------------------------------------------------
22551. ")
22552. 
22553. AppendLogfile("!LogFileName!", ".")
22554. AppendLogfile("!LogFileName!", "!ZoneFooter!")
22555. AppendLogfile("!LogFileName!", ".")
22556. 
22557. # Zone Footer Set Statistics Window Text
22558. 
22559. SetStatisticsWindowText("----------------------------------------------------------
22560. Zones Processed: 
22561. ----------------------------------------------------------
22562. !ZoneListByLine!
22563. ----------------------------------------------------------
22564. Zone Processing Step:
22565. !ZoneStepByLine!    
22566. ----------------------------------------------------------
22567. Current Zone:
22568. !ZoneFooter!
22569. ----------------------------------------------------------
22570. Volume Statistics:
22571. !VolumeStatisticsDetail!
22572. ----------------------------------------------------------
22573. Zone Detailed Report:
22574. ----------------------------------------------------------
22575. !ZoneStatisticsDetail!
22576. ----------------------------------------------------------
22577. ")
22578. 
22579. 
22580. 
22581. /* pause() */
22582. /* pause() */
22583. 
22584. 
22585. 
22586. 
22587. /* ---------------------------------------------------------- */
22588. 
22589. 
22590. /* ---------------------------------------------------------- */
22591. /* Volume End */
22592. # Volume When Finished
22593. 
22594. /* Write the "after" statistics to the logfile. */
22595. 
22596. # BANNER SET
22597. 
22598. # DATE TIME RUN ELP
22599. 
22600. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22601. /* Xinclude "..\Display\BannerSet.MyDc"X */
22602. /* pause(1) */
22603. 
22604. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22605. 
22606. Title('!Heading!')
22607. /* pause(1) */
22608. 
22609. /* NOTE: Can't round or truncate to integer precision. */
22610. 
22611. AppendLogfile("!LogFileName!", "!Title!")
22612. 
22613. 
22614. 
22615. # Set Volume summary stats:
22616. 
22617. # Cluster, Sector, Block adjust for display.
22618. # Bytes per cluster is volume specific.
22619. 
22620. SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
22621. 
22622. SetVariable(VolumeSizeTemp, VolumeSize / DisplayUnitDivisorCurrent)
22623. SetVariable(VolumeUsedTemp, VolumeUsed / DisplayUnitDivisorCurrent)
22624. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
22625. 
22626. SetVariable(VolumeUsedTotalTemp, VolumeFree / DisplayUnitDivisorCurrent)
22627. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
22628. 
22629. # Set the display text:
22630. SetVariable(VolumeStatisticsSummary,"----------------------------------------------------------
22631. SUMMARY: !VolumeLabel! !VolumeDescription!
22632.   
22633.           Volume Size:       !VolumeSize! (!VolumeSizeTemp!)
22634.           Volume Used:       !VolumeUsed! (!VolumeUsedTemp!)
22635.           Volume Free:       !VolumeFree!, (!VolumeFreeTemp!)
22636.          
22637.      Volume Used Calc:       !VolumeUsedTotal! (!VolumeUsedTotalTemp!)
22638.       Volume Free Adj:       !VolumeFreeAdj!
22639.     Bytes per cluster:       !BytesPerCluster! bytes
22640. 
22641.    Unfragmented Items:       !FILES200N!
22642.      Fragmented Items:       !FILES210N!
22643. 
22644.     Unfragmented Data:       !FILES202N! bytes
22645.       Fragmented Data:       !FILES212N! bytes
22646. 
22647.              All Gaps:       !GAP00N!
22648.              All gaps:       !GAP10N! bytes
22649.           Average gap:       !GAP13N! bytes
22650.            Median gap:       !GAP14N! bytes
22651.           Biggest gap:       !GAP15N! bytes
22652. ----------------------------------------------------------
22653. ") 
22654. 
22655. 
22656. SetVariable(VolumeFooter, "!VolumeStatisticsSummary!")
22657. 
22658. 
22659. AppendLogfile("!LogFileName!", ".")
22660. AppendLogfile("!LogFileName!", "      Volume Size: !VolumeSize!")
22661. AppendLogfile("!LogFileName!", "      Volume Used: !VolumeUsed!")
22662. AppendLogfile("!LogFileName!", "Volume Used Total: !VolumeUsedTotal!")
22663. AppendLogfile("!LogFileName!", "      Volume Free: !VolumeFree!")
22664. AppendLogfile("!LogFileName!", "  Volume Free Adj: !VolumeFreeAdj!")
22665. AppendLogfile("!LogFileName!", ".")
22666. AppendLogfile("!LogFileName!", "MFT Zone: !MftZone! Location: !MftLocation! Gap: !MftGap!")
22667. AppendLogfile("!LogFileName!", ".")
22668. 
22669. 
22670. /* Write/display stats: */
22671. 
22672. # Log:  
22673. 
22674. # Set Volume Detailed Statistics:
22675. 
22676. # Set Volume summary stats:
22677. 
22678. # Cluster, Sector, Block adjust for display.
22679. # Bytes per cluster is volume specific.
22680. 
22681. SetVariable(DisplayUnitDivisorCurrent,   DisplayUnitDivisor * BytesPerCluster)	
22682. 
22683. SetVariable(VolumeSizeTemp, VolumeSize / DisplayUnitDivisorCurrent)
22684. SetVariable(VolumeUsedTemp, VolumeUsed / DisplayUnitDivisorCurrent)
22685. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
22686. 
22687. SetVariable(VolumeUsedTotalTemp, VolumeFree / DisplayUnitDivisorCurrent)
22688. SetVariable(VolumeFreeTemp, VolumeFree / DisplayUnitDivisorCurrent)
22689. 
22690. # Set the display text:
22691. SetVariable(VolumeStatisticsSummary,"----------------------------------------------------------
22692. SUMMARY: !VolumeLabel! !VolumeDescription!
22693.   
22694.           Volume Size:       !VolumeSize! (!VolumeSizeTemp!)
22695.           Volume Used:       !VolumeUsed! (!VolumeUsedTemp!)
22696.           Volume Free:       !VolumeFree!, (!VolumeFreeTemp!)
22697.          
22698.      Volume Used Calc:       !VolumeUsedTotal! (!VolumeUsedTotalTemp!)
22699.       Volume Free Adj:       !VolumeFreeAdj!
22700.     Bytes per cluster:       !BytesPerCluster! bytes
22701. 
22702.    Unfragmented Items:       !FILES200N!
22703.      Fragmented Items:       !FILES210N!
22704. 
22705.     Unfragmented Data:       !FILES202N! bytes
22706.       Fragmented Data:       !FILES212N! bytes
22707. 
22708.              All Gaps:       !GAP00N!
22709.              All gaps:       !GAP10N! bytes
22710.           Average gap:       !GAP13N! bytes
22711.            Median gap:       !GAP14N! bytes
22712.           Biggest gap:       !GAP15N! bytes
22713. ----------------------------------------------------------
22714. ") 
22715. 
22716. 
22717. 
22718. SetVariable(VolumeStatisticsDetail,"----------------------------------------------------------
22719. VOLUME: !VolumeLabel! !VolumeDescription!
22720. ----------------------------------------------------------
22721. !VolumeStatisticsSummary!
22722. ----------------------------------------------------------
22723. DETAILS: !VolumeLabel! !VolumeDescription!
22724. ----------------------------------------------------------
22725. 
22726. SUMMARY:
22727. 
22728. Volume label/name:          !VolumeLabel!
22729. Volume mountpoint:          !MountPoint!
22730. Volume name:                !VolumeName!
22731. Volume type:                !VolumeType!
22732. 
22733. Total disk space:           !VolumeSize! bytes
22734.                             !VolumeSizeG! gigabytes
22735. 
22736. Bytes per cluster:          !BytesPerCluster! bytes
22737. Average end-begin distance: !AverageBeginEndDistance! clusters
22738.                             !AverageBeginEndDistanceP!% of volume size
22739. 
22740. ----------------------------------------------------------
22741. FRAGMENTS:
22742. 
22743. Unfragmented Items: !FILES200N!
22744.   Fragmented Items: !FILES210N!
22745.  Unfragmented Data: !FILES202N! bytes
22746.    Fragmented Data: !FILES212N! bytes
22747. Gaps:
22748.           All Gaps: !GAP00N!
22749.           All gaps: !GAP10N! bytes
22750.        Average gap: !GAP13N! bytes
22751.         Median gap: !GAP14N! bytes
22752.        Biggest gap: !GAP15N! bytes
22753. 
22754. ----------------------------------------------------------
22755. GAPS:
22756. 
22757.    ----------------------------------------------------------
22758.    Counts:
22759.                        Count      Percentage of all
22760.                 ----------------- -----------------
22761.    Small gaps   !GAP01N! !GAP01P!%
22762.    Big gaps     !GAP02N! !GAP02P!%
22763.                 ----------------- -----------------
22764.    All gaps     !GAP00N! !GAP00P!
22765. 
22766.    ----------------------------------------------------------
22767.    By size:
22768.                       Bytes          Gigabytes      Percentage of all
22769.                 ----------------- ----------------- -----------------
22770.    Small gaps   !GAP11N! !GAP11G! !GAP11P!%
22771.    Big gaps     !GAP12N! !GAP12G! !GAP12P!%
22772.                 ----------------- ----------------- -----------------
22773.    All gaps     !GAP10N! !GAP10G! !GAP10P!%
22774. 
22775.    Average gap  !GAP13N! !GAP13G! !GAP13P!%
22776.    Median gap   !GAP14N! !GAP14G! !GAP14P!%
22777.    Biggest gap  !GAP15N! !GAP15G! !GAP15P!%
22778.    ----------------------------------------------------------
22779. 
22780. ----------------------------------------------------------
22781. FILE STATISTICS:
22782. ----------------------------------------------------------
22783. 
22784. ----------------------------------------------------------
22785. ITEM COUNT:
22786. ----------------------------------------------------------
22787. Number of files and folders:
22788. 
22789.               Unfragmented       Fragmented            All
22790.    ------- ----------------- ----------------- -----------------
22791.    Files   !FILES000N! !FILES010N! !FILES020N!
22792.    Folders !FILES100N! !FILES110N! !FILES120N!
22793.    ------- ----------------- ----------------- -----------------
22794.    All     !FILES200N! !FILES210N! !FILES220N!
22795. 
22796. ----------------------------------------------------------
22797. Percentage of total:
22798. 
22799.               Unfragmented       Fragmented            All
22800.    ------- ----------------- ----------------- -----------------
22801.    Files   !FILES000P!%!FILES010P!%!FILES020P!%
22802.    Folders !FILES100P!%!FILES110P!%!FILES120P!%
22803.    ------- ----------------- ----------------- -----------------
22804.    All     !FILES200P!%!FILES210P!%!FILES220P!%
22805. 
22806. ----------------------------------------------------------
22807. OCCUPIED SIZE on disk:
22808. ----------------------------------------------------------
22809. Bytes:
22810.               Unfragmented       Fragmented            All
22811.    ------- ----------------- ----------------- -----------------
22812.    Files   !FILES002N! !FILES012N! !FILES022N!
22813.    Folders !FILES102N! !FILES112N! !FILES122N!
22814.    ------- ----------------- ----------------- -----------------
22815.    All     !FILES202N! !FILES212N! !FILES222N!
22816. 
22817. ----------------------------------------------------------
22818. Gigabytes:
22819.               Unfragmented       Fragmented            All
22820.    ------- ----------------- ----------------- -----------------
22821.    Files   !FILES002G! !FILES012G! !FILES022G!
22822.    Folders !FILES102G! !FILES112G! !FILES122G!
22823.    ------- ----------------- ----------------- -----------------
22824.    All     !FILES202G! !FILES212G! !FILES222G!
22825. 
22826. ----------------------------------------------------------
22827. Percentage:
22828.               Unfragmented       Fragmented            All
22829.    ------- ----------------- ----------------- -----------------
22830.    Files   !FILES002P!%!FILES012P!%!FILES022P!%
22831.    Folders !FILES102P!%!FILES112P!%!FILES122P!%
22832.    ------- ----------------- ----------------- -----------------
22833.    All     !FILES202P!%!FILES212P!%!FILES222P!%
22834. 
22835. ----------------------------------------------------------
22836. USED SIZE:
22837. ----------------------------------------------------------
22838. Bytes:
22839.               Unfragmented       Fragmented            All
22840.    ------- ----------------- ----------------- -----------------
22841.    Files   !FILES001N! !FILES011N! !FILES021N!
22842.    Folders !FILES101N! !FILES111N! !FILES121N!
22843.    ------- ----------------- ----------------- -----------------
22844.    All     !FILES201N! !FILES211N! !FILES221N!
22845. 
22846. ----------------------------------------------------------
22847. Gigabytes:
22848.               Unfragmented       Fragmented            All
22849.    ------- ----------------- ----------------- -----------------
22850.    Files   !FILES001G! !FILES011G! !FILES021G!
22851.    Folders !FILES101G! !FILES111G! !FILES121G!
22852.    ------- ----------------- ----------------- -----------------
22853.    All     !FILES201G! !FILES211G! !FILES221G!
22854. 
22855. ----------------------------------------------------------
22856. Percentage:
22857.               Unfragmented       Fragmented            All
22858.    ------- ----------------- ----------------- -----------------
22859.    Files   !FILES001P!%!FILES011P!%!FILES021P!%
22860.    Folders !FILES101P!%!FILES111P!%!FILES121P!%
22861.    ------- ----------------- ----------------- -----------------
22862.    All     !FILES201P!%!FILES211P!%!FILES221P!%
22863. 
22864. ----------------------------------------------------------
22865. Volume Detailed Statistics end.
22866. ----------------------------------------------------------
22867. ") 
22868. 
22869. 
22870. AppendLogfile("!LogFileName!", ".")
22871. AppendLogfile("!LogFileName!", "!VolumeStatisticsDetail!")
22872. AppendLogfile("!LogFileName!", ".")
22873. AppendLogfile("!LogFileName!", "Volume End.")	
22874. 
22875. # SetStatisticsWindowText("!VolumeStatisticsDetail!")
22876. 
22877. /* pause() */
22878. /* pause() */
22879. 
22880.   
22881. 
22882. VolumeEnd
22883. 
22884. /* ---------------------------------------------------------- */
22885. 
22886. AppendLogfile("!LogFileName!",".")
22887. SetVariable(FileStepDescription,"!Description! Complex Volume end: 2021-11-09 08:17:15.")
22888. # BANNER SET
22889. 
22890. # DATE TIME RUN ELP
22891. 
22892. SetVariable(DateTimeRunDescription,		"2021-11-09 08:17:21 0:00:09")
22893. /* Xinclude "..\Display\BannerSet.MyDc"X */
22894. /* pause(1) */
22895. 
22896. SetVariable(Heading, 'Vol: !VolumeStepDescription! ||Zone: !ZoneStepDescription! ||Step: !FileStepDescription! ||!SeverStepDescription! - !RunStepDescription! on !DateTimeRunDescription!')
22897. 
22898. Title('!Heading!')
22899. /* pause(1) */
22900. 
22901. /* NOTE: Can't round or truncate to integer precision. */
22902. 
22903. AppendLogfile("!LogFileName!", "!Title!")
22904. 
22905. 
22906. 
22907. AppendLogfile("!LogFileName!",".")
22908. 
22909. /* ---------------------------------------------------------- */
22910. # End. ;-) (Return to caller lovely nubes, only MyD's get executed.)
22911. 
22912. 
